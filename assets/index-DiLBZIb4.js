var UN=Object.defineProperty;var $N=(t,e,n)=>e in t?UN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xh=(t,e,n)=>$N(t,typeof e!="symbol"?e+"":e,n);function z1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U1={exports:{}},Vf={},$1={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=Symbol.for("react.element"),WN=Symbol.for("react.portal"),HN=Symbol.for("react.fragment"),VN=Symbol.for("react.strict_mode"),qN=Symbol.for("react.profiler"),KN=Symbol.for("react.provider"),XN=Symbol.for("react.context"),GN=Symbol.for("react.forward_ref"),YN=Symbol.for("react.suspense"),ZN=Symbol.for("react.memo"),QN=Symbol.for("react.lazy"),tx=Symbol.iterator;function JN(t){return t===null||typeof t!="object"?null:(t=tx&&t[tx]||t["@@iterator"],typeof t=="function"?t:null)}var W1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H1=Object.assign,V1={};function Da(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||W1}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q1(){}q1.prototype=Da.prototype;function b0(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||W1}var S0=b0.prototype=new q1;S0.constructor=b0;H1(S0,Da.prototype);S0.isPureReactComponent=!0;var nx=Array.isArray,K1=Object.prototype.hasOwnProperty,k0={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function G1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)K1.call(e,r)&&!X1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ru,type:t,key:s,ref:o,props:i,_owner:k0.current}}function eT(t,e){return{$$typeof:Ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ru}function tT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rx=/\/+/g;function Gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tT(""+t.key):e.toString(36)}function Kc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ru:case WN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gh(o,0):r,nx(i)?(n="",t!=null&&(n=t.replace(rx,"$&/")+"/"),Kc(i,e,n,"",function(u){return u})):i!=null&&(E0(i)&&(i=eT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gh(s,a);o+=Kc(s,e,n,l,i)}else if(l=JN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gh(s,a++),o+=Kc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sc(t,e,n){if(t==null)return t;var r=[],i=0;return Kc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qn={current:null},Xc={transition:null},rT={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:Xc,ReactCurrentOwner:k0};function Y1(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:sc,forEach:function(t,e,n){sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sc(t,function(){e++}),e},toArray:function(t){return sc(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};gt.Component=Da;gt.Fragment=HN;gt.Profiler=qN;gt.PureComponent=b0;gt.StrictMode=VN;gt.Suspense=YN;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT;gt.act=Y1;gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=k0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)K1.call(e,l)&&!X1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ru,type:t.type,key:i,ref:s,props:r,_owner:o}};gt.createContext=function(t){return t={$$typeof:XN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KN,_context:t},t.Consumer=t};gt.createElement=G1;gt.createFactory=function(t){var e=G1.bind(null,t);return e.type=t,e};gt.createRef=function(){return{current:null}};gt.forwardRef=function(t){return{$$typeof:GN,render:t}};gt.isValidElement=E0;gt.lazy=function(t){return{$$typeof:QN,_payload:{_status:-1,_result:t},_init:nT}};gt.memo=function(t,e){return{$$typeof:ZN,type:t,compare:e===void 0?null:e}};gt.startTransition=function(t){var e=Xc.transition;Xc.transition={};try{t()}finally{Xc.transition=e}};gt.unstable_act=Y1;gt.useCallback=function(t,e){return qn.current.useCallback(t,e)};gt.useContext=function(t){return qn.current.useContext(t)};gt.useDebugValue=function(){};gt.useDeferredValue=function(t){return qn.current.useDeferredValue(t)};gt.useEffect=function(t,e){return qn.current.useEffect(t,e)};gt.useId=function(){return qn.current.useId()};gt.useImperativeHandle=function(t,e,n){return qn.current.useImperativeHandle(t,e,n)};gt.useInsertionEffect=function(t,e){return qn.current.useInsertionEffect(t,e)};gt.useLayoutEffect=function(t,e){return qn.current.useLayoutEffect(t,e)};gt.useMemo=function(t,e){return qn.current.useMemo(t,e)};gt.useReducer=function(t,e,n){return qn.current.useReducer(t,e,n)};gt.useRef=function(t){return qn.current.useRef(t)};gt.useState=function(t){return qn.current.useState(t)};gt.useSyncExternalStore=function(t,e,n){return qn.current.useSyncExternalStore(t,e,n)};gt.useTransition=function(){return qn.current.useTransition()};gt.version="18.3.1";$1.exports=gt;var A=$1.exports;const kt=Jr(A),iT=z1({__proto__:null,default:kt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT=A,oT=Symbol.for("react.element"),aT=Symbol.for("react.fragment"),lT=Object.prototype.hasOwnProperty,uT=sT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cT={key:!0,ref:!0,__self:!0,__source:!0};function Z1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lT.call(e,r)&&!cT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oT,type:t,key:s,ref:o,props:i,_owner:uT.current}}Vf.Fragment=aT;Vf.jsx=Z1;Vf.jsxs=Z1;U1.exports=Vf;var y=U1.exports,Q1={exports:{}},xr={},J1={exports:{}},eS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,te){var L=$.length;$.push(te);e:for(;0<L;){var ce=L-1>>>1,oe=$[ce];if(0<i(oe,te))$[ce]=te,$[L]=oe,L=ce;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var te=$[0],L=$.pop();if(L!==te){$[0]=L;e:for(var ce=0,oe=$.length,F=oe>>>1;ce<F;){var xe=2*(ce+1)-1,Fe=$[xe],Ne=xe+1,He=$[Ne];if(0>i(Fe,L))Ne<oe&&0>i(He,Fe)?($[ce]=He,$[Ne]=L,ce=Ne):($[ce]=Fe,$[xe]=L,ce=xe);else if(Ne<oe&&0>i(He,L))$[ce]=He,$[Ne]=L,ce=Ne;else break e}}return te}function i($,te){var L=$.sortIndex-te.sortIndex;return L!==0?L:$.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,c=null,h=3,f=!1,v=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var te=n(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=$)r(u),te.sortIndex=te.expirationTime,e(l,te);else break;te=n(u)}}function _($){if(x=!1,w($),!v)if(n(l)!==null)v=!0,K(E);else{var te=n(u);te!==null&&G(_,te.startTime-$)}}function E($,te){v=!1,x&&(x=!1,p(D),D=-1),f=!0;var L=h;try{for(w(te),c=n(l);c!==null&&(!(c.expirationTime>te)||$&&!I());){var ce=c.callback;if(typeof ce=="function"){c.callback=null,h=c.priorityLevel;var oe=ce(c.expirationTime<=te);te=t.unstable_now(),typeof oe=="function"?c.callback=oe:c===n(l)&&r(l),w(te)}else r(l);c=n(l)}if(c!==null)var F=!0;else{var xe=n(u);xe!==null&&G(_,xe.startTime-te),F=!1}return F}finally{c=null,h=L,f=!1}}var S=!1,b=null,D=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function M(){if(b!==null){var $=t.unstable_now();C=$;var te=!0;try{te=b(!0,$)}finally{te?H():(S=!1,b=null)}}else S=!1}var H;if(typeof m=="function")H=function(){m(M)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,W=q.port2;q.port1.onmessage=M,H=function(){W.postMessage(null)}}else H=function(){g(M,0)};function K($){b=$,S||(S=!0,H())}function G($,te){D=g(function(){$(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,K(E))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var te=3;break;default:te=h}var L=h;h=te;try{return $()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=h;h=$;try{return te()}finally{h=L}},t.unstable_scheduleCallback=function($,te,L){var ce=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ce+L:ce):L=ce,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=L+oe,$={id:d++,callback:te,priorityLevel:$,startTime:L,expirationTime:oe,sortIndex:-1},L>ce?($.sortIndex=L,e(u,$),n(l)===null&&$===n(u)&&(x?(p(D),D=-1):x=!0,G(_,L-ce))):($.sortIndex=oe,e(l,$),v||f||(v=!0,K(E))),$},t.unstable_shouldYield=I,t.unstable_wrapCallback=function($){var te=h;return function(){var L=h;h=te;try{return $.apply(this,arguments)}finally{h=L}}}})(eS);J1.exports=eS;var dT=J1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=A,yr=dT;function be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tS=new Set,ql={};function mo(t,e){fa(t,e),fa(t+"Capture",e)}function fa(t,e){for(ql[t]=e,t=0;t<e.length;t++)tS.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bm=Object.prototype.hasOwnProperty,hT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ix={},sx={};function pT(t){return bm.call(sx,t)?!0:bm.call(ix,t)?!1:hT.test(t)?sx[t]=!0:(ix[t]=!0,!1)}function mT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gT(t,e,n,r){if(e===null||typeof e>"u"||mT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rn[t]=new Kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rn[e]=new Kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rn[t]=new Kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rn[t]=new Kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rn[t]=new Kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rn[t]=new Kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rn[t]=new Kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rn[t]=new Kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rn[t]=new Kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var _0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_0,C0);Rn[e]=new Kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_0,C0);Rn[e]=new Kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_0,C0);Rn[e]=new Kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Rn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A0(t,e,n,r){var i=Rn.hasOwnProperty(e)?Rn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gT(e,n,i,r)&&(n=null),r||i===null?pT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ki=fT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),nS=Symbol.for("react.provider"),rS=Symbol.for("react.context"),N0=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),T0=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),iS=Symbol.for("react.offscreen"),ox=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=ox&&t[ox]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Yh;function ol(t){if(Yh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yh=e&&e[1]||""}return`
`+Yh+t}var Zh=!1;function Qh(t,e){if(!t||Zh)return"";Zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ol(t):""}function vT(t){switch(t.tag){case 5:return ol(t.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return t=Qh(t.type,!1),t;case 11:return t=Qh(t.type.render,!1),t;case 1:return t=Qh(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wo:return"Fragment";case $o:return"Portal";case Sm:return"Profiler";case D0:return"StrictMode";case km:return"Suspense";case Em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rS:return(t.displayName||"Context")+".Consumer";case nS:return(t._context.displayName||"Context")+".Provider";case N0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T0:return e=t.displayName||null,e!==null?e:_m(t.type)||"Memo";case os:e=t._payload,t=t._init;try{return _m(t(e))}catch{}}return null}function yT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xT(t){var e=sS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ac(t){t._valueTracker||(t._valueTracker=xT(t))}function oS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cm(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ax(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aS(t,e){e=e.checked,e!=null&&A0(t,"checked",e,!1)}function Am(t,e){aS(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dm(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dm(t,e,n){(e!=="number"||Cd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var al=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ux(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(be(92));if(al(n)){if(1<n.length)throw Error(be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function lS(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lc,cS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lc=lc||document.createElement("div"),lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wT=["Webkit","ms","Moz","O"];Object.keys(bl).forEach(function(t){wT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bl[e]=bl[t]})});function dS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bl.hasOwnProperty(t)&&bl[t]?(""+e).trim():e+"px"}function fS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bT=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,e){if(e){if(bT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function Im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=null;function R0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pm=null,ra=null,ia=null;function dx(t){if(t=Pu(t)){if(typeof Pm!="function")throw Error(be(280));var e=t.stateNode;e&&(e=Yf(e),Pm(t.stateNode,t.type,e))}}function hS(t){ra?ia?ia.push(t):ia=[t]:ra=t}function pS(){if(ra){var t=ra,e=ia;if(ia=ra=null,dx(t),e)for(t=0;t<e.length;t++)dx(e[t])}}function mS(t,e){return t(e)}function gS(){}var Jh=!1;function vS(t,e,n){if(Jh)return t(e,n);Jh=!0;try{return mS(t,e,n)}finally{Jh=!1,(ra!==null||ia!==null)&&(gS(),pS())}}function Xl(t,e){var n=t.stateNode;if(n===null)return null;var r=Yf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(be(231,e,typeof n));return n}var Om=!1;if(ji)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){Om=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{Om=!1}function ST(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Sl=!1,Ad=null,Dd=!1,Mm=null,kT={onError:function(t){Sl=!0,Ad=t}};function ET(t,e,n,r,i,s,o,a,l){Sl=!1,Ad=null,ST.apply(kT,arguments)}function _T(t,e,n,r,i,s,o,a,l){if(ET.apply(this,arguments),Sl){if(Sl){var u=Ad;Sl=!1,Ad=null}else throw Error(be(198));Dd||(Dd=!0,Mm=u)}}function go(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(go(t)!==t)throw Error(be(188))}function CT(t){var e=t.alternate;if(!e){if(e=go(t),e===null)throw Error(be(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fx(i),t;if(s===r)return fx(i),e;s=s.sibling}throw Error(be(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?t:e}function xS(t){return t=CT(t),t!==null?wS(t):null}function wS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wS(t);if(e!==null)return e;t=t.sibling}return null}var bS=yr.unstable_scheduleCallback,hx=yr.unstable_cancelCallback,AT=yr.unstable_shouldYield,DT=yr.unstable_requestPaint,on=yr.unstable_now,NT=yr.unstable_getCurrentPriorityLevel,I0=yr.unstable_ImmediatePriority,SS=yr.unstable_UserBlockingPriority,Nd=yr.unstable_NormalPriority,TT=yr.unstable_LowPriority,kS=yr.unstable_IdlePriority,qf=null,fi=null;function RT(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(qf,t,void 0,(t.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:PT,IT=Math.log,LT=Math.LN2;function PT(t){return t>>>=0,t===0?32:31-(IT(t)/LT|0)|0}var uc=64,cc=4194304;function ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Td(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ll(a):(s&=o,s!==0&&(r=ll(s)))}else o=n&~i,o!==0?r=ll(o):s!==0&&(r=ll(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qr(e),i=1<<n,r|=t[n],e&=~i;return r}function OT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=OT(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ES(){var t=uc;return uc<<=1,!(uc&4194240)&&(uc=64),t}function ep(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qr(e),t[e]=n}function jT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function L0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Mt=0;function _S(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CS,P0,AS,DS,NS,Fm=!1,dc=[],gs=null,vs=null,ys=null,Gl=new Map,Yl=new Map,us=[],FT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function px(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(e.pointerId)}}function $a(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pu(e),e!==null&&P0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BT(t,e,n,r,i){switch(e){case"focusin":return gs=$a(gs,t,e,n,r,i),!0;case"dragenter":return vs=$a(vs,t,e,n,r,i),!0;case"mouseover":return ys=$a(ys,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gl.set(s,$a(Gl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yl.set(s,$a(Yl.get(s)||null,t,e,n,r,i)),!0}return!1}function TS(t){var e=Gs(t.target);if(e!==null){var n=go(e);if(n!==null){if(e=n.tag,e===13){if(e=yS(n),e!==null){t.blockedOn=e,NS(t.priority,function(){AS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lm=r,n.target.dispatchEvent(r),Lm=null}else return e=Pu(n),e!==null&&P0(e),t.blockedOn=n,!1;e.shift()}return!0}function mx(t,e,n){Gc(t)&&n.delete(e)}function zT(){Fm=!1,gs!==null&&Gc(gs)&&(gs=null),vs!==null&&Gc(vs)&&(vs=null),ys!==null&&Gc(ys)&&(ys=null),Gl.forEach(mx),Yl.forEach(mx)}function Wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Fm||(Fm=!0,yr.unstable_scheduleCallback(yr.unstable_NormalPriority,zT)))}function Zl(t){function e(i){return Wa(i,t)}if(0<dc.length){Wa(dc[0],t);for(var n=1;n<dc.length;n++){var r=dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&Wa(gs,t),vs!==null&&Wa(vs,t),ys!==null&&Wa(ys,t),Gl.forEach(e),Yl.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)TS(n),n.blockedOn===null&&us.shift()}var sa=Ki.ReactCurrentBatchConfig,Rd=!0;function UT(t,e,n,r){var i=Mt,s=sa.transition;sa.transition=null;try{Mt=1,O0(t,e,n,r)}finally{Mt=i,sa.transition=s}}function $T(t,e,n,r){var i=Mt,s=sa.transition;sa.transition=null;try{Mt=4,O0(t,e,n,r)}finally{Mt=i,sa.transition=s}}function O0(t,e,n,r){if(Rd){var i=Bm(t,e,n,r);if(i===null)cp(t,e,r,Id,n),px(t,r);else if(BT(i,t,e,n,r))r.stopPropagation();else if(px(t,r),e&4&&-1<FT.indexOf(t)){for(;i!==null;){var s=Pu(i);if(s!==null&&CS(s),s=Bm(t,e,n,r),s===null&&cp(t,e,r,Id,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cp(t,e,r,null,n)}}var Id=null;function Bm(t,e,n,r){if(Id=null,t=R0(r),t=Gs(t),t!==null)if(e=go(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Id=t,null}function RS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NT()){case I0:return 1;case SS:return 4;case Nd:case TT:return 16;case kS:return 536870912;default:return 16}default:return 16}}var ds=null,M0=null,Yc=null;function IS(){if(Yc)return Yc;var t,e=M0,n=e.length,r,i="value"in ds?ds.value:ds.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yc=i.slice(t,1<r?1-r:void 0)}function Zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fc(){return!0}function gx(){return!1}function wr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fc:gx,this.isPropagationStopped=gx,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),e}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=wr(Na),Lu=Jt({},Na,{view:0,detail:0}),WT=wr(Lu),tp,np,Ha,Kf=Jt({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(tp=t.screenX-Ha.screenX,np=t.screenY-Ha.screenY):np=tp=0,Ha=t),tp)},movementY:function(t){return"movementY"in t?t.movementY:np}}),vx=wr(Kf),HT=Jt({},Kf,{dataTransfer:0}),VT=wr(HT),qT=Jt({},Lu,{relatedTarget:0}),rp=wr(qT),KT=Jt({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),XT=wr(KT),GT=Jt({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YT=wr(GT),ZT=Jt({},Na,{data:0}),yx=wr(ZT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eR[t])?!!e[t]:!1}function F0(){return tR}var nR=Jt({},Lu,{key:function(t){if(t.key){var e=QT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F0,charCode:function(t){return t.type==="keypress"?Zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rR=wr(nR),iR=Jt({},Kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=wr(iR),sR=Jt({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F0}),oR=wr(sR),aR=Jt({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),lR=wr(aR),uR=Jt({},Kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cR=wr(uR),dR=[9,13,27,32],B0=ji&&"CompositionEvent"in window,kl=null;ji&&"documentMode"in document&&(kl=document.documentMode);var fR=ji&&"TextEvent"in window&&!kl,LS=ji&&(!B0||kl&&8<kl&&11>=kl),wx=" ",bx=!1;function PS(t,e){switch(t){case"keyup":return dR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ho=!1;function hR(t,e){switch(t){case"compositionend":return OS(e);case"keypress":return e.which!==32?null:(bx=!0,wx);case"textInput":return t=e.data,t===wx&&bx?null:t;default:return null}}function pR(t,e){if(Ho)return t==="compositionend"||!B0&&PS(t,e)?(t=IS(),Yc=M0=ds=null,Ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LS&&e.locale!=="ko"?null:e.data;default:return null}}var mR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mR[t.type]:e==="textarea"}function MS(t,e,n,r){hS(r),e=Ld(e,"onChange"),0<e.length&&(n=new j0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var El=null,Ql=null;function gR(t){KS(t,0)}function Xf(t){var e=Ko(t);if(oS(e))return t}function vR(t,e){if(t==="change")return e}var jS=!1;if(ji){var ip;if(ji){var sp="oninput"in document;if(!sp){var kx=document.createElement("div");kx.setAttribute("oninput","return;"),sp=typeof kx.oninput=="function"}ip=sp}else ip=!1;jS=ip&&(!document.documentMode||9<document.documentMode)}function Ex(){El&&(El.detachEvent("onpropertychange",FS),Ql=El=null)}function FS(t){if(t.propertyName==="value"&&Xf(Ql)){var e=[];MS(e,Ql,t,R0(t)),vS(gR,e)}}function yR(t,e,n){t==="focusin"?(Ex(),El=e,Ql=n,El.attachEvent("onpropertychange",FS)):t==="focusout"&&Ex()}function xR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xf(Ql)}function wR(t,e){if(t==="click")return Xf(e)}function bR(t,e){if(t==="input"||t==="change")return Xf(e)}function SR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yr=typeof Object.is=="function"?Object.is:SR;function Jl(t,e){if(Yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bm.call(e,i)||!Yr(t[i],e[i]))return!1}return!0}function _x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cx(t,e){var n=_x(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_x(n)}}function BS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zS(){for(var t=window,e=Cd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cd(t.document)}return e}function z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kR(t){var e=zS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BS(n.ownerDocument.documentElement,n)){if(r!==null&&z0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Cx(n,s);var o=Cx(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ER=ji&&"documentMode"in document&&11>=document.documentMode,Vo=null,zm=null,_l=null,Um=!1;function Ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Um||Vo==null||Vo!==Cd(r)||(r=Vo,"selectionStart"in r&&z0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_l&&Jl(_l,r)||(_l=r,r=Ld(zm,"onSelect"),0<r.length&&(e=new j0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function hc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qo={animationend:hc("Animation","AnimationEnd"),animationiteration:hc("Animation","AnimationIteration"),animationstart:hc("Animation","AnimationStart"),transitionend:hc("Transition","TransitionEnd")},op={},US={};ji&&(US=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Gf(t){if(op[t])return op[t];if(!qo[t])return t;var e=qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in US)return op[t]=e[n];return t}var $S=Gf("animationend"),WS=Gf("animationiteration"),HS=Gf("animationstart"),VS=Gf("transitionend"),qS=new Map,Dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){qS.set(t,e),mo(e,[t])}for(var ap=0;ap<Dx.length;ap++){var lp=Dx[ap],_R=lp.toLowerCase(),CR=lp[0].toUpperCase()+lp.slice(1);Ds(_R,"on"+CR)}Ds($S,"onAnimationEnd");Ds(WS,"onAnimationIteration");Ds(HS,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(VS,"onTransitionEnd");fa("onMouseEnter",["mouseout","mouseover"]);fa("onMouseLeave",["mouseout","mouseover"]);fa("onPointerEnter",["pointerout","pointerover"]);fa("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ul));function Nx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_T(r,e,void 0,t),t.currentTarget=null}function KS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nx(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nx(i,a,u),s=l}}}if(Dd)throw t=Mm,Dd=!1,Mm=null,t}function Ht(t,e){var n=e[qm];n===void 0&&(n=e[qm]=new Set);var r=t+"__bubble";n.has(r)||(XS(e,t,2,!1),n.add(r))}function up(t,e,n){var r=0;e&&(r|=4),XS(n,t,r,e)}var pc="_reactListening"+Math.random().toString(36).slice(2);function eu(t){if(!t[pc]){t[pc]=!0,tS.forEach(function(n){n!=="selectionchange"&&(AR.has(n)||up(n,!1,t),up(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pc]||(e[pc]=!0,up("selectionchange",!1,e))}}function XS(t,e,n,r){switch(RS(e)){case 1:var i=UT;break;case 4:i=$T;break;default:i=O0}n=i.bind(null,e,n,t),i=void 0,!Om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vS(function(){var u=s,d=R0(n),c=[];e:{var h=qS.get(t);if(h!==void 0){var f=j0,v=t;switch(t){case"keypress":if(Zc(n)===0)break e;case"keydown":case"keyup":f=rR;break;case"focusin":v="focus",f=rp;break;case"focusout":v="blur",f=rp;break;case"beforeblur":case"afterblur":f=rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=VT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=oR;break;case $S:case WS:case HS:f=XT;break;case VS:f=lR;break;case"scroll":f=WT;break;case"wheel":f=cR;break;case"copy":case"cut":case"paste":f=YT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xx}var x=(e&4)!==0,g=!x&&t==="scroll",p=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,w;m!==null;){w=m;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,p!==null&&(_=Xl(m,p),_!=null&&x.push(tu(m,_,w)))),g)break;m=m.return}0<x.length&&(h=new f(h,v,null,n,d),c.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Lm&&(v=n.relatedTarget||n.fromElement)&&(Gs(v)||v[Fi]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(v=n.relatedTarget||n.toElement,f=u,v=v?Gs(v):null,v!==null&&(g=go(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=u),f!==v)){if(x=vx,_="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=xx,_="onPointerLeave",p="onPointerEnter",m="pointer"),g=f==null?h:Ko(f),w=v==null?h:Ko(v),h=new x(_,m+"leave",f,n,d),h.target=g,h.relatedTarget=w,_=null,Gs(d)===u&&(x=new x(p,m+"enter",v,n,d),x.target=w,x.relatedTarget=g,_=x),g=_,f&&v)t:{for(x=f,p=v,m=0,w=x;w;w=xo(w))m++;for(w=0,_=p;_;_=xo(_))w++;for(;0<m-w;)x=xo(x),m--;for(;0<w-m;)p=xo(p),w--;for(;m--;){if(x===p||p!==null&&x===p.alternate)break t;x=xo(x),p=xo(p)}x=null}else x=null;f!==null&&Tx(c,h,f,x,!1),v!==null&&g!==null&&Tx(c,g,v,x,!0)}}e:{if(h=u?Ko(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=vR;else if(Sx(h))if(jS)E=bR;else{E=xR;var S=yR}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=wR);if(E&&(E=E(t,u))){MS(c,E,n,d);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Dm(h,"number",h.value)}switch(S=u?Ko(u):window,t){case"focusin":(Sx(S)||S.contentEditable==="true")&&(Vo=S,zm=u,_l=null);break;case"focusout":_l=zm=Vo=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,Ax(c,n,d);break;case"selectionchange":if(ER)break;case"keydown":case"keyup":Ax(c,n,d)}var b;if(B0)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ho?PS(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(LS&&n.locale!=="ko"&&(Ho||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ho&&(b=IS()):(ds=d,M0="value"in ds?ds.value:ds.textContent,Ho=!0)),S=Ld(u,D),0<S.length&&(D=new yx(D,t,null,n,d),c.push({event:D,listeners:S}),b?D.data=b:(b=OS(n),b!==null&&(D.data=b)))),(b=fR?hR(t,n):pR(t,n))&&(u=Ld(u,"onBeforeInput"),0<u.length&&(d=new yx("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=b))}KS(c,e)})}function tu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ld(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xl(t,n),s!=null&&r.unshift(tu(t,s,i)),s=Xl(t,e),s!=null&&r.push(tu(t,s,i))),t=t.return}return r}function xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tx(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Xl(n,s),l!=null&&o.unshift(tu(n,l,a))):i||(l=Xl(n,s),l!=null&&o.push(tu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function Rx(t){return(typeof t=="string"?t:""+t).replace(DR,`
`).replace(NR,"")}function mc(t,e,n){if(e=Rx(e),Rx(t)!==e&&n)throw Error(be(425))}function Pd(){}var $m=null,Wm=null;function Hm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,Ix=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof Ix<"u"?function(t){return Ix.resolve(null).then(t).catch(IR)}:Vm;function IR(t){setTimeout(function(){throw t})}function dp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zl(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),li="__reactFiber$"+Ta,nu="__reactProps$"+Ta,Fi="__reactContainer$"+Ta,qm="__reactEvents$"+Ta,LR="__reactListeners$"+Ta,PR="__reactHandles$"+Ta;function Gs(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fi]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lx(t);t!==null;){if(n=t[li])return n;t=Lx(t)}return e}t=n,n=t.parentNode}return null}function Pu(t){return t=t[li]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(be(33))}function Yf(t){return t[nu]||null}var Km=[],Xo=-1;function Ns(t){return{current:t}}function Vt(t){0>Xo||(t.current=Km[Xo],Km[Xo]=null,Xo--)}function Wt(t,e){Xo++,Km[Xo]=t.current,t.current=e}var _s={},Fn=Ns(_s),tr=Ns(!1),ro=_s;function ha(t,e){var n=t.type.contextTypes;if(!n)return _s;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nr(t){return t=t.childContextTypes,t!=null}function Od(){Vt(tr),Vt(Fn)}function Px(t,e,n){if(Fn.current!==_s)throw Error(be(168));Wt(Fn,e),Wt(tr,n)}function GS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(be(108,yT(t)||"Unknown",i));return Jt({},n,r)}function Md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_s,ro=Fn.current,Wt(Fn,t),Wt(tr,tr.current),!0}function Ox(t,e,n){var r=t.stateNode;if(!r)throw Error(be(169));n?(t=GS(t,e,ro),r.__reactInternalMemoizedMergedChildContext=t,Vt(tr),Vt(Fn),Wt(Fn,t)):Vt(tr),Wt(tr,n)}var Di=null,Zf=!1,fp=!1;function YS(t){Di===null?Di=[t]:Di.push(t)}function OR(t){Zf=!0,YS(t)}function Ts(){if(!fp&&Di!==null){fp=!0;var t=0,e=Mt;try{var n=Di;for(Mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Di=null,Zf=!1}catch(i){throw Di!==null&&(Di=Di.slice(t+1)),bS(I0,Ts),i}finally{Mt=e,fp=!1}}return null}var Go=[],Yo=0,jd=null,Fd=0,Cr=[],Ar=0,io=null,Ti=1,Ri="";function Us(t,e){Go[Yo++]=Fd,Go[Yo++]=jd,jd=t,Fd=e}function ZS(t,e,n){Cr[Ar++]=Ti,Cr[Ar++]=Ri,Cr[Ar++]=io,io=t;var r=Ti;t=Ri;var i=32-qr(r)-1;r&=~(1<<i),n+=1;var s=32-qr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ti=1<<32-qr(e)+i|n<<i|r,Ri=s+t}else Ti=1<<s|n<<i|r,Ri=t}function U0(t){t.return!==null&&(Us(t,1),ZS(t,1,0))}function $0(t){for(;t===jd;)jd=Go[--Yo],Go[Yo]=null,Fd=Go[--Yo],Go[Yo]=null;for(;t===io;)io=Cr[--Ar],Cr[Ar]=null,Ri=Cr[--Ar],Cr[Ar]=null,Ti=Cr[--Ar],Cr[Ar]=null}var gr=null,pr=null,Xt=!1,Wr=null;function QS(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gr=t,pr=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gr=t,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=io!==null?{id:Ti,overflow:Ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gr=t,pr=null,!0):!1;default:return!1}}function Xm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gm(t){if(Xt){var e=pr;if(e){var n=e;if(!Mx(t,e)){if(Xm(t))throw Error(be(418));e=xs(n.nextSibling);var r=gr;e&&Mx(t,e)?QS(r,n):(t.flags=t.flags&-4097|2,Xt=!1,gr=t)}}else{if(Xm(t))throw Error(be(418));t.flags=t.flags&-4097|2,Xt=!1,gr=t}}}function jx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gr=t}function gc(t){if(t!==gr)return!1;if(!Xt)return jx(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hm(t.type,t.memoizedProps)),e&&(e=pr)){if(Xm(t))throw JS(),Error(be(418));for(;e;)QS(t,e),e=xs(e.nextSibling)}if(jx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pr=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pr=null}}else pr=gr?xs(t.stateNode.nextSibling):null;return!0}function JS(){for(var t=pr;t;)t=xs(t.nextSibling)}function pa(){pr=gr=null,Xt=!1}function W0(t){Wr===null?Wr=[t]:Wr.push(t)}var MR=Ki.ReactCurrentBatchConfig;function Va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,t))}return t}function vc(t,e){throw t=Object.prototype.toString.call(e),Error(be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fx(t){var e=t._init;return e(t._payload)}function ek(t){function e(p,m){if(t){var w=p.deletions;w===null?(p.deletions=[m],p.flags|=16):w.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=ks(p,m),p.index=0,p.sibling=null,p}function s(p,m,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<m?(p.flags|=2,m):w):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,w,_){return m===null||m.tag!==6?(m=xp(w,p.mode,_),m.return=p,m):(m=i(m,w),m.return=p,m)}function l(p,m,w,_){var E=w.type;return E===Wo?d(p,m,w.props.children,_,w.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===os&&Fx(E)===m.type)?(_=i(m,w.props),_.ref=Va(p,m,w),_.return=p,_):(_=id(w.type,w.key,w.props,null,p.mode,_),_.ref=Va(p,m,w),_.return=p,_)}function u(p,m,w,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=wp(w,p.mode,_),m.return=p,m):(m=i(m,w.children||[]),m.return=p,m)}function d(p,m,w,_,E){return m===null||m.tag!==7?(m=no(w,p.mode,_,E),m.return=p,m):(m=i(m,w),m.return=p,m)}function c(p,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=xp(""+m,p.mode,w),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oc:return w=id(m.type,m.key,m.props,null,p.mode,w),w.ref=Va(p,null,m),w.return=p,w;case $o:return m=wp(m,p.mode,w),m.return=p,m;case os:var _=m._init;return c(p,_(m._payload),w)}if(al(m)||za(m))return m=no(m,p.mode,w,null),m.return=p,m;vc(p,m)}return null}function h(p,m,w,_){var E=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(p,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oc:return w.key===E?l(p,m,w,_):null;case $o:return w.key===E?u(p,m,w,_):null;case os:return E=w._init,h(p,m,E(w._payload),_)}if(al(w)||za(w))return E!==null?null:d(p,m,w,_,null);vc(p,w)}return null}function f(p,m,w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(w)||null,a(m,p,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case oc:return p=p.get(_.key===null?w:_.key)||null,l(m,p,_,E);case $o:return p=p.get(_.key===null?w:_.key)||null,u(m,p,_,E);case os:var S=_._init;return f(p,m,w,S(_._payload),E)}if(al(_)||za(_))return p=p.get(w)||null,d(m,p,_,E,null);vc(m,_)}return null}function v(p,m,w,_){for(var E=null,S=null,b=m,D=m=0,T=null;b!==null&&D<w.length;D++){b.index>D?(T=b,b=null):T=b.sibling;var C=h(p,b,w[D],_);if(C===null){b===null&&(b=T);break}t&&b&&C.alternate===null&&e(p,b),m=s(C,m,D),S===null?E=C:S.sibling=C,S=C,b=T}if(D===w.length)return n(p,b),Xt&&Us(p,D),E;if(b===null){for(;D<w.length;D++)b=c(p,w[D],_),b!==null&&(m=s(b,m,D),S===null?E=b:S.sibling=b,S=b);return Xt&&Us(p,D),E}for(b=r(p,b);D<w.length;D++)T=f(b,p,D,w[D],_),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?D:T.key),m=s(T,m,D),S===null?E=T:S.sibling=T,S=T);return t&&b.forEach(function(I){return e(p,I)}),Xt&&Us(p,D),E}function x(p,m,w,_){var E=za(w);if(typeof E!="function")throw Error(be(150));if(w=E.call(w),w==null)throw Error(be(151));for(var S=E=null,b=m,D=m=0,T=null,C=w.next();b!==null&&!C.done;D++,C=w.next()){b.index>D?(T=b,b=null):T=b.sibling;var I=h(p,b,C.value,_);if(I===null){b===null&&(b=T);break}t&&b&&I.alternate===null&&e(p,b),m=s(I,m,D),S===null?E=I:S.sibling=I,S=I,b=T}if(C.done)return n(p,b),Xt&&Us(p,D),E;if(b===null){for(;!C.done;D++,C=w.next())C=c(p,C.value,_),C!==null&&(m=s(C,m,D),S===null?E=C:S.sibling=C,S=C);return Xt&&Us(p,D),E}for(b=r(p,b);!C.done;D++,C=w.next())C=f(b,p,D,C.value,_),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?D:C.key),m=s(C,m,D),S===null?E=C:S.sibling=C,S=C);return t&&b.forEach(function(M){return e(p,M)}),Xt&&Us(p,D),E}function g(p,m,w,_){if(typeof w=="object"&&w!==null&&w.type===Wo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case oc:e:{for(var E=w.key,S=m;S!==null;){if(S.key===E){if(E=w.type,E===Wo){if(S.tag===7){n(p,S.sibling),m=i(S,w.props.children),m.return=p,p=m;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===os&&Fx(E)===S.type){n(p,S.sibling),m=i(S,w.props),m.ref=Va(p,S,w),m.return=p,p=m;break e}n(p,S);break}else e(p,S);S=S.sibling}w.type===Wo?(m=no(w.props.children,p.mode,_,w.key),m.return=p,p=m):(_=id(w.type,w.key,w.props,null,p.mode,_),_.ref=Va(p,m,w),_.return=p,p=_)}return o(p);case $o:e:{for(S=w.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(p,m.sibling),m=i(m,w.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=wp(w,p.mode,_),m.return=p,p=m}return o(p);case os:return S=w._init,g(p,m,S(w._payload),_)}if(al(w))return v(p,m,w,_);if(za(w))return x(p,m,w,_);vc(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,w),m.return=p,p=m):(n(p,m),m=xp(w,p.mode,_),m.return=p,p=m),o(p)):n(p,m)}return g}var ma=ek(!0),tk=ek(!1),Bd=Ns(null),zd=null,Zo=null,H0=null;function V0(){H0=Zo=zd=null}function q0(t){var e=Bd.current;Vt(Bd),t._currentValue=e}function Ym(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){zd=t,H0=Zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(er=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(H0!==t)if(t={context:t,memoizedValue:e,next:null},Zo===null){if(zd===null)throw Error(be(308));Zo=t,zd.dependencies={lanes:0,firstContext:t}}else Zo=Zo.next=t;return e}var Ys=null;function K0(t){Ys===null?Ys=[t]:Ys.push(t)}function nk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,K0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Bi(t,r)}function Bi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var as=!1;function X0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,At&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Bi(t,n)}return i=r.interleaved,i===null?(e.next=e,K0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Bi(t,n)}function Qc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L0(t,n)}}function Bx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ud(t,e,n,r){var i=t.updateQueue;as=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,d=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(h=e,f=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){c=v.call(f,c,h);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(f,c,h):v,h==null)break e;c=Jt({},c,h);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=f,l=c):d=d.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oo|=o,t.lanes=o,t.memoizedState=c}}function zx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(be(191,i));i.call(r)}}}var Ou={},hi=Ns(Ou),ru=Ns(Ou),iu=Ns(Ou);function Zs(t){if(t===Ou)throw Error(be(174));return t}function G0(t,e){switch(Wt(iu,e),Wt(ru,t),Wt(hi,Ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tm(e,t)}Vt(hi),Wt(hi,e)}function ga(){Vt(hi),Vt(ru),Vt(iu)}function ik(t){Zs(iu.current);var e=Zs(hi.current),n=Tm(e,t.type);e!==n&&(Wt(ru,t),Wt(hi,n))}function Y0(t){ru.current===t&&(Vt(hi),Vt(ru))}var Zt=Ns(0);function $d(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=[];function Z0(){for(var t=0;t<hp.length;t++)hp[t]._workInProgressVersionPrimary=null;hp.length=0}var Jc=Ki.ReactCurrentDispatcher,pp=Ki.ReactCurrentBatchConfig,so=0,Qt=null,gn=null,wn=null,Wd=!1,Cl=!1,su=0,jR=0;function Pn(){throw Error(be(321))}function Q0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yr(t[n],e[n]))return!1;return!0}function J0(t,e,n,r,i,s){if(so=s,Qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jc.current=t===null||t.memoizedState===null?UR:$R,t=n(r,i),Cl){s=0;do{if(Cl=!1,su=0,25<=s)throw Error(be(301));s+=1,wn=gn=null,e.updateQueue=null,Jc.current=WR,t=n(r,i)}while(Cl)}if(Jc.current=Hd,e=gn!==null&&gn.next!==null,so=0,wn=gn=Qt=null,Wd=!1,e)throw Error(be(300));return t}function ev(){var t=su!==0;return su=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Qt.memoizedState=wn=t:wn=wn.next=t,wn}function Lr(){if(gn===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var e=wn===null?Qt.memoizedState:wn.next;if(e!==null)wn=e,gn=t;else{if(t===null)throw Error(be(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},wn===null?Qt.memoizedState=wn=t:wn=wn.next=t}return wn}function ou(t,e){return typeof e=="function"?e(t):e}function mp(t){var e=Lr(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=gn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((so&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,Qt.lanes|=d,oo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Yr(r,e.memoizedState)||(er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qt.lanes|=s,oo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gp(t){var e=Lr(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yr(s,e.memoizedState)||(er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sk(){}function ok(t,e){var n=Qt,r=Lr(),i=e(),s=!Yr(r.memoizedState,i);if(s&&(r.memoizedState=i,er=!0),r=r.queue,tv(uk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wn!==null&&wn.memoizedState.tag&1){if(n.flags|=2048,au(9,lk.bind(null,n,r,i,e),void 0,null),Sn===null)throw Error(be(349));so&30||ak(n,e,i)}return i}function ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lk(t,e,n,r){e.value=n,e.getSnapshot=r,ck(e)&&dk(t)}function uk(t,e,n){return n(function(){ck(e)&&dk(t)})}function ck(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yr(t,n)}catch{return!0}}function dk(t){var e=Bi(t,1);e!==null&&Kr(e,t,1,-1)}function Ux(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:t},e.queue=t,t=t.dispatch=zR.bind(null,Qt,t),[e.memoizedState,t]}function au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fk(){return Lr().memoizedState}function ed(t,e,n,r){var i=si();Qt.flags|=t,i.memoizedState=au(1|e,n,void 0,r===void 0?null:r)}function Qf(t,e,n,r){var i=Lr();r=r===void 0?null:r;var s=void 0;if(gn!==null){var o=gn.memoizedState;if(s=o.destroy,r!==null&&Q0(r,o.deps)){i.memoizedState=au(e,n,s,r);return}}Qt.flags|=t,i.memoizedState=au(1|e,n,s,r)}function $x(t,e){return ed(8390656,8,t,e)}function tv(t,e){return Qf(2048,8,t,e)}function hk(t,e){return Qf(4,2,t,e)}function pk(t,e){return Qf(4,4,t,e)}function mk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gk(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4,4,mk.bind(null,e,t),n)}function nv(){}function vk(t,e){var n=Lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yk(t,e){var n=Lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xk(t,e,n){return so&21?(Yr(n,e)||(n=ES(),Qt.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,er=!0),t.memoizedState=n)}function FR(t,e){var n=Mt;Mt=n!==0&&4>n?n:4,t(!0);var r=pp.transition;pp.transition={};try{t(!1),e()}finally{Mt=n,pp.transition=r}}function wk(){return Lr().memoizedState}function BR(t,e,n){var r=Ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bk(t))Sk(e,n);else if(n=nk(t,e,n,r),n!==null){var i=Hn();Kr(n,t,r,i),kk(n,e,r)}}function zR(t,e,n){var r=Ss(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bk(t))Sk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yr(a,o)){var l=e.interleaved;l===null?(i.next=i,K0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=nk(t,e,i,r),n!==null&&(i=Hn(),Kr(n,t,r,i),kk(n,e,r))}}function bk(t){var e=t.alternate;return t===Qt||e!==null&&e===Qt}function Sk(t,e){Cl=Wd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L0(t,n)}}var Hd={readContext:Ir,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},UR={readContext:Ir,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:Ir,useEffect:$x,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ed(4194308,4,mk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return ed(4,2,t,e)},useMemo:function(t,e){var n=si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=si();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BR.bind(null,Qt,t),[r.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:Ux,useDebugValue:nv,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=Ux(!1),e=t[0];return t=FR.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qt,i=si();if(Xt){if(n===void 0)throw Error(be(407));n=n()}else{if(n=e(),Sn===null)throw Error(be(349));so&30||ak(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,$x(uk.bind(null,r,s,t),[t]),r.flags|=2048,au(9,lk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=si(),e=Sn.identifierPrefix;if(Xt){var n=Ri,r=Ti;n=(r&~(1<<32-qr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$R={readContext:Ir,useCallback:vk,useContext:Ir,useEffect:tv,useImperativeHandle:gk,useInsertionEffect:hk,useLayoutEffect:pk,useMemo:yk,useReducer:mp,useRef:fk,useState:function(){return mp(ou)},useDebugValue:nv,useDeferredValue:function(t){var e=Lr();return xk(e,gn.memoizedState,t)},useTransition:function(){var t=mp(ou)[0],e=Lr().memoizedState;return[t,e]},useMutableSource:sk,useSyncExternalStore:ok,useId:wk,unstable_isNewReconciler:!1},WR={readContext:Ir,useCallback:vk,useContext:Ir,useEffect:tv,useImperativeHandle:gk,useInsertionEffect:hk,useLayoutEffect:pk,useMemo:yk,useReducer:gp,useRef:fk,useState:function(){return gp(ou)},useDebugValue:nv,useDeferredValue:function(t){var e=Lr();return gn===null?e.memoizedState=t:xk(e,gn.memoizedState,t)},useTransition:function(){var t=gp(ou)[0],e=Lr().memoizedState;return[t,e]},useMutableSource:sk,useSyncExternalStore:ok,useId:wk,unstable_isNewReconciler:!1};function jr(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jf={isMounted:function(t){return(t=t._reactInternals)?go(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Ss(t),s=Li(r,i);s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&(Kr(e,t,i,r),Qc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Ss(t),s=Li(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&(Kr(e,t,i,r),Qc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hn(),r=Ss(t),i=Li(n,r);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,r),e!==null&&(Kr(e,t,r,n),Qc(e,t,r))}};function Wx(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jl(n,r)||!Jl(i,s):!0}function Ek(t,e,n){var r=!1,i=_s,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(i=nr(e)?ro:Fn.current,r=e.contextTypes,s=(r=r!=null)?ha(t,i):_s),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jf.enqueueReplaceState(e,e.state,null)}function Qm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},X0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ir(s):(s=nr(e)?ro:Fn.current,i.context=ha(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jf.enqueueReplaceState(i,i.state,null),Ud(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e){try{var n="",r=e;do n+=vT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HR=typeof WeakMap=="function"?WeakMap:Map;function _k(t,e,n){n=Li(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qd||(qd=!0,ug=r),Jm(t,e)},n}function Ck(t,e,n){n=Li(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jm(t,e),typeof r!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i3.bind(null,t,e,n),e.then(t,t))}function qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Li(-1,1),e.tag=2,ws(n,e,1))),n.lanes|=1),t)}var VR=Ki.ReactCurrentOwner,er=!1;function $n(t,e,n,r){e.child=t===null?tk(e,null,n,r):ma(e,t.child,n,r)}function Xx(t,e,n,r,i){n=n.render;var s=e.ref;return oa(e,i),r=J0(t,e,n,r,s,i),n=ev(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Xt&&n&&U0(e),e.flags|=1,$n(t,e,r,i),e.child)}function Gx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ak(t,e,s,r,i)):(t=id(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(o,r)&&t.ref===e.ref)return zi(t,e,i)}return e.flags|=1,t=ks(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ak(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Jl(s,r)&&t.ref===e.ref)if(er=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(er=!0);else return e.lanes=t.lanes,zi(t,e,i)}return eg(t,e,n,r,i)}function Dk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Jo,fr),fr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Wt(Jo,fr),fr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Wt(Jo,fr),fr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Wt(Jo,fr),fr|=r;return $n(t,e,i,n),e.child}function Nk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eg(t,e,n,r,i){var s=nr(n)?ro:Fn.current;return s=ha(e,s),oa(e,i),n=J0(t,e,n,r,s,i),r=ev(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Xt&&r&&U0(e),e.flags|=1,$n(t,e,n,i),e.child)}function Yx(t,e,n,r,i){if(nr(n)){var s=!0;Md(e)}else s=!1;if(oa(e,i),e.stateNode===null)td(t,e),Ek(e,n,r),Qm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ir(u):(u=nr(n)?ro:Fn.current,u=ha(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Hx(e,o,r,u),as=!1;var h=e.memoizedState;o.state=h,Ud(e,r,o,i),l=e.memoizedState,a!==r||h!==l||tr.current||as?(typeof d=="function"&&(Zm(e,n,d,r),l=e.memoizedState),(a=as||Wx(e,n,a,r,h,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jr(e.type,a),o.props=u,c=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=nr(n)?ro:Fn.current,l=ha(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||h!==l)&&Hx(e,o,r,l),as=!1,h=e.memoizedState,o.state=h,Ud(e,r,o,i);var v=e.memoizedState;a!==c||h!==v||tr.current||as?(typeof f=="function"&&(Zm(e,n,f,r),v=e.memoizedState),(u=as||Wx(e,n,u,r,h,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return tg(t,e,n,r,s,i)}function tg(t,e,n,r,i,s){Nk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ox(e,n,!1),zi(t,e,s);r=e.stateNode,VR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ma(e,t.child,null,s),e.child=ma(e,null,a,s)):$n(t,e,a,s),e.memoizedState=r.state,i&&Ox(e,n,!0),e.child}function Tk(t){var e=t.stateNode;e.pendingContext?Px(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Px(t,e.context,!1),G0(t,e.containerInfo)}function Zx(t,e,n,r,i){return pa(),W0(i),e.flags|=256,$n(t,e,n,r),e.child}var ng={dehydrated:null,treeContext:null,retryLane:0};function rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rk(t,e,n){var r=e.pendingProps,i=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Wt(Zt,i&1),t===null)return Gm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nh(o,r,0,null),t=no(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rg(n),e.memoizedState=ng,t):rv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ks(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=no(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ng,r}return s=t.child,t=s.sibling,r=ks(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rv(t,e){return e=nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yc(t,e,n,r){return r!==null&&W0(r),ma(e,t.child,null,n),t=rv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=vp(Error(be(422))),yc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nh({mode:"visible",children:r.children},i,0,null),s=no(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ma(e,t.child,null,o),e.child.memoizedState=rg(o),e.memoizedState=ng,s);if(!(e.mode&1))return yc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(be(419)),r=vp(s,r,void 0),yc(t,e,o,r)}if(a=(o&t.childLanes)!==0,er||a){if(r=Sn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Bi(t,i),Kr(r,t,i,-1))}return uv(),r=vp(Error(be(421))),yc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s3.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pr=xs(i.nextSibling),gr=e,Xt=!0,Wr=null,t!==null&&(Cr[Ar++]=Ti,Cr[Ar++]=Ri,Cr[Ar++]=io,Ti=t.id,Ri=t.overflow,io=e),e=rv(e,r.children),e.flags|=4096,e)}function Qx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ym(t.return,e,n)}function yp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ik(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($n(t,e,r.children,n),r=Zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qx(t,n,e);else if(t.tag===19)Qx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Wt(Zt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$d(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$d(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yp(e,!0,n,null,s);break;case"together":yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(be(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KR(t,e,n){switch(e.tag){case 3:Tk(e),pa();break;case 5:ik(e);break;case 1:nr(e.type)&&Md(e);break;case 4:G0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Wt(Bd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Wt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?Rk(t,e,n):(Wt(Zt,Zt.current&1),t=zi(t,e,n),t!==null?t.sibling:null);Wt(Zt,Zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ik(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Wt(Zt,Zt.current),r)break;return null;case 22:case 23:return e.lanes=0,Dk(t,e,n)}return zi(t,e,n)}var Lk,ig,Pk,Ok;Lk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ig=function(){};Pk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zs(hi.current);var s=null;switch(n){case"input":i=Cm(t,i),r=Cm(t,r),s=[];break;case"select":i=Jt({},i,{value:void 0}),r=Jt({},r,{value:void 0}),s=[];break;case"textarea":i=Nm(t,i),r=Nm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pd)}Rm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ql.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ql.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ht("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ok=function(t,e,n,r){n!==r&&(e.flags|=4)};function qa(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function On(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XR(t,e,n){var r=e.pendingProps;switch($0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(e),null;case 1:return nr(e.type)&&Od(),On(e),null;case 3:return r=e.stateNode,ga(),Vt(tr),Vt(Fn),Z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(fg(Wr),Wr=null))),ig(t,e),On(e),null;case 5:Y0(e);var i=Zs(iu.current);if(n=e.type,t!==null&&e.stateNode!=null)Pk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(be(166));return On(e),null}if(t=Zs(hi.current),gc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[li]=e,r[nu]=s,t=(e.mode&1)!==0,n){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(i=0;i<ul.length;i++)Ht(ul[i],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":ax(r,s),Ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ht("invalid",r);break;case"textarea":ux(r,s),Ht("invalid",r)}Rm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mc(r.textContent,a,t),i=["children",""+a]):ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ht("scroll",r)}switch(n){case"input":ac(r),lx(r,s,!0);break;case"textarea":ac(r),cx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[li]=e,t[nu]=r,Lk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Im(n,r),n){case"dialog":Ht("cancel",t),Ht("close",t),i=r;break;case"iframe":case"object":case"embed":Ht("load",t),i=r;break;case"video":case"audio":for(i=0;i<ul.length;i++)Ht(ul[i],t);i=r;break;case"source":Ht("error",t),i=r;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),i=r;break;case"details":Ht("toggle",t),i=r;break;case"input":ax(t,r),i=Cm(t,r),Ht("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Jt({},r,{value:void 0}),Ht("invalid",t);break;case"textarea":ux(t,r),i=Nm(t,r),Ht("invalid",t);break;default:i=r}Rm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kl(t,l):typeof l=="number"&&Kl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ql.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ht("scroll",t):l!=null&&A0(t,s,l,o))}switch(n){case"input":ac(t),lx(t,r,!1);break;case"textarea":ac(t),cx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?na(t,!!r.multiple,s,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return On(e),null;case 6:if(t&&e.stateNode!=null)Ok(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(be(166));if(n=Zs(iu.current),Zs(hi.current),gc(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(s=r.nodeValue!==n)&&(t=gr,t!==null))switch(t.tag){case 3:mc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return On(e),null;case 13:if(Vt(Zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&pr!==null&&e.mode&1&&!(e.flags&128))JS(),pa(),e.flags|=98560,s=!1;else if(s=gc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(be(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(be(317));s[li]=e}else pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;On(e),s=!1}else Wr!==null&&(fg(Wr),Wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?yn===0&&(yn=3):uv())),e.updateQueue!==null&&(e.flags|=4),On(e),null);case 4:return ga(),ig(t,e),t===null&&eu(e.stateNode.containerInfo),On(e),null;case 10:return q0(e.type._context),On(e),null;case 17:return nr(e.type)&&Od(),On(e),null;case 19:if(Vt(Zt),s=e.memoizedState,s===null)return On(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qa(s,!1);else{if(yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$d(t),o!==null){for(e.flags|=128,qa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Wt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&on()>ya&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304)}else{if(!r)if(t=$d(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xt)return On(e),null}else 2*on()-s.renderingStartTime>ya&&n!==1073741824&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=on(),e.sibling=null,n=Zt.current,Wt(Zt,r?n&1|2:n&1),e):(On(e),null);case 22:case 23:return lv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fr&1073741824&&(On(e),e.subtreeFlags&6&&(e.flags|=8192)):On(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function GR(t,e){switch($0(e),e.tag){case 1:return nr(e.type)&&Od(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),Vt(tr),Vt(Fn),Z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y0(e),null;case 13:if(Vt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(be(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Zt),null;case 4:return ga(),null;case 10:return q0(e.type._context),null;case 22:case 23:return lv(),null;case 24:return null;default:return null}}var xc=!1,Mn=!1,YR=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tn(t,e,r)}else n.current=null}function sg(t,e,n){try{n()}catch(r){tn(t,e,r)}}var Jx=!1;function ZR(t,e){if($m=Rd,t=zS(),z0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,c=t,h=null;t:for(;;){for(var f;c!==n||i!==0&&c.nodeType!==3||(a=o+i),c!==s||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)h=c,c=f;for(;;){if(c===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++d===r&&(l=o),(f=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wm={focusedElem:t,selectionRange:n},Rd=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,g=v.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?x:jr(e.type,x),g);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(_){tn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return v=Jx,Jx=!1,v}function Al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sg(e,n,s)}i=i.next}while(i!==r)}}function eh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mk(t){var e=t.alternate;e!==null&&(t.alternate=null,Mk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[nu],delete e[qm],delete e[LR],delete e[PR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jk(t){return t.tag===5||t.tag===3||t.tag===4}function ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pd));else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var _n=null,zr=!1;function es(t,e,n){for(n=n.child;n!==null;)Fk(t,e,n),n=n.sibling}function Fk(t,e,n){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(qf,n)}catch{}switch(n.tag){case 5:Mn||Qo(n,e);case 6:var r=_n,i=zr;_n=null,es(t,e,n),_n=r,zr=i,_n!==null&&(zr?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(zr?(t=_n,n=n.stateNode,t.nodeType===8?dp(t.parentNode,n):t.nodeType===1&&dp(t,n),Zl(t)):dp(_n,n.stateNode));break;case 4:r=_n,i=zr,_n=n.stateNode.containerInfo,zr=!0,es(t,e,n),_n=r,zr=i;break;case 0:case 11:case 14:case 15:if(!Mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sg(n,e,o),i=i.next}while(i!==r)}es(t,e,n);break;case 1:if(!Mn&&(Qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tn(n,e,a)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?(Mn=(r=Mn)||n.memoizedState!==null,es(t,e,n),Mn=r):es(t,e,n);break;default:es(t,e,n)}}function tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YR),e.forEach(function(r){var i=o3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_n=a.stateNode,zr=!1;break e;case 3:_n=a.stateNode.containerInfo,zr=!0;break e;case 4:_n=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(_n===null)throw Error(be(160));Fk(s,o,i),_n=null,zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){tn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bk(e,t),e=e.sibling}function Bk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Or(e,t),ni(t),r&4){try{Al(3,t,t.return),eh(3,t)}catch(x){tn(t,t.return,x)}try{Al(5,t,t.return)}catch(x){tn(t,t.return,x)}}break;case 1:Or(e,t),ni(t),r&512&&n!==null&&Qo(n,n.return);break;case 5:if(Or(e,t),ni(t),r&512&&n!==null&&Qo(n,n.return),t.flags&32){var i=t.stateNode;try{Kl(i,"")}catch(x){tn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aS(i,s),Im(a,o);var u=Im(a,s);for(o=0;o<l.length;o+=2){var d=l[o],c=l[o+1];d==="style"?fS(i,c):d==="dangerouslySetInnerHTML"?cS(i,c):d==="children"?Kl(i,c):A0(i,d,c,u)}switch(a){case"input":Am(i,s);break;case"textarea":lS(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?na(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?na(i,!!s.multiple,s.defaultValue,!0):na(i,!!s.multiple,s.multiple?[]:"",!1))}i[nu]=s}catch(x){tn(t,t.return,x)}}break;case 6:if(Or(e,t),ni(t),r&4){if(t.stateNode===null)throw Error(be(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){tn(t,t.return,x)}}break;case 3:if(Or(e,t),ni(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zl(e.containerInfo)}catch(x){tn(t,t.return,x)}break;case 4:Or(e,t),ni(t);break;case 13:Or(e,t),ni(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ov=on())),r&4&&tw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mn=(u=Mn)||d,Or(e,t),Mn=u):Or(e,t),ni(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($e=t,d=t.child;d!==null;){for(c=$e=d;$e!==null;){switch(h=$e,f=h.child,h.tag){case 0:case 11:case 14:case 15:Al(4,h,h.return);break;case 1:Qo(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){tn(r,n,x)}}break;case 5:Qo(h,h.return);break;case 22:if(h.memoizedState!==null){rw(c);continue}}f!==null?(f.return=h,$e=f):rw(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dS("display",o))}catch(x){tn(t,t.return,x)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(x){tn(t,t.return,x)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Or(e,t),ni(t),r&4&&tw(t);break;case 21:break;default:Or(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jk(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kl(i,""),r.flags&=-33);var s=ew(t);lg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ew(t);ag(t,a,o);break;default:throw Error(be(161))}}catch(l){tn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QR(t,e,n){$e=t,zk(t)}function zk(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var i=$e,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mn;a=xc;var u=Mn;if(xc=o,(Mn=l)&&!u)for($e=i;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?iw(i):l!==null?(l.return=o,$e=l):iw(i);for(;s!==null;)$e=s,zk(s),s=s.sibling;$e=i,xc=a,Mn=u}nw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$e=s):nw(t)}}function nw(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mn||eh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&Zl(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Mn||e.flags&512&&og(e)}catch(h){tn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function rw(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function iw(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eh(4,e)}catch(l){tn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){tn(e,i,l)}}var s=e.return;try{og(e)}catch(l){tn(e,s,l)}break;case 5:var o=e.return;try{og(e)}catch(l){tn(e,o,l)}}}catch(l){tn(e,e.return,l)}if(e===t){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var JR=Math.ceil,Vd=Ki.ReactCurrentDispatcher,iv=Ki.ReactCurrentOwner,Rr=Ki.ReactCurrentBatchConfig,At=0,Sn=null,fn=null,Nn=0,fr=0,Jo=Ns(0),yn=0,lu=null,oo=0,th=0,sv=0,Dl=null,Qn=null,ov=0,ya=1/0,Ai=null,qd=!1,ug=null,bs=null,wc=!1,fs=null,Kd=0,Nl=0,cg=null,nd=-1,rd=0;function Hn(){return At&6?on():nd!==-1?nd:nd=on()}function Ss(t){return t.mode&1?At&2&&Nn!==0?Nn&-Nn:MR.transition!==null?(rd===0&&(rd=ES()),rd):(t=Mt,t!==0||(t=window.event,t=t===void 0?16:RS(t.type)),t):1}function Kr(t,e,n,r){if(50<Nl)throw Nl=0,cg=null,Error(be(185));Iu(t,n,r),(!(At&2)||t!==Sn)&&(t===Sn&&(!(At&2)&&(th|=n),yn===4&&cs(t,Nn)),rr(t,r),n===1&&At===0&&!(e.mode&1)&&(ya=on()+500,Zf&&Ts()))}function rr(t,e){var n=t.callbackNode;MT(t,e);var r=Td(t,t===Sn?Nn:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?OR(sw.bind(null,t)):YS(sw.bind(null,t)),RR(function(){!(At&6)&&Ts()}),n=null;else{switch(_S(r)){case 1:n=I0;break;case 4:n=SS;break;case 16:n=Nd;break;case 536870912:n=kS;break;default:n=Nd}n=Xk(n,Uk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Uk(t,e){if(nd=-1,rd=0,At&6)throw Error(be(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=Td(t,t===Sn?Nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xd(t,r);else{e=r;var i=At;At|=2;var s=Wk();(Sn!==t||Nn!==e)&&(Ai=null,ya=on()+500,to(t,e));do try{n3();break}catch(a){$k(t,a)}while(!0);V0(),Vd.current=s,At=i,fn!==null?e=0:(Sn=null,Nn=0,e=yn)}if(e!==0){if(e===2&&(i=jm(t),i!==0&&(r=i,e=dg(t,i))),e===1)throw n=lu,to(t,0),cs(t,r),rr(t,on()),n;if(e===6)cs(t,r);else{if(i=t.current.alternate,!(r&30)&&!e3(i)&&(e=Xd(t,r),e===2&&(s=jm(t),s!==0&&(r=s,e=dg(t,s))),e===1))throw n=lu,to(t,0),cs(t,r),rr(t,on()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(be(345));case 2:$s(t,Qn,Ai);break;case 3:if(cs(t,r),(r&130023424)===r&&(e=ov+500-on(),10<e)){if(Td(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vm($s.bind(null,t,Qn,Ai),e);break}$s(t,Qn,Ai);break;case 4:if(cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JR(r/1960))-r,10<r){t.timeoutHandle=Vm($s.bind(null,t,Qn,Ai),r);break}$s(t,Qn,Ai);break;case 5:$s(t,Qn,Ai);break;default:throw Error(be(329))}}}return rr(t,on()),t.callbackNode===n?Uk.bind(null,t):null}function dg(t,e){var n=Dl;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=Xd(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&fg(e)),t}function fg(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function e3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cs(t,e){for(e&=~sv,e&=~th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qr(e),r=1<<n;t[n]=-1,e&=~r}}function sw(t){if(At&6)throw Error(be(327));aa();var e=Td(t,0);if(!(e&1))return rr(t,on()),null;var n=Xd(t,e);if(t.tag!==0&&n===2){var r=jm(t);r!==0&&(e=r,n=dg(t,r))}if(n===1)throw n=lu,to(t,0),cs(t,e),rr(t,on()),n;if(n===6)throw Error(be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Qn,Ai),rr(t,on()),null}function av(t,e){var n=At;At|=1;try{return t(e)}finally{At=n,At===0&&(ya=on()+500,Zf&&Ts())}}function ao(t){fs!==null&&fs.tag===0&&!(At&6)&&aa();var e=At;At|=1;var n=Rr.transition,r=Mt;try{if(Rr.transition=null,Mt=1,t)return t()}finally{Mt=r,Rr.transition=n,At=e,!(At&6)&&Ts()}}function lv(){fr=Jo.current,Vt(Jo)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TR(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch($0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Od();break;case 3:ga(),Vt(tr),Vt(Fn),Z0();break;case 5:Y0(r);break;case 4:ga();break;case 13:Vt(Zt);break;case 19:Vt(Zt);break;case 10:q0(r.type._context);break;case 22:case 23:lv()}n=n.return}if(Sn=t,fn=t=ks(t.current,null),Nn=fr=e,yn=0,lu=null,sv=th=oo=0,Qn=Dl=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ys=null}return t}function $k(t,e){do{var n=fn;try{if(V0(),Jc.current=Hd,Wd){for(var r=Qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wd=!1}if(so=0,wn=gn=Qt=null,Cl=!1,su=0,iv.current=null,n===null||n.return===null){yn=1,lu=e,fn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=qx(o);if(f!==null){f.flags&=-257,Kx(f,o,a,s,e),f.mode&1&&Vx(s,u,e),e=f,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){Vx(s,u,e),uv();break e}l=Error(be(426))}}else if(Xt&&a.mode&1){var g=qx(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Kx(g,o,a,s,e),W0(va(l,a));break e}}s=l=va(l,a),yn!==4&&(yn=2),Dl===null?Dl=[s]:Dl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=_k(s,l,e);Bx(s,p);break e;case 1:a=l;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(bs===null||!bs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=Ck(s,a,e);Bx(s,_);break e}}s=s.return}while(s!==null)}Vk(n)}catch(E){e=E,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function Wk(){var t=Vd.current;return Vd.current=Hd,t===null?Hd:t}function uv(){(yn===0||yn===3||yn===2)&&(yn=4),Sn===null||!(oo&268435455)&&!(th&268435455)||cs(Sn,Nn)}function Xd(t,e){var n=At;At|=2;var r=Wk();(Sn!==t||Nn!==e)&&(Ai=null,to(t,e));do try{t3();break}catch(i){$k(t,i)}while(!0);if(V0(),At=n,Vd.current=r,fn!==null)throw Error(be(261));return Sn=null,Nn=0,yn}function t3(){for(;fn!==null;)Hk(fn)}function n3(){for(;fn!==null&&!AT();)Hk(fn)}function Hk(t){var e=Kk(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?Vk(t):fn=e,iv.current=null}function Vk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GR(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yn=6,fn=null;return}}else if(n=XR(n,e,fr),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);yn===0&&(yn=5)}function $s(t,e,n){var r=Mt,i=Rr.transition;try{Rr.transition=null,Mt=1,r3(t,e,n,r)}finally{Rr.transition=i,Mt=r}return null}function r3(t,e,n,r){do aa();while(fs!==null);if(At&6)throw Error(be(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(be(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jT(t,s),t===Sn&&(fn=Sn=null,Nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wc||(wc=!0,Xk(Nd,function(){return aa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rr.transition,Rr.transition=null;var o=Mt;Mt=1;var a=At;At|=4,iv.current=null,ZR(t,n),Bk(n,t),kR(Wm),Rd=!!$m,Wm=$m=null,t.current=n,QR(n),DT(),At=a,Mt=o,Rr.transition=s}else t.current=n;if(wc&&(wc=!1,fs=t,Kd=i),s=t.pendingLanes,s===0&&(bs=null),RT(n.stateNode),rr(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qd)throw qd=!1,t=ug,ug=null,t;return Kd&1&&t.tag!==0&&aa(),s=t.pendingLanes,s&1?t===cg?Nl++:(Nl=0,cg=t):Nl=0,Ts(),null}function aa(){if(fs!==null){var t=_S(Kd),e=Rr.transition,n=Mt;try{if(Rr.transition=null,Mt=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,Kd=0,At&6)throw Error(be(331));var i=At;for(At|=4,$e=t.current;$e!==null;){var s=$e,o=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($e=u;$e!==null;){var d=$e;switch(d.tag){case 0:case 11:case 15:Al(8,d,s)}var c=d.child;if(c!==null)c.return=d,$e=c;else for(;$e!==null;){d=$e;var h=d.sibling,f=d.return;if(Mk(d),d===u){$e=null;break}if(h!==null){h.return=f,$e=h;break}$e=f}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}$e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$e=o;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Al(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,$e=p;break e}$e=s.return}}var m=t.current;for($e=m;$e!==null;){o=$e;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,$e=w;else e:for(o=m;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:eh(9,a)}}catch(E){tn(a,a.return,E)}if(a===o){$e=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,$e=_;break e}$e=a.return}}if(At=i,Ts(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(qf,t)}catch{}r=!0}return r}finally{Mt=n,Rr.transition=e}}return!1}function ow(t,e,n){e=va(n,e),e=_k(t,e,1),t=ws(t,e,1),e=Hn(),t!==null&&(Iu(t,1,e),rr(t,e))}function tn(t,e,n){if(t.tag===3)ow(t,t,n);else for(;e!==null;){if(e.tag===3){ow(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bs===null||!bs.has(r))){t=va(n,t),t=Ck(e,t,1),e=ws(e,t,1),t=Hn(),e!==null&&(Iu(e,1,t),rr(e,t));break}}e=e.return}}function i3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hn(),t.pingedLanes|=t.suspendedLanes&n,Sn===t&&(Nn&n)===n&&(yn===4||yn===3&&(Nn&130023424)===Nn&&500>on()-ov?to(t,0):sv|=n),rr(t,e)}function qk(t,e){e===0&&(t.mode&1?(e=cc,cc<<=1,!(cc&130023424)&&(cc=4194304)):e=1);var n=Hn();t=Bi(t,e),t!==null&&(Iu(t,e,n),rr(t,n))}function s3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qk(t,n)}function o3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(e),qk(t,n)}var Kk;Kk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tr.current)er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return er=!1,KR(t,e,n);er=!!(t.flags&131072)}else er=!1,Xt&&e.flags&1048576&&ZS(e,Fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;td(t,e),t=e.pendingProps;var i=ha(e,Fn.current);oa(e,n),i=J0(null,e,r,t,i,n);var s=ev();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(r)?(s=!0,Md(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X0(e),i.updater=Jf,e.stateNode=i,i._reactInternals=e,Qm(e,r,t,n),e=tg(null,e,r,!0,s,n)):(e.tag=0,Xt&&s&&U0(e),$n(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(td(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l3(r),t=jr(r,t),i){case 0:e=eg(null,e,r,t,n);break e;case 1:e=Yx(null,e,r,t,n);break e;case 11:e=Xx(null,e,r,t,n);break e;case 14:e=Gx(null,e,r,jr(r.type,t),n);break e}throw Error(be(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),eg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),Yx(t,e,r,i,n);case 3:e:{if(Tk(e),t===null)throw Error(be(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rk(t,e),Ud(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=va(Error(be(423)),e),e=Zx(t,e,r,n,i);break e}else if(r!==i){i=va(Error(be(424)),e),e=Zx(t,e,r,n,i);break e}else for(pr=xs(e.stateNode.containerInfo.firstChild),gr=e,Xt=!0,Wr=null,n=tk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),r===i){e=zi(t,e,n);break e}$n(t,e,r,n)}e=e.child}return e;case 5:return ik(e),t===null&&Gm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Hm(r,i)?o=null:s!==null&&Hm(r,s)&&(e.flags|=32),Nk(t,e),$n(t,e,o,n),e.child;case 6:return t===null&&Gm(e),null;case 13:return Rk(t,e,n);case 4:return G0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ma(e,null,r,n):$n(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),Xx(t,e,r,i,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Wt(Bd,r._currentValue),r._currentValue=o,s!==null)if(Yr(s.value,o)){if(s.children===i.children&&!tr.current){e=zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Li(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ym(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ym(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$n(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oa(e,n),i=Ir(i),r=r(i),e.flags|=1,$n(t,e,r,n),e.child;case 14:return r=e.type,i=jr(r,e.pendingProps),i=jr(r.type,i),Gx(t,e,r,i,n);case 15:return Ak(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),td(t,e),e.tag=1,nr(r)?(t=!0,Md(e)):t=!1,oa(e,n),Ek(e,r,i),Qm(e,r,i,n),tg(null,e,r,!0,t,n);case 19:return Ik(t,e,n);case 22:return Dk(t,e,n)}throw Error(be(156,e.tag))};function Xk(t,e){return bS(t,e)}function a3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,r){return new a3(t,e,n,r)}function cv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l3(t){if(typeof t=="function")return cv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N0)return 11;if(t===T0)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function id(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wo:return no(n.children,i,s,e);case D0:o=8,i|=8;break;case Sm:return t=Nr(12,n,e,i|2),t.elementType=Sm,t.lanes=s,t;case km:return t=Nr(13,n,e,i),t.elementType=km,t.lanes=s,t;case Em:return t=Nr(19,n,e,i),t.elementType=Em,t.lanes=s,t;case iS:return nh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nS:o=10;break e;case rS:o=9;break e;case N0:o=11;break e;case T0:o=14;break e;case os:o=16,r=null;break e}throw Error(be(130,t==null?t:typeof t,""))}return e=Nr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function no(t,e,n,r){return t=Nr(7,t,r,e),t.lanes=n,t}function nh(t,e,n,r){return t=Nr(22,t,r,e),t.elementType=iS,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function wp(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ep(0),this.expirationTimes=ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ep(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dv(t,e,n,r,i,s,o,a,l){return t=new u3(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X0(s),t}function c3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gk(t){if(!t)return _s;t=t._reactInternals;e:{if(go(t)!==t||t.tag!==1)throw Error(be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(t.tag===1){var n=t.type;if(nr(n))return GS(t,n,e)}return e}function Yk(t,e,n,r,i,s,o,a,l){return t=dv(n,r,!0,t,i,s,o,a,l),t.context=Gk(null),n=t.current,r=Hn(),i=Ss(n),s=Li(r,i),s.callback=e??null,ws(n,s,i),t.current.lanes=i,Iu(t,i,r),rr(t,r),t}function rh(t,e,n,r){var i=e.current,s=Hn(),o=Ss(i);return n=Gk(n),e.context===null?e.context=n:e.pendingContext=n,e=Li(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ws(i,e,o),t!==null&&(Kr(t,i,o,s),Qc(t,i,o)),o}function Gd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fv(t,e){aw(t,e),(t=t.alternate)&&aw(t,e)}function d3(){return null}var Zk=typeof reportError=="function"?reportError:function(t){console.error(t)};function hv(t){this._internalRoot=t}ih.prototype.render=hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(be(409));rh(t,e,null,null)};ih.prototype.unmount=hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){rh(null,t,null,null)}),e[Fi]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=DS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&TS(t)}};function pv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lw(){}function f3(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Gd(o);s.call(u)}}var o=Yk(e,r,t,0,null,!1,!1,"",lw);return t._reactRootContainer=o,t[Fi]=o.current,eu(t.nodeType===8?t.parentNode:t),ao(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gd(l);a.call(u)}}var l=dv(t,0,!1,null,null,!1,!1,"",lw);return t._reactRootContainer=l,t[Fi]=l.current,eu(t.nodeType===8?t.parentNode:t),ao(function(){rh(e,l,n,r)}),l}function oh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Gd(o);a.call(l)}}rh(e,o,t,i)}else o=f3(n,e,t,i,r);return Gd(o)}CS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ll(e.pendingLanes);n!==0&&(L0(e,n|1),rr(e,on()),!(At&6)&&(ya=on()+500,Ts()))}break;case 13:ao(function(){var r=Bi(t,1);if(r!==null){var i=Hn();Kr(r,t,1,i)}}),fv(t,1)}};P0=function(t){if(t.tag===13){var e=Bi(t,134217728);if(e!==null){var n=Hn();Kr(e,t,134217728,n)}fv(t,134217728)}};AS=function(t){if(t.tag===13){var e=Ss(t),n=Bi(t,e);if(n!==null){var r=Hn();Kr(n,t,e,r)}fv(t,e)}};DS=function(){return Mt};NS=function(t,e){var n=Mt;try{return Mt=t,e()}finally{Mt=n}};Pm=function(t,e,n){switch(e){case"input":if(Am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yf(r);if(!i)throw Error(be(90));oS(r),Am(r,i)}}}break;case"textarea":lS(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};mS=av;gS=ao;var h3={usingClientEntryPoint:!1,Events:[Pu,Ko,Yf,hS,pS,av]},Ka={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p3={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xS(t),t===null?null:t.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||d3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{qf=bc.inject(p3),fi=bc}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h3;xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pv(e))throw Error(be(200));return c3(t,e,null,n)};xr.createRoot=function(t,e){if(!pv(t))throw Error(be(299));var n=!1,r="",i=Zk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dv(t,1,!1,null,null,n,!1,r,i),t[Fi]=e.current,eu(t.nodeType===8?t.parentNode:t),new hv(e)};xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(be(188)):(t=Object.keys(t).join(","),Error(be(268,t)));return t=xS(e),t=t===null?null:t.stateNode,t};xr.flushSync=function(t){return ao(t)};xr.hydrate=function(t,e,n){if(!sh(e))throw Error(be(200));return oh(null,t,e,!0,n)};xr.hydrateRoot=function(t,e,n){if(!pv(t))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Zk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yk(e,null,t,1,n??null,i,!1,s,o),t[Fi]=e.current,eu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ih(e)};xr.render=function(t,e,n){if(!sh(e))throw Error(be(200));return oh(null,t,e,!1,n)};xr.unmountComponentAtNode=function(t){if(!sh(t))throw Error(be(40));return t._reactRootContainer?(ao(function(){oh(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};xr.unstable_batchedUpdates=av;xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sh(n))throw Error(be(200));if(t==null||t._reactInternals===void 0)throw Error(be(38));return oh(t,e,n,!1,r)};xr.version="18.3.1-next-f1338f8080-20240426";function Qk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qk)}catch(t){console.error(t)}}Qk(),Q1.exports=xr;var Vr=Q1.exports;const m3=Jr(Vr),g3=z1({__proto__:null,default:m3},[Vr]);var Jk,uw=Vr;Jk=uw.createRoot,uw.hydrateRoot;var eE={exports:{}},tE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=A;function v3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var y3=typeof Object.is=="function"?Object.is:v3,x3=Mu.useSyncExternalStore,w3=Mu.useRef,b3=Mu.useEffect,S3=Mu.useMemo,k3=Mu.useDebugValue;tE.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=w3(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=S3(function(){function l(f){if(!u){if(u=!0,d=f,f=r(f),i!==void 0&&o.hasValue){var v=o.value;if(i(v,f))return c=v}return c=f}if(v=c,y3(d,f))return v;var x=r(f);return i!==void 0&&i(v,x)?(d=f,v):(d=f,c=x)}var u=!1,d,c,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=x3(t,s[0],s[1]);return b3(function(){o.hasValue=!0,o.value=a},[a]),k3(a),a};eE.exports=tE;var E3=eE.exports;function _3(t){t()}function C3(){let t=null,e=null;return{clear(){t=null,e=null},notify(){_3(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var cw={notify(){},get:()=>[]};function A3(t,e){let n,r=cw,i=0,s=!1;function o(x){d();const g=r.subscribe(x);let p=!1;return()=>{p||(p=!0,g(),c())}}function a(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function u(){return s}function d(){i++,n||(n=t.subscribe(l),r=C3())}function c(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=cw)}function h(){s||(s=!0,d())}function f(){s&&(s=!1,c())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return v}var D3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N3=D3(),T3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",R3=T3(),I3=()=>N3||R3?A.useLayoutEffect:A.useEffect,L3=I3(),bp=Symbol.for("react-redux-context"),Sp=typeof globalThis<"u"?globalThis:{};function P3(){if(!A.createContext)return{};const t=Sp[bp]??(Sp[bp]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var Cs=P3();function O3(t){const{children:e,context:n,serverState:r,store:i}=t,s=A.useMemo(()=>{const l=A3(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=A.useMemo(()=>i.getState(),[i]);L3(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||Cs;return A.createElement(a.Provider,{value:s},e)}var M3=O3;function mv(t=Cs){return function(){return A.useContext(t)}}var nE=mv();function rE(t=Cs){const e=t===Cs?nE:mv(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var j3=rE();function F3(t=Cs){const e=t===Cs?j3:rE(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var B3=F3(),z3=(t,e)=>t===e;function U3(t=Cs){const e=t===Cs?nE:mv(t),n=(r,i={})=>{const{equalityFn:s=z3}=typeof i=="function"?{equalityFn:i}:i,o=e(),{store:a,subscription:l,getServerState:u}=o;A.useRef(!0);const d=A.useCallback({[r.name](h){return r(h)}}[r.name],[r]),c=E3.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,u||a.getState,d,s);return A.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var $3=U3();function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var W3=typeof Symbol=="function"&&Symbol.observable||"@@observable",dw=W3,kp=()=>Math.random().toString(36).substring(7).split("").join("."),H3={INIT:`@@redux/INIT${kp()}`,REPLACE:`@@redux/REPLACE${kp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kp()}`},Yd=H3;function gv(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function iE(t,e,n){if(typeof t!="function")throw new Error(En(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(iE)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,p)=>{o.set(p,g)}))}function d(){if(l)throw new Error(En(3));return i}function c(g){if(typeof g!="function")throw new Error(En(4));if(l)throw new Error(En(5));let p=!0;u();const m=a++;return o.set(m,g),function(){if(p){if(l)throw new Error(En(6));p=!1,u(),o.delete(m),s=null}}}function h(g){if(!gv(g))throw new Error(En(7));if(typeof g.type>"u")throw new Error(En(8));if(typeof g.type!="string")throw new Error(En(17));if(l)throw new Error(En(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(m=>{m()}),g}function f(g){if(typeof g!="function")throw new Error(En(10));r=g,h({type:Yd.REPLACE})}function v(){const g=c;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(En(11));function m(){const _=p;_.next&&_.next(d())}return m(),{unsubscribe:g(m)}},[dw](){return this}}}return h({type:Yd.INIT}),{dispatch:h,subscribe:c,getState:d,replaceReducer:f,[dw]:v}}function V3(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Yd.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Yd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function q3(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{V3(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let d=0;d<r.length;d++){const c=r[d],h=n[c],f=o[c],v=h(f,a);if(typeof v>"u")throw a&&a.type,new Error(En(14));u[c]=v,l=l||v!==f}return l=l||r.length!==Object.keys(o).length,l?u:o}}function Zd(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function K3(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(En(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=t.map(l=>l(o));return s=Zd(...a)(i.dispatch),{...i,dispatch:s}}}function X3(t){return gv(t)&&"type"in t&&typeof t.type=="string"}var sE=Symbol.for("immer-nothing"),fw=Symbol.for("immer-draftable"),Vn=Symbol.for("immer-state");function Hr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mr=Object,xa=mr.getPrototypeOf,Qd="constructor",ah="prototype",hg="configurable",Jd="enumerable",sd="writable",uu="value",Ui=t=>!!t&&!!t[Vn];function Zr(t){var e;return t?oE(t)||lh(t)||!!t[fw]||!!((e=t[Qd])!=null&&e[fw])||uh(t)||ch(t):!1}var G3=mr[ah][Qd].toString(),hw=new WeakMap;function oE(t){if(!t||!vv(t))return!1;const e=xa(t);if(e===null||e===mr[ah])return!0;const n=mr.hasOwnProperty.call(e,Qd)&&e[Qd];if(n===Object)return!0;if(!Po(n))return!1;let r=hw.get(n);return r===void 0&&(r=Function.toString.call(n),hw.set(n,r)),r===G3}function ju(t,e,n=!0){Fu(t)===0?(n?Reflect.ownKeys(t):mr.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Fu(t){const e=t[Vn];return e?e.type_:lh(t)?1:uh(t)?2:ch(t)?3:0}var pw=(t,e,n=Fu(t))=>n===2?t.has(e):mr[ah].hasOwnProperty.call(t,e),pg=(t,e,n=Fu(t))=>n===2?t.get(e):t[e],ef=(t,e,n,r=Fu(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Y3(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var lh=Array.isArray,uh=t=>t instanceof Map,ch=t=>t instanceof Set,vv=t=>typeof t=="object",Po=t=>typeof t=="function",Ep=t=>typeof t=="boolean",Ni=t=>t.copy_||t.base_,yv=t=>t.modified_?t.copy_:t.base_;function mg(t,e){if(uh(t))return new Map(t);if(ch(t))return new Set(t);if(lh(t))return Array[ah].slice.call(t);const n=oE(t);if(e===!0||e==="class_only"&&!n){const r=mr.getOwnPropertyDescriptors(t);delete r[Vn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[sd]===!1&&(a[sd]=!0,a[hg]=!0),(a.get||a.set)&&(r[o]={[hg]:!0,[sd]:!0,[Jd]:a[Jd],[uu]:t[o]})}return mr.create(xa(t),r)}else{const r=xa(t);if(r!==null&&n)return{...t};const i=mr.create(r);return mr.assign(i,t)}}function xv(t,e=!1){return dh(t)||Ui(t)||!Zr(t)||(Fu(t)>1&&mr.defineProperties(t,{set:Sc,add:Sc,clear:Sc,delete:Sc}),mr.freeze(t),e&&ju(t,(n,r)=>{xv(r,!0)},!1)),t}function Z3(){Hr(2)}var Sc={[uu]:Z3};function dh(t){return t===null||!vv(t)?!0:mr.isFrozen(t)}var tf="MapSet",gg="Patches",aE={};function wa(t){const e=aE[t];return e||Hr(0,t),e}var Q3=t=>!!aE[t],cu,lE=()=>cu,J3=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Q3(tf)?wa(tf):void 0});function mw(t,e){e&&(t.patchPlugin_=wa(gg),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function vg(t){yg(t),t.drafts_.forEach(eI),t.drafts_=null}function yg(t){t===cu&&(cu=t.parent_)}var gw=t=>cu=J3(cu,t);function eI(t){const e=t[Vn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vw(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Vn].modified_&&(vg(e),Hr(4)),Zr(t)&&(t=yw(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Vn].base_,t,e)}else t=yw(e,n);return tI(e,t,!0),vg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==sE?t:void 0}function yw(t,e){if(dh(e))return e;const n=e[Vn];if(!n)return wv(e,t.handledSet_,t);if(!fh(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);dE(n,t)}return n.copy_}function tI(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xv(e,n)}function uE(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var fh=(t,e)=>t.scope_===e,nI=[];function cE(t,e,n,r){const i=Ni(t),s=t.type_;if(r!==void 0&&pg(i,r,s)===e){ef(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;ju(i,(l,u)=>{if(Ui(u)){const d=a.get(u)||[];d.push(l),a.set(u,d)}})}const o=t.draftLocations_.get(e)??nI;for(const a of o)ef(i,a,n,s)}function rI(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!fh(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=yv(s);cE(t,s.draft_??s,o,n),dE(s,i)})}function dE(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}uE(t)}}function iI(t,e,n){const{scope_:r}=t;if(Ui(n)){const i=n[Vn];fh(i,r)&&i.callbacks_.push(function(){od(t);const o=yv(i);cE(t,n,o,e)})}else Zr(n)&&t.callbacks_.push(function(){const s=Ni(t);pg(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&wv(pg(t.copy_,e,t.type_),r.handledSet_,r)})}function wv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ui(t)||e.has(t)||!Zr(t)||dh(t)||(e.add(t),ju(t,(r,i)=>{if(Ui(i)){const s=i[Vn];if(fh(s,n)){const o=yv(s);ef(t,r,o,t.type_),uE(s)}}else Zr(i)&&wv(i,e,n)})),t}function sI(t,e){const n=lh(t),r={type_:n?1:0,scope_:e?e.scope_:lE(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=bv;n&&(i=[r],s=du);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var bv={get(t,e){if(e===Vn)return t;const n=Ni(t);if(!pw(n,e,t.type_))return oI(t,n,e);const r=n[e];if(t.finalized_||!Zr(r))return r;if(r===_p(t.base_,e)){od(t);const i=t.type_===1?+e:e,s=wg(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in Ni(t)},ownKeys(t){return Reflect.ownKeys(Ni(t))},set(t,e,n){const r=fE(Ni(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=_p(Ni(t),e),s=i==null?void 0:i[Vn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Y3(n,i)&&(n!==void 0||pw(t.base_,e,t.type_)))return!0;od(t),xg(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),iI(t,e,n)),!0},deleteProperty(t,e){return od(t),_p(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),xg(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ni(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[sd]:!0,[hg]:t.type_!==1||e!=="length",[Jd]:r[Jd],[uu]:n[e]}},defineProperty(){Hr(11)},getPrototypeOf(t){return xa(t.base_)},setPrototypeOf(){Hr(12)}},du={};ju(bv,(t,e)=>{du[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});du.deleteProperty=function(t,e){return du.set.call(this,t,e,void 0)};du.set=function(t,e,n){return bv.set.call(this,t[0],e,n,t[0])};function _p(t,e){const n=t[Vn];return(n?Ni(n):t)[e]}function oI(t,e,n){var i;const r=fE(e,n);return r?uu in r?r[uu]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function fE(t,e){if(!(e in t))return;let n=xa(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=xa(n)}}function xg(t){t.modified_||(t.modified_=!0,t.parent_&&xg(t.parent_))}function od(t){t.copy_||(t.assigned_=new Map,t.copy_=mg(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aI=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,n,r)=>{if(Po(e)&&!Po(n)){const s=n;n=e;const o=this;return function(l=s,...u){return o.produce(l,d=>n.call(this,d,...u))}}Po(n)||Hr(6),r!==void 0&&!Po(r)&&Hr(7);let i;if(Zr(e)){const s=gw(this),o=wg(s,e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?vg(s):yg(s)}return mw(s,r),vw(i,s)}else if(!e||!vv(e)){if(i=n(e),i===void 0&&(i=e),i===sE&&(i=void 0),this.autoFreeze_&&xv(i,!0),r){const s=[],o=[];wa(gg).generateReplacementPatches_(e,i,{patches_:s,inversePatches_:o}),r(s,o)}return i}else Hr(1,e)},this.produceWithPatches=(e,n)=>{if(Po(e))return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},Ep(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Ep(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Ep(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Zr(t)||Hr(8),Ui(t)&&(t=lI(t));const e=gw(this),n=wg(e,t,void 0);return n[Vn].isManual_=!0,yg(e),n}finishDraft(t,e){const n=t&&t[Vn];(!n||!n.isManual_)&&Hr(9);const{scope_:r}=n;return mw(r,e),vw(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=wa(gg).applyPatches_;return Ui(t)?r(t,e):this.produce(t,i=>r(i,e))}};function wg(t,e,n,r){const[i,s]=uh(e)?wa(tf).proxyMap_(e,n):ch(e)?wa(tf).proxySet_(e,n):sI(e,n);return((n==null?void 0:n.scope_)??lE()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?rI(n,s,r):s.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=l;s.modified_&&u&&u.generatePatches_(s,[],l)}),i}function lI(t){return Ui(t)||Hr(10,t),hE(t)}function hE(t){if(!Zr(t)||dh(t))return t;const e=t[Vn];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=mg(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=mg(t,!0);return ju(n,(i,s)=>{ef(n,i,hE(s))},r),e&&(e.finalized_=!1),n}var uI=new aI,pE=uI.produce;function mE(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var cI=mE(),dI=mE,fI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zd:Zd.apply(null,arguments)},hI=t=>t&&typeof t.match=="function";function Tl(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Pi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>X3(r)&&r.type===t,n}var gE=class cl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cl.prototype)}static get[Symbol.species](){return cl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cl(...e[0].concat(this)):new cl(...e.concat(this))}};function xw(t){return Zr(t)?pE(t,()=>{}):t}function kc(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function pI(t){return typeof t=="boolean"}var mI=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new gE;return n&&(pI(n)?o.push(cI):o.push(dI(n.extraArgument))),o},gI="RTK_autoBatch",ww=t=>e=>{setTimeout(e,t)},vI=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ww(10):t.type==="callback"?t.queueNotification:ww(t.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const c=()=>i&&d(),h=r.subscribe(c);return a.add(d),()=>{h(),a.delete(d)}},dispatch(d){var c;try{return i=!((c=d==null?void 0:d.meta)!=null&&c[gI]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(d)}finally{i=!0}}})},yI=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new gE(t);return r&&i.push(vI(typeof r=="object"?r:void 0)),i};function xI(t){const e=mI(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(gv(n))a=q3(n);else throw new Error(Pi(1));let l;typeof r=="function"?l=r(e):l=e();let u=Zd;i&&(u=fI({trace:!1,...typeof i=="object"&&i}));const d=K3(...l),c=yI(d);let h=typeof o=="function"?o(c):c();const f=u(...h);return iE(a,s,f)}function vE(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Pi(28));if(a in e)throw new Error(Pi(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function wI(t){return typeof t=="function"}function bI(t,e){let[n,r,i]=vE(e),s;if(wI(t))s=()=>xw(t());else{const a=xw(t);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,c)=>{if(c)if(Ui(d)){const f=c(d,l);return f===void 0?d:f}else{if(Zr(d))return pE(d,h=>c(h,l));{const h=c(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},a)}return o.getInitialState=s,o}var SI=(t,e)=>hI(t)?t.match(e):t(e);function kI(...t){return e=>t.some(n=>SI(n,e))}var EI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_I=(t=21)=>{let e="",n=t;for(;n--;)e+=EI[Math.random()*64|0];return e},CI=["name","message","stack","code"],Cp=class{constructor(t,e){Xh(this,"_type");this.payload=t,this.meta=e}},bw=class{constructor(t,e){Xh(this,"_type");this.payload=t,this.meta=e}},AI=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of CI)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},Sw="External signal was aborted",Ra=(()=>{function t(e,n,r){const i=Tl(e+"/fulfilled",(l,u,d,c)=>({payload:l,meta:{...c||{},arg:d,requestId:u,requestStatus:"fulfilled"}})),s=Tl(e+"/pending",(l,u,d)=>({payload:void 0,meta:{...d||{},arg:u,requestId:l,requestStatus:"pending"}})),o=Tl(e+"/rejected",(l,u,d,c,h)=>({payload:c,error:(r&&r.serializeError||AI)(l||"Rejected"),meta:{...h||{},arg:d,requestId:u,rejectedWithValue:!!c,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l,{signal:u}={}){return(d,c,h)=>{const f=r!=null&&r.idGenerator?r.idGenerator(l):_I(),v=new AbortController;let x,g;function p(w){g=w,v.abort()}u&&(u.aborted?p(Sw):u.addEventListener("abort",()=>p(Sw),{once:!0}));const m=async function(){var E,S;let w;try{let b=(E=r==null?void 0:r.condition)==null?void 0:E.call(r,l,{getState:c,extra:h});if(NI(b)&&(b=await b),b===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const D=new Promise((T,C)=>{x=()=>{C({name:"AbortError",message:g||"Aborted"})},v.signal.addEventListener("abort",x)});d(s(f,l,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:f,arg:l},{getState:c,extra:h}))),w=await Promise.race([D,Promise.resolve(n(l,{dispatch:d,getState:c,extra:h,requestId:f,signal:v.signal,abort:p,rejectWithValue:(T,C)=>new Cp(T,C),fulfillWithValue:(T,C)=>new bw(T,C)})).then(T=>{if(T instanceof Cp)throw T;return T instanceof bw?i(T.payload,f,l,T.meta):i(T,f,l)})])}catch(b){w=b instanceof Cp?o(null,f,l,b.payload,b.meta):o(b,f,l)}finally{x&&v.signal.removeEventListener("abort",x)}return r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition||d(w),w}();return Object.assign(m,{abort:p,requestId:f,arg:l,unwrap(){return m.then(DI)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:kI(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function DI(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function NI(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var TI=Symbol.for("rtk-slice-createasyncthunk");function RI(t,e){return`${t}/${e}`}function II({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[TI];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Pi(11));const a=(typeof i.reducers=="function"?i.reducers(OI()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,E){const S=typeof _=="string"?_:_.type;if(!S)throw new Error(Pi(12));if(S in u.sliceCaseReducersByType)throw new Error(Pi(13));return u.sliceCaseReducersByType[S]=E,d},addMatcher(_,E){return u.sliceMatchers.push({matcher:_,reducer:E}),d},exposeAction(_,E){return u.actionCreators[_]=E,d},exposeCaseReducer(_,E){return u.sliceCaseReducersByName[_]=E,d}};l.forEach(_=>{const E=a[_],S={reducerName:_,type:RI(s,_),createNotation:typeof i.reducers=="function"};jI(E)?BI(S,E,d,e):MI(S,E,d)});function c(){const[_={},E=[],S=void 0]=typeof i.extraReducers=="function"?vE(i.extraReducers):[i.extraReducers],b={..._,...u.sliceCaseReducersByType};return bI(i.initialState,D=>{for(let T in b)D.addCase(T,b[T]);for(let T of u.sliceMatchers)D.addMatcher(T.matcher,T.reducer);for(let T of E)D.addMatcher(T.matcher,T.reducer);S&&D.addDefaultCase(S)})}const h=_=>_,f=new Map,v=new WeakMap;let x;function g(_,E){return x||(x=c()),x(_,E)}function p(){return x||(x=c()),x.getInitialState()}function m(_,E=!1){function S(D){let T=D[_];return typeof T>"u"&&E&&(T=kc(v,S,p)),T}function b(D=h){const T=kc(f,E,()=>new WeakMap);return kc(T,D,()=>{const C={};for(const[I,M]of Object.entries(i.selectors??{}))C[I]=LI(M,D,()=>kc(v,D,p),E);return C})}return{reducerPath:_,getSelectors:b,get selectors(){return b(S)},selectSlice:S}}const w={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:p,...m(o),injectInto(_,{reducerPath:E,...S}={}){const b=E??o;return _.inject({reducerPath:b,reducer:g},S),{...w,...m(b,!0)}}};return w}}function LI(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var PI=II();function OI(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function MI({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!FI(r))throw new Error(Pi(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Tl(t,o):Tl(t))}function jI(t){return t._reducerDefinitionType==="asyncThunk"}function FI(t){return t._reducerDefinitionType==="reducerWithPrepare"}function BI({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Pi(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:d}=n,c=i(t,s,d);r.exposeAction(e,c),o&&r.addCase(c.fulfilled,o),a&&r.addCase(c.pending,a),l&&r.addCase(c.rejected,l),u&&r.addMatcher(c.settled,u),r.exposeCaseReducer(e,{fulfilled:o||Ec,pending:a||Ec,rejected:l||Ec,settled:u||Ec})}function Ec(){}function Pi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var bg={exports:{}},yE={exports:{}},zI=void 0,xE=function(t){return t!==zI&&t!==null},UI=xE,$I={object:!0,function:!0,undefined:!0},WI=function(t){return UI(t)?hasOwnProperty.call($I,typeof t):!1},HI=WI,VI=function(t){if(!HI(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},qI=VI,KI=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!qI(t)},XI=KI,GI=/^\s*class[\s{/}]/,YI=Function.prototype.toString,ZI=function(t){return!(!XI(t)||GI.test(YI.call(t)))},QI=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Ap,kw;function JI(){return kw||(kw=1,Ap=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Ap}var eL=function(){},tL=eL(),Sv=function(t){return t!==tL&&t!==null},Dp,Ew;function nL(){if(Ew)return Dp;Ew=1;var t=Sv,e=Object.keys;return Dp=function(n){return e(t(n)?Object(n):n)},Dp}var Np,_w;function rL(){return _w||(_w=1,Np=JI()()?Object.keys:nL()),Np}var Tp,Cw;function iL(){if(Cw)return Tp;Cw=1;var t=Sv;return Tp=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},Tp}var Rp,Aw;function sL(){if(Aw)return Rp;Aw=1;var t=rL(),e=iL(),n=Math.max;return Rp=function(r,i){var s,o,a=n(arguments.length,2),l;for(r=Object(e(r)),l=function(u){try{r[u]=i[u]}catch(d){s||(s=d)}},o=1;o<a;++o)i=arguments[o],t(i).forEach(l);if(s!==void 0)throw s;return r},Rp}var oL=QI()?Object.assign:sL(),aL=Sv,lL=Array.prototype.forEach,uL=Object.create,cL=function(t,e){var n;for(n in t)e[n]=t[n]},dL=function(t){var e=uL(null);return lL.call(arguments,function(n){aL(n)&&cL(Object(n),e)}),e},Ip="razdwatrzy",fL=function(){return typeof Ip.contains!="function"?!1:Ip.contains("dwa")===!0&&Ip.contains("foo")===!1},Lp,Dw;function hL(){if(Dw)return Lp;Dw=1;var t=String.prototype.indexOf;return Lp=function(e){return t.call(this,e,arguments[1])>-1},Lp}var pL=fL()?String.prototype.contains:hL(),ad=xE,Nw=ZI,wE=oL,bE=dL,Rl=pL,mL=yE.exports=function(t,e){var n,r,i,s,o;return arguments.length<2||typeof t!="string"?(s=e,e=t,t=null):s=arguments[2],ad(t)?(n=Rl.call(t,"c"),r=Rl.call(t,"e"),i=Rl.call(t,"w")):(n=i=!0,r=!1),o={value:e,configurable:n,enumerable:r,writable:i},s?wE(bE(s),o):o};mL.gs=function(t,e,n){var r,i,s,o;return typeof t!="string"?(s=n,n=e,e=t,t=null):s=arguments[3],ad(e)?Nw(e)?ad(n)?Nw(n)||(s=n,n=void 0):n=void 0:(s=e,e=n=void 0):e=void 0,ad(t)?(r=Rl.call(t,"c"),i=Rl.call(t,"e")):(r=!0,i=!1),o={get:e,set:n,configurable:r,enumerable:i},s?wE(bE(s),o):o};var gL=yE.exports,vL=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=gL,r=vL,i=Function.prototype.apply,s=Function.prototype.call,o=Object.create,a=Object.defineProperty,l=Object.defineProperties,u=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},c,h,f,v,x,g,p;c=function(m,w){var _;return r(w),u.call(this,"__ee__")?_=this.__ee__:(_=d.value=o(null),a(this,"__ee__",d),d.value=null),_[m]?typeof _[m]=="object"?_[m].push(w):_[m]=[_[m],w]:_[m]=w,this},h=function(m,w){var _,E;return r(w),E=this,c.call(this,m,_=function(){f.call(E,m,_),i.call(w,this,arguments)}),_.__eeOnceListener__=w,this},f=function(m,w){var _,E,S,b;if(r(w),!u.call(this,"__ee__"))return this;if(_=this.__ee__,!_[m])return this;if(E=_[m],typeof E=="object")for(b=0;S=E[b];++b)(S===w||S.__eeOnceListener__===w)&&(E.length===2?_[m]=E[b?0:1]:E.splice(b,1));else(E===w||E.__eeOnceListener__===w)&&delete _[m];return this},v=function(m){var w,_,E,S,b;if(u.call(this,"__ee__")&&(S=this.__ee__[m],!!S))if(typeof S=="object"){for(_=arguments.length,b=new Array(_-1),w=1;w<_;++w)b[w-1]=arguments[w];for(S=S.slice(),w=0;E=S[w];++w)i.call(E,this,b)}else switch(arguments.length){case 1:s.call(S,this);break;case 2:s.call(S,this,arguments[1]);break;case 3:s.call(S,this,arguments[1],arguments[2]);break;default:for(_=arguments.length,b=new Array(_-1),w=1;w<_;++w)b[w-1]=arguments[w];i.call(S,this,b)}},x={on:c,once:h,off:f,emit:v},g={on:n(c),once:n(h),off:n(f),emit:n(v)},p=l({},g),t.exports=e=function(m){return m==null?o(p):l(Object(m),g)},e.methods=x})(bg,bg.exports);var yL=bg.exports;const yi=Jr(yL);var Rs={},Is={};function xL(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var r=0;r<t.length;r++)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];if(e.call(void 0,i,r,t))return i}}function kv(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var SE=kv({HTML:"text/html",isHTML:function(t){return t===SE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),kE=kv({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===kE.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Is.find=xL;Is.freeze=kv;Is.MIME_TYPE=SE;Is.NAMESPACE=kE;var EE=Is,pi=EE.find,fu=EE.NAMESPACE;function wL(t){return t!==""}function bL(t){return t?t.split(/[\t\n\f\r ]+/).filter(wL):[]}function SL(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function Tw(t){if(!t)return[];var e=bL(t);return Object.keys(e.reduce(SL,{}))}function kL(t){return function(e){return t&&t.indexOf(e)!==-1}}function Bu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function ir(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};var r=i;i.prototype=e.prototype,i=new i,Bu(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var sr={},Xr=sr.ELEMENT_NODE=1,ba=sr.ATTRIBUTE_NODE=2,nf=sr.TEXT_NODE=3,_E=sr.CDATA_SECTION_NODE=4,CE=sr.ENTITY_REFERENCE_NODE=5,EL=sr.ENTITY_NODE=6,AE=sr.PROCESSING_INSTRUCTION_NODE=7,DE=sr.COMMENT_NODE=8,NE=sr.DOCUMENT_NODE=9,TE=sr.DOCUMENT_TYPE_NODE=10,$i=sr.DOCUMENT_FRAGMENT_NODE=11,_L=sr.NOTATION_NODE=12,Bn={},kn={};Bn.INDEX_SIZE_ERR=(kn[1]="Index size error",1);Bn.DOMSTRING_SIZE_ERR=(kn[2]="DOMString size error",2);var Jn=Bn.HIERARCHY_REQUEST_ERR=(kn[3]="Hierarchy request error",3);Bn.WRONG_DOCUMENT_ERR=(kn[4]="Wrong document",4);Bn.INVALID_CHARACTER_ERR=(kn[5]="Invalid character",5);Bn.NO_DATA_ALLOWED_ERR=(kn[6]="No data allowed",6);Bn.NO_MODIFICATION_ALLOWED_ERR=(kn[7]="No modification allowed",7);var RE=Bn.NOT_FOUND_ERR=(kn[8]="Not found",8);Bn.NOT_SUPPORTED_ERR=(kn[9]="Not supported",9);var Rw=Bn.INUSE_ATTRIBUTE_ERR=(kn[10]="Attribute in use",10);Bn.INVALID_STATE_ERR=(kn[11]="Invalid state",11);Bn.SYNTAX_ERR=(kn[12]="Syntax error",12);Bn.INVALID_MODIFICATION_ERR=(kn[13]="Invalid modification",13);Bn.NAMESPACE_ERR=(kn[14]="Invalid namespace",14);Bn.INVALID_ACCESS_ERR=(kn[15]="Invalid access",15);function an(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,kn[t]),this.message=kn[t],Error.captureStackTrace&&Error.captureStackTrace(this,an);return n.code=t,e&&(this.message=this.message+": "+e),n}an.prototype=Error.prototype;Bu(Bn,an);function Oi(){}Oi.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)ea(this[r],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Sa(t,e){this._node=t,this._refresh=e,Ev(this)}function Ev(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(WE(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var r=n.length;r in t;r++)Object.prototype.hasOwnProperty.call(t,r)&&delete t[r];Bu(n,t),t._inc=e}}Sa.prototype.item=function(t){return Ev(this),this[t]||null};ir(Sa,Oi);function rf(){}function IE(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function Iw(t,e,n,r){if(r?e[IE(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&OE(i,t,r),CL(i,t,n))}}function Lw(t,e,n){var r=IE(e,n);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var s=t.ownerDocument;s&&(OE(s,t,n),n.ownerElement=null)}}else throw new an(RE,new Error(t.tagName+"@"+n))}rf.prototype={length:0,item:Oi.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new an(Rw);var n=this.getNamedItem(t.nodeName);return Iw(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new an(Rw);return n=this.getNamedItemNS(t.namespaceURI,t.localName),Iw(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return Lw(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return Lw(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function LE(){}LE.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var r=new zu;if(r.implementation=this,r.childNodes=new Oi,r.doctype=n||null,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new hh;return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=n||"",r}};function jt(){}jt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return sf(this,t,e)},replaceChild:function(t,e){sf(this,t,e,jE),e&&this.removeChild(e)},removeChild:function(t){return ME(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return Sg(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==nf&&t.nodeType==nf?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===t)return r}e=e.nodeType==ba?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==ba?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function PE(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Bu(sr,jt);Bu(sr,jt.prototype);function hu(t,e){if(e(t))return!0;if(t=t.firstChild)do if(hu(t,e))return!0;while(t=t.nextSibling)}function zu(){this.ownerDocument=this}function CL(t,e,n){t&&t._inc++;var r=n.namespaceURI;r===fu.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function OE(t,e,n,r){t&&t._inc++;var i=n.namespaceURI;i===fu.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function _v(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s,delete r[r.length]}}}function ME(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,_v(t.ownerDocument,t),e}function AL(t){return t&&(t.nodeType===jt.DOCUMENT_NODE||t.nodeType===jt.DOCUMENT_FRAGMENT_NODE||t.nodeType===jt.ELEMENT_NODE)}function DL(t){return t&&(mi(t)||Cv(t)||Wi(t)||t.nodeType===jt.DOCUMENT_FRAGMENT_NODE||t.nodeType===jt.COMMENT_NODE||t.nodeType===jt.PROCESSING_INSTRUCTION_NODE)}function Wi(t){return t&&t.nodeType===jt.DOCUMENT_TYPE_NODE}function mi(t){return t&&t.nodeType===jt.ELEMENT_NODE}function Cv(t){return t&&t.nodeType===jt.TEXT_NODE}function Pw(t,e){var n=t.childNodes||[];if(pi(n,mi)||Wi(e))return!1;var r=pi(n,Wi);return!(e&&r&&n.indexOf(r)>n.indexOf(e))}function Ow(t,e){var n=t.childNodes||[];function r(s){return mi(s)&&s!==e}if(pi(n,r))return!1;var i=pi(n,Wi);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function NL(t,e,n){if(!AL(t))throw new an(Jn,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new an(RE,"child not in parent");if(!DL(e)||Wi(e)&&t.nodeType!==jt.DOCUMENT_NODE)throw new an(Jn,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function TL(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===jt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(mi);if(s.length>1||pi(i,Cv))throw new an(Jn,"More than one element or text in fragment");if(s.length===1&&!Pw(t,n))throw new an(Jn,"Element in fragment can not be inserted before doctype")}if(mi(e)&&!Pw(t,n))throw new an(Jn,"Only one element can be added and only after doctype");if(Wi(e)){if(pi(r,Wi))throw new an(Jn,"Only one doctype is allowed");var o=pi(r,mi);if(n&&r.indexOf(o)<r.indexOf(n))throw new an(Jn,"Doctype can only be inserted before an element");if(!n&&o)throw new an(Jn,"Doctype can not be appended since element is present")}}function jE(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===jt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(mi);if(s.length>1||pi(i,Cv))throw new an(Jn,"More than one element or text in fragment");if(s.length===1&&!Ow(t,n))throw new an(Jn,"Element in fragment can not be inserted before doctype")}if(mi(e)&&!Ow(t,n))throw new an(Jn,"Only one element can be added and only after doctype");if(Wi(e)){let l=function(u){return Wi(u)&&u!==n};var a=l;if(pi(r,l))throw new an(Jn,"Only one doctype is allowed");var o=pi(r,mi);if(n&&r.indexOf(o)<r.indexOf(n))throw new an(Jn,"Doctype can only be inserted before an element")}}function sf(t,e,n,r){NL(t,e,n),t.nodeType===jt.DOCUMENT_NODE&&(r||TL)(t,e,n);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===$i){var s=e.firstChild;if(s==null)return e;var o=e.lastChild}else s=o=e;var a=n?n.previousSibling:t.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:t.firstChild=s,n==null?t.lastChild=o:n.previousSibling=o;do s.parentNode=t;while(s!==o&&(s=s.nextSibling));return _v(t.ownerDocument||t,t),e.nodeType==$i&&(e.firstChild=e.lastChild=null),e}function RL(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,_v(t.ownerDocument,t,e),e}zu.prototype={nodeName:"#document",nodeType:NE,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==$i){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return sf(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Xr&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),ME(this,t)},replaceChild:function(t,e){sf(this,t,e,jE),t.ownerDocument=this,e&&this.removeChild(e),mi(t)&&(this.documentElement=t)},importNode:function(t,e){return $E(this,t,e)},getElementById:function(t){var e=null;return hu(this.documentElement,function(n){if(n.nodeType==Xr&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=Tw(t);return new Sa(this,function(n){var r=[];return e.length>0&&hu(n.documentElement,function(i){if(i!==n&&i.nodeType===Xr){var s=i.getAttribute("class");if(s){var o=t===s;if(!o){var a=Tw(s);o=e.every(kL(a))}o&&r.push(i)}}}),r})},createElement:function(t){var e=new lo;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Oi;var n=e.attributes=new rf;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new ph;return t.ownerDocument=this,t.childNodes=new Oi,t},createTextNode:function(t){var e=new Av;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Dv;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Nv;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Rv;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new of;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Tv;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new lo,r=e.split(":"),i=n.attributes=new rf;return n.childNodes=new Oi,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new of,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}};ir(zu,jt);function lo(){this._nsMap={}}lo.prototype={nodeType:Xr,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===$i?this.insertBefore(t,null):RL(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Sa(this,function(e){var n=[];return hu(e,function(r){r!==e&&r.nodeType==Xr&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new Sa(this,function(n){var r=[];return hu(n,function(i){i!==n&&i.nodeType===Xr&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};zu.prototype.getElementsByTagName=lo.prototype.getElementsByTagName;zu.prototype.getElementsByTagNameNS=lo.prototype.getElementsByTagNameNS;ir(lo,jt);function of(){}of.prototype.nodeType=ba;ir(of,jt);function Uu(){}Uu.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(kn[Jn])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),i=this.data.substring(t+e);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}};ir(Uu,jt);function Av(){}Av.prototype={nodeName:"#text",nodeType:nf,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};ir(Av,Uu);function Dv(){}Dv.prototype={nodeName:"#comment",nodeType:DE};ir(Dv,Uu);function Nv(){}Nv.prototype={nodeName:"#cdata-section",nodeType:_E};ir(Nv,Uu);function hh(){}hh.prototype.nodeType=TE;ir(hh,jt);function FE(){}FE.prototype.nodeType=_L;ir(FE,jt);function BE(){}BE.prototype.nodeType=EL;ir(BE,jt);function Tv(){}Tv.prototype.nodeType=CE;ir(Tv,jt);function ph(){}ph.prototype.nodeName="#document-fragment";ph.prototype.nodeType=$i;ir(ph,jt);function Rv(){}Rv.prototype.nodeType=AE;ir(Rv,jt);function zE(){}zE.prototype.serializeToString=function(t,e,n){return UE.call(t,e,n)};jt.prototype.toString=UE;function UE(t,e){var n=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,s=r.namespaceURI;if(s&&i==null){var i=r.lookupPrefix(s);if(i==null)var o=[{namespace:s,prefix:null}]}return ea(this,n,t,e,o),n.join("")}function Mw(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!i||r==="xml"&&i===fu.XML||i===fu.XMLNS)return!1;for(var s=n.length;s--;){var o=n[s];if(o.prefix===r)return o.namespace!==i}return!0}function Pp(t,e,n){t.push(" ",e,'="',n.replace(/[<&"]/g,PE),'"')}function ea(t,e,n,r,i){if(i||(i=[]),r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Xr:var s=t.attributes,o=s.length,p=t.firstChild,a=t.tagName;n=fu.isHTML(t.namespaceURI)||n;var l=a;if(!n&&!t.prefix&&t.namespaceURI){for(var u,d=0;d<s.length;d++)if(s.item(d).name==="xmlns"){u=s.item(d).value;break}if(!u)for(var c=i.length-1;c>=0;c--){var h=i[c];if(h.prefix===""&&h.namespace===t.namespaceURI){u=h.namespace;break}}if(u!==t.namespaceURI)for(var c=i.length-1;c>=0;c--){var h=i[c];if(h.namespace===t.namespaceURI){h.prefix&&(l=h.prefix+":"+a);break}}}e.push("<",l);for(var f=0;f<o;f++){var v=s.item(f);v.prefix=="xmlns"?i.push({prefix:v.localName,namespace:v.value}):v.nodeName=="xmlns"&&i.push({prefix:"",namespace:v.value})}for(var f=0;f<o;f++){var v=s.item(f);if(Mw(v,n,i)){var x=v.prefix||"",g=v.namespaceURI;Pp(e,x?"xmlns:"+x:"xmlns",g),i.push({prefix:x,namespace:g})}ea(v,e,n,r,i)}if(a===l&&Mw(t,n,i)){var x=t.prefix||"",g=t.namespaceURI;Pp(e,x?"xmlns:"+x:"xmlns",g),i.push({prefix:x,namespace:g})}if(p||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),n&&/^script$/i.test(a))for(;p;)p.data?e.push(p.data):ea(p,e,n,r,i.slice()),p=p.nextSibling;else for(;p;)ea(p,e,n,r,i.slice()),p=p.nextSibling;e.push("</",l,">")}else e.push("/>");return;case NE:case $i:for(var p=t.firstChild;p;)ea(p,e,n,r,i.slice()),p=p.nextSibling;return;case ba:return Pp(e,t.name,t.value);case nf:return e.push(t.data.replace(/[<&]/g,PE).replace(/]]>/g,"]]&gt;"));case _E:return e.push("<![CDATA[",t.data,"]]>");case DE:return e.push("<!--",t.data,"-->");case TE:var m=t.publicId,w=t.systemId;if(e.push("<!DOCTYPE ",t.name),m)e.push(" PUBLIC ",m),w&&w!="."&&e.push(" ",w),e.push(">");else if(w&&w!=".")e.push(" SYSTEM ",w,">");else{var _=t.internalSubset;_&&e.push(" [",_,"]"),e.push(">")}return;case AE:return e.push("<?",t.target," ",t.data,"?>");case CE:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function $E(t,e,n){var r;switch(e.nodeType){case Xr:r=e.cloneNode(!1),r.ownerDocument=t;case $i:break;case ba:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild($E(t,i,n)),i=i.nextSibling;return r}function Sg(t,e,n){var r=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new Oi),r.ownerDocument=t,r.nodeType){case Xr:var o=e.attributes,a=r.attributes=new rf,l=o.length;a._ownerElement=r;for(var u=0;u<l;u++)r.setAttributeNode(Sg(t,o.item(u),!0));break;case ba:n=!0}if(n)for(var d=e.firstChild;d;)r.appendChild(Sg(t,d,n)),d=d.nextSibling;return r}function WE(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Xr:case $i:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var mX=t;Object.defineProperty(Sa.prototype,"length",{get:function(){return Ev(this),this.$$length}}),Object.defineProperty(jt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Xr:case $i:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),WE=function(e,n,r){e["$$"+n]=r}}}catch{}Rs.DocumentType=hh;Rs.DOMException=an;Rs.DOMImplementation=LE;Rs.Element=lo;Rs.Node=jt;Rs.NodeList=Oi;Rs.XMLSerializer=zE;var $u={},HE={};(function(t){var e=Is.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(HE);var Iv={},pu=Is.NAMESPACE,kg=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,jw=new RegExp("[\\-\\.0-9"+kg.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Fw=new RegExp("^"+kg.source+jw.source+"*(?::"+kg.source+jw.source+"*)?$"),Xa=0,ts=1,wo=2,Ga=3,bo=4,So=5,Ya=6,_c=7;function ka(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ka)}ka.prototype=new Error;ka.prototype.name=ka.name;function VE(){}VE.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),qE(e,e={}),IL(t,e,n,r,this.errorHandler),r.endDocument()}};function IL(t,e,n,r,i){function s(K){if(K>65535){K-=65536;var G=55296+(K>>10),$=56320+(K&1023);return String.fromCharCode(G,$)}else return String.fromCharCode(K)}function o(K){var G=K.slice(1,-1);return G in n?n[G]:G.charAt(0)==="#"?s(parseInt(G.substr(1).replace("x","0x"))):(i.error("entity not found:"+K),K)}function a(K){if(K>x){var G=t.substring(x,K).replace(/&#?\w+;/g,o);h&&l(x),r.characters(G,0,K-x),x=K}}function l(K,G){for(;K>=d&&(G=c.exec(t));)u=G.index,d=u+G[0].length,h.lineNumber++;h.columnNumber=K-u+1}for(var u=0,d=0,c=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,f=[{currentNSMap:e}],v={},x=0;;){try{var g=t.indexOf("<",x);if(g<0){if(!t.substr(x).match(/^\s*$/)){var p=r.doc,m=p.createTextNode(t.substr(x));p.appendChild(m),r.currentElement=m}return}switch(g>x&&a(g),t.charAt(g+1)){case"/":var I=t.indexOf(">",g+3),w=t.substring(g+2,I).replace(/[ \t\n\r]+$/g,""),_=f.pop();I<0?(w=t.substring(g+2).replace(/[\s<].*/,""),i.error("end tag name: "+w+" is not complete:"+_.tagName),I=g+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),i.error("end tag name: "+w+" maybe not complete"),I=g+1+w.length);var E=_.localNSMap,S=_.tagName==w,b=S||_.tagName&&_.tagName.toLowerCase()==w.toLowerCase();if(b){if(r.endElement(_.uri,_.localName,w),E)for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&r.endPrefixMapping(D);S||i.fatalError("end tag name: "+w+" is not match the current start tagName:"+_.tagName)}else f.push(_);I++;break;case"?":h&&l(g),I=jL(t,g,r);break;case"!":h&&l(g),I=ML(t,g,r,i);break;default:h&&l(g);var T=new KE,C=f[f.length-1].currentNSMap,I=LL(t,g,T,C,o,i),M=T.length;if(!T.closed&&OL(t,I,T.tagName,v)&&(T.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),h&&M){for(var H=Bw(h,{}),q=0;q<M;q++){var W=T[q];l(W.offset),W.locator=Bw(h,{})}r.locator=H,zw(T,r,C)&&f.push(T),r.locator=h}else zw(T,r,C)&&f.push(T);pu.isHTML(T.uri)&&!T.closed?I=PL(t,I,T.tagName,o,r):I++}}catch(K){if(K instanceof ka)throw K;i.error("element parse error: "+K),I=-1}I>x?x=I:a(Math.max(g,x)+1)}}function Bw(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function LL(t,e,n,r,i,s){function o(h,f,v){n.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),n.addValue(h,f,v)}for(var a,l,u=++e,d=Xa;;){var c=t.charAt(u);switch(c){case"=":if(d===ts)a=t.slice(e,u),d=Ga;else if(d===wo)d=Ga;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Ga||d===ts)if(d===ts&&(s.warning('attribute value must after "="'),a=t.slice(e,u)),e=u+1,u=t.indexOf(c,e),u>0)l=t.slice(e,u).replace(/&#?\w+;/g,i),o(a,l,e-1),d=So;else throw new Error("attribute value no end '"+c+"' match");else if(d==bo)l=t.slice(e,u).replace(/&#?\w+;/g,i),o(a,l,e),s.warning('attribute "'+a+'" missed start quot('+c+")!!"),e=u+1,d=So;else throw new Error('attribute value must after "="');break;case"/":switch(d){case Xa:n.setTagName(t.slice(e,u));case So:case Ya:case _c:d=_c,n.closed=!0;case bo:case ts:break;case wo:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),d==Xa&&n.setTagName(t.slice(e,u)),u;case">":switch(d){case Xa:n.setTagName(t.slice(e,u));case So:case Ya:case _c:break;case bo:case ts:l=t.slice(e,u),l.slice(-1)==="/"&&(n.closed=!0,l=l.slice(0,-1));case wo:d===wo&&(l=a),d==bo?(s.warning('attribute "'+l+'" missed quot(")!'),o(a,l.replace(/&#?\w+;/g,i),e)):((!pu.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),o(l,l,e));break;case Ga:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(d){case Xa:n.setTagName(t.slice(e,u)),d=Ya;break;case ts:a=t.slice(e,u),d=wo;break;case bo:var l=t.slice(e,u).replace(/&#?\w+;/g,i);s.warning('attribute "'+l+'" missed quot(")!!'),o(a,l,e);case So:d=Ya;break}else switch(d){case wo:n.tagName,(!pu.isHTML(r[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,e),e=u,d=ts;break;case So:s.warning('attribute space is required"'+a+'"!!');case Ya:d=ts,e=u;break;case Ga:d=bo,e=u;break;case _c:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function zw(t,e,n){for(var r=t.tagName,i=null,c=t.length;c--;){var s=t[c],o=s.qName,a=s.value,h=o.indexOf(":");if(h>0)var l=s.prefix=o.slice(0,h),u=o.slice(h+1),d=l==="xmlns"&&u;else u=o,l=null,d=o==="xmlns"&&"";s.localName=u,d!==!1&&(i==null&&(i={},qE(n,n={})),n[d]=i[d]=a,s.uri=pu.XMLNS,e.startPrefixMapping(d,a))}for(var c=t.length;c--;){s=t[c];var l=s.prefix;l&&(l==="xml"&&(s.uri=pu.XML),l!=="xmlns"&&(s.uri=n[l||""]))}var h=r.indexOf(":");h>0?(l=t.prefix=r.slice(0,h),u=t.localName=r.slice(h+1)):(l=null,u=t.localName=r);var f=t.uri=n[l||""];if(e.startElement(f,u,r,t),t.closed){if(e.endElement(f,u,r),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=n,t.localNSMap=i,!0}function PL(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,r),i.characters(o,0,o.length),s)}return e+1}function OL(t,e,n,r){var i=r[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function qE(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function ML(t,e,n,r){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var o=FL(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],u=!1,d=!1;a>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],d=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(d=o[3][0]));var c=o[a-1];return n.startDTD(l,u,d),n.endDTD(),c.index+c[0].length}}return-1}function jL(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function KE(){this.attributeNames={}}KE.prototype={setTagName:function(t){if(!Fw.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!Fw.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function FL(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}Iv.XMLReader=VE;Iv.ParseError=ka;var BL=Is,Lv=Rs,Uw=HE,XE=Iv,zL=Lv.DOMImplementation,$w=BL.NAMESPACE,UL=XE.ParseError,$L=XE.XMLReader;function GE(t){this.options=t||{locator:{}}}GE.prototype.parseFromString=function(t,e){var n=this.options,r=new $L,i=n.domBuilder||new Wu,s=n.errorHandler,o=n.locator,a=n.xmlns||{},l=/\/x?html?$/.test(e),u=l?Uw.HTML_ENTITIES:Uw.XML_ENTITIES;return o&&i.setDocumentLocator(o),r.errorHandler=WL(s,i,o),r.domBuilder=n.domBuilder||i,l&&(a[""]=$w.HTML),a.xml=a.xml||$w.XML,t&&typeof t=="string"?r.parse(t,a,u):r.errorHandler.error("invalid doc source"),i.doc};function WL(t,e,n){if(!t){if(e instanceof Wu)return e;t=e}var r={},i=t instanceof Function;n=n||{};function s(o){var a=t[o];!a&&i&&(a=t.length==2?function(l){t(o,l)}:t),r[o]=a&&function(l){a("[xmldom "+o+"]	"+l+Eg(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function Wu(){this.cdata=!1}function ko(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Wu.prototype={startDocument:function(){this.doc=new zL().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),o=r.length;Cc(this,s),this.currentElement=s,this.locator&&ko(this.locator,s);for(var a=0;a<o;a++){var t=r.getURI(a),l=r.getValue(a),n=r.getQName(a),u=i.createAttributeNS(t,n);this.locator&&ko(r.getLocator(a),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&ko(this.locator,n),Cc(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=Ww.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&ko(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=Ww.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&ko(this.locator,r),Cc(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&ko(this.locator,i),Cc(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,Eg(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Eg(this.locator))},fatalError:function(t){throw new UL(t,this.locator)}};function Eg(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function Ww(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Wu.prototype[t]=function(){return null}});function Cc(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}$u.__DOMHandler=Wu;$u.DOMParser=GE;$u.DOMImplementation=Lv.DOMImplementation;$u.XMLSerializer=Lv.XMLSerializer;var YE=$u.DOMParser;const Pv=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,HL=1,VL=3,ZE=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function mh(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?r:r&7|8).toString(16)});return e}function qL(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function QE(t){return!!(t&&t.nodeType==1)}function nn(t){return!isNaN(parseFloat(t))&&isFinite(t)}function JE(t){let e=parseFloat(t);return nn(t)===!1?!1:typeof t=="string"&&t.indexOf(".")>-1?!0:Math.floor(e)!==e}function Oo(t){var e=["Webkit","webkit","Moz","O","ms"],n=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=t.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return t;for(var s=0;s<i;s++)if(typeof document.body.style[n[s]+r]<"u")return n[s]+r;return t}function e_(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)t[i]===void 0&&(t[i]=r[i])}return t}function Tn(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){n&&Object.getOwnPropertyNames(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}),t}function KL(t,e,n){var r=Ea(t,e,n);return e.splice(r,0,t),r}function Ea(t,e,n,r,i){var s=r||0,o=i||e.length,a=parseInt(s+(o-s)/2),l;return n||(n=function(u,d){if(u>d)return 1;if(u<d)return-1;if(u==d)return 0}),o-s<=0?a:(l=n(e[a],t),o-s===1?l>=0?a:a+1:l===0?a:l===-1?Ea(t,e,n,a,o):Ea(t,e,n,s,a))}function af(t,e,n,r,i){var s=r||0,o=i||e.length,a=parseInt(s+(o-s)/2),l;return n||(n=function(u,d){if(u>d)return 1;if(u<d)return-1;if(u==d)return 0}),o-s<=0?-1:(l=n(e[a],t),o-s===1?l===0?a:-1:l===0?a:l===-1?af(t,e,n,a,o):af(t,e,n,s,a))}function ld(t){var e=window.getComputedStyle(t),n=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(o){i+=parseFloat(e[o])||0}),r.forEach(function(o){s+=parseFloat(e[o])||0}),{height:s,width:i}}function lf(t){var e=window.getComputedStyle(t),n=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(o){i+=parseFloat(e[o])||0}),r.forEach(function(o){s+=parseFloat(e[o])||0}),{height:s,width:i}}function _g(t){let e,n=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){let r=n.createRange();r.selectNodeContents(t),e=r.getBoundingClientRect()}else e=t.getBoundingClientRect();return e}function uf(){var t=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function Ov(t,e){for(var n=t.parentNode,r=n.childNodes,i,s=-1,o=0;o<r.length&&(i=r[o],i.nodeType===e&&s++,i!=t);o++);return s}function XL(t){return Ov(t,VL)}function t_(t){return Ov(t,HL)}function mu(t){return["xml","opf","ncx"].indexOf(t)>-1}function n_(t,e){return new Blob([t],{type:e})}function cf(t,e){var n,r=n_(t,e);return n=ZE.createObjectURL(r),n}function r_(t){return ZE.revokeObjectURL(t)}function Cg(t,e){var n,r;if(typeof t=="string")return n=btoa(t),r="data:"+e+";base64,"+n,r}function i_(t){return Object.prototype.toString.call(t).slice(8,-1)}function gi(t,e,n){var r,i;return typeof DOMParser>"u"||n?i=YE:i=DOMParser,t.charCodeAt(0)===65279&&(t=t.slice(1)),r=new i().parseFromString(t,e),r}function zt(t,e){var n;if(!t)throw new Error("No Element Provided");if(typeof t.querySelector<"u")return t.querySelector(e);if(n=t.getElementsByTagName(e),n.length)return n[0]}function Hi(t,e){return typeof t.querySelector<"u"?t.querySelectorAll(e):t.getElementsByTagName(e)}function Mo(t,e,n){var r,i;if(typeof t.querySelector<"u"){e+="[";for(var s in n)e+=s+"~='"+n[s]+"'";return e+="]",t.querySelector(e)}else if(r=t.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(o){for(var a in n)if(o.getAttribute(a)===n[a])return!0;return!1}),i)return i[0]}function df(t,e){var n=t.ownerDocument||t;typeof n.createTreeWalker<"u"?s_(t,e,NodeFilter.SHOW_TEXT):Mv(t,function(r){r&&r.nodeType===3&&e(r)})}function s_(t,e,n){var r=document.createTreeWalker(t,n,null,!1);let i;for(;i=r.nextNode();)e(i)}function Mv(t,e){if(e(t))return!0;if(t=t.firstChild,t)do{if(Mv(t,e))return!0;t=t.nextSibling}while(t)}function o_(t){return new Promise(function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onloadend=function(){e(r.result)}})}function wt(){this.resolve=null,this.reject=null,this.id=mh(),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),Object.freeze(this)}function ff(t,e,n){var r;if(typeof t.querySelector<"u"&&(r=t.querySelector(`${e}[*|type="${n}"]`)),!r||r.length===0){r=Hi(t,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===n||r[i].getAttribute("epub:type")===n)return r[i]}else return r}function Ag(t){for(var e=[],n=t.childNodes,r=0;r<n.length;r++){let i=n[r];i.nodeType===1&&e.push(i)}return e}function Dg(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}function jo(t,e,n){for(var r=[],i=t.childNodes,s=0;s<i.length;s++){let o=i[s];if(o.nodeType===1&&o.nodeName.toLowerCase()===e){if(n)return o;r.push(o)}}if(!n)return r}function GL(t,e){let n;if(!(t===null||e===""))for(n=t.parentNode;n.nodeType===1;){if(n.tagName.toLowerCase()===e)return n;n=n.parentNode}}class a_{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,n){this.startContainer=e,this.startOffset=n,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,n){this.endContainer=e,this.endOffset=n,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let n=e.parentNode,r=Array.prototype.indexOf.call(n.childNodes,e);this.setStart(n,r),this.setEnd(n,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let n=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,n)}_commonAncestorContainer(e,n){var r=Dg(e||this.startContainer),i=Dg(n||this.endContainer);if(r[0]==i[0]){for(var s=0;s<r.length;s++)if(r[s]!=i[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const YL=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:a_,blob2base64:o_,borders:lf,bounds:ld,createBase64Url:Cg,createBlob:n_,createBlobUrl:cf,defaults:e_,defer:wt,documentHeight:qL,extend:Tn,filterChildren:jo,findChildren:Ag,getParentByTagName:GL,indexOfElementNode:t_,indexOfNode:Ov,indexOfSorted:af,indexOfTextNode:XL,insert:KL,isElement:QE,isFloat:JE,isNumber:nn,isXml:mu,locationOf:Ea,nodeBounds:_g,parents:Dg,parse:gi,prefixed:Oo,qs:zt,qsa:Hi,qsp:Mo,querySelectorByType:ff,requestAnimationFrame:Pv,revokeBlobUrl:r_,sprint:df,treeWalker:s_,type:i_,uuid:mh,walk:Mv,windowBounds:uf},Symbol.toStringTag,{value:"Module"}));if(!l_)var l_={cwd:function(){return"/"}};function ri(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+t)}function Hw(t,e){for(var n="",r=-1,i=0,s,o=0;o<=t.length;++o){if(o<t.length)s=t.charCodeAt(o);else{if(s===47)break;s=47}if(s===47){if(!(r===o-1||i===1))if(r!==o-1&&i===2){if(n.length<2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){for(var a=n.length-1,l=a;l>=0&&n.charCodeAt(l)!==47;--l);if(l!==a){l===-1?n="":n=n.slice(0,l),r=o,i=0;continue}}else if(n.length===2||n.length===1){n="",r=o,i=0;continue}}e&&(n.length>0?n+="/..":n="..")}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o);r=o,i=0}else s===46&&i!==-1?++i:i=-1}return n}function ZL(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var ud={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=l_.cwd()),s=r),ri(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=Hw(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(ri(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Hw(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return ri(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];ri(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":ud.normalize(e)},relative:function(e,n){if(ri(e),ri(n),e===n||(e=ud.resolve(e),n=ud.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,u=s<l?s:l,d=-1,c=0;c<=u;++c){if(c===u){if(l>u){if(n.charCodeAt(o+c)===47)return n.slice(o+c+1);if(c===0)return n.slice(o+c)}else s>u&&(e.charCodeAt(r+c)===47?d=c:c===0&&(d=0));break}var h=e.charCodeAt(r+c),f=n.charCodeAt(o+c);if(h!==f)break;h===47&&(d=c)}var v="";for(c=r+d+1;c<=i;++c)(c===i||e.charCodeAt(c)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+n.slice(o+d):(o+=d,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(ri(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!s){i=o;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ri(e);var r=0,i=-1,s=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){r=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(u===n.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){r=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(r,i)}},extname:function(e){ri(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return ZL("/",e)},parse:function(e){ri(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,u=!0,d=e.length-1,c=0;d>=s;--d){if(r=e.charCodeAt(d),r===47){if(!u){a=d+1;break}continue}l===-1&&(u=!1,l=d+1),r===46?o===-1?o=d:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||l===-1||c===0||c===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&i?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",posix:null},QL=ud;const hs=Jr(QL);class Vi{constructor(e){var n,r;n=e.indexOf("://"),n>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return hs.parse(e)}isAbsolute(e){return hs.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return hs.resolve(this.directory,e)}relative(e){var n=e&&e.indexOf("://")>-1;return n?e:hs.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Fr{constructor(e,n){var r=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=n,!r&&n!==!1&&typeof n!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new Vi(this.base),i=s.resolve(i))}this.Path=new Vi(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var n=e.indexOf("://")>-1,r;return n?e:(r=hs.resolve(this.directory,e),this.origin+r)}relative(e){return hs.relative(e,this.directory)}toString(){return this.href}}const Eo=1,Er=3,JL=9;class bt{constructor(e,n,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof bt))return new bt(e,n,r);if(typeof n=="string"?this.base=this.parseComponent(n):typeof n=="object"&&n.steps&&(this.base=n),i=this.checkType(e),i==="string")return this.str=e,Tn(this,this.parse(e));if(i==="range")return Tn(this,this.fromRange(e,this.base,r));if(i==="node")return Tn(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(i_(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof bt?"EpubCFI":!1}parse(e){var n={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(n.base=this.parseComponent(r),i=this.getPathComponent(e),n.path=this.parseComponent(i),s=this.getRange(e),s&&(n.range=!0,n.start=this.parseComponent(s[0]),n.end=this.parseComponent(s[1])),n.spinePos=n.base.steps[1].index,n):{spinePos:-1})}parseComponent(e){var n={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),s;return r.length>1&&(s=r[1],n.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),n.steps=i.map((function(o){return this.parseStep(o)}).bind(this)),n}parseStep(e){var n,r,i,s,o;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(o=s[1]),r=parseInt(e),!isNaN(r))return r%2===0?(n="element",i=r/2-1):(n="text",i=(r-1)/2),{type:n,index:i,id:o||null}}parseTerminal(e){var n,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(n=parseInt(e.split("[")[0]),r=i[1]):n=parseInt(e),nn(n)||(n=null),{offset:n,assertion:r}}getChapterComponent(e){var n=e.split("!");return n[0]}getPathComponent(e){var n=e.split("!");if(n[1])return n[1].split(",")[0]}getRange(e){var n=e.split(",");return n.length===3?[n[1],n[2]]:!1}getCharecterOffsetComponent(e){var n=e.split(":");return n[1]||""}joinSteps(e){return e?e.map(function(n){var r="";return n.type==="element"&&(r+=(n.index+1)*2),n.type==="text"&&(r+=1+2*n.index),n.id&&(r+="["+n.id+"]"),r}).join("/"):""}segmentString(e){var n="/";return n+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(n+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(n+="["+e.terminal.assertion+"]"),n}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,n){var r,i,s,o;if(typeof e=="string"&&(e=new bt(e)),typeof n=="string"&&(n=new bt(n)),e.spinePos>n.spinePos)return 1;if(e.spinePos<n.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),n.range?(i=n.path.steps.concat(n.start.steps),o=n.start.terminal):(i=n.path.steps,o=n.path.terminal);for(var a=0;a<r.length;a++){if(!r[a])return-1;if(!i[a]||r[a].index>i[a].index)return 1;if(r[a].index<i[a].index)return-1}return r.length<i.length?-1:s.offset>o.offset?1:s.offset<o.offset?-1:0}step(e){var n=e.nodeType===Er?"text":"element";return{id:e.id,tagName:e.tagName,type:n,index:this.position(e)}}filteredStep(e,n){var r=this.filter(e,n),i;if(r)return i=r.nodeType===Er?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,n)}}pathTo(e,n,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,o;s&&s.parentNode&&s.parentNode.nodeType!=JL;)r?o=this.filteredStep(s,r):o=this.step(s),o&&i.steps.unshift(o),s=s.parentNode;return n!=null&&n>=0&&(i.terminal.offset=n,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,n){return!e||!n?!1:e.index===n.index&&e.id===n.id&&e.type===n.type}fromRange(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,o=e.endContainer,a=e.startOffset,l=e.endOffset,u=!1;if(r&&(u=s.ownerDocument.querySelector("."+r)!=null),typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),e.collapsed)u&&(a=this.patchOffset(s,a,r)),i.path=this.pathTo(s,a,r);else{i.range=!0,u&&(a=this.patchOffset(s,a,r)),i.start=this.pathTo(s,a,r),u&&(l=this.patchOffset(o,l,r)),i.end=this.pathTo(o,l,r),i.path={steps:[],terminal:null};var d=i.start.steps.length,c;for(c=0;c<d&&this.equalStep(i.start.steps[c],i.end.steps[c]);c++)c===d-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[c]),i.range=!1):i.path.steps.push(i.start.steps[c]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),i.path=this.pathTo(e,null,r),i}filter(e,n){var r,i,s,o,a,l=!1;return e.nodeType===Er?(l=!0,s=e.parentNode,r=e.parentNode.classList.contains(n)):(l=!1,r=e.classList.contains(n)),r&&l?(o=s.previousSibling,a=s.nextSibling,o&&o.nodeType===Er?i=o:a&&a.nodeType===Er&&(i=a),i||e):r&&!l?!1:e}patchOffset(e,n,r){if(e.nodeType!=Er)throw new Error("Anchor must be a text node");var i=e,s=n;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===Eo)if(i.previousSibling.classList.contains(r))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,n,r){var i={},s=-1,o,a=e.length,l,u;for(o=0;o<a;o++)l=e[o].nodeType,l===Eo&&e[o].classList.contains(r)&&(l=Er),o>0&&l===Er&&u===Er?i[o]=s:n===l&&(s=s+1,i[o]=s),u=l;return i}position(e){var n,r;return e.nodeType===Eo?(n=e.parentNode.children,n||(n=Ag(e.parentNode)),r=Array.prototype.indexOf.call(n,e)):(n=this.textNodes(e.parentNode),r=n.indexOf(e)),r}filteredPosition(e,n){var r,i,s;return e.nodeType===Eo?(r=e.parentNode.children,s=this.normalizedMap(r,Eo,n)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(n)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,Er,n)),i=Array.prototype.indexOf.call(r,e),s[i]}stepsToXpath(e){var n=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?n.push("text()["+i+"]"):n.push("*["+i+"]")}),n.join("/")}stepsToQuerySelector(e){var n=["html"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("#"+r.id):r.type==="text"||n.push("*:nth-child("+i+")")}),n.join(">")}textNodes(e,n){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===Er?!0:!!(n&&r.classList.contains(n))})}walkToNode(e,n,r){var i=n||document,s=i.documentElement,o,a,l=e.length,u;for(u=0;u<l&&(a=e[u],a.type==="element"?a.id?s=i.getElementById(a.id):(o=s.children||Ag(s),s=o[a.index]):a.type==="text"&&(s=this.textNodes(s,r)[a.index]),!!s);u++);return s}findNode(e,n,r){var i=n||document,s,o;return!r&&typeof i.evaluate<"u"?(o=this.stepsToXpath(e),s=i.evaluate(o,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,i,r):s=this.walkToNode(e,i),s}fixMiss(e,n,r,i){var s=this.findNode(e.slice(0,-1),r,i),o=s.childNodes,a=this.normalizedMap(o,Er,i),l,u,d=e[e.length-1].index;for(let c in a){if(!a.hasOwnProperty(c))return;if(a[c]===d)if(l=o[c],u=l.textContent.length,n>u)n=n-u;else{l.nodeType===Eo?s=l.childNodes[0]:s=l;break}}return{container:s,offset:n}}toRange(e,n){var r=e||document,i,s,o,a,l,u=this,d,c,h=n?r.querySelector("."+n)!=null:!1,f;if(typeof r.createRange<"u"?i=r.createRange():i=new a_,u.range?(s=u.start,d=u.path.steps.concat(s.steps),a=this.findNode(d,r,h?n:null),o=u.end,c=u.path.steps.concat(o.steps),l=this.findNode(c,r,h?n:null)):(s=u.path,d=u.path.steps,a=this.findNode(u.path.steps,r,h?n:null)),a)try{s.terminal.offset!=null?i.setStart(a,s.terminal.offset):i.setStart(a,0)}catch{f=this.fixMiss(d,s.terminal.offset,r,h?n:null),i.setStart(f.container,f.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{o.terminal.offset!=null?i.setEnd(l,o.terminal.offset):i.setEnd(l,0)}catch{f=this.fixMiss(c,u.end.terminal.offset,r,h?n:null),i.setEnd(f.container,f.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,n,r){var i=parseInt(n),s=(e+1)*2,o="/"+s+"/";return o+=(i+1)*2,r&&(o+="["+r+"]"),o}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Ur{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var n=0;n<arguments[e].length;++n)this.hooks.push(arguments[e][n])}deregister(e){let n;for(let r=0;r<this.hooks.length;r++)if(n=this.hooks[r],n===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,n=this.context,r=[];return this.hooks.forEach(function(i){try{var s=i.apply(n,e)}catch(o){console.log(o)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function u_(t,e){var n,r,i=e.url,s=i.indexOf("://")>-1;t&&(r=zt(t,"head"),n=zt(r,"base"),n||(n=t.createElement("base"),r.insertBefore(n,r.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),n.setAttribute("href",i))}function e4(t,e){var n,r,i=e.canonical;t&&(n=zt(t,"head"),r=zt(n,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=t.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),n.appendChild(r)))}function t4(t,e){var n,r,i=e.idref;t&&(n=zt(t,"head"),r=zt(n,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=t.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),n.appendChild(r)))}function n4(t,e){var n=t.querySelectorAll("a[href]");if(n.length)for(var r=zt(t.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,s=(function(a){var l=a.getAttribute("href");if(l.indexOf("mailto:")!==0){var u=l.indexOf("://")>-1;if(u)a.setAttribute("target","_blank");else{var d;try{d=new Fr(l,i)}catch{}a.onclick=function(){return d&&d.hash?e(d.Path.path+d.hash):e(d?d.Path.path:l),!1}}}}).bind(this),o=0;o<n.length;o++)s(n[o])}function Vw(t,e,n){return e.forEach(function(r,i){r&&n[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(r,"g"),n[i]))}),t}function gu(t,e,n,r){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",o=new wt,a=new XMLHttpRequest,l=XMLHttpRequest.prototype,u;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),n&&(a.withCredentials=!0),a.onreadystatechange=c,a.onerror=d,a.open("GET",t,!0);for(u in r)a.setRequestHeader(u,r[u]);e=="json"&&a.setRequestHeader("Accept","application/json"),e||(e=new Vi(t).extension),e=="blob"&&(a.responseType=s),mu(e)&&a.overrideMimeType("text/xml"),e=="binary"&&(a.responseType="arraybuffer"),a.send();function d(h){o.reject(h)}function c(){if(this.readyState===XMLHttpRequest.DONE){var h=!1;if((this.responseType===""||this.responseType==="document")&&(h=this.responseXML),this.status===200||this.status===0||h){var f;if(!this.response&&!h)return o.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),o.promise;if(this.status===403)return o.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),o.promise;h?f=this.responseXML:mu(e)?f=gi(this.response,"text/xml"):e=="xhtml"?f=gi(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?f=gi(this.response,"text/html"):e=="json"?f=JSON.parse(this.response):e=="blob"?i?f=this.response:f=new Blob([this.response]):f=this.response,o.resolve(f)}else o.reject({status:this.status,message:this.response,stack:new Error().stack})}}return o.promise}class r4{constructor(e,n){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,n?this.hooks=n:(this.hooks={},this.hooks.serialize=new Ur(this),this.hooks.content=new Ur(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var n=e||this.request||gu,r=new wt,i=r.promise;return this.contents?r.resolve(this.contents):n(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){r.resolve(this.contents)}).bind(this)).catch(function(s){r.reject(s)}),i}base(){return u_(this.document,this)}render(e){var n=new wt,r=n.promise;return this.output,this.load(e).then((function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",o=s.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||o?a=YE:a=XMLSerializer;var l=new a;return this.output=l.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){n.resolve(this.output)}).bind(this)).catch(function(i){n.reject(i)}),r}find(e){var n=this,r=[],i=e.toLowerCase(),s=function(o){for(var a=o.textContent.toLowerCase(),l=n.document.createRange(),u,d,c=-1,h,f=150;d!=-1;)d=a.indexOf(i,c+1),d!=-1&&(l=n.document.createRange(),l.setStart(o,d),l.setEnd(o,d+i.length),u=n.cfiFromRange(l),o.textContent.length<f?h=o.textContent:(h=o.textContent.substring(d-f/2,d+f/2),h="..."+h+"..."),r.push({cfi:u,excerpt:h})),c=d};return df(n.document,function(o){s(o)}),r}search(e,n=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,s=this,o=e.toLowerCase(),a=function(c){const v=c.reduce((x,g)=>x+g.textContent,"").toLowerCase().indexOf(o);if(v!=-1){const g=v+o.length;let p=0,m=0;if(v<c[0].length){let w;for(;p<c.length-1&&(m+=c[p].length,!(g<=m));)p+=1;let _=c[0],E=c[p],S=s.document.createRange();S.setStart(_,v);let b=c.slice(0,p).reduce((T,C)=>T+C.textContent.length,0);S.setEnd(E,b>g?g:g-b),w=s.cfiFromRange(S);let D=c.slice(0,p+1).reduce((T,C)=>T+C.textContent,"");D.length>i&&(D=D.substring(v-i/2,v+i/2),D="..."+D+"..."),r.push({cfi:w,excerpt:D})}}},l=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let u,d=[];for(;u=l.nextNode();)d.push(u),d.length==n&&(a(d.slice(0,n)),d=d.slice(1,n));return d.length>0&&a(d),r}reconcileLayoutSettings(e){var n={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),s=i.indexOf("-"),o,a;s!=-1&&(o=i.slice(0,s),a=i.slice(s+1),n[o]=a)}),n}cfiFromRange(e){return new bt(e,this.cfiBase).toString()}cfiFromElement(e){return new bt(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class i4{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Ur,this.hooks.content=new Ur,this.hooks.content.register(u_),this.hooks.content.register(e4),this.hooks.content.register(t4),this.epubcfi=new bt,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,n,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var o=this.manifest[i.idref],a;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=n(i.href,!0),i.canonical=r(i.href)),o&&(i.href=o.href,i.url=n(i.href,!0),i.canonical=r(i.href),o.properties.length&&i.properties.push.apply(i.properties,o.properties)),i.linear==="yes"?(i.prev=(function(){let l=i.index;for(;l>0;){let u=this.get(l-1);if(u&&u.linear)return u;l-=1}}).bind(this),i.next=(function(){let l=i.index;for(;l<this.spineItems.length-1;){let u=this.get(l+1);if(u&&u.linear)return u;l+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),a=new r4(i,this.hooks),this.append(a)}),this.loaded=!0}get(e){var n=0;if(typeof e>"u")for(;n<this.spineItems.length;){let r=this.spineItems[n];if(r&&r.linear)break;n+=1}else this.epubcfi.isCfiString(e)?n=new bt(e).spinePos:typeof e=="number"||isNaN(e)===!1?n=e:typeof e=="string"&&e.indexOf("#")===0?n=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],n=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[n]||null}append(e){var n=this.spineItems.length;return e.index=n,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=n,this.spineByHref[encodeURI(e.href)]=n,this.spineByHref[e.href]=n,this.spineById[e.idref]=n,n}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(n,r){n.index=r}),0}remove(e){var n=this.spineItems.indexOf(e);if(n>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(n,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let n=this.get(e);if(n&&n.linear)return n;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let n=this.get(e);if(n&&n.linear)return n;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class jv{constructor(e){this._q=[],this.context=e,this.tick=Pv,this.running=!1,this.paused=!1}enqueue(){var e,n,r,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new wt,n=e.promise,r={task:i,args:s,deferred:e,promise:n}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,n,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),n=e.task,n)return r=n.apply(this.context,e.args),r&&typeof r.then=="function"?r.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new wt,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new wt),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const gh="0.3",cd=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],je={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class c_{constructor(e,n,r){this.spine=e,this.request=n,this.pause=r||100,this.q=new jv(this),this.epubcfi=new bt,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(n){n.linear&&this.q.enqueue(this.process.bind(this),n)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(n){var r=new wt,i=this.parse(n,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}).bind(this))}parse(e,n,r){var i=[],s,o=e.ownerDocument,a=zt(o,"body"),l=0,u,d=r||this.break,c=function(h){var f=h.length,v,x=0;if(h.textContent.trim().length===0)return!1;for(l==0&&(s=this.createRange(),s.startContainer=h,s.startOffset=0),v=d-l,v>f&&(l+=f,x=f);x<f;)if(v=d-l,l===0&&(x+=1,s=this.createRange(),s.startContainer=h,s.startOffset=x),x+v>=f)l+=f-x,x=f;else{x+=v,s.endContainer=h,s.endOffset=x;let g=new bt(s,n).toString();i.push(g),l=0}u=h};if(df(a,c.bind(this)),s&&s.startContainer&&u){s.endContainer=u,s.endOffset=u.length;let h=new bt(s,n).toString();i.push(h),l=0}return i}generateFromWords(e,n,r){var i=e?new bt(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,n,i,r):this.q.enqueue(this.processWords.bind(this),s,n,i,r))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,n,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(s){var o=new wt,a=this.parseWords(s,e,n,r),l=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=i?a.slice(0,l):a),e.unload(),this.processingTimeout=setTimeout(()=>o.resolve(a),this.pause),o.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,n,r,i){var s=n.cfiBase,o=[],a=e.ownerDocument,l=zt(a,"body"),u=r,d=i?i.spinePos!==n.index:!0,c;i&&n.index===i.spinePos&&(c=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var h=function(f){if(!d)if(f===c)d=!0;else return!1;if(f.textContent.length<10&&f.textContent.trim().length===0)return!1;var v=this.countWords(f.textContent),x,g=0;if(v===0)return!1;for(x=u-this._wordCounter,x>v&&(this._wordCounter+=v,g=v);g<v;)if(x=u-this._wordCounter,g+x>=v)this._wordCounter+=v-g,g=v;else{g+=x;let p=new bt(f,s);o.push({cfi:p.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return df(l,h.bind(this)),o}locationFromCfi(e){let n;return bt.prototype.isCfiString(e)&&(e=new bt(e)),this._locations.length===0?-1:(n=Ea(e,this._locations,this.epubcfi.compare),n>this.total?this.total:n)}percentageFromCfi(e){if(this._locations.length===0)return null;var n=this.locationFromCfi(e);return this.percentageFromLocation(n)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var n=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(n=this._locations[e]),n}cfiFromPercentage(e){let n;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new bt(this._locations[this.total]);return r.collapse(),r.toString()}return n=Math.ceil(this.total*e),this.cfiFromLocation(n)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var n;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(n=this.locationFromCfi(e),this._current=n):n=e,this.emit(je.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(n)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}yi(c_.prototype);let s4=class{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var n;if(!e)throw new Error("Container File Not Found");if(n=zt(e,"rootfile"),!n)throw new Error("No RootFile Found");this.packagePath=n.getAttribute("full-path"),this.directory=hs.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}};class qw{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var n,r,i;if(!e)throw new Error("Package File Not Found");if(n=zt(e,"metadata"),!n)throw new Error("No Metadata Found");if(r=zt(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=zt(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=t_(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(n),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var n={};return n.title=this.getElementText(e,"title"),n.creator=this.getElementText(e,"creator"),n.description=this.getElementText(e,"description"),n.pubdate=this.getElementText(e,"date"),n.publisher=this.getElementText(e,"publisher"),n.identifier=this.getElementText(e,"identifier"),n.language=this.getElementText(e,"language"),n.rights=this.getElementText(e,"rights"),n.modified_date=this.getPropertyText(e,"dcterms:modified"),n.layout=this.getPropertyText(e,"rendition:layout"),n.orientation=this.getPropertyText(e,"rendition:orientation"),n.flow=this.getPropertyText(e,"rendition:flow"),n.viewport=this.getPropertyText(e,"rendition:viewport"),n.media_active_class=this.getPropertyText(e,"media:active-class"),n.spread=this.getPropertyText(e,"rendition:spread"),n}parseManifest(e){var n={},r=Hi(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(s){var o=s.getAttribute("id"),a=s.getAttribute("href")||"",l=s.getAttribute("media-type")||"",u=s.getAttribute("media-overlay")||"",d=s.getAttribute("properties")||"";n[o]={href:a,type:l,overlay:u,properties:d.length?d.split(" "):[]}}),n}parseSpine(e,n){var r=[],i=Hi(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(o,a){var l=o.getAttribute("idref"),u=o.getAttribute("properties")||"",d=u.length?u.split(" "):[],c={id:o.getAttribute("id"),idref:l,linear:o.getAttribute("linear")||"yes",properties:d,index:a};r.push(c)}),r}findUniqueIdentifier(e){var n=e.documentElement.getAttribute("unique-identifier");if(!n)return"";var r=e.getElementById(n);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var n=Mo(e,"item",{properties:"nav"});return n?n.getAttribute("href"):!1}findNcxPath(e,n){var r=Mo(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=n.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var n=zt(e,"package");n.getAttribute("version");var r=Mo(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=Mo(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),o=e.getElementById(s);return o?o.getAttribute("href"):""}else return!1}getElementText(e,n){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",n),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,n){var r=Mo(e,"meta",{property:n});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let n=e.readingOrder||e.spine;return this.spine=n.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Op{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let n=e.nodeType,r,i;n&&(r=zt(e,"html"),i=zt(e,"ncx")),n?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var n,r=0;r<e.length;r++)n=e[r],n.href&&(this.tocByHref[n.href]=r),n.id&&(this.tocById[n.id]=r),this.length++,n.subitems.length&&this.unpack(n.subitems)}get(e){var n;return e?(e.indexOf("#")===0?n=this.tocById[e.substring(1)]:e in this.tocByHref&&(n=this.tocByHref[e]),this.getByIndex(e,n,this.toc)):this.toc}getByIndex(e,n,r){if(r.length===0)return;const i=r[n];if(i&&(e===i.id||e===i.href))return i;{let s;for(let o=0;o<r.length&&(s=this.getByIndex(e,n,r[o].subitems),!s);++o);return s}}landmark(e){var n;return e?(n=this.landmarksByType[e],this.landmarks[n]):this.landmarks}parseNav(e){var n=ff(e,"nav","toc"),r=[];if(!n)return r;let i=jo(n,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,n){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],n);s&&r.push(s)}return r}navItem(e,n){let r=e.getAttribute("id")||void 0,i=jo(e,"a",!0)||jo(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";r||(r=s);let o=i.textContent||"",a=[],l=jo(e,"ol",!0);return l&&(a=this.parseNavList(l,r)),{id:r,href:s,label:o,subitems:a,parent:n}}parseLandmarks(e){var n=ff(e,"nav","landmarks"),r=n?Hi(n,"li"):[],i=r.length,s,o=[],a;if(!r||i===0)return o;for(s=0;s<i;++s)a=this.landmarkItem(r[s]),a&&(o.push(a),this.landmarksByType[a.type]=s);return o}landmarkItem(e){let n=jo(e,"a",!0);if(!n)return;let r=n.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=n.getAttribute("href")||"",s=n.textContent||"";return{href:i,label:s,type:r}}parseNcx(e){var n=Hi(e,"navPoint"),r=n.length,i,s={},o=[],a,l;if(!n||r===0)return o;for(i=0;i<r;++i)a=this.ncxItem(n[i]),s[a.id]=a,a.parent?(l=s[a.parent],l.subitems.push(a)):o.push(a);return o}ncxItem(e){var n=e.getAttribute("id")||!1,r=zt(e,"content"),i=r.getAttribute("src"),s=zt(e,"navLabel"),o=s.textContent?s.textContent:"",a=[],l=e.parentNode,u;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(u=l.getAttribute("id")),{id:n,href:i,label:o,subitems:a,parent:u}}load(e){return e.map(n=>(n.label=n.title,n.subitems=n.children?this.load(n.children):[],n))}forEach(e){return this.toc.forEach(e)}}var Za={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},o4=function(){var t,e,n,r,i={};for(t in Za)if(Za.hasOwnProperty(t)){for(e in Za[t])if(Za[t].hasOwnProperty(e))if(n=Za[t][e],typeof n=="string")i[n]=t+"/"+e;else for(r=0;r<n.length;r++)i[n[r]]=t+"/"+e}return i}(),a4="text/plain";function l4(t){return t&&o4[t.split(".").pop().toLowerCase()]||a4}const la={lookup:l4};class u4{constructor(e,n){this.settings={replacements:n&&n.replacements||"base64",archive:n&&n.archive,resolver:n&&n.resolver,request:n&&n.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(n){return e[n]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var n=new Fr(e),r=la.lookup(n.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>o_(i)).then(i=>Cg(i,r)):this.settings.request(e,"blob").then(i=>cf(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise((function(n){n(this.urls)}).bind(this));var e=this.urls.map(n=>{var r=this.settings.resolver(n);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(n=>(this.replacementUrls=n.filter(r=>typeof r=="string"),n))}replaceCss(e,n){var r=[];return e=e||this.settings.archive,n=n||this.settings.resolver,this.cssUrls.forEach((function(i){var s=this.createCssFile(i,e,n).then((function(o){var a=this.urls.indexOf(i);a>-1&&(this.replacementUrls[a]=o)}).bind(this));r.push(s)}).bind(this)),Promise.all(r)}createCssFile(e){var n;if(hs.isAbsolute(e))return new Promise(function(o){o()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var s=this.urls.map(o=>{var a=this.settings.resolver(o),l=new Vi(r).relative(a);return l});return i?i.then(o=>(o=Vw(o,s,this.replacementUrls),this.settings.replacements==="base64"?n=Cg(o,"text/css"):n=cf(o,"text/css"),n),o=>new Promise(function(a){a()})):new Promise(function(o){o()})}relativeTo(e,n){return n=n||this.settings.resolver,this.urls.map((function(r){var i=n(r),s=new Vi(e).relative(i);return s}).bind(this))}get(e){var n=this.urls.indexOf(e);if(n!==-1)return this.replacementUrls.length?new Promise((function(r,i){r(this.replacementUrls[n])}).bind(this)):this.createUrl(e)}substitute(e,n){var r;return n?r=this.relativeTo(n):r=this.urls,Vw(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class Mp{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new bt,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var n=zt(e,"html"),r=zt(e,"ncx");if(n)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var n=ff(e,"nav","page-list"),r=n?Hi(n,"li"):[],i=r.length,s,o=[],a;if(!r||i===0)return o;for(s=0;s<i;++s)a=this.item(r[s]),o.push(a);return o}parseNcx(e){var n=[],r=0,i,s,o,a=0;if(s=zt(e,"pageList"),!s||(o=Hi(s,"pageTarget"),a=o.length,!o||o.length===0))return n;for(r=0;r<a;++r)i=this.ncxItem(o[r]),n.push(i);return n}ncxItem(e){var n=zt(e,"navLabel"),r=zt(n,"text"),i=r.textContent,s=zt(e,"content"),o=s.getAttribute("src"),a=parseInt(i,10);return{href:o,page:a}}item(e){var n=zt(e,"a"),r=n.getAttribute("href")||"",i=n.textContent||"",s=parseInt(i),o=r.indexOf("epubcfi"),a,l,u;return o!=-1?(a=r.split("#"),l=a[0],u=a.length>1?a[1]:!1,{cfi:u,href:r,packageUrl:l,page:s}):{href:r,page:s}}process(e){e.forEach(function(n){this.pages.push(n.page),n.cfi&&this.locations.push(n.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var n=-1;if(this.locations.length===0)return-1;var r=af(e,this.locations,this.epubcfi.compare);return r!=-1?n=this.pages[r]:(r=Ea(e,this.locations,this.epubcfi.compare),n=r-1>=0?this.pages[r-1]:this.pages[0],n!==void 0||(n=-1)),n}cfiFromPage(e){var n=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(n=this.locations[r]),n}pageFromPercentage(e){var n=Math.round(this.totalPages*e);return n}percentageFromPage(e){var n=(e-this.firstPage)/this.totalPages;return Math.round(n*1e3)/1e3}percentageFromCfi(e){var n=this.pageFromCfi(e),r=this.percentageFromPage(n);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class d_{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,n){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),n>=0&&(this._minSpreadWidth=n),this._spread}calculate(e,n,r){var i=1,s=r||0,o=e,a=n,l=Math.floor(o/12),u,d,c,h;this._spread&&o>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=l%2===0?l:l-1),this.name==="pre-paginated"&&(s=0),i>1?(u=o/i-s,c=u+s):(u=o,c=o),this.name==="pre-paginated"&&i>1&&(o=u),d=u*i+s,h=o,this.width=o,this.height=a,this.spreadWidth=d,this.pageWidth=c,this.delta=h,this.columnWidth=u,this.gap=s,this.divisor=i,this.update({width:o,height:a,spreadWidth:d,pageWidth:c,delta:h,columnWidth:u,gap:s,divisor:i})}format(e,n,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,n):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,n){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(n=n||this.delta,r=Math.ceil(e/n),i=r*this.divisor):(n=n||this.height,r=Math.ceil(e/n),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(n=>{this.props[n]===e[n]&&delete e[n]}),Object.keys(e).length>0){let n=Tn(this.props,e);this.emit(je.LAYOUT.UPDATED,n,e)}}}yi(d_.prototype);class c4{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var n in e)e.hasOwnProperty(n)&&(typeof e[n]=="string"?this.registerUrl(n,e[n]):this.registerRules(n,e[n]))}registerCss(e,n){this._themes[e]={serialized:n},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,n){var r=new Fr(n);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,n){this._themes[e]={rules:n},(this._injected[e]||e=="default")&&this.update(e)}select(e){var n=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(n),i.addClass(e)})}update(e){var n=this.rendition.getContents();n.forEach(r=>{this.add(e,r)})}inject(e){var n=[],r=this._themes,i;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=r[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&n.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,n){var r=this._themes[e];!r||!n||(r.url?n.addStylesheet(r.url):r.serialized?(n.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(n.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,n,r){var i=this.rendition.getContents();this._overrides[e]={value:n,priority:r===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var n=this.rendition.getContents();delete this._overrides[e],n.forEach(r=>{r.css(e)})}overrides(e){var n=this._overrides;for(var r in n)n.hasOwnProperty(r)&&e.css(r,n[r].value,n[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class hf{constructor(e,n,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=n||"ltr",this._dev=i}section(e){var n=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,n);return r}page(e,n,r,i){var s=e&&e.document?e.document.body:!1,o;if(s){if(o=this.rangePairToCfiPair(n,{start:this.findStart(s,r,i),end:this.findEnd(s,r,i)}),this._dev===!0){let a=e.document,l=new bt(o.start).toRange(a),u=new bt(o.end).toRange(a),d=a.defaultView.getSelection(),c=a.createRange();d.removeAllRanges(),c.setStart(l.startContainer,l.startOffset),c.setEnd(u.endContainer,u.endOffset),d.addRange(c)}return o}}walk(e,n){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),o,a;(o=s.nextNode())&&(a=n(o),!a););return a}}findRanges(e){for(var n=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),s=i*this.layout.divisor,o=this.layout.columnWidth,a=this.layout.gap,l,u,d=0;d<s.pages;d++)l=(o+a)*d,u=o*(d+1)+a*d,n.push({start:this.findStart(e.document.body,l,u),end:this.findEnd(e.document.body,l,u)});return n}findStart(e,n,r){for(var i=[e],s,o,a=e;i.length;)if(s=i.shift(),o=this.walk(s,l=>{var u,d,c,h,f;if(f=_g(l),this.horizontal&&this.direction==="ltr"){if(u=this.horizontal?f.left:f.top,d=this.horizontal?f.right:f.bottom,u>=n&&u<=r)return l;if(d>n)return l;a=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=f.left,d=f.right,d<=r&&d>=n)return l;if(u<r)return l;a=l,i.push(l)}else{if(c=f.top,h=f.bottom,c>=n&&c<=r)return l;if(h>n)return l;a=l,i.push(l)}}),o)return this.findTextStartRange(o,n,r);return this.findTextStartRange(a,n,r)}findEnd(e,n,r){for(var i=[e],s,o=e,a;i.length;)if(s=i.shift(),a=this.walk(s,l=>{var u,d,c,h,f;if(f=_g(l),this.horizontal&&this.direction==="ltr"){if(u=Math.round(f.left),d=Math.round(f.right),u>r&&o)return o;if(d>r)return l;o=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=Math.round(this.horizontal?f.left:f.top),d=Math.round(this.horizontal?f.right:f.bottom),d<n&&o)return o;if(u<n)return l;o=l,i.push(l)}else{if(c=Math.round(f.top),h=Math.round(f.bottom),c>r&&o)return o;if(h>r)return l;o=l,i.push(l)}}),a)return this.findTextEndRange(a,n,r);return this.findTextEndRange(o,n,r)}findTextStartRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,o,a,l,u,d=0;d<i.length;d++)if(s=i[d],o=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=o.left,a>=n)return s}else if(this.horizontal&&this.direction==="rtl"){if(u=o.right,u<=r)return s}else if(l=o.top,l>=n)return s;return i[0]}findTextEndRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,o,a,l,u,d,c,h=0;h<i.length;h++){if(o=i[h],a=o.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=a.left,u=a.right,l>r&&s)return s;if(u>r)return o}else if(this.horizontal&&this.direction==="rtl"){if(l=a.left,u=a.right,u<n&&s)return s;if(l<n)return o}else{if(d=a.top,c=a.bottom,d>r&&s)return s;if(c>r)return o}s=o}return i[i.length-1]}splitTextNodeIntoRanges(e,n){var r=[],i=e.textContent||"",s=i.trim(),o,a=e.ownerDocument,l=n||" ",u=s.indexOf(l);if(u===-1||e.nodeType!=Node.TEXT_NODE)return o=a.createRange(),o.selectNodeContents(e),[o];for(o=a.createRange(),o.setStart(e,0),o.setEnd(e,u),r.push(o),o=!1;u!=-1;)u=s.indexOf(l,u+1),u>0&&(o&&(o.setEnd(e,u),r.push(o)),o=a.createRange(),o.setStart(e,u+1));return o&&(o.setEnd(e,s.length),r.push(o)),r}rangePairToCfiPair(e,n){var r=n.start,i=n.end;r.collapse(!0),i.collapse(!1);let s=new bt(r,e).toString(),o=new bt(i,e).toString();return{start:s,end:o}}rangeListToCfiList(e,n){for(var r=[],i,s=0;s<n.length;s++)i=this.rangePairToCfiPair(e,n[s]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const f_=typeof navigator<"u",d4=f_&&/Chrome/.test(navigator.userAgent),Kw=f_&&!d4&&/AppleWebKit/.test(navigator.userAgent),f4=1;class Fv{constructor(e,n,r,i){this.epubcfi=new bt,this.document=e,this.documentElement=this.document.documentElement,this.content=n||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",gh),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return cd}width(e){var n=this.content;return e&&nn(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}height(e){var n=this.content;return e&&nn(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}contentWidth(e){var n=this.content||this.document.body;return e&&nn(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}contentHeight(e){var n=this.content||this.document.body;return e&&nn(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}textWidth(){let e,n,r=this.document.createRange(),i=this.content||this.document.body,s=lf(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.width,s&&s.width&&(n+=s.width),Math.round(n)}textHeight(){let e,n,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.bottom,Math.round(n)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,n,r){var i=this.content||this.document.body;return n?i.style.setProperty(e,n,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var n=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(n&&n.hasAttribute("content")){let o=n.getAttribute("content"),a=o.match(/width\s*=\s*([^,]*)/),l=o.match(/height\s*=\s*([^,]*)/),u=o.match(/initial-scale\s*=\s*([^,]*)/),d=o.match(/minimum-scale\s*=\s*([^,]*)/),c=o.match(/maximum-scale\s*=\s*([^,]*)/),h=o.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(r.width=a[1]),l&&l.length&&typeof l[1]<"u"&&(r.height=l[1]),u&&u.length&&typeof u[1]<"u"&&(r.scale=u[1]),d&&d.length&&typeof d[1]<"u"&&(r.minimum=d[1]),c&&c.length&&typeof c[1]<"u"&&(r.maximum=c[1]),h&&h.length&&typeof h[1]<"u"&&(r.scalable=h[1])}return s=e_(e||{},r),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),n||(n=this.document.createElement("meta"),n.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(n)),n.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(je.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),n=this.textHeight();(e!=this._size.width||n!=this._size.height)&&(this._size={width:e,height:n},this.onResize&&this.onResize(this._size),this.emit(je.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,n=(function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var o=this.window.matchMedia(i[s].media.mediaText);o.addListener(n)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),n,r=0;r<e.length;r++)n=e[r],typeof n.naturalWidth<"u"&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,n){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new bt(e).toRange(this.document,n);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let o=s.startContainer.textContent.indexOf(" ",s.startOffset);o==-1&&(o=s.startContainer.textContent.length),s.setEnd(s.startContainer,o)}}catch(o){console.error("setting end offset to start container length failed",o)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(Kw){let o=s.startContainer,a=new Range;try{o.nodeType===f4?r=o.getBoundingClientRect():s.startOffset+2<o.length?(a.setStart(o,s.startOffset),a.setEnd(o,s.startOffset+2),r=a.getBoundingClientRect()):s.startOffset-2>0?(a.setStart(o,s.startOffset-2),a.setEnd(o,s.startOffset),r=a.getBoundingClientRect()):r=o.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),o=this.document.getElementById(s);if(o)if(Kw){let a=new Range;a.selectNode(o),r=a.getBoundingClientRect()}else r=o.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){n(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var n;return e="epubjs-inserted-css-"+(e||""),this.document?(n=this.document.getElementById(e),n||(n=this.document.createElement("style"),n.id=e,this.document.head.appendChild(n)),n):!1}addStylesheetCss(e,n){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(n),r.innerHTML=e,!0}addStylesheetRules(e,n){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(n).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var o=1,a=e[i],l=e[i][0],u="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],o=0);for(var d=a.length;o<d;o++){var c=a[o];u+=c[0]+":"+c[1]+(c[2]?" !important":"")+`;
`}r.insertRule(l+"{"+u+"}",r.cssRules.length)}else Object.keys(e).forEach(f=>{const v=e[f];if(Array.isArray(v))v.forEach(x=>{const p=Object.keys(x).map(m=>`${m}:${x[m]}`).join(";");r.insertRule(`${f}{${p}}`,r.cssRules.length)});else{const g=Object.keys(v).map(p=>`${p}:${v[p]}`).join(";");r.insertRule(`${f}{${g}}`,r.cssRules.length)}})}addScript(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.add(e))}removeClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),cd.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(cd.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var n=this.window.getSelection();this.triggerSelectedEvent(n)}).bind(this),250)}triggerSelectedEvent(e){var n,r;e&&e.rangeCount>0&&(n=e.getRangeAt(0),n.collapsed||(r=new bt(n,this.cfiBase).toString(),this.emit(je.CONTENTS.SELECTED,r),this.emit(je.CONTENTS.SELECTED_RANGE,n)))}range(e,n){var r=new bt(e);return r.toRange(this.document,n)}cfiFromRange(e,n){return new bt(e,this.cfiBase,n).toString()}cfiFromNode(e,n){return new bt(e,this.cfiBase,n).toString()}map(e){var n=new hf(e);return n.section()}size(e,n){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),n>=0&&(this.height(n),r.height=n),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,n,r,i,s){let o=Oo("column-axis"),a=Oo("column-gap"),l=Oo("column-width"),u=Oo("column-fill"),c=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&c==="horizontal"&&this.direction(s),this.width(e),this.height(n),this.viewport({width:e,height:n,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),c==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(o,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(o,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(u,"auto"),this.css(a,i+"px"),this.css(l,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,n,r){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(n>=0||r>=0)&&(s=" translate("+(n||0)+"px, "+(r||0)+"px )"),this.css("transform",i+s)}fit(e,n,r){var i=this.viewport(),s=parseInt(i.width),o=parseInt(i.height),a=e/s,l=n/o,u=a<l?a:l;if(this.layoutStyle("paginated"),this.width(s),this.height(o),this.overflow("hidden"),this.scaler(u,0,0),this.css("background-size",s*u+"px "+o*u+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var d=e-s*u;this.css("margin-left",d+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,n,r,i,s){var o=new hf(n,s);return o.page(this,e,r,i)}linksHandler(){n4(this.content,e=>{this.emit(je.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let n=Oo("writing-mode");return e&&this.documentElement&&(this.documentElement.style[n]=e),this.window.getComputedStyle(this.documentElement)[n]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,n){return navigator.epubReadingSystem={name:e,version:n,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}yi(Fv.prototype);class h4{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,n,r,i,s,o){let a=encodeURI(n+e),u=new bt(n).spinePos,d=new h_({type:e,cfiRange:n,data:r,sectionIndex:u,cb:i,className:s,styles:o});return this._annotations[a]=d,u in this._annotationsBySectionIndex?this._annotationsBySectionIndex[u].push(a):this._annotationsBySectionIndex[u]=[a],this.rendition.views().forEach(h=>{d.sectionIndex===h.index&&d.attach(h)}),d}remove(e,n){let r=encodeURI(e+n);if(r in this._annotations){let i=this._annotations[r];if(n&&i.type!==n)return;this.rendition.views().forEach(o=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===o.index&&i.detach(o)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,n){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==n)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,n,r,i,s){return this.add("highlight",e,n,r,i,s)}underline(e,n,r,i,s){return this.add("underline",e,n,r,i,s)}mark(e,n,r){return this.add("mark",e,n,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class h_{constructor({type:e,cfiRange:n,data:r,sectionIndex:i,cb:s,className:o,styles:a}){this.type=e,this.cfiRange=n,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=o,this.styles=a}update(e){this.data=e}attach(e){let{cfiRange:n,data:r,type:i,mark:s,cb:o,className:a,styles:l}=this,u;return i==="highlight"?u=e.highlight(n,r,o,a,l):i==="underline"?u=e.underline(n,r,o,a,l):i==="mark"&&(u=e.mark(n,r,o)),this.mark=u,this.emit(je.ANNOTATION.ATTACH,u),u}detach(e){let{cfiRange:n,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(n):r==="underline"?i=e.ununderline(n):r==="mark"&&(i=e.unmark(n))),this.mark=void 0,this.emit(je.ANNOTATION.DETACH,i),i}text(){}}yi(h_.prototype);var Ii={},vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.createElement=p_;function p_(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}vh.default={createElement:p_};var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.proxyMouse=m_;Hu.clone=g_;Hu.default={proxyMouse:m_};function m_(t,e){function n(o){for(var a=e.length-1;a>=0;a--){var l=e[a],u=o.clientX,d=o.clientY;if(o.touches&&o.touches.length&&(u=o.touches[0].clientX,d=o.touches[0].clientY),!!p4(l,t,u,d)){l.dispatchEvent(g_(o));break}}}if(t.nodeName==="iframe"||t.nodeName==="IFRAME")try{this.target=t.contentDocument}catch{this.target=t}else this.target=t;for(var r=["mouseup","mousedown","click","touchstart"],i=0;i<r.length;i++){var s=r[i];this.target.addEventListener(s,function(o){return n(o)},!1)}}function g_(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch{var n=document.createEvent("MouseEvents");return n.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n}}function p4(t,e,n,r){var i=e.getBoundingClientRect();function s(d,c,h){var f=d.top-i.top,v=d.left-i.left,x=f+d.height,g=v+d.width;return f<=h&&v<=c&&x>h&&g>c}var o=t.getBoundingClientRect();if(!s(o,n,r))return!1;for(var a=t.getClientRects(),l=0,u=a.length;l<u;l++)if(s(a[l],n,r))return!0;return!1}var pf,Bv;Object.defineProperty(Ii,"__esModule",{value:!0});var v_=Ii.Underline=Bv=Ii.Highlight=Ii.Mark=pf=Ii.Pane=void 0,m4=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},yh=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g4=vh,vu=y_(g4),v4=Hu,y4=y_(v4);function y_(t){return t&&t.__esModule?t:{default:t}}function x_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function w_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function xh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}pf=Ii.Pane=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;xh(this,t),this.target=e,this.element=vu.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),y4.default.proxyMouse(this.target,this.marks),this.container=n,this.container.appendChild(this.element),this.render()}return yh(t,[{key:"addMark",value:function(n){var r=vu.default.createElement("g");return this.element.appendChild(r),n.bind(r,this.container),this.marks.push(n),n.render(),n}},{key:"removeMark",value:function(n){var r=this.marks.indexOf(n);if(r!==-1){var i=n.unbind();this.element.removeChild(i),this.marks.splice(r,1)}}},{key:"render",value:function(){S4(this.element,b4(this.target,this.container));var n=!0,r=!1,i=void 0;try{for(var s=this.marks[Symbol.iterator](),o;!(n=(o=s.next()).done);n=!0){var a=o.value;a.render()}}catch(l){r=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}}]),t}();var x4=Ii.Mark=function(){function t(){xh(this,t),this.element=null}return yh(t,[{key:"bind",value:function(n,r){this.element=n,this.container=r}},{key:"unbind",value:function(){var n=this.element;return this.element=null,n}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(n){this.element&&this.element.dispatchEvent(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var n=[],r=this.element.firstChild;r;)n.push(r.getBoundingClientRect()),r=r.nextSibling;return n}},{key:"filteredRanges",value:function(){var n=Array.from(this.range.getClientRects());return n.filter(function(r){for(var i=0;i<n.length;i++){if(n[i]===r)return!0;var s=k4(n[i],r);if(s)return!1}return!0})}}]),t}(),w4=Bv=Ii.Highlight=function(t){w_(e,t);function e(n,r,i,s){xh(this,e);var o=x_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.range=n,o.className=r,o.data=i||{},o.attributes=s||{},o}return yh(e,[{key:"bind",value:function(r,i){m4(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,i);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),o=this.container.getBoundingClientRect(),a=0,l=i.length;a<l;a++){var u=i[a],d=vu.default.createElement("rect");d.setAttribute("x",u.left-s.left+o.left),d.setAttribute("y",u.top-s.top+o.top),d.setAttribute("height",u.height),d.setAttribute("width",u.width),r.appendChild(d)}this.element.appendChild(r)}}]),e}(x4);v_=Ii.Underline=function(t){w_(e,t);function e(n,r,i,s){return xh(this,e),x_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,i,s))}return yh(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),o=this.container.getBoundingClientRect(),a=0,l=i.length;a<l;a++){var u=i[a],d=vu.default.createElement("rect");d.setAttribute("x",u.left-s.left+o.left),d.setAttribute("y",u.top-s.top+o.top),d.setAttribute("height",u.height),d.setAttribute("width",u.width),d.setAttribute("fill","none");var c=vu.default.createElement("line");c.setAttribute("x1",u.left-s.left+o.left),c.setAttribute("x2",u.left-s.left+o.left+u.width),c.setAttribute("y1",u.top-s.top+o.top+u.height-1),c.setAttribute("y2",u.top-s.top+o.top+u.height-1),c.setAttribute("stroke-width",1),c.setAttribute("stroke","black"),c.setAttribute("stroke-linecap","square"),r.appendChild(d),r.appendChild(c)}this.element.appendChild(r)}}]),e}(w4);function b4(t,e){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left,height:t.scrollHeight,width:t.scrollWidth}}function S4(t,e){t.style.setProperty("top",e.top+"px","important"),t.style.setProperty("left",e.left+"px","important"),t.style.setProperty("height",e.height+"px","important"),t.style.setProperty("width",e.width+"px","important")}function k4(t,e){return e.right<=t.right&&e.left>=t.left&&e.top>=t.top&&e.bottom<=t.bottom}class b_{constructor(e,n){this.settings=Tn({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},n||{}),this.id="epubjs-view-"+mh(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new bt,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var n=document.createElement("div");return n.classList.add("epub-view"),n.style.height="0px",n.style.width="0px",n.style.overflow="hidden",n.style.position="relative",n.style.display="block",e&&e=="horizontal"?n.style.flex="none":n.style.flex="initial",n}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=ld(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,n){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(r){return this.load(r)}).bind(this)).then((function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(je.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(je.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,o)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(r){return this.emit(je.VIEWS.LOAD_ERROR,r),new Promise((i,s)=>{s(r)})}).bind(this)).then((function(){this.emit(je.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,n){var r=e||this.settings.width,i=n||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,n,r){var i=lf(this.element),s;this.iframe?s=lf(this.iframe):s={width:0,height:0},e=="width"&&nn(n)&&(this.lockedWidth=n-i.width-s.width),e=="height"&&nn(r)&&(this.lockedHeight=r-i.height-s.height),e==="both"&&nn(n)&&nn(r)&&(this.lockedWidth=n-i.width-s.width,this.lockedHeight=r-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var n=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(n=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(n=this.contents.textWidth(),n%this.layout.pageWidth>0&&(n=Math.ceil(n/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=n/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(n+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||n!=this._width||r!=this._height)&&this.reframe(n,r),this._expanding=!1)}reframe(e,n){var r;nn(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),nn(n)&&(this.element.style.height=n+"px",this.iframe.style.height=n+"px",this._height=n);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?n-this.prevBounds.height:n;r={width:e,height:n,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let o;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(o=this.marks[a],this.placeMark(o.element,o.range))}),this.onResize(this,r),this.emit(je.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=ld(this.element)}load(e){var n=new wt,r=n.promise;if(!this.iframe)return n.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=(function(s){this.onLoad(s,n)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=cf(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return n.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,n){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Fv(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(je.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(je.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),n.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var n=new wt;return this.displayed?n.resolve(this):this.render(e).then((function(){this.emit(je.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,n.resolve(this)}).bind(this),function(r){n.reject(r,this)}),n.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(je.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(je.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var n=this.contents.locationOf(e,this.settings.ignoreClass);return{left:n.left,top:n.top}}onDisplayed(e){}onResize(e,n){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=ld(this.element)),this.elementBounds}highlight(e,n={},r,i="epubjs-hl",s={}){if(!this.contents)return;const o=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(e),l=()=>{this.emit(je.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new pf(this.iframe,this.element));let u=new Bv(a,i,n,o),d=this.pane.addMark(u);return this.highlights[e]={mark:d,element:d.element,listeners:[l,r]},d.element.setAttribute("ref",i),d.element.addEventListener("click",l),d.element.addEventListener("touchstart",l),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}underline(e,n={},r,i="epubjs-ul",s={}){if(!this.contents)return;const o=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(e),l=()=>{this.emit(je.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new pf(this.iframe,this.element));let u=new v_(a,i,n,o),d=this.pane.addMark(u);return this.underlines[e]={mark:d,element:d.element,listeners:[l,r]},d.element.setAttribute("ref",i),d.element.addEventListener("click",l),d.element.addEventListener("touchstart",l),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}mark(e,n={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,o=s.nodeType===1?s:s.parentNode,a=u=>{this.emit(je.VIEWS.MARK_CLICKED,e,n)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(o));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,n&&Object.keys(n).forEach(u=>{l.dataset[u]=n[u]}),r&&(l.addEventListener("click",r),l.addEventListener("touchstart",r)),l.addEventListener("click",a),l.addEventListener("touchstart",a),this.placeMark(l,i),this.element.appendChild(l),this.marks[e]={element:l,range:i,listeners:[a,r]},o}placeMark(e,n){let r,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=n.getBoundingClientRect();r=a.top,i=a.right}else{let a=n.getClientRects(),l;for(var o=0;o!=a.length;o++)l=a[o],(!s||l.left<s)&&(s=l.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=l.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let n;e in this.highlights&&(n=this.highlights[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let n;e in this.underlines&&(n=this.underlines[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let n;e in this.marks&&(n=this.marks[e],this.element.removeChild(n.element),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&r_(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}yi(b_.prototype);function E4(){var t="reverse",e=_4();return document.body.appendChild(e),e.scrollLeft>0?t="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(t="negative")),document.body.removeChild(e),t}function _4(){var t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var n=document.createElement("span");n.style.width="1px",n.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(n),e.appendChild(r),t.appendChild(e),t}function C4(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var zv=C4,A4=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,D4=A4,N4=D4,T4=typeof self=="object"&&self&&self.Object===Object&&self,R4=N4||T4||Function("return this")(),S_=R4,I4=S_,L4=function(){return I4.Date.now()},P4=L4,O4=/\s/;function M4(t){for(var e=t.length;e--&&O4.test(t.charAt(e)););return e}var j4=M4,F4=j4,B4=/^\s+/;function z4(t){return t&&t.slice(0,F4(t)+1).replace(B4,"")}var U4=z4,$4=S_,W4=$4.Symbol,k_=W4,Xw=k_,E_=Object.prototype,H4=E_.hasOwnProperty,V4=E_.toString,Qa=Xw?Xw.toStringTag:void 0;function q4(t){var e=H4.call(t,Qa),n=t[Qa];try{t[Qa]=void 0;var r=!0}catch{}var i=V4.call(t);return r&&(e?t[Qa]=n:delete t[Qa]),i}var K4=q4,X4=Object.prototype,G4=X4.toString;function Y4(t){return G4.call(t)}var Z4=Y4,Gw=k_,Q4=K4,J4=Z4,eP="[object Null]",tP="[object Undefined]",Yw=Gw?Gw.toStringTag:void 0;function nP(t){return t==null?t===void 0?tP:eP:Yw&&Yw in Object(t)?Q4(t):J4(t)}var rP=nP;function iP(t){return t!=null&&typeof t=="object"}var sP=iP,oP=rP,aP=sP,lP="[object Symbol]";function uP(t){return typeof t=="symbol"||aP(t)&&oP(t)==lP}var cP=uP,dP=U4,Zw=zv,fP=cP,Qw=NaN,hP=/^[-+]0x[0-9a-f]+$/i,pP=/^0b[01]+$/i,mP=/^0o[0-7]+$/i,gP=parseInt;function vP(t){if(typeof t=="number")return t;if(fP(t))return Qw;if(Zw(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Zw(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=dP(t);var n=pP.test(t);return n||mP.test(t)?gP(t.slice(2),n?2:8):hP.test(t)?Qw:+t}var yP=vP,xP=zv,jp=P4,Jw=yP,wP="Expected a function",bP=Math.max,SP=Math.min;function kP(t,e,n){var r,i,s,o,a,l,u=0,d=!1,c=!1,h=!0;if(typeof t!="function")throw new TypeError(wP);e=Jw(e)||0,xP(n)&&(d=!!n.leading,c="maxWait"in n,s=c?bP(Jw(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(S){var b=r,D=i;return r=i=void 0,u=S,o=t.apply(D,b),o}function v(S){return u=S,a=setTimeout(p,e),d?f(S):o}function x(S){var b=S-l,D=S-u,T=e-b;return c?SP(T,s-D):T}function g(S){var b=S-l,D=S-u;return l===void 0||b>=e||b<0||c&&D>=s}function p(){var S=jp();if(g(S))return m(S);a=setTimeout(p,x(S))}function m(S){return a=void 0,h&&r?f(S):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function _(){return a===void 0?o:m(jp())}function E(){var S=jp(),b=g(S);if(r=arguments,i=this,l=S,b){if(a===void 0)return v(l);if(c)return clearTimeout(a),a=setTimeout(p,e),f(l)}return a===void 0&&(a=setTimeout(p,e)),o}return E.cancel=w,E.flush=_,E}var __=kP;const EP=Jr(__);var _P=__,CP=zv,AP="Expected a function";function DP(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(AP);return CP(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_P(t,e,{leading:r,maxWait:e,trailing:i})}var NP=DP;const TP=Jr(NP);class RP{constructor(e){this.settings=e||{},this.id="epubjs-container-"+mh(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let n=e.height,r=e.width,i=e.overflow||!1,s=e.axis||"vertical",o=e.direction;Tn(this.settings,e),e.height&&nn(e.height)&&(n=e.height+"px"),e.width&&nn(e.width)&&(r=e.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",s==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),r&&(a.style.width=r),n&&(a.style.height=n),i&&(i==="scroll"&&s==="vertical"?(a.style["overflow-y"]=i,a.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=i):a.style.overflow=i),o&&(a.dir=o,a.style.direction=o),o&&this.settings.fullsize&&(document.body.style.direction=o),a}wrap(e){var n=document.createElement("div");return n.style.visibility="hidden",n.style.overflow="hidden",n.style.width="0",n.style.height="0",n.appendChild(e),n}getElement(e){var n;if(QE(e)?n=e:typeof e=="string"&&(n=document.getElementById(e)),!n)throw new Error("Not an Element");return n}attachTo(e){var n=this.getElement(e),r;if(n)return this.settings.hidden?r=this.wrapper:r=this.container,n.appendChild(r),this.element=n,n}getContainer(){return this.container}onResize(e){(!nn(this.settings.width)||!nn(this.settings.height))&&(this.resizeFunc=TP(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,n){var r;let i=e||this.settings.width,s=n||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):nn(e)?this.container.style.width=e+"px":this.container.style.width=e,n===null?(r=r||this.element.getBoundingClientRect(),r.height&&(n=r.height,this.container.style.height=n+"px")):nn(n)?this.container.style.height=n+"px":this.container.style.height=n,nn(e)||(e=this.container.clientWidth),nn(n)||(n=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let o=uf(),a=window.getComputedStyle(document.body),l={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return i||(e=o.width-l.left-l.right),(this.settings.fullsize&&!s||!s)&&(n=o.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:n-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?uf():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,n){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),n.forEach(function(s){for(var o in s)s.hasOwnProperty(o)&&(i+=o+":"+s[o]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class IP{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,n){return this._views.splice(n,0,e),this.container&&(n<this.container.children.length?this.container.insertBefore(e.element,this.container.children[n]):this.container.appendChild(e.element)),this.length++,e}remove(e){var n=this._views.indexOf(e);n>-1&&this._views.splice(n,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,n=this.length;if(this.length){for(var r=0;r<n;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var n,r=this.length,i=0;i<r;i++)if(n=this._views[i],n.displayed&&n.section.index==e.index)return n}displayed(){for(var e=[],n,r=this.length,i=0;i<r;i++)n=this._views[i],n.displayed&&e.push(n);return e}show(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class mf{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new jv(this),this.settings=Tn(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Tn(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,n){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=n,this.settings.rtlScrollType=E4(),this.stage=new RP({width:n.width,height:n.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new IP(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(n){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:n}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(je.MANAGERS.ORIENTATION_CHANGE,n)}).bind(this),500)}onResized(e){this.resize()}resize(e,n,r){let i=this.stage.size(e,n);if(this.winBounds=uf(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(je.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,n){return new this.View(e,Tn(this.viewSettings,{forceRight:n}))}handleNextPrePaginated(e,n,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||n.index===0)return;if(i=n.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,n){var r=new wt,i=r.promise;(n===e.href||nn(n))&&(n=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let a=s.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let l=s.width();this.scrollTo(a.left+l,a.top,!0)}if(n){let l=s.locationOf(n),u=s.width();this.moveTo(l,u)}return r.resolve(),i}this.clear();let o=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(o=!0),this.add(e,o).then((function(a){if(n){let l=a.locationOf(n),u=a.width();this.moveTo(l,u)}}).bind(this),a=>{r.reject(a)}).then((function(){return this.handleNextPrePaginated(o,e,this.add)}).bind(this)).then((function(){this.views.show(),r.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(je.MANAGERS.ADDED,e)}afterResized(e){this.emit(je.MANAGERS.RESIZE,e.section)}moveTo(e,n){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-n),this.scrollTo(r,i,!0)}add(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(je.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(je.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(je.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(je.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,n){var r=this.createView(e,n);return r.on(je.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(je.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(je.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft,n>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(n=this.container.scrollLeft+this.layout.delta*-1,n>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,n>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft+this.container.offsetWidth,n<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(n=this.container.scrollLeft,n<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=n.height<window.innerHeight?n.height:window.innerHeight,i=n.width<window.innerWidth?n.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let o=0,a=0;return this.settings.fullsize&&(o=s?window.scrollY:window.scrollX),e.map(u=>{let{index:d,href:c}=u.section,h=u.position(),f=u.width(),v=u.height(),x,g,p,m;s?(x=o+n.top-h.top+a,g=x+r-a,m=this.layout.count(v,r).pages,p=r):(x=o+n.left-h.left+a,g=x+i-a,m=this.layout.count(f,i).pages,p=i);let w=Math.ceil(x/p),_=[],E=Math.ceil(g/p);if(this.settings.direction==="rtl"&&!s){let D=w;w=m-E,E=m-D}_=[];for(var S=w;S<=E;S++){let D=S+1;_.push(D)}let b=this.mapping.page(u.contents,u.section.cfiBase,x,g);return{index:d,href:c,pages:_,totalPages:m,mapping:b}})}paginatedLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(o=>{let{index:a,href:l}=o.section,u,d=o.position(),c=o.width(),h,f,v;this.settings.direction==="rtl"?(u=n.right-r,v=Math.min(Math.abs(u-d.left),this.layout.width)-i,f=d.width-(d.right-u)-i,h=f-v):(u=n.left+r,v=Math.min(d.right-u,this.layout.width)-i,h=u-d.left+i,f=h+v),i+=v;let x=this.mapping.page(o.contents,o.section.cfiBase,h,f),g=this.layout.count(c).pages,p=Math.floor(h/this.layout.pageWidth),m=[],w=Math.floor(f/this.layout.pageWidth);if(p<0&&(p=0,w=w+1),this.settings.direction==="rtl"){let E=p;p=g-w,w=g-E}for(var _=p+1;_<=w;_++){let E=_;m.push(E)}return{index:a,href:l,pages:m,totalPages:g,mapping:x}})}isVisible(e,n,r,i){var s=e.position(),o=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>o.left-n&&s.left<o.right+r?!0:this.settings.axis==="vertical"&&s.bottom>o.top-n&&s.top<o.bottom+r}visible(){for(var e=this.bounds(),n=this.views.displayed(),r=n.length,i=[],s,o,a=0;a<r;a++)o=n[a],s=this.isVisible(o,0,0,e),s===!0&&i.push(o);return i}scrollBy(e,n,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,n*i):(e&&(this.container.scrollLeft+=e*i),n&&(this.container.scrollTop+=n)),this.scrolled=!0}scrollTo(e,n,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,n):(this.container.scrollLeft=e,this.container.scrollTop=n),this.scrolled=!0}onScroll(){let e,n;this.settings.fullsize?(e=window.scrollY,n=window.scrollX):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:(this.emit(je.MANAGERS.SCROLL,{top:e,left:n}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(je.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new hf(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(n){n&&n.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,n){!n&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new hf(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,n="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":n,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(n){const r=n&&n.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}yi(mf.prototype);const LP={easeInCubic:function(t){return Math.pow(t,3)}};class Ng{constructor(e,n){this.settings=Tn({duration:80,minVelocity:.2,minDistance:10,easing:LP.easeInCubic},n||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(je.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(je.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let n=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{n.on(r,i=>this.triggerViewEvent(i,n))})}triggerViewEvent(e,n){this.emit(e.type,e,n)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:n,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=n,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:n,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=n-this.endTouchX),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let n=this.wasSwiped();n!==0?this.snap(n):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,n=this.endTouchX-this.startTouchX,r=Math.abs(n),i=this.endTime-this.startTime,s=n/i,o=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>o)return-1;if(s<-o)return 1}needsSnap(){let e=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor;return e%n!==0}snap(e=0){let n=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(n/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const n=new wt,r=this.scrollLeft,i=this.now(),s=this.settings.duration,o=this.settings.easing;this.snapping=!0;function a(){const l=this.now(),u=Math.min(1,(l-i)/s);if(o(u),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,n.resolve();return}u<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(r+(e-r)*u,0)):(this.scrollTo(e,0),this.snapping=!1,n.resolve())}return a.call(this),n.promise}scrollTo(e=0,n=0){this.fullsize?window.scroll(e,n):(this.scroller.scrollLeft=e,this.scroller.scrollTop=n)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}yi(Ng.prototype);class PP extends mf{constructor(e){super(e),this.name="continuous",this.settings=Tn(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Tn(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,n){return mf.prototype.display.call(this,e,n).then((function(){return this.fill()}).bind(this))}fill(e){var n=e||new wt;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(n):n.resolve()}),n.promise}moveTo(e){var n=0,r=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(n>0||r>0)&&this.scrollBy(n,r,!0)}afterResized(e){this.emit(je.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var n=this.createView(e);return this.views.append(n),n.on(je.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(je.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(je.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.display(this.request)}append(e){var n=this.createView(e);return n.on(je.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(je.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(je.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n}prepend(e){var n=this.createView(e);return n.on(je.VIEWS.RESIZED,r=>{this.counter(r),n.expanded=!0}),n.on(je.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(je.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var n=this.bounds(),r=this.views.all(),i=r.length,s=typeof e<"u"?e:this.settings.offset||0,o,a,l=new wt,u=[],d=0;d<i;d++)if(a=r[d],o=this.isVisible(a,s,s,n),o===!0)if(a.displayed)a.show();else{let c=a.display(this.request).then(function(h){h.show()},h=>{a.hide()});u.push(c)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return u.length?Promise.all(u).catch(c=>{l.reject(c)}):(l.resolve(),l.promise)}check(e,n){var r=new wt,i=[],s=this.settings.axis==="horizontal",o=this.settings.offset||0;e&&s&&(o=e),n&&!s&&(o=n);var a=this._bounds;let l=s?this.scrollLeft:this.scrollTop,u=s?Math.floor(a.width):a.height,d=s?this.container.scrollWidth:this.container.scrollHeight,c=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",h=this.settings.rtlScrollType,f=this.settings.direction==="rtl";this.settings.fullsize?(s&&f&&h==="negative"||!s&&f&&h==="default")&&(l=l*-1):(f&&h==="default"&&c==="horizontal"&&(l=d-u-l),f&&h==="negative"&&c==="horizontal"&&(l=l*-1));let v=()=>{let w=this.views.first(),_=w&&w.section.prev();_&&i.push(this.prepend(_))},x=()=>{let w=this.views.last(),_=w&&w.section.next();_&&i.push(this.append(_))},g=l+u+o,p=l-o;g>=d&&x(),p<0&&v();let m=i.map(w=>w.display(this.request));return i.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(o),w=>w):(this.q.enqueue((function(){this.update()}).bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new wt,n=this.views.displayed(),r=n[0],i=n[n.length-1],s=this.views.indexOf(r),o=this.views.indexOf(i),a=this.views.slice(0,s),l=this.views.slice(o+1),u=0;u<a.length-1;u++)this.erase(a[u],a);for(var d=1;d<l.length;d++)this.erase(l[d]);return e.resolve(),e.promise}erase(e,n){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),n&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(n){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Ng(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Pv;let n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*n,this.scrollLeft=window.scrollX*n):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=EP(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,n,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,n=window.scrollX*r):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(n-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=n,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(je.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(je.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Ng(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Uv{constructor(e,n){this.settings=Tn(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Tn(this.settings,n),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Ur(this),this.hooks.serialize=new Ur(this),this.hooks.content=new Ur(this),this.hooks.unloaded=new Ur(this),this.hooks.layout=new Ur(this),this.hooks.render=new Ur(this),this.hooks.show=new Ur(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new c4(this),this.annotations=new h4(this),this.epubcfi=new bt,this.q=new jv(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new wt,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var n;return typeof e=="string"&&e==="default"?n=mf:typeof e=="string"&&e==="continuous"?n=PP:n=e,n}requireView(e){var n;return typeof e=="string"&&e==="iframe"?n=b_:n=e,n}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(je.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(je.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(je.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(je.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(je.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(je.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(je.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var n=new wt,r=n.promise,i;return this.displaying=n,this.book.locations.length()&&JE(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{n.resolve(i),this.displaying=void 0,this.emit(je.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(je.RENDITION.DISPLAY_ERROR,s)}),r):(n.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(je.VIEWS.MARK_CLICKED,(n,r)=>this.triggerMarkEvent(n,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(je.RENDITION.RENDERED,e.section,e)}):this.emit(je.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(je.RENDITION.REMOVED,e.section,e)})}onResized(e,n){this.emit(je.RENDITION.RESIZED,{width:e.width,height:e.height},n),this.location&&this.location.start&&this.display(n||this.location.start.cfi)}onOrientationChange(e){this.emit(je.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,n,r){e&&(this.settings.width=e),n&&(this.settings.height=n),this.manager.resize(e,n,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var n,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",o=this.settings.flow||e.flow||"auto",a=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,u=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),n={layout:r,spread:i,orientation:s,flow:o,viewport:a,minSpreadWidth:l,direction:u},n}flow(e){var n=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(n="scrolled"),(e==="auto"||e==="paginated")&&(n="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(n),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(n),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new d_(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(je.LAYOUT.UPDATED,(n,r)=>{this.emit(je.RENDITION.LAYOUT,n,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,n){this.settings.spread=e,n&&(this.settings.minSpreadWidth=n),this._layout&&this._layout.spread(e,n),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then((function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(je.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(je.RENDITION.RELOCATED,this.location))}).bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(je.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(je.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(n){return this.located(n)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let n=e[0],r=e[e.length-1],i={start:{index:n.index,href:n.href,cfi:n.mapping.start,displayed:{page:n.pages[0]||1,total:n.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(n.mapping.start),o=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),o!=null&&(i.end.location=o,i.end.percentage=this.book.locations.percentageFromLocation(o));let a=this.book.pageList.pageFromCfi(n.mapping.start),l=this.book.pageList.pageFromCfi(r.mapping.end);return a!=-1&&(i.start.page=a),l!=-1&&(i.end.page=l),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),n.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){cd.forEach(n=>{e.on(n,r=>this.triggerViewEvent(r,e))}),e.on(je.CONTENTS.SELECTED,n=>this.triggerSelectedEvent(n,e))}triggerViewEvent(e,n){this.emit(e.type,e,n)}triggerSelectedEvent(e,n){this.emit(je.RENDITION.SELECTED,e,n)}triggerMarkEvent(e,n,r){this.emit(je.RENDITION.MARK_CLICKED,e,n,r)}getRange(e,n){var r=new bt(e),i=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(r,n)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let n=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)))*.95,i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,o){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(je.CONTENTS.LINK_CLICKED,n=>{let r=this.book.path.relative(n);this.display(r)})}injectStylesheet(e,n){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,n){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,n){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}yi(Uv.prototype);function ps(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var C_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var c=typeof ps=="function"&&ps;if(!d&&c)return c(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[u]={exports:{}};r[u][0].call(f.exports,function(v){var x=r[u][1][v];return o(x||v)},f,f.exports,n,r,i,s)}return i[u].exports}for(var a=typeof ps=="function"&&ps,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u=[],d,c,h,f,v,x,g,p=0,m=l.length,w=m,_=s.getTypeOf(l)!=="string";p<l.length;)w=m-p,_?(d=l[p++],c=p<m?l[p++]:0,h=p<m?l[p++]:0):(d=l.charCodeAt(p++),c=p<m?l.charCodeAt(p++):0,h=p<m?l.charCodeAt(p++):0),f=d>>2,v=(d&3)<<4|c>>4,x=w>1?(c&15)<<2|h>>6:64,g=w>2?h&63:64,u.push(a.charAt(f)+a.charAt(v)+a.charAt(x)+a.charAt(g));return u.join("")},i.decode=function(l){var u,d,c,h,f,v,x,g=0,p=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var w=l.length*3/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!==0)throw new Error("Invalid base64 input, bad content length.");var _;for(o.uint8array?_=new Uint8Array(w|0):_=new Array(w|0);g<l.length;)h=a.indexOf(l.charAt(g++)),f=a.indexOf(l.charAt(g++)),v=a.indexOf(l.charAt(g++)),x=a.indexOf(l.charAt(g++)),u=h<<2|f>>4,d=(f&15)<<4|v>>2,c=(v&3)<<6|x,_[p++]=u,v!==64&&(_[p++]=d),x!==64&&(_[p++]=c);return _}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,c,h,f,v){this.compressedSize=d,this.uncompressedSize=c,this.crc32=h,this.compression=f,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return d.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,c,h){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils");function o(){for(var d,c=[],h=0;h<256;h++){d=h;for(var f=0;f<8;f++)d=d&1?3988292384^d>>>1:d>>>1;c[h]=d}return c}var a=o();function l(d,c,h,f){var v=a,x=f+h;d=d^-1;for(var g=f;g<x;g++)d=d>>>8^v[(d^c[g])&255];return d^-1}function u(d,c,h,f){var v=a,x=f+h;d=d^-1;for(var g=f;g<x;g++)d=d>>>8^v[(d^c.charCodeAt(g))&255];return d^-1}r.exports=function(c,h){if(typeof c>"u"||!c.length)return 0;var f=s.getTypeOf(c)!=="string";return f?l(h|0,c,c.length,0):u(h|0,c,c.length,0)}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;typeof Promise<"u"?s=Promise:s=n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";i.magic="\b\0";function d(c,h){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}a.inherits(d,l),d.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,c.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},i.compressWorker=function(c){return new d("Deflate",c)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),u=n("../signature"),d=function(p,m){var w="",_;for(_=0;_<m;_++)w+=String.fromCharCode(p&255),p=p>>>8;return w},c=function(p,m){var w=p;return p||(w=m?16893:33204),(w&65535)<<16},h=function(p){return(p||0)&63},f=function(p,m,w,_,E,S){var b=p.file,D=p.compression,T=S!==a.utf8encode,C=s.transformTo("string",S(b.name)),I=s.transformTo("string",a.utf8encode(b.name)),M=b.comment,H=s.transformTo("string",S(M)),q=s.transformTo("string",a.utf8encode(M)),W=I.length!==b.name.length,K=q.length!==M.length,G,$,te="",L="",ce="",oe=b.dir,F=b.date,xe={crc32:0,compressedSize:0,uncompressedSize:0};(!m||w)&&(xe.crc32=p.crc32,xe.compressedSize=p.compressedSize,xe.uncompressedSize=p.uncompressedSize);var Fe=0;m&&(Fe|=8),!T&&(W||K)&&(Fe|=2048);var Ne=0,He=0;oe&&(Ne|=16),E==="UNIX"?(He=798,Ne|=c(b.unixPermissions,oe)):(He=20,Ne|=h(b.dosPermissions)),G=F.getUTCHours(),G=G<<6,G=G|F.getUTCMinutes(),G=G<<5,G=G|F.getUTCSeconds()/2,$=F.getUTCFullYear()-1980,$=$<<4,$=$|F.getUTCMonth()+1,$=$<<5,$=$|F.getUTCDate(),W&&(L=d(1,1)+d(l(C),4)+I,te+="up"+d(L.length,2)+L),K&&(ce=d(1,1)+d(l(H),4)+q,te+="uc"+d(ce.length,2)+ce);var le="";le+=`
\0`,le+=d(Fe,2),le+=D.magic,le+=d(G,2),le+=d($,2),le+=d(xe.crc32,4),le+=d(xe.compressedSize,4),le+=d(xe.uncompressedSize,4),le+=d(C.length,2),le+=d(te.length,2);var Pe=u.LOCAL_FILE_HEADER+le+C+te,ve=u.CENTRAL_FILE_HEADER+d(He,2)+le+d(H.length,2)+"\0\0\0\0"+d(Ne,4)+d(_,4)+C+te+H;return{fileRecord:Pe,dirRecord:ve}},v=function(p,m,w,_,E){var S="",b=s.transformTo("string",E(_));return S=u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(p,2)+d(p,2)+d(m,4)+d(w,4)+d(b.length,2)+b,S},x=function(p){var m="";return m=u.DATA_DESCRIPTOR+d(p.crc32,4)+d(p.compressedSize,4)+d(p.uncompressedSize,4),m};function g(p,m,w,_){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(g,o),g.prototype.push=function(p){var m=p.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,o.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:w?(m+100*(w-_-1))/w:100}}))},g.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var w=f(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,w=f(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),m)this.push({data:x(p),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var w=this.bytesWritten-p,_=v(this.dirRecords.length,w,p,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(w){m.processChunk(w)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(w){m.error(w)}),this},g.prototype.resume=function(){if(!o.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},g.prototype.error=function(p){var m=this._sources;if(!o.prototype.error.call(this,p))return!1;for(var w=0;w<m.length;w++)try{m[w].error(p)}catch{}return!0},g.prototype.lock=function(){o.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker"),a=function(l,u){var d=l||u,c=s[d];if(!c)throw new Error(d+" is not a valid compression method !");return c};i.generateWorker=function(l,u,d){var c=new o(u.streamFiles,d,u.platform,u.encodeFileName),h=0;try{l.forEach(function(f,v){h++;var x=a(v.options.compression,u.compression),g=v.options.compressionOptions||u.compressionOptions||{},p=v.dir,m=v.date;v._compressWorker(x,g).withStreamInfo("file",{name:f,dir:p,date:m,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(c)}),c.entriesCount=h}catch(f){c.error(f)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}s.prototype=n("./object"),s.prototype.loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function c(h){return new o.Promise(function(f,v){var x=h.decompressed.getContentWorker().pipe(new u);x.on("error",function(g){v(g)}).on("end",function(){x.streamInfo.crc32!==h.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var v=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(x){var g=new l(f);return g.load(x),g}).then(function(g){var p=[o.Promise.resolve(g)],m=g.files;if(f.checkCRC32)for(var w=0;w<m.length;w++)p.push(c(m[w]));return o.Promise.all(p)}).then(function(g){for(var p=g.shift(),m=p.files,w=0;w<m.length;w++){var _=m[w],E=_.fileNameStr,S=s.resolve(_.fileNameStr);v.file(S,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:f.createFolders}),_.dir||(v.file(S).unsafeOriginalName=E)}return p.zipComment.length&&(v.comment=p.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;this._stream=l,l.pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return o.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return o.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable,o=n("../utils");o.inherits(a,s);function a(l,u,d){s.call(this,u),this._helper=l;var c=this;l.on("data",function(h,f){c.push(h)||c._helper.pause(),d&&d(f)}).on("error",function(h){c.emit("error",h)}).on("end",function(){c.push(null)})}a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){var s=n("./utf8"),o=n("./utils"),a=n("./stream/GenericWorker"),l=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),c=n("./zipObject"),h=n("./generate"),f=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),x=function(E,S,b){var D=o.getTypeOf(S),T,C=o.extend(b||{},u);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&C.unixPermissions&16384&&(C.dir=!0),C.dosPermissions&&C.dosPermissions&16&&(C.dir=!0),C.dir&&(E=p(E)),C.createFolders&&(T=g(E))&&m.call(this,T,!0);var I=D==="string"&&C.binary===!1&&C.base64===!1;(!b||typeof b.binary>"u")&&(C.binary=!I);var M=S instanceof d&&S.uncompressedSize===0;(M||C.dir||!S||S.length===0)&&(C.base64=!1,C.binary=!0,S="",C.compression="STORE",D="string");var H=null;S instanceof d||S instanceof a?H=S:f.isNode&&f.isStream(S)?H=new v(E,S):H=o.prepareContent(E,S,C.binary,C.optimizedBinaryString,C.base64);var q=new c(E,H,C);this.files[E]=q},g=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var S=E.lastIndexOf("/");return S>0?E.substring(0,S):""},p=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},m=function(E,S){return S=typeof S<"u"?S:u.createFolders,E=p(E),this.files[E]||x.call(this,E,null,{dir:!0,createFolders:S}),this.files[E]};function w(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var S,b,D;for(S in this.files)D=this.files[S],b=S.slice(this.root.length,S.length),b&&S.slice(0,this.root.length)===this.root&&E(b,D)},filter:function(E){var S=[];return this.forEach(function(b,D){E(b,D)&&S.push(D)}),S},file:function(E,S,b){if(arguments.length===1)if(w(E)){var D=E;return this.filter(function(C,I){return!I.dir&&D.test(C)})}else{var T=this.files[this.root+E];return T&&!T.dir?T:null}else E=this.root+E,x.call(this,E,S,b);return this},folder:function(E){if(!E)return this;if(w(E))return this.filter(function(T,C){return C.dir&&E.test(T)});var S=this.root+E,b=m.call(this,S),D=this.clone();return D.root=b.name,D},remove:function(E){E=this.root+E;var S=this.files[E];if(S||(E.slice(-1)!=="/"&&(E+="/"),S=this.files[E]),S&&!S.dir)delete this.files[E];else for(var b=this.filter(function(T,C){return C.name.slice(0,E.length)===E}),D=0;D<b.length;D++)delete this.files[b[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var S,b={};try{if(b=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),b.type=b.type.toLowerCase(),b.compression=b.compression.toUpperCase(),b.type==="binarystring"&&(b.type="string"),!b.type)throw new Error("No output type specified.");o.checkSupport(b.type),(b.platform==="darwin"||b.platform==="freebsd"||b.platform==="linux"||b.platform==="sunos")&&(b.platform="UNIX"),b.platform==="win32"&&(b.platform="DOS");var D=b.comment||this.comment||"";S=h.generateWorker(this,b,D)}catch(T){S=new a("error"),S.error(T)}return new l(S,b.type||"string",b.mimeType)},generateAsync:function(E,S){return this.generateInternalStream(E).accumulate(S)},generateNodeStream:function(E,S){return E=E||{},E.type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(S)}};r.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader"),o=n("../utils");function a(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=l[u]&255}o.inherits(a,s),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),c=l.charCodeAt(2),h=l.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===u&&this.data[f+1]===d&&this.data[f+2]===c&&this.data[f+3]===h)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),c=l.charCodeAt(2),h=l.charCodeAt(3),f=this.readData(4);return u===f[0]&&d===f[1]&&c===f[2]&&h===f[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l=0,u;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=a,l},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader"),o=n("../utils");function a(l){s.call(this,l)}o.inherits(a,s),a.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader"),o=n("../utils");function a(l){s.call(this,l)}o.inherits(a,s),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){var u=this.readData(4);return l===u},a.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader"),o=n("../utils");function a(l){s.call(this,l)}o.inherits(a,s),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(c){var h=s.getTypeOf(c);return s.checkSupport(h),h==="string"&&!o.uint8array?new l(c):h==="nodebuffer"?new u(c):o.uint8array?new d(s.transformTo("uint8array",c)):new a(s.transformTo("array",c))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32"),a=n("../utils");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker"),a=16*1024;function l(u){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){d.dataIsReady=!0,d.data=c,d.max=c&&c.length||0,d.type=s.getTypeOf(c),d.isPaused||d._tickAndRepeat()},function(c){d.error(c)})}s.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=a,d=null,c=Math.min(this.max,this.index+u);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,c);break;case"uint8array":d=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":d=this.data.slice(this.index,c);break}return this.index=c,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return this.isFinished?!1:(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var o=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),c=null;if(u.nodestream)try{c=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,p,m){switch(g){case"blob":return s.newBlob(s.transformTo("arraybuffer",p),m);case"base64":return l.encode(p);default:return s.transformTo(g,p)}}function f(g,p){var m,w=0,_=null,E=0;for(m=0;m<p.length;m++)E+=p[m].length;switch(g){case"string":return p.join("");case"array":return Array.prototype.concat.apply([],p);case"uint8array":for(_=new Uint8Array(E),m=0;m<p.length;m++)_.set(p[m],w),w+=p[m].length;return _;case"nodebuffer":return Buffer.concat(p);default:throw new Error("concat : unsupported type '"+g+"'")}}function v(g,p){return new d.Promise(function(m,w){var _=[],E=g._internalType,S=g._outputType,b=g._mimeType;g.on("data",function(D,T){_.push(D),p&&p(T)}).on("error",function(D){_=[],w(D)}).on("end",function(){try{var D=h(S,f(E,_),b);m(D)}catch(T){w(T)}_=[]}).resume()})}function x(g,p,m){var w=p;switch(p){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string";break}try{this._internalType=w,this._outputType=p,this._mimeType=m,s.checkSupport(w),this._worker=g.pipe(new o(w)),g.lock()}catch(_){this._worker=new a("error"),this._worker.error(_)}}x.prototype={accumulate:function(g){return v(this,g)},on:function(g,p){var m=this;return g==="data"?this._worker.on(g,function(w){p.call(m,w.data,w.meta)}):this._worker.on(g,function(){s.delay(p,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new o;a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;u[254]=u[254]=1;var c=function(g){var p,m,w,_,E,S=g.length,b=0;for(_=0;_<S;_++)m=g.charCodeAt(_),(m&64512)===55296&&_+1<S&&(w=g.charCodeAt(_+1),(w&64512)===56320&&(m=65536+(m-55296<<10)+(w-56320),_++)),b+=m<128?1:m<2048?2:m<65536?3:4;for(o.uint8array?p=new Uint8Array(b):p=new Array(b),E=0,_=0;E<b;_++)m=g.charCodeAt(_),(m&64512)===55296&&_+1<S&&(w=g.charCodeAt(_+1),(w&64512)===56320&&(m=65536+(m-55296<<10)+(w-56320),_++)),m<128?p[E++]=m:m<2048?(p[E++]=192|m>>>6,p[E++]=128|m&63):m<65536?(p[E++]=224|m>>>12,p[E++]=128|m>>>6&63,p[E++]=128|m&63):(p[E++]=240|m>>>18,p[E++]=128|m>>>12&63,p[E++]=128|m>>>6&63,p[E++]=128|m&63);return p},h=function(g,p){var m;for(p=p||g.length,p>g.length&&(p=g.length),m=p-1;m>=0&&(g[m]&192)===128;)m--;return m<0||m===0?p:m+u[g[m]]>p?m:p},f=function(g){var p,m,w,_,E=g.length,S=new Array(E*2);for(m=0,p=0;p<E;){if(w=g[p++],w<128){S[m++]=w;continue}if(_=u[w],_>4){S[m++]=65533,p+=_-1;continue}for(w&=_===2?31:_===3?15:7;_>1&&p<E;)w=w<<6|g[p++]&63,_--;if(_>1){S[m++]=65533;continue}w<65536?S[m++]=w:(w-=65536,S[m++]=55296|w>>10&1023,S[m++]=56320|w&1023)}return S.length!==m&&(S.subarray?S=S.subarray(0,m):S.length=m),s.applyFromCharCode(S)};i.utf8encode=function(p){return o.nodebuffer?a.newBufferFrom(p,"utf-8"):c(p)},i.utf8decode=function(p){return o.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):(p=s.transformTo(o.uint8array?"uint8array":"array",p),f(p))};function v(){l.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(v,l),v.prototype.processChunk=function(g){var p=s.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;p=new Uint8Array(m.length+this.leftOver.length),p.set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var w=h(p),_=p;w!==p.length&&(o.uint8array?(_=p.subarray(0,w),this.leftOver=p.subarray(w,p.length)):(_=p.slice(0,w),this.leftOver=p.slice(w,p.length))),this.push({data:i.utf8decode(_),meta:g.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=v;function x(){l.call(this,"utf-8 encode")}s.inherits(x,l),x.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");n("setimmediate");function u(g){var p=null;return s.uint8array?p=new Uint8Array(g.length):p=new Array(g.length),c(g,p)}i.newBlob=function(g,p){i.checkSupport("blob");try{return new Blob([g],{type:p})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,w=new m;return w.append(g),w.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};function d(g){return g}function c(g,p){for(var m=0;m<g.length;++m)p[m]=g.charCodeAt(m)&255;return p}var h={stringifyByChunk:function(g,p,m){var w=[],_=0,E=g.length;if(E<=m)return String.fromCharCode.apply(null,g);for(;_<E;)p==="array"||p==="nodebuffer"?w.push(String.fromCharCode.apply(null,g.slice(_,Math.min(_+m,E)))):w.push(String.fromCharCode.apply(null,g.subarray(_,Math.min(_+m,E)))),_+=m;return w.join("")},stringifyByChar:function(g){for(var p="",m=0;m<g.length;m++)p+=String.fromCharCode(g[m]);return p},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function f(g){var p=65536,m=i.getTypeOf(g),w=!0;if(m==="uint8array"?w=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;p>1;)try{return h.stringifyByChunk(g,m,p)}catch{p=Math.floor(p/2)}return h.stringifyByChar(g)}i.applyFromCharCode=f;function v(g,p){for(var m=0;m<g.length;m++)p[m]=g[m];return p}var x={};x.string={string:d,array:function(g){return c(g,new Array(g.length))},arraybuffer:function(g){return x.string.uint8array(g).buffer},uint8array:function(g){return c(g,new Uint8Array(g.length))},nodebuffer:function(g){return c(g,a.allocBuffer(g.length))}},x.array={string:f,array:d,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},x.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return v(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:d,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},x.uint8array={string:f,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:d,nodebuffer:function(g){return a.newBufferFrom(g)}},x.nodebuffer={string:f,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return x.nodebuffer.uint8array(g).buffer},uint8array:function(g){return v(g,new Uint8Array(g.length))},nodebuffer:d},i.transformTo=function(g,p){if(p||(p=""),!g)return p;i.checkSupport(g);var m=i.getTypeOf(p),w=x[m][g](p);return w},i.resolve=function(g){for(var p=g.split("/"),m=[],w=0;w<p.length;w++){var _=p[w];_==="."||_===""&&w!==0&&w!==p.length-1||(_===".."?m.pop():m.push(_))}return m.join("/")},i.getTypeOf=function(g){if(typeof g=="string")return"string";if(Object.prototype.toString.call(g)==="[object Array]")return"array";if(s.nodebuffer&&a.isBuffer(g))return"nodebuffer";if(s.uint8array&&g instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&g instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(g){var p=s[g.toLowerCase()];if(!p)throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var p="",m,w;for(w=0;w<(g||"").length;w++)m=g.charCodeAt(w),p+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return p},i.delay=function(g,p,m){setImmediate(function(){g.apply(m||null,p||[])})},i.inherits=function(g,p){var m=function(){};m.prototype=p.prototype,g.prototype=new m},i.extend=function(){var g={},p,m;for(p=0;p<arguments.length;p++)for(m in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],m)&&typeof g[m]>"u"&&(g[m]=arguments[p][m]);return g},i.prepareContent=function(g,p,m,w,_){var E=l.Promise.resolve(p).then(function(S){var b=s.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1);return b&&typeof FileReader<"u"?new l.Promise(function(D,T){var C=new FileReader;C.onload=function(I){D(I.target.result)},C.onerror=function(I){T(I.target.error)},C.readAsArrayBuffer(S)}):S});return E.then(function(S){var b=i.getTypeOf(S);return b?(b==="arraybuffer"?S=i.transformTo("uint8array",S):b==="string"&&(_?S=o.decode(S):m&&w!==!0&&(S=u(S))),S):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(c){this.files=[],this.loadOptions=c}d.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(c)+")")}},isSignature:function(c,h){var f=this.reader.index;this.reader.setIndex(c);var v=this.reader.readString(4),x=v===h;return this.reader.setIndex(f),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",f=o.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c=this.zip64EndOfCentralSize-44,h=0,f,v,x;h<c;)f=this.reader.readInt(2),v=this.reader.readInt(4),x=this.reader.readData(v),this.zip64ExtensibleData[f]={id:f,length:v,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)c=new l({zip64:this.zip64},this.loadOptions),c.readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0){var h=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw h?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(c);var f=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),c<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var x=f-v;if(x>0)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),c=n("./support"),h=0,f=3,v=function(g){for(var p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p].magic===g)return d[p];return null};function x(g,p){this.options=g,this.loadOptions=p}x.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(g){var p,m;if(g.skip(22),this.fileNameLength=g.readInt(2),m=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(p=v(this.compressionMethod),p===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var p=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(p),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),g===h&&(this.dosPermissions=this.externalFileAttributes&63),g===f&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var p=g.index+this.extraFieldsLength,m,w,_;for(this.extraFields||(this.extraFields={});g.index+4<p;)m=g.readInt(2),w=g.readInt(2),_=g.readData(w),this.extraFields[m]={id:m,length:w,value:_};g.setIndex(p)},handleUTF8:function(){var g=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var _=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var p=s(g.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:u.utf8decode(p.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var p=s(g.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:u.utf8decode(p.readData(g.length-5))}return null}},r.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),a=n("./utf8"),l=n("./compressedObject"),u=n("./stream/GenericWorker"),d=function(v,x,g){this.name=v,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=x,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}};d.prototype={internalStream:function(v){var x=null,g="string";try{if(!v)throw new Error("No output type specified.");g=v.toLowerCase();var p=g==="string"||g==="text";(g==="binarystring"||g==="text")&&(g="string"),x=this._decompressWorker();var m=!this._dataBinary;m&&!p&&(x=x.pipe(new a.Utf8EncodeWorker)),!m&&p&&(x=x.pipe(new a.Utf8DecodeWorker))}catch(w){x=new u("error"),x.error(w)}return new s(x,g,"")},async:function(v,x){return this.internalStream(v).accumulate(x)},nodeStream:function(v,x){return this.internalStream(v||"nodebuffer").toNodejsStream(x)},_compressWorker:function(v,x){if(this._data instanceof l&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new a.Utf8EncodeWorker)),l.createWorkerFrom(g,v,x)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<c.length;f++)d.prototype[c[f]]=h;r.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(v),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=v,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(v,0)};var h,f=[];function v(){h=!0;for(var g,p,m=f.length;m;){for(p=f,f=[],g=-1;++g<m;)p[g]();m=f.length}h=!1}r.exports=x;function x(g){f.push(g)===1&&!h&&a()}}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];r.exports=c;function c(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,E!==o&&x(this,E)}c.prototype.finally=function(E){if(typeof E!="function")return this;var S=this.constructor;return this.then(b,D);function b(T){function C(){return T}return S.resolve(E()).then(C)}function D(T){function C(){throw T}return S.resolve(E()).then(C)}},c.prototype.catch=function(E){return this.then(null,E)},c.prototype.then=function(E,S){if(typeof E!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var b=new this.constructor(o);if(this.state!==d){var D=this.state===u?E:S;f(b,D,this.outcome)}else this.queue.push(new h(b,E,S));return b};function h(E,S,b){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},h.prototype.otherCallFulfilled=function(E){f(this.promise,this.onFulfilled,E)},h.prototype.callRejected=function(E){a.reject(this.promise,E)},h.prototype.otherCallRejected=function(E){f(this.promise,this.onRejected,E)};function f(E,S,b){s(function(){var D;try{D=S(b)}catch(T){return a.reject(E,T)}D===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,D)})}a.resolve=function(E,S){var b=g(v,S);if(b.status==="error")return a.reject(E,b.value);var D=b.value;if(D)x(E,D);else{E.state=u,E.outcome=S;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callFulfilled(S)}return E},a.reject=function(E,S){E.state=l,E.outcome=S;for(var b=-1,D=E.queue.length;++b<D;)E.queue[b].callRejected(S);return E};function v(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function x(E,S){var b=!1;function D(M){b||(b=!0,a.reject(E,M))}function T(M){b||(b=!0,a.resolve(E,M))}function C(){S(T,D)}var I=g(C);I.status==="error"&&D(I.value)}function g(E,S){var b={};try{b.value=E(S),b.status="success"}catch(D){b.status="error",b.value=D}return b}c.resolve=p;function p(E){return E instanceof this?E:a.resolve(new this(o),E)}c.reject=m;function m(E){var S=new this(o);return a.reject(S,E)}c.all=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,D=!1;if(!b)return this.resolve([]);for(var T=new Array(b),C=0,I=-1,M=new this(o);++I<b;)H(E[I],I);return M;function H(q,W){S.resolve(q).then(K,function(G){D||(D=!0,a.reject(M,G))});function K(G){T[W]=G,++C===b&&!D&&(D=!0,a.resolve(M,T))}}}c.race=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,D=!1;if(!b)return this.resolve([]);for(var T=-1,C=new this(o);++T<b;)I(E[T]);return C;function I(M){S.resolve(M).then(function(H){D||(D=!0,a.resolve(C,H))},function(H){D||(D=!0,a.reject(C,H))})}}},{immediate:36}],38:[function(n,r,i){var s=n("./lib/utils/common").assign,o=n("./lib/deflate"),a=n("./lib/inflate"),l=n("./lib/zlib/constants"),u={};s(u,o,a,l),r.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,c=0,h=4,f=0,v=1,x=2,g=-1,p=0,m=8;function w(b){if(!(this instanceof w))return new w(b);this.options=o.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},b||{});var D=this.options;D.raw&&D.windowBits>0?D.windowBits=-D.windowBits:D.gzip&&D.windowBits>0&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var T=s.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(T!==f)throw new Error(l[T]);if(D.header&&s.deflateSetHeader(this.strm,D.header),D.dictionary){var C;if(typeof D.dictionary=="string"?C=a.string2buf(D.dictionary):d.call(D.dictionary)==="[object ArrayBuffer]"?C=new Uint8Array(D.dictionary):C=D.dictionary,T=s.deflateSetDictionary(this.strm,C),T!==f)throw new Error(l[T]);this._dict_set=!0}}w.prototype.push=function(b,D){var T=this.strm,C=this.options.chunkSize,I,M;if(this.ended)return!1;M=D===~~D?D:D===!0?h:c,typeof b=="string"?T.input=a.string2buf(b):d.call(b)==="[object ArrayBuffer]"?T.input=new Uint8Array(b):T.input=b,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(C),T.next_out=0,T.avail_out=C),I=s.deflate(T,M),I!==v&&I!==f)return this.onEnd(I),this.ended=!0,!1;(T.avail_out===0||T.avail_in===0&&(M===h||M===x))&&(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((T.avail_in>0||T.avail_out===0)&&I!==v);return M===h?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===f):(M===x&&(this.onEnd(f),T.avail_out=0),!0)},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function _(b,D){var T=new w(D);if(T.push(b,!0),T.err)throw T.msg||l[T.err];return T.result}function E(b,D){return D=D||{},D.raw=!0,_(b,D)}function S(b,D){return D=D||{},D.gzip=!0,_(b,D)}i.Deflate=w,i.deflate=_,i.deflateRaw=E,i.gzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),c=n("./zlib/gzheader"),h=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(g&&g.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15||(p.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,p.windowBits);if(m!==l.Z_OK)throw new Error(u[m]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}f.prototype.push=function(g,p){var m=this.strm,w=this.options.chunkSize,_=this.options.dictionary,E,S,b,D,T,C,I=!1;if(this.ended)return!1;S=p===~~p?p:p===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?m.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?m.input=new Uint8Array(g):m.input=g,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new o.Buf8(w),m.next_out=0,m.avail_out=w),E=s.inflate(m,l.Z_NO_FLUSH),E===l.Z_NEED_DICT&&_&&(typeof _=="string"?C=a.string2buf(_):h.call(_)==="[object ArrayBuffer]"?C=new Uint8Array(_):C=_,E=s.inflateSetDictionary(this.strm,C)),E===l.Z_BUF_ERROR&&I===!0&&(E=l.Z_OK,I=!1),E!==l.Z_STREAM_END&&E!==l.Z_OK)return this.onEnd(E),this.ended=!0,!1;m.next_out&&(m.avail_out===0||E===l.Z_STREAM_END||m.avail_in===0&&(S===l.Z_FINISH||S===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(b=a.utf8border(m.output,m.next_out),D=m.next_out-b,T=a.buf2string(m.output,b),m.next_out=D,m.avail_out=w-D,D&&o.arraySet(m.output,m.output,b,D,0),this.onData(T)):this.onData(o.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(I=!0)}while((m.avail_in>0||m.avail_out===0)&&E!==l.Z_STREAM_END);return E===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===l.Z_OK):(S===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),m.avail_out=0),!0)},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};function v(g,p){var m=new f(p);if(m.push(g,!0),m.err)throw m.msg||u[m.err];return m.result}function x(g,p){return p=p||{},p.raw=!0,v(g,p)}i.Inflate=f,i.inflate=v,i.inflateRaw=x,i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var c in d)d.hasOwnProperty(c)&&(l[c]=d[c])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,c,h){if(u.subarray&&l.subarray){l.set(u.subarray(d,d+c),h);return}for(var f=0;f<c;f++)l[h+f]=u[d+f]},flattenChunks:function(l){var u,d,c,h,f,v;for(c=0,u=0,d=l.length;u<d;u++)c+=l[u].length;for(v=new Uint8Array(c),h=0,u=0,d=l.length;u<d;u++)f=l[u],v.set(f,h),h+=f.length;return v}},a={arraySet:function(l,u,d,c,h){for(var f=0;f<c;f++)l[h+f]=u[d+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,i.string2buf=function(c){var h,f,v,x,g,p=c.length,m=0;for(x=0;x<p;x++)f=c.charCodeAt(x),(f&64512)===55296&&x+1<p&&(v=c.charCodeAt(x+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),x++)),m+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(m),g=0,x=0;g<m;x++)f=c.charCodeAt(x),(f&64512)===55296&&x+1<p&&(v=c.charCodeAt(x+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),x++)),f<128?h[g++]=f:f<2048?(h[g++]=192|f>>>6,h[g++]=128|f&63):f<65536?(h[g++]=224|f>>>12,h[g++]=128|f>>>6&63,h[g++]=128|f&63):(h[g++]=240|f>>>18,h[g++]=128|f>>>12&63,h[g++]=128|f>>>6&63,h[g++]=128|f&63);return h};function d(c,h){if(h<65537&&(c.subarray&&a||!c.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(c,h));for(var f="",v=0;v<h;v++)f+=String.fromCharCode(c[v]);return f}i.buf2binstring=function(c){return d(c,c.length)},i.binstring2buf=function(c){for(var h=new s.Buf8(c.length),f=0,v=h.length;f<v;f++)h[f]=c.charCodeAt(f);return h},i.buf2string=function(c,h){var f,v,x,g,p=h||c.length,m=new Array(p*2);for(v=0,f=0;f<p;){if(x=c[f++],x<128){m[v++]=x;continue}if(g=l[x],g>4){m[v++]=65533,f+=g-1;continue}for(x&=g===2?31:g===3?15:7;g>1&&f<p;)x=x<<6|c[f++]&63,g--;if(g>1){m[v++]=65533;continue}x<65536?m[v++]=x:(x-=65536,m[v++]=55296|x>>10&1023,m[v++]=56320|x&1023)}return d(m,v)},i.utf8border=function(c,h){var f;for(h=h||c.length,h>c.length&&(h=c.length),f=h-1;f>=0&&(c[f]&192)===128;)f--;return f<0||f===0?h:f+l[c[f]]>h?f:h}},{"./common":41}],43:[function(n,r,i){function s(o,a,l,u){for(var d=o&65535|0,c=o>>>16&65535|0,h=0;l!==0;){h=l>2e3?2e3:l,l-=h;do d=d+a[u++]|0,c=c+d|0;while(--h);d%=65521,c%=65521}return d|c<<16|0}r.exports=s},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){function s(){for(var l,u=[],d=0;d<256;d++){l=d;for(var c=0;c<8;c++)l=l&1?3988292384^l>>>1:l>>>1;u[d]=l}return u}var o=s();function a(l,u,d,c){var h=o,f=c+d;l^=-1;for(var v=c;v<f;v++)l=l>>>8^h[(l^u[v])&255];return l^-1}r.exports=a},{}],46:[function(n,r,i){var s=n("../utils/common"),o=n("./trees"),a=n("./adler32"),l=n("./crc32"),u=n("./messages"),d=0,c=1,h=3,f=4,v=5,x=0,g=1,p=-2,m=-3,w=-5,_=-1,E=1,S=2,b=3,D=4,T=0,C=2,I=8,M=9,H=15,q=8,W=29,K=256,G=K+1+W,$=30,te=19,L=2*G+1,ce=15,oe=3,F=258,xe=F+oe+1,Fe=32,Ne=42,He=69,le=73,Pe=91,ve=103,ke=113,Ue=666,Ve=1,ot=2,ft=3,vt=4,at=3;function Ct(k,ne){return k.msg=u[ne],ne}function Tt(k){return(k<<1)-(k>4?9:0)}function Dt(k){for(var ne=k.length;--ne>=0;)k[ne]=0}function Rt(k){var ne=k.state,re=ne.pending;re>k.avail_out&&(re=k.avail_out),re!==0&&(s.arraySet(k.output,ne.pending_buf,ne.pending_out,re,k.next_out),k.next_out+=re,ne.pending_out+=re,k.total_out+=re,k.avail_out-=re,ne.pending-=re,ne.pending===0&&(ne.pending_out=0))}function ut(k,ne){o._tr_flush_block(k,k.block_start>=0?k.block_start:-1,k.strstart-k.block_start,ne),k.block_start=k.strstart,Rt(k.strm)}function Je(k,ne){k.pending_buf[k.pending++]=ne}function It(k,ne){k.pending_buf[k.pending++]=ne>>>8&255,k.pending_buf[k.pending++]=ne&255}function rn(k,ne,re,N){var z=k.avail_in;return z>N&&(z=N),z===0?0:(k.avail_in-=z,s.arraySet(ne,k.input,k.next_in,z,re),k.state.wrap===1?k.adler=a(k.adler,ne,z,re):k.state.wrap===2&&(k.adler=l(k.adler,ne,z,re)),k.next_in+=z,k.total_in+=z,z)}function ae(k,ne){var re=k.max_chain_length,N=k.strstart,z,Z,j=k.prev_length,U=k.nice_match,V=k.strstart>k.w_size-xe?k.strstart-(k.w_size-xe):0,ie=k.window,ge=k.w_mask,we=k.prev,Ee=k.strstart+F,_e=ie[N+j-1],De=ie[N+j];k.prev_length>=k.good_match&&(re>>=2),U>k.lookahead&&(U=k.lookahead);do if(z=ne,!(ie[z+j]!==De||ie[z+j-1]!==_e||ie[z]!==ie[N]||ie[++z]!==ie[N+1])){N+=2,z++;do;while(ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&ie[++N]===ie[++z]&&N<Ee);if(Z=F-(Ee-N),N=Ee-F,Z>j){if(k.match_start=ne,j=Z,Z>=U)break;_e=ie[N+j-1],De=ie[N+j]}}while((ne=we[ne&ge])>V&&--re!==0);return j<=k.lookahead?j:k.lookahead}function me(k){var ne=k.w_size,re,N,z,Z,j;do{if(Z=k.window_size-k.lookahead-k.strstart,k.strstart>=ne+(ne-xe)){s.arraySet(k.window,k.window,ne,ne,0),k.match_start-=ne,k.strstart-=ne,k.block_start-=ne,N=k.hash_size,re=N;do z=k.head[--re],k.head[re]=z>=ne?z-ne:0;while(--N);N=ne,re=N;do z=k.prev[--re],k.prev[re]=z>=ne?z-ne:0;while(--N);Z+=ne}if(k.strm.avail_in===0)break;if(N=rn(k.strm,k.window,k.strstart+k.lookahead,Z),k.lookahead+=N,k.lookahead+k.insert>=oe)for(j=k.strstart-k.insert,k.ins_h=k.window[j],k.ins_h=(k.ins_h<<k.hash_shift^k.window[j+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[j+oe-1])&k.hash_mask,k.prev[j&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=j,j++,k.insert--,!(k.lookahead+k.insert<oe)););}while(k.lookahead<xe&&k.strm.avail_in!==0)}function Be(k,ne){var re=65535;for(re>k.pending_buf_size-5&&(re=k.pending_buf_size-5);;){if(k.lookahead<=1){if(me(k),k.lookahead===0&&ne===d)return Ve;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var N=k.block_start+re;if((k.strstart===0||k.strstart>=N)&&(k.lookahead=k.strstart-N,k.strstart=N,ut(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-xe&&(ut(k,!1),k.strm.avail_out===0))return Ve}return k.insert=0,ne===f?(ut(k,!0),k.strm.avail_out===0?ft:vt):(k.strstart>k.block_start&&(ut(k,!1),k.strm.avail_out===0),Ve)}function We(k,ne){for(var re,N;;){if(k.lookahead<xe){if(me(k),k.lookahead<xe&&ne===d)return Ve;if(k.lookahead===0)break}if(re=0,k.lookahead>=oe&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+oe-1])&k.hash_mask,re=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),re!==0&&k.strstart-re<=k.w_size-xe&&(k.match_length=ae(k,re)),k.match_length>=oe)if(N=o._tr_tally(k,k.strstart-k.match_start,k.match_length-oe),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=oe){k.match_length--;do k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+oe-1])&k.hash_mask,re=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart;while(--k.match_length!==0);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else N=o._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(N&&(ut(k,!1),k.strm.avail_out===0))return Ve}return k.insert=k.strstart<oe-1?k.strstart:oe-1,ne===f?(ut(k,!0),k.strm.avail_out===0?ft:vt):k.last_lit&&(ut(k,!1),k.strm.avail_out===0)?Ve:ot}function Ze(k,ne){for(var re,N,z;;){if(k.lookahead<xe){if(me(k),k.lookahead<xe&&ne===d)return Ve;if(k.lookahead===0)break}if(re=0,k.lookahead>=oe&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+oe-1])&k.hash_mask,re=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=oe-1,re!==0&&k.prev_length<k.max_lazy_match&&k.strstart-re<=k.w_size-xe&&(k.match_length=ae(k,re),k.match_length<=5&&(k.strategy===E||k.match_length===oe&&k.strstart-k.match_start>4096)&&(k.match_length=oe-1)),k.prev_length>=oe&&k.match_length<=k.prev_length){z=k.strstart+k.lookahead-oe,N=o._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-oe),k.lookahead-=k.prev_length-1,k.prev_length-=2;do++k.strstart<=z&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+oe-1])&k.hash_mask,re=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart);while(--k.prev_length!==0);if(k.match_available=0,k.match_length=oe-1,k.strstart++,N&&(ut(k,!1),k.strm.avail_out===0))return Ve}else if(k.match_available){if(N=o._tr_tally(k,0,k.window[k.strstart-1]),N&&ut(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return Ve}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(N=o._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<oe-1?k.strstart:oe-1,ne===f?(ut(k,!0),k.strm.avail_out===0?ft:vt):k.last_lit&&(ut(k,!1),k.strm.avail_out===0)?Ve:ot}function pt(k,ne){for(var re,N,z,Z,j=k.window;;){if(k.lookahead<=F){if(me(k),k.lookahead<=F&&ne===d)return Ve;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=oe&&k.strstart>0&&(z=k.strstart-1,N=j[z],N===j[++z]&&N===j[++z]&&N===j[++z])){Z=k.strstart+F;do;while(N===j[++z]&&N===j[++z]&&N===j[++z]&&N===j[++z]&&N===j[++z]&&N===j[++z]&&N===j[++z]&&N===j[++z]&&z<Z);k.match_length=F-(Z-z),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=oe?(re=o._tr_tally(k,1,k.match_length-oe),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(re=o._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),re&&(ut(k,!1),k.strm.avail_out===0))return Ve}return k.insert=0,ne===f?(ut(k,!0),k.strm.avail_out===0?ft:vt):k.last_lit&&(ut(k,!1),k.strm.avail_out===0)?Ve:ot}function Bt(k,ne){for(var re;;){if(k.lookahead===0&&(me(k),k.lookahead===0)){if(ne===d)return Ve;break}if(k.match_length=0,re=o._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,re&&(ut(k,!1),k.strm.avail_out===0))return Ve}return k.insert=0,ne===f?(ut(k,!0),k.strm.avail_out===0?ft:vt):k.last_lit&&(ut(k,!1),k.strm.avail_out===0)?Ve:ot}function it(k,ne,re,N,z){this.good_length=k,this.max_lazy=ne,this.nice_length=re,this.max_chain=N,this.func=z}var Ft;Ft=[new it(0,0,0,0,Be),new it(4,4,8,4,We),new it(4,5,16,8,We),new it(4,6,32,32,We),new it(4,4,16,16,Ze),new it(8,16,32,32,Ze),new it(8,16,128,128,Ze),new it(8,32,128,256,Ze),new it(32,128,258,1024,Ze),new it(32,258,258,4096,Ze)];function Yt(k){k.window_size=2*k.w_size,Dt(k.head),k.max_lazy_match=Ft[k.level].max_lazy,k.good_match=Ft[k.level].good_length,k.nice_match=Ft[k.level].nice_length,k.max_chain_length=Ft[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=oe-1,k.match_available=0,k.ins_h=0}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(L*2),this.dyn_dtree=new s.Buf16((2*$+1)*2),this.bl_tree=new s.Buf16((2*te+1)*2),Dt(this.dyn_ltree),Dt(this.dyn_dtree),Dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(ce+1),this.heap=new s.Buf16(2*G+1),Dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*G+1),Dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(k){var ne;return!k||!k.state?Ct(k,p):(k.total_in=k.total_out=0,k.data_type=C,ne=k.state,ne.pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?Ne:ke,k.adler=ne.wrap===2?0:1,ne.last_flush=d,o._tr_init(ne),x)}function pe(k){var ne=fe(k);return ne===x&&Yt(k.state),ne}function Oe(k,ne){return!k||!k.state||k.state.wrap!==2?p:(k.state.gzhead=ne,x)}function Y(k,ne,re,N,z,Z){if(!k)return p;var j=1;if(ne===_&&(ne=6),N<0?(j=0,N=-N):N>15&&(j=2,N-=16),z<1||z>M||re!==I||N<8||N>15||ne<0||ne>9||Z<0||Z>D)return Ct(k,p);N===8&&(N=9);var U=new O;return k.state=U,U.strm=k,U.wrap=j,U.gzhead=null,U.w_bits=N,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=z+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+oe-1)/oe),U.window=new s.Buf8(U.w_size*2),U.head=new s.Buf16(U.hash_size),U.prev=new s.Buf16(U.w_size),U.lit_bufsize=1<<z+6,U.pending_buf_size=U.lit_bufsize*4,U.pending_buf=new s.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=ne,U.strategy=Z,U.method=re,pe(k)}function ue(k,ne){return Y(k,ne,I,H,q,T)}function R(k,ne){var re,N,z,Z;if(!k||!k.state||ne>v||ne<0)return k?Ct(k,p):p;if(N=k.state,!k.output||!k.input&&k.avail_in!==0||N.status===Ue&&ne!==f)return Ct(k,k.avail_out===0?w:p);if(N.strm=k,re=N.last_flush,N.last_flush=ne,N.status===Ne)if(N.wrap===2)k.adler=0,Je(N,31),Je(N,139),Je(N,8),N.gzhead?(Je(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),Je(N,N.gzhead.time&255),Je(N,N.gzhead.time>>8&255),Je(N,N.gzhead.time>>16&255),Je(N,N.gzhead.time>>24&255),Je(N,N.level===9?2:N.strategy>=S||N.level<2?4:0),Je(N,N.gzhead.os&255),N.gzhead.extra&&N.gzhead.extra.length&&(Je(N,N.gzhead.extra.length&255),Je(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(k.adler=l(k.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=He):(Je(N,0),Je(N,0),Je(N,0),Je(N,0),Je(N,0),Je(N,N.level===9?2:N.strategy>=S||N.level<2?4:0),Je(N,at),N.status=ke);else{var j=I+(N.w_bits-8<<4)<<8,U=-1;N.strategy>=S||N.level<2?U=0:N.level<6?U=1:N.level===6?U=2:U=3,j|=U<<6,N.strstart!==0&&(j|=Fe),j+=31-j%31,N.status=ke,It(N,j),N.strstart!==0&&(It(N,k.adler>>>16),It(N,k.adler&65535)),k.adler=1}if(N.status===He)if(N.gzhead.extra){for(z=N.pending;N.gzindex<(N.gzhead.extra.length&65535)&&!(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),Rt(k),z=N.pending,N.pending===N.pending_buf_size));)Je(N,N.gzhead.extra[N.gzindex]&255),N.gzindex++;N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=le)}else N.status=le;if(N.status===le)if(N.gzhead.name){z=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),Rt(k),z=N.pending,N.pending===N.pending_buf_size)){Z=1;break}N.gzindex<N.gzhead.name.length?Z=N.gzhead.name.charCodeAt(N.gzindex++)&255:Z=0,Je(N,Z)}while(Z!==0);N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),Z===0&&(N.gzindex=0,N.status=Pe)}else N.status=Pe;if(N.status===Pe)if(N.gzhead.comment){z=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),Rt(k),z=N.pending,N.pending===N.pending_buf_size)){Z=1;break}N.gzindex<N.gzhead.comment.length?Z=N.gzhead.comment.charCodeAt(N.gzindex++)&255:Z=0,Je(N,Z)}while(Z!==0);N.gzhead.hcrc&&N.pending>z&&(k.adler=l(k.adler,N.pending_buf,N.pending-z,z)),Z===0&&(N.status=ve)}else N.status=ve;if(N.status===ve&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&Rt(k),N.pending+2<=N.pending_buf_size&&(Je(N,k.adler&255),Je(N,k.adler>>8&255),k.adler=0,N.status=ke)):N.status=ke),N.pending!==0){if(Rt(k),k.avail_out===0)return N.last_flush=-1,x}else if(k.avail_in===0&&Tt(ne)<=Tt(re)&&ne!==f)return Ct(k,w);if(N.status===Ue&&k.avail_in!==0)return Ct(k,w);if(k.avail_in!==0||N.lookahead!==0||ne!==d&&N.status!==Ue){var V=N.strategy===S?Bt(N,ne):N.strategy===b?pt(N,ne):Ft[N.level].func(N,ne);if((V===ft||V===vt)&&(N.status=Ue),V===Ve||V===ft)return k.avail_out===0&&(N.last_flush=-1),x;if(V===ot&&(ne===c?o._tr_align(N):ne!==v&&(o._tr_stored_block(N,0,0,!1),ne===h&&(Dt(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),Rt(k),k.avail_out===0))return N.last_flush=-1,x}return ne!==f?x:N.wrap<=0?g:(N.wrap===2?(Je(N,k.adler&255),Je(N,k.adler>>8&255),Je(N,k.adler>>16&255),Je(N,k.adler>>24&255),Je(N,k.total_in&255),Je(N,k.total_in>>8&255),Je(N,k.total_in>>16&255),Je(N,k.total_in>>24&255)):(It(N,k.adler>>>16),It(N,k.adler&65535)),Rt(k),N.wrap>0&&(N.wrap=-N.wrap),N.pending!==0?x:g)}function de(k){var ne;return!k||!k.state?p:(ne=k.state.status,ne!==Ne&&ne!==He&&ne!==le&&ne!==Pe&&ne!==ve&&ne!==ke&&ne!==Ue?Ct(k,p):(k.state=null,ne===ke?Ct(k,m):x))}function ze(k,ne){var re=ne.length,N,z,Z,j,U,V,ie,ge;if(!k||!k.state||(N=k.state,j=N.wrap,j===2||j===1&&N.status!==Ne||N.lookahead))return p;for(j===1&&(k.adler=a(k.adler,ne,re,0)),N.wrap=0,re>=N.w_size&&(j===0&&(Dt(N.head),N.strstart=0,N.block_start=0,N.insert=0),ge=new s.Buf8(N.w_size),s.arraySet(ge,ne,re-N.w_size,N.w_size,0),ne=ge,re=N.w_size),U=k.avail_in,V=k.next_in,ie=k.input,k.avail_in=re,k.next_in=0,k.input=ne,me(N);N.lookahead>=oe;){z=N.strstart,Z=N.lookahead-(oe-1);do N.ins_h=(N.ins_h<<N.hash_shift^N.window[z+oe-1])&N.hash_mask,N.prev[z&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=z,z++;while(--Z);N.strstart=z,N.lookahead=oe-1,me(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=oe-1,N.match_available=0,k.next_in=V,k.input=ie,k.avail_in=U,N.wrap=j,x}i.deflateInit=ue,i.deflateInit2=Y,i.deflateReset=pe,i.deflateResetKeep=fe,i.deflateSetHeader=Oe,i.deflate=R,i.deflateEnd=de,i.deflateSetDictionary=ze,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=s},{}],48:[function(n,r,i){var s=30,o=12;r.exports=function(l,u){var d,c,h,f,v,x,g,p,m,w,_,E,S,b,D,T,C,I,M,H,q,W,K,G,$;d=l.state,c=l.next_in,G=l.input,h=c+(l.avail_in-5),f=l.next_out,$=l.output,v=f-(u-l.avail_out),x=f+(l.avail_out-257),g=d.dmax,p=d.wsize,m=d.whave,w=d.wnext,_=d.window,E=d.hold,S=d.bits,b=d.lencode,D=d.distcode,T=(1<<d.lenbits)-1,C=(1<<d.distbits)-1;e:do{S<15&&(E+=G[c++]<<S,S+=8,E+=G[c++]<<S,S+=8),I=b[E&T];t:for(;;){if(M=I>>>24,E>>>=M,S-=M,M=I>>>16&255,M===0)$[f++]=I&65535;else if(M&16){H=I&65535,M&=15,M&&(S<M&&(E+=G[c++]<<S,S+=8),H+=E&(1<<M)-1,E>>>=M,S-=M),S<15&&(E+=G[c++]<<S,S+=8,E+=G[c++]<<S,S+=8),I=D[E&C];n:for(;;){if(M=I>>>24,E>>>=M,S-=M,M=I>>>16&255,M&16){if(q=I&65535,M&=15,S<M&&(E+=G[c++]<<S,S+=8,S<M&&(E+=G[c++]<<S,S+=8)),q+=E&(1<<M)-1,q>g){l.msg="invalid distance too far back",d.mode=s;break e}if(E>>>=M,S-=M,M=f-v,q>M){if(M=q-M,M>m&&d.sane){l.msg="invalid distance too far back",d.mode=s;break e}if(W=0,K=_,w===0){if(W+=p-M,M<H){H-=M;do $[f++]=_[W++];while(--M);W=f-q,K=$}}else if(w<M){if(W+=p+w-M,M-=w,M<H){H-=M;do $[f++]=_[W++];while(--M);if(W=0,w<H){M=w,H-=M;do $[f++]=_[W++];while(--M);W=f-q,K=$}}}else if(W+=w-M,M<H){H-=M;do $[f++]=_[W++];while(--M);W=f-q,K=$}for(;H>2;)$[f++]=K[W++],$[f++]=K[W++],$[f++]=K[W++],H-=3;H&&($[f++]=K[W++],H>1&&($[f++]=K[W++]))}else{W=f-q;do $[f++]=$[W++],$[f++]=$[W++],$[f++]=$[W++],H-=3;while(H>2);H&&($[f++]=$[W++],H>1&&($[f++]=$[W++]))}}else if(M&64){l.msg="invalid distance code",d.mode=s;break e}else{I=D[(I&65535)+(E&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){d.mode=o;break e}else{l.msg="invalid literal/length code",d.mode=s;break e}else{I=b[(I&65535)+(E&(1<<M)-1)];continue t}break}}while(c<h&&f<x);H=S>>3,c-=H,S-=H<<3,E&=(1<<S)-1,l.next_in=c,l.next_out=f,l.avail_in=c<h?5+(h-c):5-(c-h),l.avail_out=f<x?257+(x-f):257-(f-x),d.hold=E,d.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=0,c=1,h=2,f=4,v=5,x=6,g=0,p=1,m=2,w=-2,_=-3,E=-4,S=-5,b=8,D=1,T=2,C=3,I=4,M=5,H=6,q=7,W=8,K=9,G=10,$=11,te=12,L=13,ce=14,oe=15,F=16,xe=17,Fe=18,Ne=19,He=20,le=21,Pe=22,ve=23,ke=24,Ue=25,Ve=26,ot=27,ft=28,vt=29,at=30,Ct=31,Tt=32,Dt=852,Rt=592,ut=15,Je=ut;function It(Y){return(Y>>>24&255)+(Y>>>8&65280)+((Y&65280)<<8)+((Y&255)<<24)}function rn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ae(Y){var ue;return!Y||!Y.state?w:(ue=Y.state,Y.total_in=Y.total_out=ue.total=0,Y.msg="",ue.wrap&&(Y.adler=ue.wrap&1),ue.mode=D,ue.last=0,ue.havedict=0,ue.dmax=32768,ue.head=null,ue.hold=0,ue.bits=0,ue.lencode=ue.lendyn=new s.Buf32(Dt),ue.distcode=ue.distdyn=new s.Buf32(Rt),ue.sane=1,ue.back=-1,g)}function me(Y){var ue;return!Y||!Y.state?w:(ue=Y.state,ue.wsize=0,ue.whave=0,ue.wnext=0,ae(Y))}function Be(Y,ue){var R,de;return!Y||!Y.state||(de=Y.state,ue<0?(R=0,ue=-ue):(R=(ue>>4)+1,ue<48&&(ue&=15)),ue&&(ue<8||ue>15))?w:(de.window!==null&&de.wbits!==ue&&(de.window=null),de.wrap=R,de.wbits=ue,me(Y))}function We(Y,ue){var R,de;return Y?(de=new rn,Y.state=de,de.window=null,R=Be(Y,ue),R!==g&&(Y.state=null),R):w}function Ze(Y){return We(Y,Je)}var pt=!0,Bt,it;function Ft(Y){if(pt){var ue;for(Bt=new s.Buf32(512),it=new s.Buf32(32),ue=0;ue<144;)Y.lens[ue++]=8;for(;ue<256;)Y.lens[ue++]=9;for(;ue<280;)Y.lens[ue++]=7;for(;ue<288;)Y.lens[ue++]=8;for(u(c,Y.lens,0,288,Bt,0,Y.work,{bits:9}),ue=0;ue<32;)Y.lens[ue++]=5;u(h,Y.lens,0,32,it,0,Y.work,{bits:5}),pt=!1}Y.lencode=Bt,Y.lenbits=9,Y.distcode=it,Y.distbits=5}function Yt(Y,ue,R,de){var ze,k=Y.state;return k.window===null&&(k.wsize=1<<k.wbits,k.wnext=0,k.whave=0,k.window=new s.Buf8(k.wsize)),de>=k.wsize?(s.arraySet(k.window,ue,R-k.wsize,k.wsize,0),k.wnext=0,k.whave=k.wsize):(ze=k.wsize-k.wnext,ze>de&&(ze=de),s.arraySet(k.window,ue,R-de,ze,k.wnext),de-=ze,de?(s.arraySet(k.window,ue,R-de,de,0),k.wnext=de,k.whave=k.wsize):(k.wnext+=ze,k.wnext===k.wsize&&(k.wnext=0),k.whave<k.wsize&&(k.whave+=ze))),0}function O(Y,ue){var R,de,ze,k,ne,re,N,z,Z,j,U,V,ie,ge,we=0,Ee,_e,De,Te,Me,et,Ke,Nt,nt=new s.Buf8(4),st,yt,Pr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return w;R=Y.state,R.mode===te&&(R.mode=L),ne=Y.next_out,ze=Y.output,N=Y.avail_out,k=Y.next_in,de=Y.input,re=Y.avail_in,z=R.hold,Z=R.bits,j=re,U=N,Nt=g;e:for(;;)switch(R.mode){case D:if(R.wrap===0){R.mode=L;break}for(;Z<16;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(R.wrap&2&&z===35615){R.check=0,nt[0]=z&255,nt[1]=z>>>8&255,R.check=a(R.check,nt,2,0),z=0,Z=0,R.mode=T;break}if(R.flags=0,R.head&&(R.head.done=!1),!(R.wrap&1)||(((z&255)<<8)+(z>>8))%31){Y.msg="incorrect header check",R.mode=at;break}if((z&15)!==b){Y.msg="unknown compression method",R.mode=at;break}if(z>>>=4,Z-=4,Ke=(z&15)+8,R.wbits===0)R.wbits=Ke;else if(Ke>R.wbits){Y.msg="invalid window size",R.mode=at;break}R.dmax=1<<Ke,Y.adler=R.check=1,R.mode=z&512?G:te,z=0,Z=0;break;case T:for(;Z<16;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(R.flags=z,(R.flags&255)!==b){Y.msg="unknown compression method",R.mode=at;break}if(R.flags&57344){Y.msg="unknown header flags set",R.mode=at;break}R.head&&(R.head.text=z>>8&1),R.flags&512&&(nt[0]=z&255,nt[1]=z>>>8&255,R.check=a(R.check,nt,2,0)),z=0,Z=0,R.mode=C;case C:for(;Z<32;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.head&&(R.head.time=z),R.flags&512&&(nt[0]=z&255,nt[1]=z>>>8&255,nt[2]=z>>>16&255,nt[3]=z>>>24&255,R.check=a(R.check,nt,4,0)),z=0,Z=0,R.mode=I;case I:for(;Z<16;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.head&&(R.head.xflags=z&255,R.head.os=z>>8),R.flags&512&&(nt[0]=z&255,nt[1]=z>>>8&255,R.check=a(R.check,nt,2,0)),z=0,Z=0,R.mode=M;case M:if(R.flags&1024){for(;Z<16;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.length=z,R.head&&(R.head.extra_len=z),R.flags&512&&(nt[0]=z&255,nt[1]=z>>>8&255,R.check=a(R.check,nt,2,0)),z=0,Z=0}else R.head&&(R.head.extra=null);R.mode=H;case H:if(R.flags&1024&&(V=R.length,V>re&&(V=re),V&&(R.head&&(Ke=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),s.arraySet(R.head.extra,de,k,V,Ke)),R.flags&512&&(R.check=a(R.check,de,V,k)),re-=V,k+=V,R.length-=V),R.length))break e;R.length=0,R.mode=q;case q:if(R.flags&2048){if(re===0)break e;V=0;do Ke=de[k+V++],R.head&&Ke&&R.length<65536&&(R.head.name+=String.fromCharCode(Ke));while(Ke&&V<re);if(R.flags&512&&(R.check=a(R.check,de,V,k)),re-=V,k+=V,Ke)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=W;case W:if(R.flags&4096){if(re===0)break e;V=0;do Ke=de[k+V++],R.head&&Ke&&R.length<65536&&(R.head.comment+=String.fromCharCode(Ke));while(Ke&&V<re);if(R.flags&512&&(R.check=a(R.check,de,V,k)),re-=V,k+=V,Ke)break e}else R.head&&(R.head.comment=null);R.mode=K;case K:if(R.flags&512){for(;Z<16;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(z!==(R.check&65535)){Y.msg="header crc mismatch",R.mode=at;break}z=0,Z=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),Y.adler=R.check=0,R.mode=te;break;case G:for(;Z<32;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}Y.adler=R.check=It(z),z=0,Z=0,R.mode=$;case $:if(R.havedict===0)return Y.next_out=ne,Y.avail_out=N,Y.next_in=k,Y.avail_in=re,R.hold=z,R.bits=Z,m;Y.adler=R.check=1,R.mode=te;case te:if(ue===v||ue===x)break e;case L:if(R.last){z>>>=Z&7,Z-=Z&7,R.mode=ot;break}for(;Z<3;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}switch(R.last=z&1,z>>>=1,Z-=1,z&3){case 0:R.mode=ce;break;case 1:if(Ft(R),R.mode=He,ue===x){z>>>=2,Z-=2;break e}break;case 2:R.mode=xe;break;case 3:Y.msg="invalid block type",R.mode=at}z>>>=2,Z-=2;break;case ce:for(z>>>=Z&7,Z-=Z&7;Z<32;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if((z&65535)!==(z>>>16^65535)){Y.msg="invalid stored block lengths",R.mode=at;break}if(R.length=z&65535,z=0,Z=0,R.mode=oe,ue===x)break e;case oe:R.mode=F;case F:if(V=R.length,V){if(V>re&&(V=re),V>N&&(V=N),V===0)break e;s.arraySet(ze,de,k,V,ne),re-=V,k+=V,N-=V,ne+=V,R.length-=V;break}R.mode=te;break;case xe:for(;Z<14;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(R.nlen=(z&31)+257,z>>>=5,Z-=5,R.ndist=(z&31)+1,z>>>=5,Z-=5,R.ncode=(z&15)+4,z>>>=4,Z-=4,R.nlen>286||R.ndist>30){Y.msg="too many length or distance symbols",R.mode=at;break}R.have=0,R.mode=Fe;case Fe:for(;R.have<R.ncode;){for(;Z<3;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.lens[Pr[R.have++]]=z&7,z>>>=3,Z-=3}for(;R.have<19;)R.lens[Pr[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,st={bits:R.lenbits},Nt=u(d,R.lens,0,19,R.lencode,0,R.work,st),R.lenbits=st.bits,Nt){Y.msg="invalid code lengths set",R.mode=at;break}R.have=0,R.mode=Ne;case Ne:for(;R.have<R.nlen+R.ndist;){for(;we=R.lencode[z&(1<<R.lenbits)-1],Ee=we>>>24,_e=we>>>16&255,De=we&65535,!(Ee<=Z);){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(De<16)z>>>=Ee,Z-=Ee,R.lens[R.have++]=De;else{if(De===16){for(yt=Ee+2;Z<yt;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(z>>>=Ee,Z-=Ee,R.have===0){Y.msg="invalid bit length repeat",R.mode=at;break}Ke=R.lens[R.have-1],V=3+(z&3),z>>>=2,Z-=2}else if(De===17){for(yt=Ee+3;Z<yt;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}z>>>=Ee,Z-=Ee,Ke=0,V=3+(z&7),z>>>=3,Z-=3}else{for(yt=Ee+7;Z<yt;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}z>>>=Ee,Z-=Ee,Ke=0,V=11+(z&127),z>>>=7,Z-=7}if(R.have+V>R.nlen+R.ndist){Y.msg="invalid bit length repeat",R.mode=at;break}for(;V--;)R.lens[R.have++]=Ke}}if(R.mode===at)break;if(R.lens[256]===0){Y.msg="invalid code -- missing end-of-block",R.mode=at;break}if(R.lenbits=9,st={bits:R.lenbits},Nt=u(c,R.lens,0,R.nlen,R.lencode,0,R.work,st),R.lenbits=st.bits,Nt){Y.msg="invalid literal/lengths set",R.mode=at;break}if(R.distbits=6,R.distcode=R.distdyn,st={bits:R.distbits},Nt=u(h,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,st),R.distbits=st.bits,Nt){Y.msg="invalid distances set",R.mode=at;break}if(R.mode=He,ue===x)break e;case He:R.mode=le;case le:if(re>=6&&N>=258){Y.next_out=ne,Y.avail_out=N,Y.next_in=k,Y.avail_in=re,R.hold=z,R.bits=Z,l(Y,U),ne=Y.next_out,ze=Y.output,N=Y.avail_out,k=Y.next_in,de=Y.input,re=Y.avail_in,z=R.hold,Z=R.bits,R.mode===te&&(R.back=-1);break}for(R.back=0;we=R.lencode[z&(1<<R.lenbits)-1],Ee=we>>>24,_e=we>>>16&255,De=we&65535,!(Ee<=Z);){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(_e&&!(_e&240)){for(Te=Ee,Me=_e,et=De;we=R.lencode[et+((z&(1<<Te+Me)-1)>>Te)],Ee=we>>>24,_e=we>>>16&255,De=we&65535,!(Te+Ee<=Z);){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}z>>>=Te,Z-=Te,R.back+=Te}if(z>>>=Ee,Z-=Ee,R.back+=Ee,R.length=De,_e===0){R.mode=Ve;break}if(_e&32){R.back=-1,R.mode=te;break}if(_e&64){Y.msg="invalid literal/length code",R.mode=at;break}R.extra=_e&15,R.mode=Pe;case Pe:if(R.extra){for(yt=R.extra;Z<yt;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.length+=z&(1<<R.extra)-1,z>>>=R.extra,Z-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=ve;case ve:for(;we=R.distcode[z&(1<<R.distbits)-1],Ee=we>>>24,_e=we>>>16&255,De=we&65535,!(Ee<=Z);){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(!(_e&240)){for(Te=Ee,Me=_e,et=De;we=R.distcode[et+((z&(1<<Te+Me)-1)>>Te)],Ee=we>>>24,_e=we>>>16&255,De=we&65535,!(Te+Ee<=Z);){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}z>>>=Te,Z-=Te,R.back+=Te}if(z>>>=Ee,Z-=Ee,R.back+=Ee,_e&64){Y.msg="invalid distance code",R.mode=at;break}R.offset=De,R.extra=_e&15,R.mode=ke;case ke:if(R.extra){for(yt=R.extra;Z<yt;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}R.offset+=z&(1<<R.extra)-1,z>>>=R.extra,Z-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){Y.msg="invalid distance too far back",R.mode=at;break}R.mode=Ue;case Ue:if(N===0)break e;if(V=U-N,R.offset>V){if(V=R.offset-V,V>R.whave&&R.sane){Y.msg="invalid distance too far back",R.mode=at;break}V>R.wnext?(V-=R.wnext,ie=R.wsize-V):ie=R.wnext-V,V>R.length&&(V=R.length),ge=R.window}else ge=ze,ie=ne-R.offset,V=R.length;V>N&&(V=N),N-=V,R.length-=V;do ze[ne++]=ge[ie++];while(--V);R.length===0&&(R.mode=le);break;case Ve:if(N===0)break e;ze[ne++]=R.length,N--,R.mode=le;break;case ot:if(R.wrap){for(;Z<32;){if(re===0)break e;re--,z|=de[k++]<<Z,Z+=8}if(U-=N,Y.total_out+=U,R.total+=U,U&&(Y.adler=R.check=R.flags?a(R.check,ze,U,ne-U):o(R.check,ze,U,ne-U)),U=N,(R.flags?z:It(z))!==R.check){Y.msg="incorrect data check",R.mode=at;break}z=0,Z=0}R.mode=ft;case ft:if(R.wrap&&R.flags){for(;Z<32;){if(re===0)break e;re--,z+=de[k++]<<Z,Z+=8}if(z!==(R.total&4294967295)){Y.msg="incorrect length check",R.mode=at;break}z=0,Z=0}R.mode=vt;case vt:Nt=p;break e;case at:Nt=_;break e;case Ct:return E;case Tt:default:return w}return Y.next_out=ne,Y.avail_out=N,Y.next_in=k,Y.avail_in=re,R.hold=z,R.bits=Z,(R.wsize||U!==Y.avail_out&&R.mode<at&&(R.mode<ot||ue!==f))&&Yt(Y,Y.output,Y.next_out,U-Y.avail_out),j-=Y.avail_in,U-=Y.avail_out,Y.total_in+=j,Y.total_out+=U,R.total+=U,R.wrap&&U&&(Y.adler=R.check=R.flags?a(R.check,ze,U,Y.next_out-U):o(R.check,ze,U,Y.next_out-U)),Y.data_type=R.bits+(R.last?64:0)+(R.mode===te?128:0)+(R.mode===He||R.mode===oe?256:0),(j===0&&U===0||ue===f)&&Nt===g&&(Nt=S),Nt}function fe(Y){if(!Y||!Y.state)return w;var ue=Y.state;return ue.window&&(ue.window=null),Y.state=null,g}function pe(Y,ue){var R;return!Y||!Y.state||(R=Y.state,!(R.wrap&2))?w:(R.head=ue,ue.done=!1,g)}function Oe(Y,ue){var R=ue.length,de,ze,k;return!Y||!Y.state||(de=Y.state,de.wrap!==0&&de.mode!==$)?w:de.mode===$&&(ze=1,ze=o(ze,ue,R,0),ze!==de.check)?_:(k=Yt(Y,ue,R,R),k?(de.mode=Ct,E):(de.havedict=1,g))}i.inflateReset=me,i.inflateReset2=Be,i.inflateResetKeep=ae,i.inflateInit=Ze,i.inflateInit2=We,i.inflate=O,i.inflateEnd=fe,i.inflateGetHeader=pe,i.inflateSetDictionary=Oe,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=15,a=852,l=592,u=0,d=1,c=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,m,w,_,E,S,b,D){var T=D.bits,C=0,I=0,M=0,H=0,q=0,W=0,K=0,G=0,$=0,te=0,L,ce,oe,F,xe,Fe=null,Ne=0,He,le=new s.Buf16(o+1),Pe=new s.Buf16(o+1),ve=null,ke=0,Ue,Ve,ot;for(C=0;C<=o;C++)le[C]=0;for(I=0;I<_;I++)le[m[w+I]]++;for(q=T,H=o;H>=1&&le[H]===0;H--);if(q>H&&(q=H),H===0)return E[S++]=1<<24|64<<16|0,E[S++]=1<<24|64<<16|0,D.bits=1,0;for(M=1;M<H&&le[M]===0;M++);for(q<M&&(q=M),G=1,C=1;C<=o;C++)if(G<<=1,G-=le[C],G<0)return-1;if(G>0&&(p===u||H!==1))return-1;for(Pe[1]=0,C=1;C<o;C++)Pe[C+1]=Pe[C]+le[C];for(I=0;I<_;I++)m[w+I]!==0&&(b[Pe[m[w+I]]++]=I);if(p===u?(Fe=ve=b,He=19):p===d?(Fe=h,Ne-=257,ve=f,ke-=257,He=256):(Fe=v,ve=x,He=-1),te=0,I=0,C=M,xe=S,W=q,K=0,oe=-1,$=1<<q,F=$-1,p===d&&$>a||p===c&&$>l)return 1;for(;;){Ue=C-K,b[I]<He?(Ve=0,ot=b[I]):b[I]>He?(Ve=ve[ke+b[I]],ot=Fe[Ne+b[I]]):(Ve=96,ot=0),L=1<<C-K,ce=1<<W,M=ce;do ce-=L,E[xe+(te>>K)+ce]=Ue<<24|Ve<<16|ot|0;while(ce!==0);for(L=1<<C-1;te&L;)L>>=1;if(L!==0?(te&=L-1,te+=L):te=0,I++,--le[C]===0){if(C===H)break;C=m[w+b[I]]}if(C>q&&(te&F)!==oe){for(K===0&&(K=q),xe+=M,W=C-K,G=1<<W;W+K<H&&(G-=le[W+K],!(G<=0));)W++,G<<=1;if($+=1<<W,p===d&&$>a||p===c&&$>l)return 1;oe=te&F,E[oe]=q<<24|W<<16|xe-S|0}}return te!==0&&(E[xe+te]=C-K<<24|64<<16|0),D.bits=q,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=4,a=0,l=1,u=2;function d(O){for(var fe=O.length;--fe>=0;)O[fe]=0}var c=0,h=1,f=2,v=3,x=258,g=29,p=256,m=p+1+g,w=30,_=19,E=2*m+1,S=15,b=16,D=7,T=256,C=16,I=17,M=18,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=512,$=new Array((m+2)*2);d($);var te=new Array(w*2);d(te);var L=new Array(G);d(L);var ce=new Array(x-v+1);d(ce);var oe=new Array(g);d(oe);var F=new Array(w);d(F);function xe(O,fe,pe,Oe,Y){this.static_tree=O,this.extra_bits=fe,this.extra_base=pe,this.elems=Oe,this.max_length=Y,this.has_stree=O&&O.length}var Fe,Ne,He;function le(O,fe){this.dyn_tree=O,this.max_code=0,this.stat_desc=fe}function Pe(O){return O<256?L[O]:L[256+(O>>>7)]}function ve(O,fe){O.pending_buf[O.pending++]=fe&255,O.pending_buf[O.pending++]=fe>>>8&255}function ke(O,fe,pe){O.bi_valid>b-pe?(O.bi_buf|=fe<<O.bi_valid&65535,ve(O,O.bi_buf),O.bi_buf=fe>>b-O.bi_valid,O.bi_valid+=pe-b):(O.bi_buf|=fe<<O.bi_valid&65535,O.bi_valid+=pe)}function Ue(O,fe,pe){ke(O,pe[fe*2],pe[fe*2+1])}function Ve(O,fe){var pe=0;do pe|=O&1,O>>>=1,pe<<=1;while(--fe>0);return pe>>>1}function ot(O){O.bi_valid===16?(ve(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)}function ft(O,fe){var pe=fe.dyn_tree,Oe=fe.max_code,Y=fe.stat_desc.static_tree,ue=fe.stat_desc.has_stree,R=fe.stat_desc.extra_bits,de=fe.stat_desc.extra_base,ze=fe.stat_desc.max_length,k,ne,re,N,z,Z,j=0;for(N=0;N<=S;N++)O.bl_count[N]=0;for(pe[O.heap[O.heap_max]*2+1]=0,k=O.heap_max+1;k<E;k++)ne=O.heap[k],N=pe[pe[ne*2+1]*2+1]+1,N>ze&&(N=ze,j++),pe[ne*2+1]=N,!(ne>Oe)&&(O.bl_count[N]++,z=0,ne>=de&&(z=R[ne-de]),Z=pe[ne*2],O.opt_len+=Z*(N+z),ue&&(O.static_len+=Z*(Y[ne*2+1]+z)));if(j!==0){do{for(N=ze-1;O.bl_count[N]===0;)N--;O.bl_count[N]--,O.bl_count[N+1]+=2,O.bl_count[ze]--,j-=2}while(j>0);for(N=ze;N!==0;N--)for(ne=O.bl_count[N];ne!==0;)re=O.heap[--k],!(re>Oe)&&(pe[re*2+1]!==N&&(O.opt_len+=(N-pe[re*2+1])*pe[re*2],pe[re*2+1]=N),ne--)}}function vt(O,fe,pe){var Oe=new Array(S+1),Y=0,ue,R;for(ue=1;ue<=S;ue++)Oe[ue]=Y=Y+pe[ue-1]<<1;for(R=0;R<=fe;R++){var de=O[R*2+1];de!==0&&(O[R*2]=Ve(Oe[de]++,de))}}function at(){var O,fe,pe,Oe,Y,ue=new Array(S+1);for(pe=0,Oe=0;Oe<g-1;Oe++)for(oe[Oe]=pe,O=0;O<1<<H[Oe];O++)ce[pe++]=Oe;for(ce[pe-1]=Oe,Y=0,Oe=0;Oe<16;Oe++)for(F[Oe]=Y,O=0;O<1<<q[Oe];O++)L[Y++]=Oe;for(Y>>=7;Oe<w;Oe++)for(F[Oe]=Y<<7,O=0;O<1<<q[Oe]-7;O++)L[256+Y++]=Oe;for(fe=0;fe<=S;fe++)ue[fe]=0;for(O=0;O<=143;)$[O*2+1]=8,O++,ue[8]++;for(;O<=255;)$[O*2+1]=9,O++,ue[9]++;for(;O<=279;)$[O*2+1]=7,O++,ue[7]++;for(;O<=287;)$[O*2+1]=8,O++,ue[8]++;for(vt($,m+1,ue),O=0;O<w;O++)te[O*2+1]=5,te[O*2]=Ve(O,5);Fe=new xe($,H,p+1,m,S),Ne=new xe(te,q,0,w,S),He=new xe(new Array(0),W,0,_,D)}function Ct(O){var fe;for(fe=0;fe<m;fe++)O.dyn_ltree[fe*2]=0;for(fe=0;fe<w;fe++)O.dyn_dtree[fe*2]=0;for(fe=0;fe<_;fe++)O.bl_tree[fe*2]=0;O.dyn_ltree[T*2]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Tt(O){O.bi_valid>8?ve(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Dt(O,fe,pe,Oe){Tt(O),ve(O,pe),ve(O,~pe),s.arraySet(O.pending_buf,O.window,fe,pe,O.pending),O.pending+=pe}function Rt(O,fe,pe,Oe){var Y=fe*2,ue=pe*2;return O[Y]<O[ue]||O[Y]===O[ue]&&Oe[fe]<=Oe[pe]}function ut(O,fe,pe){for(var Oe=O.heap[pe],Y=pe<<1;Y<=O.heap_len&&(Y<O.heap_len&&Rt(fe,O.heap[Y+1],O.heap[Y],O.depth)&&Y++,!Rt(fe,Oe,O.heap[Y],O.depth));)O.heap[pe]=O.heap[Y],pe=Y,Y<<=1;O.heap[pe]=Oe}function Je(O,fe,pe){var Oe,Y,ue=0,R,de;if(O.last_lit!==0)do Oe=O.pending_buf[O.d_buf+ue*2]<<8|O.pending_buf[O.d_buf+ue*2+1],Y=O.pending_buf[O.l_buf+ue],ue++,Oe===0?Ue(O,Y,fe):(R=ce[Y],Ue(O,R+p+1,fe),de=H[R],de!==0&&(Y-=oe[R],ke(O,Y,de)),Oe--,R=Pe(Oe),Ue(O,R,pe),de=q[R],de!==0&&(Oe-=F[R],ke(O,Oe,de)));while(ue<O.last_lit);Ue(O,T,fe)}function It(O,fe){var pe=fe.dyn_tree,Oe=fe.stat_desc.static_tree,Y=fe.stat_desc.has_stree,ue=fe.stat_desc.elems,R,de,ze=-1,k;for(O.heap_len=0,O.heap_max=E,R=0;R<ue;R++)pe[R*2]!==0?(O.heap[++O.heap_len]=ze=R,O.depth[R]=0):pe[R*2+1]=0;for(;O.heap_len<2;)k=O.heap[++O.heap_len]=ze<2?++ze:0,pe[k*2]=1,O.depth[k]=0,O.opt_len--,Y&&(O.static_len-=Oe[k*2+1]);for(fe.max_code=ze,R=O.heap_len>>1;R>=1;R--)ut(O,pe,R);k=ue;do R=O.heap[1],O.heap[1]=O.heap[O.heap_len--],ut(O,pe,1),de=O.heap[1],O.heap[--O.heap_max]=R,O.heap[--O.heap_max]=de,pe[k*2]=pe[R*2]+pe[de*2],O.depth[k]=(O.depth[R]>=O.depth[de]?O.depth[R]:O.depth[de])+1,pe[R*2+1]=pe[de*2+1]=k,O.heap[1]=k++,ut(O,pe,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],ft(O,fe),vt(pe,ze,O.bl_count)}function rn(O,fe,pe){var Oe,Y=-1,ue,R=fe[0*2+1],de=0,ze=7,k=4;for(R===0&&(ze=138,k=3),fe[(pe+1)*2+1]=65535,Oe=0;Oe<=pe;Oe++)ue=R,R=fe[(Oe+1)*2+1],!(++de<ze&&ue===R)&&(de<k?O.bl_tree[ue*2]+=de:ue!==0?(ue!==Y&&O.bl_tree[ue*2]++,O.bl_tree[C*2]++):de<=10?O.bl_tree[I*2]++:O.bl_tree[M*2]++,de=0,Y=ue,R===0?(ze=138,k=3):ue===R?(ze=6,k=3):(ze=7,k=4))}function ae(O,fe,pe){var Oe,Y=-1,ue,R=fe[0*2+1],de=0,ze=7,k=4;for(R===0&&(ze=138,k=3),Oe=0;Oe<=pe;Oe++)if(ue=R,R=fe[(Oe+1)*2+1],!(++de<ze&&ue===R)){if(de<k)do Ue(O,ue,O.bl_tree);while(--de!==0);else ue!==0?(ue!==Y&&(Ue(O,ue,O.bl_tree),de--),Ue(O,C,O.bl_tree),ke(O,de-3,2)):de<=10?(Ue(O,I,O.bl_tree),ke(O,de-3,3)):(Ue(O,M,O.bl_tree),ke(O,de-11,7));de=0,Y=ue,R===0?(ze=138,k=3):ue===R?(ze=6,k=3):(ze=7,k=4)}}function me(O){var fe;for(rn(O,O.dyn_ltree,O.l_desc.max_code),rn(O,O.dyn_dtree,O.d_desc.max_code),It(O,O.bl_desc),fe=_-1;fe>=3&&O.bl_tree[K[fe]*2+1]===0;fe--);return O.opt_len+=3*(fe+1)+5+5+4,fe}function Be(O,fe,pe,Oe){var Y;for(ke(O,fe-257,5),ke(O,pe-1,5),ke(O,Oe-4,4),Y=0;Y<Oe;Y++)ke(O,O.bl_tree[K[Y]*2+1],3);ae(O,O.dyn_ltree,fe-1),ae(O,O.dyn_dtree,pe-1)}function We(O){var fe=4093624447,pe;for(pe=0;pe<=31;pe++,fe>>>=1)if(fe&1&&O.dyn_ltree[pe*2]!==0)return a;if(O.dyn_ltree[9*2]!==0||O.dyn_ltree[10*2]!==0||O.dyn_ltree[13*2]!==0)return l;for(pe=32;pe<p;pe++)if(O.dyn_ltree[pe*2]!==0)return l;return a}var Ze=!1;function pt(O){Ze||(at(),Ze=!0),O.l_desc=new le(O.dyn_ltree,Fe),O.d_desc=new le(O.dyn_dtree,Ne),O.bl_desc=new le(O.bl_tree,He),O.bi_buf=0,O.bi_valid=0,Ct(O)}function Bt(O,fe,pe,Oe){ke(O,(c<<1)+(Oe?1:0),3),Dt(O,fe,pe)}function it(O){ke(O,h<<1,3),Ue(O,T,$),ot(O)}function Ft(O,fe,pe,Oe){var Y,ue,R=0;O.level>0?(O.strm.data_type===u&&(O.strm.data_type=We(O)),It(O,O.l_desc),It(O,O.d_desc),R=me(O),Y=O.opt_len+3+7>>>3,ue=O.static_len+3+7>>>3,ue<=Y&&(Y=ue)):Y=ue=pe+5,pe+4<=Y&&fe!==-1?Bt(O,fe,pe,Oe):O.strategy===o||ue===Y?(ke(O,(h<<1)+(Oe?1:0),3),Je(O,$,te)):(ke(O,(f<<1)+(Oe?1:0),3),Be(O,O.l_desc.max_code+1,O.d_desc.max_code+1,R+1),Je(O,O.dyn_ltree,O.dyn_dtree)),Ct(O),Oe&&Tt(O)}function Yt(O,fe,pe){return O.pending_buf[O.d_buf+O.last_lit*2]=fe>>>8&255,O.pending_buf[O.d_buf+O.last_lit*2+1]=fe&255,O.pending_buf[O.l_buf+O.last_lit]=pe&255,O.last_lit++,fe===0?O.dyn_ltree[pe*2]++:(O.matches++,fe--,O.dyn_ltree[(ce[pe]+p+1)*2]++,O.dyn_dtree[Pe(fe)*2]++),O.last_lit===O.lit_bufsize-1}i._tr_init=pt,i._tr_stored_block=Bt,i._tr_flush_block=Ft,i._tr_tally=Yt,i._tr_align=it},{"../utils/common":41}],53:[function(n,r,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=s},{}],54:[function(n,r,i){(function(s){(function(o,a){if(o.setImmediate)return;var l=1,u={},d=!1,c=o.document,h;function f(D){typeof D!="function"&&(D=new Function(""+D));for(var T=new Array(arguments.length-1),C=0;C<T.length;C++)T[C]=arguments[C+1];var I={callback:D,args:T};return u[l]=I,h(l),l++}function v(D){delete u[D]}function x(D){var T=D.callback,C=D.args;switch(C.length){case 0:T();break;case 1:T(C[0]);break;case 2:T(C[0],C[1]);break;case 3:T(C[0],C[1],C[2]);break;default:T.apply(a,C);break}}function g(D){if(d)setTimeout(g,0,D);else{var T=u[D];if(T){d=!0;try{x(T)}finally{v(D),d=!1}}}}function p(){h=function(D){process.nextTick(function(){g(D)})}}function m(){if(o.postMessage&&!o.importScripts){var D=!0,T=o.onmessage;return o.onmessage=function(){D=!1},o.postMessage("","*"),o.onmessage=T,D}}function w(){var D="setImmediate$"+Math.random()+"$",T=function(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(D)===0&&g(+C.data.slice(D.length))};o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),h=function(C){o.postMessage(D+C,"*")}}function _(){var D=new MessageChannel;D.port1.onmessage=function(T){var C=T.data;g(C)},h=function(T){D.port2.postMessage(T)}}function E(){var D=c.documentElement;h=function(T){var C=c.createElement("script");C.onreadystatechange=function(){g(T),C.onreadystatechange=null,D.removeChild(C),C=null},D.appendChild(C)}}function S(){h=function(D){setTimeout(g,0,D)}}var b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,{}.toString.call(o.process)==="[object process]"?p():m()?w():o.MessageChannel?_():c&&"onreadystatechange"in c.createElement("script")?E():S(),b.setImmediate=f,b.clearImmediate=v})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(C_);var OP=C_.exports;const MP=Jr(OP);class jP{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new MP}catch{throw new Error("JSZip lib not loaded")}}open(e,n){return this.zip.loadAsync(e,{base64:n})}openUrl(e,n){return gu(e,"binary").then((function(r){return this.zip.loadAsync(r,{base64:n})}).bind(this))}request(e,n){var r=new wt,i,s=new Vi(e);return n||(n=s.extension),n=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(o){let a=this.handleResponse(o,n);r.resolve(a)}).bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):mu(n)?r=gi(e,"text/xml"):n=="xhtml"?r=gi(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=gi(e,"text/html"):r=e,r}getBlob(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||la.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:n})})}getText(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(s){return s})}getBase64(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||la.lookup(i.name),i.async("base64").then(function(s){return"data:"+n+";base64,"+s})}createUrl(e,n){var r=new wt,i=window.URL||window.webkitURL||window.mozURL,s,o,a=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(o=this.getBase64(e),o&&o.then((function(l){this.urlCache[e]=l,r.resolve(l)}).bind(this))):(o=this.getBlob(e),o&&o.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}).bind(this))),o||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.zip=void 0,this.urlCache={}}}var A_={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var c=typeof ps=="function"&&ps;if(!d&&c)return c(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[u]={exports:{}};r[u][0].call(f.exports,function(v){var x=r[u][1][v];return o(x||v)},f,f.exports,n,r,i,s)}return i[u].exports}for(var a=typeof ps=="function"&&ps,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(v),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=v,a=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(v,0)};var h,f=[];function v(){h=!0;for(var g,p,m=f.length;m;){for(p=f,f=[],g=-1;++g<m;)p[g]();m=f.length}h=!1}r.exports=x;function x(g){f.push(g)===1&&!h&&a()}}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];r.exports=c;function c(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,E!==o&&x(this,E)}c.prototype.catch=function(E){return this.then(null,E)},c.prototype.then=function(E,S){if(typeof E!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var b=new this.constructor(o);if(this.state!==d){var D=this.state===u?E:S;f(b,D,this.outcome)}else this.queue.push(new h(b,E,S));return b};function h(E,S,b){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},h.prototype.otherCallFulfilled=function(E){f(this.promise,this.onFulfilled,E)},h.prototype.callRejected=function(E){a.reject(this.promise,E)},h.prototype.otherCallRejected=function(E){f(this.promise,this.onRejected,E)};function f(E,S,b){s(function(){var D;try{D=S(b)}catch(T){return a.reject(E,T)}D===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,D)})}a.resolve=function(E,S){var b=g(v,S);if(b.status==="error")return a.reject(E,b.value);var D=b.value;if(D)x(E,D);else{E.state=u,E.outcome=S;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callFulfilled(S)}return E},a.reject=function(E,S){E.state=l,E.outcome=S;for(var b=-1,D=E.queue.length;++b<D;)E.queue[b].callRejected(S);return E};function v(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function x(E,S){var b=!1;function D(M){b||(b=!0,a.reject(E,M))}function T(M){b||(b=!0,a.resolve(E,M))}function C(){S(T,D)}var I=g(C);I.status==="error"&&D(I.value)}function g(E,S){var b={};try{b.value=E(S),b.status="success"}catch(D){b.status="error",b.value=D}return b}c.resolve=p;function p(E){return E instanceof this?E:a.resolve(new this(o),E)}c.reject=m;function m(E){var S=new this(o);return a.reject(S,E)}c.all=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,D=!1;if(!b)return this.resolve([]);for(var T=new Array(b),C=0,I=-1,M=new this(o);++I<b;)H(E[I],I);return M;function H(q,W){S.resolve(q).then(K,function(G){D||(D=!0,a.reject(M,G))});function K(G){T[W]=G,++C===b&&!D&&(D=!0,a.resolve(M,T))}}}c.race=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,D=!1;if(!b)return this.resolve([]);for(var T=-1,C=new this(o);++T<b;)I(E[T]);return C;function I(M){S.resolve(M).then(function(H){D||(D=!0,a.resolve(C,H))},function(H){D||(D=!0,a.reject(C,H))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};function o(P,X){if(!(P instanceof X))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var P=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),X=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!P||X)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(P,X){P=P||[],X=X||{};try{return new Blob(P,X)}catch(Q){if(Q.name!=="TypeError")throw Q;for(var B=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,J=new B,ee=0;ee<P.length;ee+=1)J.append(P[ee]);return J.getBlob(X.type)}}typeof Promise>"u"&&n(3);var c=Promise;function h(P,X){X&&P.then(function(B){X(null,B)},function(B){X(B)})}function f(P,X,B){typeof X=="function"&&P.then(X),typeof B=="function"&&P.catch(B)}function v(P){return typeof P!="string"&&(console.warn(P+" used as a key, but it is not a string."),P=String(P)),P}function x(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",p=void 0,m={},w=Object.prototype.toString,_="readonly",E="readwrite";function S(P){for(var X=P.length,B=new ArrayBuffer(X),J=new Uint8Array(B),ee=0;ee<X;ee++)J[ee]=P.charCodeAt(ee);return B}function b(P){return new c(function(X){var B=P.transaction(g,E),J=d([""]);B.objectStore(g).put(J,"key"),B.onabort=function(ee){ee.preventDefault(),ee.stopPropagation(),X(!1)},B.oncomplete=function(){var ee=navigator.userAgent.match(/Chrome\/(\d+)/),Q=navigator.userAgent.match(/Edge\//);X(Q||!ee||parseInt(ee[1],10)>=43)}}).catch(function(){return!1})}function D(P){return typeof p=="boolean"?c.resolve(p):b(P).then(function(X){return p=X,p})}function T(P){var X=m[P.name],B={};B.promise=new c(function(J,ee){B.resolve=J,B.reject=ee}),X.deferredOperations.push(B),X.dbReady?X.dbReady=X.dbReady.then(function(){return B.promise}):X.dbReady=B.promise}function C(P){var X=m[P.name],B=X.deferredOperations.pop();if(B)return B.resolve(),B.promise}function I(P,X){var B=m[P.name],J=B.deferredOperations.pop();if(J)return J.reject(X),J.promise}function M(P,X){return new c(function(B,J){if(m[P.name]=m[P.name]||oe(),P.db)if(X)T(P),P.db.close();else return B(P.db);var ee=[P.name];X&&ee.push(P.version);var Q=l.open.apply(l,ee);X&&(Q.onupgradeneeded=function(he){var ye=Q.result;try{ye.createObjectStore(P.storeName),he.oldVersion<=1&&ye.createObjectStore(g)}catch(Ce){if(Ce.name==="ConstraintError")console.warn('The database "'+P.name+'" has been upgraded from version '+he.oldVersion+" to version "+he.newVersion+', but the storage "'+P.storeName+'" already exists.');else throw Ce}}),Q.onerror=function(he){he.preventDefault(),J(Q.error)},Q.onsuccess=function(){var he=Q.result;he.onversionchange=function(ye){ye.target.close()},B(he),C(P)}})}function H(P){return M(P,!1)}function q(P){return M(P,!0)}function W(P,X){if(!P.db)return!0;var B=!P.db.objectStoreNames.contains(P.storeName),J=P.version<P.db.version,ee=P.version>P.db.version;if(J&&(P.version!==X&&console.warn('The database "'+P.name+`" can't be downgraded from version `+P.db.version+" to version "+P.version+"."),P.version=P.db.version),ee||B){if(B){var Q=P.db.version+1;Q>P.version&&(P.version=Q)}return!0}return!1}function K(P){return new c(function(X,B){var J=new FileReader;J.onerror=B,J.onloadend=function(ee){var Q=btoa(ee.target.result||"");X({__local_forage_encoded_blob:!0,data:Q,type:P.type})},J.readAsBinaryString(P)})}function G(P){var X=S(atob(P.data));return d([X],{type:P.type})}function $(P){return P&&P.__local_forage_encoded_blob}function te(P){var X=this,B=X._initReady().then(function(){var J=m[X._dbInfo.name];if(J&&J.dbReady)return J.dbReady});return f(B,P,P),B}function L(P){T(P);for(var X=m[P.name],B=X.forages,J=0;J<B.length;J++){var ee=B[J];ee._dbInfo.db&&(ee._dbInfo.db.close(),ee._dbInfo.db=null)}return P.db=null,H(P).then(function(Q){return P.db=Q,W(P)?q(P):Q}).then(function(Q){P.db=X.db=Q;for(var he=0;he<B.length;he++)B[he]._dbInfo.db=Q}).catch(function(Q){throw I(P,Q),Q})}function ce(P,X,B,J){J===void 0&&(J=1);try{var ee=P.db.transaction(P.storeName,X);B(null,ee)}catch(Q){if(J>0&&(!P.db||Q.name==="InvalidStateError"||Q.name==="NotFoundError"))return c.resolve().then(function(){if(!P.db||Q.name==="NotFoundError"&&!P.db.objectStoreNames.contains(P.storeName)&&P.version<=P.db.version)return P.db&&(P.version=P.db.version+1),q(P)}).then(function(){return L(P).then(function(){ce(P,X,B,J-1)})}).catch(B);B(Q)}}function oe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(P){var X=this,B={db:null};if(P)for(var J in P)B[J]=P[J];var ee=m[B.name];ee||(ee=oe(),m[B.name]=ee),ee.forages.push(X),X._initReady||(X._initReady=X.ready,X.ready=te);var Q=[];function he(){return c.resolve()}for(var ye=0;ye<ee.forages.length;ye++){var Ce=ee.forages[ye];Ce!==X&&Q.push(Ce._initReady().catch(he))}var Ae=ee.forages.slice(0);return c.all(Q).then(function(){return B.db=ee.db,H(B)}).then(function(Ie){return B.db=Ie,W(B,X._defaultConfig.version)?q(B):Ie}).then(function(Ie){B.db=ee.db=Ie,X._dbInfo=B;for(var qe=0;qe<Ae.length;qe++){var ht=Ae[qe];ht!==X&&(ht._dbInfo.db=B.db,ht._dbInfo.version=B.version)}})}function xe(P,X){var B=this;P=v(P);var J=new c(function(ee,Q){B.ready().then(function(){ce(B._dbInfo,_,function(he,ye){if(he)return Q(he);try{var Ce=ye.objectStore(B._dbInfo.storeName),Ae=Ce.get(P);Ae.onsuccess=function(){var Ie=Ae.result;Ie===void 0&&(Ie=null),$(Ie)&&(Ie=G(Ie)),ee(Ie)},Ae.onerror=function(){Q(Ae.error)}}catch(Ie){Q(Ie)}})}).catch(Q)});return h(J,X),J}function Fe(P,X){var B=this,J=new c(function(ee,Q){B.ready().then(function(){ce(B._dbInfo,_,function(he,ye){if(he)return Q(he);try{var Ce=ye.objectStore(B._dbInfo.storeName),Ae=Ce.openCursor(),Ie=1;Ae.onsuccess=function(){var qe=Ae.result;if(qe){var ht=qe.value;$(ht)&&(ht=G(ht));var Lt=P(ht,qe.key,Ie++);Lt!==void 0?ee(Lt):qe.continue()}else ee()},Ae.onerror=function(){Q(Ae.error)}}catch(qe){Q(qe)}})}).catch(Q)});return h(J,X),J}function Ne(P,X,B){var J=this;P=v(P);var ee=new c(function(Q,he){var ye;J.ready().then(function(){return ye=J._dbInfo,w.call(X)==="[object Blob]"?D(ye.db).then(function(Ce){return Ce?X:K(X)}):X}).then(function(Ce){ce(J._dbInfo,E,function(Ae,Ie){if(Ae)return he(Ae);try{var qe=Ie.objectStore(J._dbInfo.storeName);Ce===null&&(Ce=void 0);var ht=qe.put(Ce,P);Ie.oncomplete=function(){Ce===void 0&&(Ce=null),Q(Ce)},Ie.onabort=Ie.onerror=function(){var Lt=ht.error?ht.error:ht.transaction.error;he(Lt)}}catch(Lt){he(Lt)}})}).catch(he)});return h(ee,B),ee}function He(P,X){var B=this;P=v(P);var J=new c(function(ee,Q){B.ready().then(function(){ce(B._dbInfo,E,function(he,ye){if(he)return Q(he);try{var Ce=ye.objectStore(B._dbInfo.storeName),Ae=Ce.delete(P);ye.oncomplete=function(){ee()},ye.onerror=function(){Q(Ae.error)},ye.onabort=function(){var Ie=Ae.error?Ae.error:Ae.transaction.error;Q(Ie)}}catch(Ie){Q(Ie)}})}).catch(Q)});return h(J,X),J}function le(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){ce(X._dbInfo,E,function(Q,he){if(Q)return ee(Q);try{var ye=he.objectStore(X._dbInfo.storeName),Ce=ye.clear();he.oncomplete=function(){J()},he.onabort=he.onerror=function(){var Ae=Ce.error?Ce.error:Ce.transaction.error;ee(Ae)}}catch(Ae){ee(Ae)}})}).catch(ee)});return h(B,P),B}function Pe(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){ce(X._dbInfo,_,function(Q,he){if(Q)return ee(Q);try{var ye=he.objectStore(X._dbInfo.storeName),Ce=ye.count();Ce.onsuccess=function(){J(Ce.result)},Ce.onerror=function(){ee(Ce.error)}}catch(Ae){ee(Ae)}})}).catch(ee)});return h(B,P),B}function ve(P,X){var B=this,J=new c(function(ee,Q){if(P<0){ee(null);return}B.ready().then(function(){ce(B._dbInfo,_,function(he,ye){if(he)return Q(he);try{var Ce=ye.objectStore(B._dbInfo.storeName),Ae=!1,Ie=Ce.openKeyCursor();Ie.onsuccess=function(){var qe=Ie.result;if(!qe){ee(null);return}P===0||Ae?ee(qe.key):(Ae=!0,qe.advance(P))},Ie.onerror=function(){Q(Ie.error)}}catch(qe){Q(qe)}})}).catch(Q)});return h(J,X),J}function ke(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){ce(X._dbInfo,_,function(Q,he){if(Q)return ee(Q);try{var ye=he.objectStore(X._dbInfo.storeName),Ce=ye.openKeyCursor(),Ae=[];Ce.onsuccess=function(){var Ie=Ce.result;if(!Ie){J(Ae);return}Ae.push(Ie.key),Ie.continue()},Ce.onerror=function(){ee(Ce.error)}}catch(Ie){ee(Ie)}})}).catch(ee)});return h(B,P),B}function Ue(P,X){X=x.apply(this,arguments);var B=this.config();P=typeof P!="function"&&P||{},P.name||(P.name=P.name||B.name,P.storeName=P.storeName||B.storeName);var J=this,ee;if(!P.name)ee=c.reject("Invalid arguments");else{var Q=P.name===B.name&&J._dbInfo.db,he=Q?c.resolve(J._dbInfo.db):H(P).then(function(ye){var Ce=m[P.name],Ae=Ce.forages;Ce.db=ye;for(var Ie=0;Ie<Ae.length;Ie++)Ae[Ie]._dbInfo.db=ye;return ye});P.storeName?ee=he.then(function(ye){if(ye.objectStoreNames.contains(P.storeName)){var Ce=ye.version+1;T(P);var Ae=m[P.name],Ie=Ae.forages;ye.close();for(var qe=0;qe<Ie.length;qe++){var ht=Ie[qe];ht._dbInfo.db=null,ht._dbInfo.version=Ce}var Lt=new c(function(Pt,ln){var sn=l.open(P.name,Ce);sn.onerror=function(kr){var Ba=sn.result;Ba.close(),ln(kr)},sn.onupgradeneeded=function(){var kr=sn.result;kr.deleteObjectStore(P.storeName)},sn.onsuccess=function(){var kr=sn.result;kr.close(),Pt(kr)}});return Lt.then(function(Pt){Ae.db=Pt;for(var ln=0;ln<Ie.length;ln++){var sn=Ie[ln];sn._dbInfo.db=Pt,C(sn._dbInfo)}}).catch(function(Pt){throw(I(P,Pt)||c.resolve()).catch(function(){}),Pt})}}):ee=he.then(function(ye){T(P);var Ce=m[P.name],Ae=Ce.forages;ye.close();for(var Ie=0;Ie<Ae.length;Ie++){var qe=Ae[Ie];qe._dbInfo.db=null}var ht=new c(function(Lt,Pt){var ln=l.deleteDatabase(P.name);ln.onerror=function(){var sn=ln.result;sn&&sn.close(),Pt(ln.error)},ln.onblocked=function(){console.warn('dropInstance blocked for database "'+P.name+'" until all open connections are closed')},ln.onsuccess=function(){var sn=ln.result;sn&&sn.close(),Lt(sn)}});return ht.then(function(Lt){Ce.db=Lt;for(var Pt=0;Pt<Ae.length;Pt++){var ln=Ae[Pt];C(ln._dbInfo)}}).catch(function(Lt){throw(I(P,Lt)||c.resolve()).catch(function(){}),Lt})})}return h(ee,X),ee}var Ve={_driver:"asyncStorage",_initStorage:F,_support:u(),iterate:Fe,getItem:xe,setItem:Ne,removeItem:He,clear:le,length:Pe,key:ve,keys:ke,dropInstance:Ue};function ot(){return typeof openDatabase=="function"}var ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vt="~~local_forage_type~",at=/^~~local_forage_type~([^~]+)~/,Ct="__lfsc__:",Tt=Ct.length,Dt="arbf",Rt="blob",ut="si08",Je="ui08",It="uic8",rn="si16",ae="si32",me="ur16",Be="ui32",We="fl32",Ze="fl64",pt=Tt+Dt.length,Bt=Object.prototype.toString;function it(P){var X=P.length*.75,B=P.length,J,ee=0,Q,he,ye,Ce;P[P.length-1]==="="&&(X--,P[P.length-2]==="="&&X--);var Ae=new ArrayBuffer(X),Ie=new Uint8Array(Ae);for(J=0;J<B;J+=4)Q=ft.indexOf(P[J]),he=ft.indexOf(P[J+1]),ye=ft.indexOf(P[J+2]),Ce=ft.indexOf(P[J+3]),Ie[ee++]=Q<<2|he>>4,Ie[ee++]=(he&15)<<4|ye>>2,Ie[ee++]=(ye&3)<<6|Ce&63;return Ae}function Ft(P){var X=new Uint8Array(P),B="",J;for(J=0;J<X.length;J+=3)B+=ft[X[J]>>2],B+=ft[(X[J]&3)<<4|X[J+1]>>4],B+=ft[(X[J+1]&15)<<2|X[J+2]>>6],B+=ft[X[J+2]&63];return X.length%3===2?B=B.substring(0,B.length-1)+"=":X.length%3===1&&(B=B.substring(0,B.length-2)+"=="),B}function Yt(P,X){var B="";if(P&&(B=Bt.call(P)),P&&(B==="[object ArrayBuffer]"||P.buffer&&Bt.call(P.buffer)==="[object ArrayBuffer]")){var J,ee=Ct;P instanceof ArrayBuffer?(J=P,ee+=Dt):(J=P.buffer,B==="[object Int8Array]"?ee+=ut:B==="[object Uint8Array]"?ee+=Je:B==="[object Uint8ClampedArray]"?ee+=It:B==="[object Int16Array]"?ee+=rn:B==="[object Uint16Array]"?ee+=me:B==="[object Int32Array]"?ee+=ae:B==="[object Uint32Array]"?ee+=Be:B==="[object Float32Array]"?ee+=We:B==="[object Float64Array]"?ee+=Ze:X(new Error("Failed to get type for BinaryArray"))),X(ee+Ft(J))}else if(B==="[object Blob]"){var Q=new FileReader;Q.onload=function(){var he=vt+P.type+"~"+Ft(this.result);X(Ct+Rt+he)},Q.readAsArrayBuffer(P)}else try{X(JSON.stringify(P))}catch(he){console.error("Couldn't convert value into a JSON string: ",P),X(null,he)}}function O(P){if(P.substring(0,Tt)!==Ct)return JSON.parse(P);var X=P.substring(pt),B=P.substring(Tt,pt),J;if(B===Rt&&at.test(X)){var ee=X.match(at);J=ee[1],X=X.substring(ee[0].length)}var Q=it(X);switch(B){case Dt:return Q;case Rt:return d([Q],{type:J});case ut:return new Int8Array(Q);case Je:return new Uint8Array(Q);case It:return new Uint8ClampedArray(Q);case rn:return new Int16Array(Q);case me:return new Uint16Array(Q);case ae:return new Int32Array(Q);case Be:return new Uint32Array(Q);case We:return new Float32Array(Q);case Ze:return new Float64Array(Q);default:throw new Error("Unkown type: "+B)}}var fe={serialize:Yt,deserialize:O,stringToBuffer:it,bufferToString:Ft};function pe(P,X,B,J){P.executeSql("CREATE TABLE IF NOT EXISTS "+X.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],B,J)}function Oe(P){var X=this,B={db:null};if(P)for(var J in P)B[J]=typeof P[J]!="string"?P[J].toString():P[J];var ee=new c(function(Q,he){try{B.db=openDatabase(B.name,String(B.version),B.description,B.size)}catch(ye){return he(ye)}B.db.transaction(function(ye){pe(ye,B,function(){X._dbInfo=B,Q()},function(Ce,Ae){he(Ae)})},he)});return B.serializer=fe,ee}function Y(P,X,B,J,ee,Q){P.executeSql(B,J,ee,function(he,ye){ye.code===ye.SYNTAX_ERR?he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[X.storeName],function(Ce,Ae){Ae.rows.length?Q(Ce,ye):pe(Ce,X,function(){Ce.executeSql(B,J,ee,Q)},Q)},Q):Q(he,ye)},Q)}function ue(P,X){var B=this;P=v(P);var J=new c(function(ee,Q){B.ready().then(function(){var he=B._dbInfo;he.db.transaction(function(ye){Y(ye,he,"SELECT * FROM "+he.storeName+" WHERE key = ? LIMIT 1",[P],function(Ce,Ae){var Ie=Ae.rows.length?Ae.rows.item(0).value:null;Ie&&(Ie=he.serializer.deserialize(Ie)),ee(Ie)},function(Ce,Ae){Q(Ae)})})}).catch(Q)});return h(J,X),J}function R(P,X){var B=this,J=new c(function(ee,Q){B.ready().then(function(){var he=B._dbInfo;he.db.transaction(function(ye){Y(ye,he,"SELECT * FROM "+he.storeName,[],function(Ce,Ae){for(var Ie=Ae.rows,qe=Ie.length,ht=0;ht<qe;ht++){var Lt=Ie.item(ht),Pt=Lt.value;if(Pt&&(Pt=he.serializer.deserialize(Pt)),Pt=P(Pt,Lt.key,ht+1),Pt!==void 0){ee(Pt);return}}ee()},function(Ce,Ae){Q(Ae)})})}).catch(Q)});return h(J,X),J}function de(P,X,B,J){var ee=this;P=v(P);var Q=new c(function(he,ye){ee.ready().then(function(){X===void 0&&(X=null);var Ce=X,Ae=ee._dbInfo;Ae.serializer.serialize(X,function(Ie,qe){qe?ye(qe):Ae.db.transaction(function(ht){Y(ht,Ae,"INSERT OR REPLACE INTO "+Ae.storeName+" (key, value) VALUES (?, ?)",[P,Ie],function(){he(Ce)},function(Lt,Pt){ye(Pt)})},function(ht){if(ht.code===ht.QUOTA_ERR){if(J>0){he(de.apply(ee,[P,Ce,B,J-1]));return}ye(ht)}})})}).catch(ye)});return h(Q,B),Q}function ze(P,X,B){return de.apply(this,[P,X,B,1])}function k(P,X){var B=this;P=v(P);var J=new c(function(ee,Q){B.ready().then(function(){var he=B._dbInfo;he.db.transaction(function(ye){Y(ye,he,"DELETE FROM "+he.storeName+" WHERE key = ?",[P],function(){ee()},function(Ce,Ae){Q(Ae)})})}).catch(Q)});return h(J,X),J}function ne(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){var Q=X._dbInfo;Q.db.transaction(function(he){Y(he,Q,"DELETE FROM "+Q.storeName,[],function(){J()},function(ye,Ce){ee(Ce)})})}).catch(ee)});return h(B,P),B}function re(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){var Q=X._dbInfo;Q.db.transaction(function(he){Y(he,Q,"SELECT COUNT(key) as c FROM "+Q.storeName,[],function(ye,Ce){var Ae=Ce.rows.item(0).c;J(Ae)},function(ye,Ce){ee(Ce)})})}).catch(ee)});return h(B,P),B}function N(P,X){var B=this,J=new c(function(ee,Q){B.ready().then(function(){var he=B._dbInfo;he.db.transaction(function(ye){Y(ye,he,"SELECT key FROM "+he.storeName+" WHERE id = ? LIMIT 1",[P+1],function(Ce,Ae){var Ie=Ae.rows.length?Ae.rows.item(0).key:null;ee(Ie)},function(Ce,Ae){Q(Ae)})})}).catch(Q)});return h(J,X),J}function z(P){var X=this,B=new c(function(J,ee){X.ready().then(function(){var Q=X._dbInfo;Q.db.transaction(function(he){Y(he,Q,"SELECT key FROM "+Q.storeName,[],function(ye,Ce){for(var Ae=[],Ie=0;Ie<Ce.rows.length;Ie++)Ae.push(Ce.rows.item(Ie).key);J(Ae)},function(ye,Ce){ee(Ce)})})}).catch(ee)});return h(B,P),B}function Z(P){return new c(function(X,B){P.transaction(function(J){J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ee,Q){for(var he=[],ye=0;ye<Q.rows.length;ye++)he.push(Q.rows.item(ye).name);X({db:P,storeNames:he})},function(ee,Q){B(Q)})},function(J){B(J)})})}function j(P,X){X=x.apply(this,arguments);var B=this.config();P=typeof P!="function"&&P||{},P.name||(P.name=P.name||B.name,P.storeName=P.storeName||B.storeName);var J=this,ee;return P.name?ee=new c(function(Q){var he;P.name===B.name?he=J._dbInfo.db:he=openDatabase(P.name,"","",0),P.storeName?Q({db:he,storeNames:[P.storeName]}):Q(Z(he))}).then(function(Q){return new c(function(he,ye){Q.db.transaction(function(Ce){function Ae(Lt){return new c(function(Pt,ln){Ce.executeSql("DROP TABLE IF EXISTS "+Lt,[],function(){Pt()},function(sn,kr){ln(kr)})})}for(var Ie=[],qe=0,ht=Q.storeNames.length;qe<ht;qe++)Ie.push(Ae(Q.storeNames[qe]));c.all(Ie).then(function(){he()}).catch(function(Lt){ye(Lt)})},function(Ce){ye(Ce)})})}):ee=c.reject("Invalid arguments"),h(ee,X),ee}var U={_driver:"webSQLStorage",_initStorage:Oe,_support:ot(),iterate:R,getItem:ue,setItem:ze,removeItem:k,clear:ne,length:re,key:N,keys:z,dropInstance:j};function V(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ie(P,X){var B=P.name+"/";return P.storeName!==X.storeName&&(B+=P.storeName+"/"),B}function ge(){var P="_localforage_support_test";try{return localStorage.setItem(P,!0),localStorage.removeItem(P),!1}catch{return!0}}function we(){return!ge()||localStorage.length>0}function Ee(P){var X=this,B={};if(P)for(var J in P)B[J]=P[J];return B.keyPrefix=ie(P,X._defaultConfig),we()?(X._dbInfo=B,B.serializer=fe,c.resolve()):c.reject()}function _e(P){var X=this,B=X.ready().then(function(){for(var J=X._dbInfo.keyPrefix,ee=localStorage.length-1;ee>=0;ee--){var Q=localStorage.key(ee);Q.indexOf(J)===0&&localStorage.removeItem(Q)}});return h(B,P),B}function De(P,X){var B=this;P=v(P);var J=B.ready().then(function(){var ee=B._dbInfo,Q=localStorage.getItem(ee.keyPrefix+P);return Q&&(Q=ee.serializer.deserialize(Q)),Q});return h(J,X),J}function Te(P,X){var B=this,J=B.ready().then(function(){for(var ee=B._dbInfo,Q=ee.keyPrefix,he=Q.length,ye=localStorage.length,Ce=1,Ae=0;Ae<ye;Ae++){var Ie=localStorage.key(Ae);if(Ie.indexOf(Q)===0){var qe=localStorage.getItem(Ie);if(qe&&(qe=ee.serializer.deserialize(qe)),qe=P(qe,Ie.substring(he),Ce++),qe!==void 0)return qe}}});return h(J,X),J}function Me(P,X){var B=this,J=B.ready().then(function(){var ee=B._dbInfo,Q;try{Q=localStorage.key(P)}catch{Q=null}return Q&&(Q=Q.substring(ee.keyPrefix.length)),Q});return h(J,X),J}function et(P){var X=this,B=X.ready().then(function(){for(var J=X._dbInfo,ee=localStorage.length,Q=[],he=0;he<ee;he++){var ye=localStorage.key(he);ye.indexOf(J.keyPrefix)===0&&Q.push(ye.substring(J.keyPrefix.length))}return Q});return h(B,P),B}function Ke(P){var X=this,B=X.keys().then(function(J){return J.length});return h(B,P),B}function Nt(P,X){var B=this;P=v(P);var J=B.ready().then(function(){var ee=B._dbInfo;localStorage.removeItem(ee.keyPrefix+P)});return h(J,X),J}function nt(P,X,B){var J=this;P=v(P);var ee=J.ready().then(function(){X===void 0&&(X=null);var Q=X;return new c(function(he,ye){var Ce=J._dbInfo;Ce.serializer.serialize(X,function(Ae,Ie){if(Ie)ye(Ie);else try{localStorage.setItem(Ce.keyPrefix+P,Ae),he(Q)}catch(qe){(qe.name==="QuotaExceededError"||qe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ye(qe),ye(qe)}})})});return h(ee,B),ee}function st(P,X){if(X=x.apply(this,arguments),P=typeof P!="function"&&P||{},!P.name){var B=this.config();P.name=P.name||B.name,P.storeName=P.storeName||B.storeName}var J=this,ee;return P.name?ee=new c(function(Q){P.storeName?Q(ie(P,J._defaultConfig)):Q(P.name+"/")}).then(function(Q){for(var he=localStorage.length-1;he>=0;he--){var ye=localStorage.key(he);ye.indexOf(Q)===0&&localStorage.removeItem(ye)}}):ee=c.reject("Invalid arguments"),h(ee,X),ee}var yt={_driver:"localStorageWrapper",_initStorage:Ee,_support:V(),iterate:Te,getItem:De,setItem:nt,removeItem:Nt,clear:_e,length:Ke,key:Me,keys:et,dropInstance:st},Pr=function(X,B){return X===B||typeof X=="number"&&typeof B=="number"&&isNaN(X)&&isNaN(B)},js=function(X,B){for(var J=X.length,ee=0;ee<J;){if(Pr(X[ee],B))return!0;ee++}return!1},br=Array.isArray||function(P){return Object.prototype.toString.call(P)==="[object Array]"},Ln={},yo={},Sr={INDEXEDDB:Ve,WEBSQL:U,LOCALSTORAGE:yt},ki=[Sr.INDEXEDDB._driver,Sr.WEBSQL._driver,Sr.LOCALSTORAGE._driver],Ei=["dropInstance"],Ji=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ei),St={description:"",driver:ki.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qt(P,X){P[X]=function(){var B=arguments;return P.ready().then(function(){return P[X].apply(P,B)})}}function ti(){for(var P=1;P<arguments.length;P++){var X=arguments[P];if(X)for(var B in X)X.hasOwnProperty(B)&&(br(X[B])?arguments[0][B]=X[B].slice():arguments[0][B]=X[B])}return arguments[0]}var Fs=function(){function P(X){o(this,P);for(var B in Sr)if(Sr.hasOwnProperty(B)){var J=Sr[B],ee=J._driver;this[B]=ee,Ln[ee]||this.defineDriver(J)}this._defaultConfig=ti({},St),this._config=ti({},this._defaultConfig,X),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return P.prototype.config=function(B){if((typeof B>"u"?"undefined":s(B))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var J in B){if(J==="storeName"&&(B[J]=B[J].replace(/\W/g,"_")),J==="version"&&typeof B[J]!="number")return new Error("Database version must be a number.");this._config[J]=B[J]}return"driver"in B&&B.driver?this.setDriver(this._config.driver):!0}else return typeof B=="string"?this._config[B]:this._config},P.prototype.defineDriver=function(B,J,ee){var Q=new c(function(he,ye){try{var Ce=B._driver,Ae=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!B._driver){ye(Ae);return}for(var Ie=Ji.concat("_initStorage"),qe=0,ht=Ie.length;qe<ht;qe++){var Lt=Ie[qe],Pt=!js(Ei,Lt);if((Pt||B[Lt])&&typeof B[Lt]!="function"){ye(Ae);return}}var ln=function(){for(var Ba=function(BN){return function(){var zN=new Error("Method "+BN+" is not implemented by the current driver"),ex=c.reject(zN);return h(ex,arguments[arguments.length-1]),ex}},qh=0,FN=Ei.length;qh<FN;qh++){var Kh=Ei[qh];B[Kh]||(B[Kh]=Ba(Kh))}};ln();var sn=function(Ba){Ln[Ce]&&console.info("Redefining LocalForage driver: "+Ce),Ln[Ce]=B,yo[Ce]=Ba,he()};"_support"in B?B._support&&typeof B._support=="function"?B._support().then(sn,ye):sn(!!B._support):sn(!0)}catch(kr){ye(kr)}});return f(Q,J,ee),Q},P.prototype.driver=function(){return this._driver||null},P.prototype.getDriver=function(B,J,ee){var Q=Ln[B]?c.resolve(Ln[B]):c.reject(new Error("Driver not found."));return f(Q,J,ee),Q},P.prototype.getSerializer=function(B){var J=c.resolve(fe);return f(J,B),J},P.prototype.ready=function(B){var J=this,ee=J._driverSet.then(function(){return J._ready===null&&(J._ready=J._initDriver()),J._ready});return f(ee,B,B),ee},P.prototype.setDriver=function(B,J,ee){var Q=this;br(B)||(B=[B]);var he=this._getSupportedDrivers(B);function ye(){Q._config.driver=Q.driver()}function Ce(qe){return Q._extend(qe),ye(),Q._ready=Q._initStorage(Q._config),Q._ready}function Ae(qe){return function(){var ht=0;function Lt(){for(;ht<qe.length;){var Pt=qe[ht];return ht++,Q._dbInfo=null,Q._ready=null,Q.getDriver(Pt).then(Ce).catch(Lt)}ye();var ln=new Error("No available storage method found.");return Q._driverSet=c.reject(ln),Q._driverSet}return Lt()}}var Ie=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=Ie.then(function(){var qe=he[0];return Q._dbInfo=null,Q._ready=null,Q.getDriver(qe).then(function(ht){Q._driver=ht._driver,ye(),Q._wrapLibraryMethodsWithReady(),Q._initDriver=Ae(he)})}).catch(function(){ye();var qe=new Error("No available storage method found.");return Q._driverSet=c.reject(qe),Q._driverSet}),f(this._driverSet,J,ee),this._driverSet},P.prototype.supports=function(B){return!!yo[B]},P.prototype._extend=function(B){ti(this,B)},P.prototype._getSupportedDrivers=function(B){for(var J=[],ee=0,Q=B.length;ee<Q;ee++){var he=B[ee];this.supports(he)&&J.push(he)}return J},P.prototype._wrapLibraryMethodsWithReady=function(){for(var B=0,J=Ji.length;B<J;B++)qt(this,Ji[B])},P.prototype.createInstance=function(B){return new P(B)},P}(),en=new Fs;r.exports=en},{3:3}]},{},[4])(4)})})(A_);var FP=A_.exports;const eb=Jr(FP);class D_{constructor(e,n,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=n||gu,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof eb>"u"&&(e=eb),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let n=navigator.onLine;this.online=n,n?this.emit("online",this):this.emit("offline",this)}add(e,n){let r=e.resources.map(i=>{let{href:s}=i,o=this.resolver(s),a=window.encodeURIComponent(o);return this.storage.getItem(a).then(l=>!l||n?this.requester(o,"binary").then(u=>this.storage.setItem(a,u)):l)});return Promise.all(r)}put(e,n,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",n,r).then(o=>this.storage.setItem(i,o)))}request(e,n,r,i){return this.online?this.requester(e,n,r,i).then(s=>(this.put(e),s)):this.retrieve(e,n)}retrieve(e,n){new wt;var r,i=new Vi(e);return n||(n=i.extension),n=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(s=>{var o=new wt,a;return s?(a=this.handleResponse(s,n),o.resolve(a)):o.reject({message:"File not found in storage: "+e,stack:new Error().stack}),o.promise})}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):mu(n)?r=gi(e,"text/xml"):n=="xhtml"?r=gi(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=gi(e,"text/html"):r=e,r}getBlob(e,n){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return n=n||la.lookup(e),new Blob([i],{type:n})})}getText(e,n){let r=window.encodeURIComponent(e);return n=n||la.lookup(e),this.storage.getItem(r).then(function(i){var s=new wt,o=new FileReader,a;if(i)return a=new Blob([i],{type:n}),o.addEventListener("loadend",()=>{s.resolve(o.result)}),o.readAsText(a,n),s.promise})}getBase64(e,n){let r=window.encodeURIComponent(e);return n=n||la.lookup(e),this.storage.getItem(r).then(i=>{var s=new wt,o=new FileReader,a;if(i)return a=new Blob([i],{type:n}),o.addEventListener("loadend",()=>{s.resolve(o.result)}),o.readAsDataURL(a,n),s.promise})}createUrl(e,n){var r=new wt,i=window.URL||window.webkitURL||window.mozURL,s,o,a=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(o=this.getBase64(e),o&&o.then((function(l){this.urlCache[e]=l,r.resolve(l)}).bind(this))):(o=this.getBlob(e),o&&o.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}).bind(this))),o||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.urlCache={},this.removeListeners()}}yi(D_.prototype);class Fp{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const n=zt(e,"display_options");return n?(Hi(n,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const tb="META-INF/container.xml",BP="META-INF/com.apple.ibooks.display-options.xml",Mr={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class wh{constructor(e,n){typeof n>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(n=e,e=void 0),this.settings=Tn(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Tn(this.settings,n),this.opening=new wt,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new wt,spine:new wt,metadata:new wt,cover:new wt,navigation:new wt,pageList:new wt,resources:new wt,displayOptions:new wt},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||gu,this.spine=new i4,this.locations=new c_(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(je.BOOK.OPEN_FAILED,i)})}open(e,n){var r,i=n||this.determineType(e);return i===Mr.BINARY?(this.archived=!0,this.url=new Fr("/",""),r=this.openEpub(e)):i===Mr.BASE64?(this.archived=!0,this.url=new Fr("/",""),r=this.openEpub(e,i)):i===Mr.EPUB?(this.archived=!0,this.url=new Fr("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==Mr.OPF?(this.url=new Fr(e),r=this.openPackaging(this.url.Path.toString())):i==Mr.MANIFEST?(this.url=new Fr(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Fr(e),r=this.openContainer(tb).then(this.openPackaging.bind(this))),r}openEpub(e,n){return this.unarchive(e,n||this.settings.encoding).then(()=>this.openContainer(tb)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(n=>(this.container=new s4(n),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Vi(e),this.load(e).then(n=>(this.packaging=new qw(n),this.unpack(this.packaging)))}openManifest(e){return this.path=new Vi(e),this.load(e).then(n=>(this.packaging=new qw,this.packaging.load(n),this.unpack(this.packaging)))}load(e){var n=this.resolve(e);return this.archived?this.archive.request(n):this.request(n,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,n){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),n!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var n=e;return e?(this.settings.canonical?n=this.settings.canonical(e):n=this.resolve(e,!0),n):""}determineType(e){var n,r,i;if(this.settings.encoding==="base64")return Mr.BASE64;if(typeof e!="string")return Mr.BINARY;if(n=new Fr(e),r=n.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return Mr.DIRECTORY;if(i==="epub")return Mr.EPUB;if(i==="opf")return Mr.OPF;if(i==="json")return Mr.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(BP)).then(n=>{this.displayOptions=new Fp(n),this.loading.displayOptions.resolve(this.displayOptions)}).catch(n=>{this.displayOptions=new Fp,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Fp,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new u4(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(n=>{console.error(n)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let n=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,s)=>{this.navigation=new Op(r),e.pageList&&(this.pageList=new Mp(e.pageList)),i(this.navigation)}):n?this.load(n,"xml").then(i=>(this.navigation=new Op(i),this.pageList=new Mp(i),this.navigation)):new Promise((i,s)=>{this.navigation=new Op,this.pageList=new Mp,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,n){return this.rendition=new Uv(this,n),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,n){return this.archive=new jP,this.archive.open(e,n)}store(e){let n=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||gu.bind(this);return this.storage=new D_(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(o,a)=>{a.output=this.resources.substitute(o,a.url)};this.resources.settings.replacements=n||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Fr("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,n)=>{n.output=this.resources.substitute(e,n.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var n=new bt(e),r=this.spine.get(n.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(s){var o=n.toRange(r.document);return o}):new Promise((s,o)=>{o("CFI could not be found")})}key(e){var n=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${gh}:${n}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}yi(wh.prototype);function Ls(t,e){return new wh(t,e)}Ls.VERSION=gh;typeof global<"u"&&(global.EPUBJS_VERSION=gh);Ls.Book=wh;Ls.Rendition=Uv;Ls.Contents=Fv;Ls.CFI=bt;Ls.utils=YL;var N_={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",d="week",c="month",h="quarter",f="year",v="date",x="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var W=["th","st","nd","rd"],K=q%100;return"["+q+(W[(K-20)%10]||W[K]||W[0])+"]"}},w=function(q,W,K){var G=String(q);return!G||G.length>=W?q:""+Array(W+1-G.length).join(K)+q},_={s:w,z:function(q){var W=-q.utcOffset(),K=Math.abs(W),G=Math.floor(K/60),$=K%60;return(W<=0?"+":"-")+w(G,2,"0")+":"+w($,2,"0")},m:function q(W,K){if(W.date()<K.date())return-q(K,W);var G=12*(K.year()-W.year())+(K.month()-W.month()),$=W.clone().add(G,c),te=K-$<0,L=W.clone().add(G+(te?-1:1),c);return+(-(G+(K-$)/(te?$-L:L-$))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:c,y:f,w:d,d:u,D:v,h:l,m:a,s:o,ms:s,Q:h}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},E="en",S={};S[E]=m;var b="$isDayjsObject",D=function(q){return q instanceof M||!(!q||!q[b])},T=function q(W,K,G){var $;if(!W)return E;if(typeof W=="string"){var te=W.toLowerCase();S[te]&&($=te),K&&(S[te]=K,$=te);var L=W.split("-");if(!$&&L.length>1)return q(L[0])}else{var ce=W.name;S[ce]=W,$=ce}return!G&&$&&(E=$),$||!G&&E},C=function(q,W){if(D(q))return q.clone();var K=typeof W=="object"?W:{};return K.date=q,K.args=arguments,new M(K)},I=_;I.l=T,I.i=D,I.w=function(q,W){return C(q,{locale:W.$L,utc:W.$u,x:W.$x,$offset:W.$offset})};var M=function(){function q(K){this.$L=T(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[b]=!0}var W=q.prototype;return W.parse=function(K){this.$d=function(G){var $=G.date,te=G.utc;if($===null)return new Date(NaN);if(I.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var L=$.match(g);if(L){var ce=L[2]-1||0,oe=(L[7]||"0").substring(0,3);return te?new Date(Date.UTC(L[1],ce,L[3]||1,L[4]||0,L[5]||0,L[6]||0,oe)):new Date(L[1],ce,L[3]||1,L[4]||0,L[5]||0,L[6]||0,oe)}}return new Date($)}(K),this.init()},W.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},W.$utils=function(){return I},W.isValid=function(){return this.$d.toString()!==x},W.isSame=function(K,G){var $=C(K);return this.startOf(G)<=$&&$<=this.endOf(G)},W.isAfter=function(K,G){return C(K)<this.startOf(G)},W.isBefore=function(K,G){return this.endOf(G)<C(K)},W.$g=function(K,G,$){return I.u(K)?this[G]:this.set($,K)},W.unix=function(){return Math.floor(this.valueOf()/1e3)},W.valueOf=function(){return this.$d.getTime()},W.startOf=function(K,G){var $=this,te=!!I.u(G)||G,L=I.p(K),ce=function(Pe,ve){var ke=I.w($.$u?Date.UTC($.$y,ve,Pe):new Date($.$y,ve,Pe),$);return te?ke:ke.endOf(u)},oe=function(Pe,ve){return I.w($.toDate()[Pe].apply($.toDate("s"),(te?[0,0,0,0]:[23,59,59,999]).slice(ve)),$)},F=this.$W,xe=this.$M,Fe=this.$D,Ne="set"+(this.$u?"UTC":"");switch(L){case f:return te?ce(1,0):ce(31,11);case c:return te?ce(1,xe):ce(0,xe+1);case d:var He=this.$locale().weekStart||0,le=(F<He?F+7:F)-He;return ce(te?Fe-le:Fe+(6-le),xe);case u:case v:return oe(Ne+"Hours",0);case l:return oe(Ne+"Minutes",1);case a:return oe(Ne+"Seconds",2);case o:return oe(Ne+"Milliseconds",3);default:return this.clone()}},W.endOf=function(K){return this.startOf(K,!1)},W.$set=function(K,G){var $,te=I.p(K),L="set"+(this.$u?"UTC":""),ce=($={},$[u]=L+"Date",$[v]=L+"Date",$[c]=L+"Month",$[f]=L+"FullYear",$[l]=L+"Hours",$[a]=L+"Minutes",$[o]=L+"Seconds",$[s]=L+"Milliseconds",$)[te],oe=te===u?this.$D+(G-this.$W):G;if(te===c||te===f){var F=this.clone().set(v,1);F.$d[ce](oe),F.init(),this.$d=F.set(v,Math.min(this.$D,F.daysInMonth())).$d}else ce&&this.$d[ce](oe);return this.init(),this},W.set=function(K,G){return this.clone().$set(K,G)},W.get=function(K){return this[I.p(K)]()},W.add=function(K,G){var $,te=this;K=Number(K);var L=I.p(G),ce=function(xe){var Fe=C(te);return I.w(Fe.date(Fe.date()+Math.round(xe*K)),te)};if(L===c)return this.set(c,this.$M+K);if(L===f)return this.set(f,this.$y+K);if(L===u)return ce(1);if(L===d)return ce(7);var oe=($={},$[a]=r,$[l]=i,$[o]=n,$)[L]||1,F=this.$d.getTime()+K*oe;return I.w(F,this)},W.subtract=function(K,G){return this.add(-1*K,G)},W.format=function(K){var G=this,$=this.$locale();if(!this.isValid())return $.invalidDate||x;var te=K||"YYYY-MM-DDTHH:mm:ssZ",L=I.z(this),ce=this.$H,oe=this.$m,F=this.$M,xe=$.weekdays,Fe=$.months,Ne=$.meridiem,He=function(ve,ke,Ue,Ve){return ve&&(ve[ke]||ve(G,te))||Ue[ke].slice(0,Ve)},le=function(ve){return I.s(ce%12||12,ve,"0")},Pe=Ne||function(ve,ke,Ue){var Ve=ve<12?"AM":"PM";return Ue?Ve.toLowerCase():Ve};return te.replace(p,function(ve,ke){return ke||function(Ue){switch(Ue){case"YY":return String(G.$y).slice(-2);case"YYYY":return I.s(G.$y,4,"0");case"M":return F+1;case"MM":return I.s(F+1,2,"0");case"MMM":return He($.monthsShort,F,Fe,3);case"MMMM":return He(Fe,F);case"D":return G.$D;case"DD":return I.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return He($.weekdaysMin,G.$W,xe,2);case"ddd":return He($.weekdaysShort,G.$W,xe,3);case"dddd":return xe[G.$W];case"H":return String(ce);case"HH":return I.s(ce,2,"0");case"h":return le(1);case"hh":return le(2);case"a":return Pe(ce,oe,!0);case"A":return Pe(ce,oe,!1);case"m":return String(oe);case"mm":return I.s(oe,2,"0");case"s":return String(G.$s);case"ss":return I.s(G.$s,2,"0");case"SSS":return I.s(G.$ms,3,"0");case"Z":return L}return null}(ve)||L.replace(":","")})},W.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},W.diff=function(K,G,$){var te,L=this,ce=I.p(G),oe=C(K),F=(oe.utcOffset()-this.utcOffset())*r,xe=this-oe,Fe=function(){return I.m(L,oe)};switch(ce){case f:te=Fe()/12;break;case c:te=Fe();break;case h:te=Fe()/3;break;case d:te=(xe-F)/6048e5;break;case u:te=(xe-F)/864e5;break;case l:te=xe/i;break;case a:te=xe/r;break;case o:te=xe/n;break;default:te=xe}return $?te:I.a(te)},W.daysInMonth=function(){return this.endOf(c).$D},W.$locale=function(){return S[this.$L]},W.locale=function(K,G){if(!K)return this.$L;var $=this.clone(),te=T(K,G,!0);return te&&($.$L=te),$},W.clone=function(){return I.w(this.$d,this)},W.toDate=function(){return new Date(this.valueOf())},W.toJSON=function(){return this.isValid()?this.toISOString():null},W.toISOString=function(){return this.$d.toISOString()},W.toString=function(){return this.$d.toUTCString()},q}(),H=M.prototype;return C.prototype=H,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",c],["$y",f],["$D",v]].forEach(function(q){H[q[1]]=function(W){return this.$g(W,q[0],q[1])}}),C.extend=function(q,W){return q.$i||(q(W,M,C),q.$i=!0),C},C.locale=T,C.isDayjs=D,C.unix=function(q){return C(1e3*q)},C.en=S[E],C.Ls=S,C.p={},C})})(N_);var zP=N_.exports;const UP=Jr(zP),Ac=()=>UP().format("HH:mm:ss.SSS"),Le={log:(...t)=>{console.log(`[${Ac()}] [LOG] `,...t)},info:(...t)=>{console.log(`[${Ac()}] [INFO] `,...t)},error:(...t)=>{console.error(`[${Ac()}] [ERROR] `,...t)},warn:(...t)=>{console.warn(`[${Ac()}] [WARN] `,...t)}},Tg={LONG_PRESS_DURATION:500,REGULAR_TAP_THRESHOLD:300,SELECTION_DELAY:50},Dc={BACKGROUND:"rgba(0, 123, 255, 0.3)",TEXT_INHERIT:"inherit"},$v={MAX_EPUB_SIZE:100*1024*1024,EPUB_EXTENSIONS:[".epub"],EPUB_MIME_TYPES:["application/epub+zip","application/x-zip-compressed","application/zip"]},As={THEME:"light",FONT_SIZE:"medium",CONFIG_VERSION:1,DEFAULT_MAX_SELECTED_WORDS:1e4},Ws={WIDTH:"100%",HEIGHT:"100%",SPREAD:"always",MIN_SPREAD_WIDTH:800,MANAGER:"continuous",FLOW:"paginated",LOCATION_CHAR_COUNT:1600},Rg=$v.MAX_EPUB_SIZE,Ig=$v.EPUB_EXTENSIONS,$P=$v.EPUB_MIME_TYPES,WP=t=>{const e=Ig.some(i=>t.name.toLowerCase().endsWith(i)),n=t.size>0&&t.size<=Rg,r=$P.includes(t.type)||Ig.some(i=>t.name.toLowerCase().endsWith(i));return e&&n&&(r||e)},bh=t=>t?Ig.some(n=>t.name.toLowerCase().endsWith(n))?t.size===0?"File is empty":t.size>Rg?`File size exceeds ${yu(Rg)} limit`:null:"Only EPUB files are supported":"No file provided",yu=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB","TB","PB"],r=Math.floor(Math.log(t)/Math.log(e)),i=Math.min(r,n.length-1);return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+n[i]},xi=async(t,e)=>{try{Le.log(`Starting ${e}`);const n=await t();return Le.log(`Successfully completed ${e}`),{success:!0,data:n}}catch(n){const r=n instanceof Error?n.message:String(n);return Le.error(`Failed to ${e}:`,n),{success:!1,error:r}}},T_=async(t,e)=>{try{return await t()}catch(n){return Le.error(`Failed to get file handle for ${e}:`,n),null}},HP=async(t,e)=>{try{return await t()}catch(n){return Le.error(`Failed to get directory handle for ${e}:`,n),null}};async function VP(t){Le.log("Starting EPUB metadata extraction for:",t.name);const e=await xi(async()=>{const n=bh(t);if(n)throw new Error(n);const r=await t.arrayBuffer(),i=Ls(r),s=await i.loaded.metadata,o=await XP(i),a=await i.loaded.spine;return Le.log("Extracted metadata:",{title:s.title,author:s.creator,coverPath:o,chapterCount:a==null?void 0:a.length}),{title:s.title||t.name.replace(/\.epub$/i,""),author:KP(s.creator),description:s.description,publisher:s.publisher,publishedDate:s.pubdate,language:s.language,isbn:qP(s.identifier),chapterCount:a.length||0,coverPath:o}},"extract EPUB metadata");return e.success&&e.data?e.data:(Le.error("Failed to extract EPUB metadata:",e.error),{title:t.name.replace(/\.epub$/i,""),author:"Unknown Author",chapterCount:0})}function qP(t){return t?(Array.isArray(t)?t:[t]).find(r=>r&&r.toLowerCase().includes("isbn")):void 0}function KP(t){return t?Array.isArray(t)?t.join(", "):t:"Unknown Author"}async function XP(t){try{Le.log("Starting cover image extraction...");const e=t.loaded.cover;return e?(Le.log("Found cover via book.cover:",e),e):void 0}catch(e){Le.error("Error extracting cover image:",e);return}}async function GP(t){try{const e=await R_(t);if(!e){Le.warn("No cover blob found, skipping format extraction");return}const n=e.type.split("/")[1];return Le.log("Extracted cover image format:",n),n}catch(e){Le.error("Error extracting cover format:",e);return}}async function R_(t){try{const e=await t.coverUrl();if(!e){Le.warn("No cover URL found, skipping blob extraction");return}Le.log("Extracting cover blob from URL:",e);const n=await fetch(e);if(!n.ok){Le.warn("Failed to fetch cover image:",n.status);return}const r=await n.blob();if(!r||r.size===0){Le.warn("Empty or invalid cover blob");return}return Le.log("Successfully extracted cover blob:",{size:r.size,type:r.type}),r}catch(e){Le.error("Error extracting cover blob:",e);return}}const YP=async t=>{const e=await oO(t),n=new wh(e);return console.log("Created book instance:",n),n},gf=[{url:"/books/Heidi.epub"}],ZP=[{type:"iframe",name:"Eudic",shortName:"Eud",enabled:!0,url:"https://dict.eudic.net/dicts/MiniDictSearch2?word={{words}}&context={{context}}"},{type:"AI",name:"",enabled:!0,prompt:`# Role
AI ****

# Context Data
{{context}}

# Instructions
 '<context>'  '<selected>' 

1.  ****
2.  ****
3.  ********SubjectObjectItIt  
4.  ****
    - **1. 2. 3. Markdown **  
    -   
    - []  

# Output Example (Few-Shot)

User Input: ... only repositories owned by your personal account may be <selected>used to</selected> publish a GitHub Pages site...  
AI Output: used tobe used to do sthrepositoriespublishGitHub Pages used to do  

# Execute
 'Context Data'  '<selected>' `},{type:"AI",name:"",enabled:!0,prompt:`# Role
Selected Word 3-4 Synonyms

# Input Data
{{context}}

# Workflow

1.  **** \`<context>\`  \`<selected>\`   
2.  **** 3-4   
3.  ****  

# Output Format ()

## **1. []**
- : //; //
- []  
- [1][2]  
- [**** Markdown (**...**) ****  ******occur**  **happen** ...]  
- [ **** ] ([])  

## **2. []**
...

**** [ **** ]

# Style Guidelines

* **** \`**word**\`   
* **** \`<context>\`  "fine"   
* ****
 
# Example Output

1. make
- : /mek/; /mek/
- : 
- : make a decision (), make a plan ()
- : **make**  **create** 
- : She made a beautiful dress out of old curtains. ()

2. generate
- : /'denret/; /'denret/
- : 
- : **generate** electricity (), **generate** ideas ()
- : **generate**  **create** 
- : The machine can generate enough power to light up the entire city. ()

3. produce
- : /pr'djus/; /pr'dus/
- : 
- : **produce** goods (), **produce** evidence ()
- : **produce**  **create** 
- : The factory produces thousands of cars every year. ()

: **create** **make** **generate** **produce** 
 
 
`},{type:"AI",name:"",enabled:!0,prompt:`# Role
ContextSelected Text********

# Input Data
{{context}}

# Workflow

1.  **** \`<context>\`   
2.  **** \`<selected>\`   
3.  ****:  
    - **** "Run"   
    - ****: It, That, He  
    - ****//  

# Output Format ( Markdown )

## **1. **

[ \`<selected>\` ]

## **2. **

* ****  **[/ /  / ]** **[]**  **[]**[]  
* **** []  **[]**  **[]**[]  **[]**[]   

# Constraints

- * ****: **** \`<selected>\`  \`<context>\` 
- * ****
- * **** Markdown  (**Bold**) 
- * ****

    `}];let xu=null;async function Wv(t){const e=t.trim();if(!e)throw new Error("File path is required");const n=await wi(),r=e.split("/").filter(Boolean);if(r.length===0)throw new Error("Invalid file path");let i=n.root;for(let a=0;a<r.length-1;a+=1)i=await i.getDirectoryHandle(r[a]);const s=r[r.length-1];return await(await i.getFileHandle(s)).getFile()}async function QP(t=""){const e=t.trim(),n=await wi(),r=e?e.split("/").filter(Boolean):[];let i=n.root;for(const o of r)i=await i.getDirectoryHandle(o);const s=[];for await(const[o,a]of i.entries()){const l=e?`${e}/${o}`:o;if(a.kind==="directory"){s.push({name:o,path:l,kind:"directory"});continue}try{const d=await a.getFile();s.push({name:o,path:l,kind:"file",size:d.size})}catch(u){console.warn(`Failed to read file ${l}`,u)}}return s}function Vu(){return"storage"in navigator&&"getDirectory"in navigator.storage}async function Hv(){if(!Vu())throw new Error("OPFS is not supported in this browser");try{const t=await navigator.storage.getDirectory(),e=await t.getDirectoryHandle("books",{create:!0});return xu={root:t,booksDir:e},await JP(),xu}catch(t){throw new Error(`Failed to initialize OPFS: ${t}`)}}const wi=async()=>xu||await Hv(),Sh=t=>t.map(e=>{const{defaultFor:n,...r}=e,i=e.enabled??!0,s=e.supportsSingleWord!==!1,o=e.supportsMultiWord!==!1;return{...r,enabled:i,...!s&&!o?{supportsSingleWord:!0,supportsMultiWord:!1}:{supportsSingleWord:s,supportsMultiWord:o}}}),Vv=()=>({api:"",key:"",defaultModel:"",pinnedMaximized:!1,items:Sh(ZP),providerId:"custom",providerApiKeyCache:{},providerDefaultModelCache:{}}),Il=(t=[])=>({version:As.CONFIG_VERSION,books:t,settings:{contextMenu:Vv()},hashMapFilePath:{},presetBooks:gf.map(e=>({...e})),lastSync:Date.now()}),I_=t=>{var r;const e=Il(),n=(r=t.settings)!=null&&r.contextMenu?{...e.settings.contextMenu,...t.settings.contextMenu,items:Sh(t.settings.contextMenu.items??e.settings.contextMenu.items)}:e.settings.contextMenu;return{version:As.CONFIG_VERSION,books:t.books??[],settings:{contextMenu:n},lastSync:t.lastSync??Date.now(),hashMapFilePath:t.hashMapFilePath??{},presetBooks:(t.presetBooks??gf).map(i=>({...i}))}};async function JP(){const t=await wi();try{await t.root.getFileHandle("config.json")}catch{await ui(Il())}}const L_=t=>{if(t instanceof ArrayBuffer)return t;if(t.buffer instanceof ArrayBuffer)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=new Uint8Array(e.byteLength);return n.set(e),n.buffer},P_=async t=>{const e=await crypto.subtle.digest("SHA-256",L_(t));return Array.from(new Uint8Array(e)).map(n=>n.toString(16).padStart(2,"0")).join("")},eO=async(t,e)=>{const n=await HP(()=>t.booksDir.getDirectoryHandle(e,{create:!0}),e);if(!n)throw new Error("Failed to create book directory");return n},tO=async(t,e,n)=>{const r=await T_(()=>t.getFileHandle(e,{create:!0}),e);if(!r)throw new Error("Failed to create book file");const i=await r.createWritable();await i.write(n),await i.close()},nO=async(t,e,n)=>{try{const r=await R_(n),i=await GP(n)||"jpg";if(!r)return"";const s=`cover.${i}`,o=await T_(()=>t.getFileHandle(s,{create:!0}),s);if(!o)return"";const a=await o.createWritable();return await a.write(await r.arrayBuffer()),await a.close(),`books/${e}/${s}`}catch(r){return console.warn("Failed to extract cover image:",r),""}},rO=async t=>{const e=await Ps();e.books.push(t),e.hashMapFilePath[t.id]=t.path,e.lastSync=Date.now(),await ui(e)};async function iO(t){const e=bh(t);if(e)throw new Error(e);const n=await t.arrayBuffer(),r=await P_(n);if(await M_(r))throw new Error("Book already exists");return O_(t,r,n)}async function O_(t,e,n,r){const i=await wi(),s=bh(t);if(s)throw new Error(s);const o=n??await t.arrayBuffer(),a=t.name,l=e,u=`books/${l}/${a}`,d=await xi(async()=>{const c=await eO(i,l);await tO(c,a,o);const h=Ls(o),f=await VP(t),v=await nO(c,l,h),x={id:e,name:f.title||t.name.replace(/\.epub$/i,""),author:f.author||"Unknown Author",path:u,createdAt:Date.now(),size:yu(t.size),chapterCount:f.chapterCount||0,coverPath:v,metaData:f,status:"local",isPreset:r==null?void 0:r.isPreset,remoteUrl:r==null?void 0:r.remoteUrl};return await rO(x),x},"upload book with hash");if(!d.success||!d.data)throw new Error(d.error??"Failed to upload book");return d.data}async function M_(t){var n;return!!((n=(await Ps()).hashMapFilePath)!=null&&n[t])}async function nb(t,e){const n=await Ps(),r=n.presetBooks??[],i=r.findIndex(s=>s.url===t);i>=0?r[i]={...r[i],fileHash:e}:r.push({url:t,fileHash:e}),n.presetBooks=r,n.lastSync=Date.now(),await ui(n)}async function ui(t){const e=await wi(),n=I_(t);try{const i=await(await e.root.getFileHandle("config.json",{create:!0})).createWritable();await i.write(JSON.stringify(n,null,2)),await i.close()}catch(r){throw new Error(`Failed to save config: ${r}`)}}async function sO(t){var n;const e=await wi();try{try{await e.booksDir.removeEntry(t,{recursive:!0})}catch{}const r=await Ps();r.books=r.books.filter(i=>i.id!==t),(n=r.hashMapFilePath)!=null&&n[t]&&delete r.hashMapFilePath[t],r.lastSync=Date.now(),await ui(r)}catch(r){throw new Error(`Failed to delete book: ${r}`)}}async function oO(t){const e=await wi();try{const n=await e.booksDir.getDirectoryHandle(t);for await(const[r,i]of n.entries())if(r.toLowerCase().endsWith(".epub"))return await(await i.getFile()).arrayBuffer();throw new Error("EPUB file not found in book directory")}catch(n){throw new Error(`Failed to get book file: ${n}`)}}const aO=async t=>{try{const e=await navigator.storage.getDirectory(),n=t.split("/");let r=e;for(let l=0;l<n.length-1;l++)r=await r.getDirectoryHandle(n[l]);const i=n[n.length-1],o=await(await r.getFileHandle(i)).getFile(),a=new FileReader;return new Promise(l=>{a.readAsDataURL(o),a.onloadend=()=>{l(a.result)}})}catch(e){console.error("Error fetching cover image:",e);return}};async function j_(){return(await Ps()).books.map(e=>({...e,status:e.status??"local",downloadProgress:e.status==="downloading"?e.downloadProgress??0:e.downloadProgress}))}const F_=async(t,e="")=>{const n=[];for await(const[r,i]of t.entries()){const s=e?`${e}/${r}`:r;if(i.kind==="file")try{const a=await i.getFile();n.push({path:s,size:a.size,kind:"file"})}catch(o){console.warn(`Failed to read file size for ${s}`,o)}else{n.push({path:s,size:0,kind:"directory"});try{const o=await F_(i,s);n.push(...o)}catch(o){console.warn(`Failed to read directory ${s}`,o)}}}return n};async function lO(){const t=await wi(),e=await F_(t.root);return{totalBytes:e.filter(r=>r.kind==="file").reduce((r,i)=>r+i.size,0),entries:e}}async function uO(){if(!Vu())throw new Error("OPFS is not supported in this browser");const t=await wi();try{await t.root.removeEntry("books",{recursive:!0})}catch(e){console.warn("Failed to remove books directory during reset:",e)}try{await t.root.removeEntry("config.json")}catch(e){console.warn("Failed to remove config during reset:",e)}xu=null,await Hv()}async function _o(t){const e=await Ps(),n=Vv();e.settings||(e.settings={contextMenu:n});const r=t.items??e.settings.contextMenu.items??n.items;e.settings.contextMenu={...n,...e.settings.contextMenu,...t,api:t.api??e.settings.contextMenu.api??n.api,key:t.key??e.settings.contextMenu.key??n.key,defaultModel:t.defaultModel??e.settings.contextMenu.defaultModel??n.defaultModel,pinnedMaximized:t.pinnedMaximized??e.settings.contextMenu.pinnedMaximized??n.pinnedMaximized,items:Sh(r),providerApiKeyCache:t.providerApiKeyCache??e.settings.contextMenu.providerApiKeyCache??n.providerApiKeyCache,providerDefaultModelCache:t.providerDefaultModelCache??e.settings.contextMenu.providerDefaultModelCache??n.providerDefaultModelCache},e.lastSync=Date.now(),await ui(e)}async function cO(){var i;const t=await Ps(),e=Vv(),n=(i=t.settings)==null?void 0:i.contextMenu,r=Sh((n==null?void 0:n.items)??e.items);return{...e,...n,api:(n==null?void 0:n.api)??e.api,key:(n==null?void 0:n.key)??e.key,defaultModel:(n==null?void 0:n.defaultModel)??e.defaultModel,providerId:(n==null?void 0:n.providerId)??e.providerId,providerApiKeyCache:(n==null?void 0:n.providerApiKeyCache)??e.providerApiKeyCache,providerDefaultModelCache:(n==null?void 0:n.providerDefaultModelCache)??e.providerDefaultModelCache,pinnedMaximized:(n==null?void 0:n.pinnedMaximized)??e.pinnedMaximized,items:r}}async function Ps(){var e;const t=await wi();try{const i=await(await(await t.root.getFileHandle("config.json")).getFile()).text();if(!i.trim()){const s=Il();return await ui(s),s}try{const s=JSON.parse(i),o=I_(s);return(!s.hashMapFilePath||!s.presetBooks||!((e=s.settings)!=null&&e.contextMenu)||s.books!==o.books)&&await ui(o),o}catch{const s=Il();return await ui(s),s}}catch(n){if(n instanceof Error&&n.message.includes("not found")){const r=Il();return await ui(r),r}throw new Error(`Failed to load config: ${n}`)}}const dO=t=>{if(!t||!t.name.toLowerCase().endsWith(".epub"))throw new Error("Invalid EPUB file - must have .epub extension");if(t.size===0)throw new Error("Invalid EPUB file - file is empty");if(t.size>100*1024*1024)throw new Error("Invalid EPUB file - file size exceeds 100MB")},fO=(t,e)=>{const n=t.url.split("/").pop()||"Preset Book",r=n.replace(/\.epub$/i,"")||n;return{id:e,name:r,author:"Unknown Author",path:"",coverPath:"",createdAt:Date.now(),status:"downloading",downloadProgress:0,isPreset:!0,remoteUrl:t.url}},hO=()=>`preset-${Date.now()}-${Math.random().toString(16).slice(2)}`,pO=(t,e)=>{const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(i,r),r+=i.length}),n},Ll=Ra("bookshelf/initialize",async(t,{rejectWithValue:e})=>{try{if(!Vu())throw new Error("OPFS is not supported in this browser");return await Hv(),await j_()}catch(n){return e(n instanceof Error?n.message:"Unknown error")}}),dd=Ra("bookshelf/uploadBook",async(t,{rejectWithValue:e})=>{try{return dO(t),await iO(t)}catch(n){return e(n instanceof Error?n.message:"Upload failed")}}),fd=Ra("bookshelf/deleteBook",async(t,{rejectWithValue:e})=>{try{if(!t)throw new Error("Invalid book ID");return await sO(t),t}catch(n){return e(n instanceof Error?n.message:"Delete failed")}}),Pl=Ra("bookshelf/loadBooks",async(t,{rejectWithValue:e})=>{try{return await j_()}catch(n){return e(n instanceof Error?n.message:"Load failed")}}),B_=Ra("bookshelf/downloadPresetBook",async(t,{dispatch:e,rejectWithValue:n})=>{var i;const r=hO();try{e(vO(fO(t,r)));const s=await fetch(t.url);if(!s.ok)throw new Error(`Failed to download: ${s.statusText}`);const o=parseInt(s.headers.get("content-length")||"0",10),a=(i=s.body)==null?void 0:i.getReader();if(!a)throw new Error("Failed to get response reader");const l=[];let u=0,d=0;for(;;){const{done:w,value:_}=await a.read();if(w)break;_&&(l.push(_),u+=_.length);const E=Date.now();if(E-d>100){const S=o>0?Math.round(u/o*100):0;e(rb({id:r,progress:S})),d=E}}e(rb({id:r,progress:100}));const c=pO(l,u),h=t.url.split("/").pop()||"preset.epub",f=await P_(c);if(await M_(f))return await nb(t.url,f),e(yO(r)),{skipped:!0,reason:"duplicate",hash:f};const x=L_(c),g=new Blob([x],{type:"application/epub+zip"}),p=new File([g],h,{type:"application/epub+zip"}),m=await O_(p,f,x,{isPreset:!0,remoteUrl:t.url});return await nb(t.url,f),e(xO({tempId:r,book:{...m,isPreset:!0,remoteUrl:t.url}})),{skipped:!1,book:m}}catch(s){return e(wO({id:r,error:s instanceof Error?s.message:"Download failed"})),n(s instanceof Error?s.message:"Download failed")}}),Lg=Ra("bookshelf/initializePresetBooks",async(t,{dispatch:e,getState:n,rejectWithValue:r})=>{try{const i=await Ps(),s=new Set(gf.map(h=>h.url)),o=i.presetBooks??[],a=o.map(h=>!s.has(h.url)&&!h.deletedAt?{...h,deletedAt:Date.now()}:h),l=new Map(o.map(h=>[h.url,h]));gf.forEach(h=>{l.has(h.url)||a.push({url:h.url})}),(!i.presetBooks||JSON.stringify(i.presetBooks)!==JSON.stringify(a))&&(i.presetBooks=a,await ui(i));const u=a.filter(h=>!h.fileHash&&!h.deletedAt);return u.length===0?{skipped:!0,reason:"all_books_downloaded"}:n().bookshelf.books.some(h=>h.isPreset&&h.status==="downloading")?{skipped:!0,reason:"download_in_progress"}:(u.forEach(h=>{e(B_(h))}),{skipped:!1,downloadCount:u.length})}catch(i){return r(i instanceof Error?i.message:"Failed to initialize preset books")}}),mO={books:[],isLoading:!1,error:null,uploadProgress:null,presetBooksInitialized:!1,downloadingCount:0},z_=PI({name:"bookshelf",initialState:mO,reducers:{addPlaceholderBook:(t,e)=>{const n={...e.payload,status:"downloading",downloadProgress:e.payload.downloadProgress??0};t.books.push(n),t.downloadingCount+=1},removePlaceholderBook:(t,e)=>{t.books=t.books.filter(n=>n.id!==e.payload),t.downloadingCount=Math.max(0,t.downloadingCount-1)},replacePlaceholderBook:(t,e)=>{const n=t.books.findIndex(r=>r.id===e.payload.tempId);n!==-1&&(t.books[n]={...e.payload.book,status:"local"},t.downloadingCount=Math.max(0,t.downloadingCount-1))},updateDownloadProgress:(t,e)=>{const n=t.books.find(r=>r.id===e.payload.id);n&&(n.downloadProgress=e.payload.progress,n.status="downloading")},updateBookError:(t,e)=>{const n=t.books.find(r=>r.id===e.payload.id);n&&(n.status="error",n.downloadError=e.payload.error),t.downloadingCount=Math.max(0,t.downloadingCount-1)},setUploadProgress:(t,e)=>{t.uploadProgress=e.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ll.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ll.fulfilled,(e,n)=>{e.isLoading=!1,e.books=n.payload.map(r=>({...r,status:r.status??"local"})),e.downloadingCount=e.books.filter(r=>r.status==="downloading").length}).addCase(Ll.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(dd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(dd.fulfilled,(e,n)=>{e.isLoading=!1,e.books.push({...n.payload,status:"local"})}).addCase(dd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(fd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(fd.fulfilled,(e,n)=>{e.isLoading=!1,e.books=e.books.filter(r=>r.id!==n.payload)}).addCase(fd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Pl.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Pl.fulfilled,(e,n)=>{e.isLoading=!1,e.books=n.payload,e.downloadingCount=e.books.filter(r=>r.status==="downloading").length}).addCase(Pl.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(B_.rejected,(e,n)=>{e.error=n.payload}).addCase(Lg.fulfilled,e=>{e.presetBooksInitialized=!0}).addCase(Lg.rejected,(e,n)=>{e.presetBooksInitialized=!0,e.error=n.payload})}}),{setUploadProgress:oX,clearError:gO,addPlaceholderBook:vO,removePlaceholderBook:yO,replacePlaceholderBook:xO,updateDownloadProgress:rb,updateBookError:wO}=z_.actions,bO=z_.reducer,Bp=xI({reducer:{bookshelf:bO}}),U_=()=>B3(),SO=t=>$3(t);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kt(){return Kt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kt.apply(this,arguments)}var dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dn||(dn={}));const ib="popstate";function kO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:co(i)}return _O(e,n,null,t)}function ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EO(){return Math.random().toString(36).substr(2,8)}function sb(t,e){return{usr:t.state,key:t.key,idx:e}}function wu(t,e,n,r){return n===void 0&&(n=null),Kt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Os(e):e,{state:n,key:e&&e.key||r||EO()})}function co(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Os(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _O(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=dn.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Kt({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function c(){a=dn.Pop;let g=d(),p=g==null?null:g-u;u=g,l&&l({action:a,location:x.location,delta:p})}function h(g,p){a=dn.Push;let m=wu(x.location,g,p);u=d()+1;let w=sb(m,u),_=x.createHref(m);try{o.pushState(w,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}s&&l&&l({action:a,location:x.location,delta:1})}function f(g,p){a=dn.Replace;let m=wu(x.location,g,p);u=d();let w=sb(m,u),_=x.createHref(m);o.replaceState(w,"",_),s&&l&&l({action:a,location:x.location,delta:0})}function v(g){let p=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof g=="string"?g:co(g);return m=m.replace(/ $/,"%20"),ct(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let x={get action(){return a},get location(){return t(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ib,c),l=g,()=>{i.removeEventListener(ib,c),l=null}},createHref(g){return e(i,g)},createURL:v,encodeLocation(g){let p=v(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(g){return o.go(g)}};return x}var Ot;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ot||(Ot={}));const CO=new Set(["lazy","caseSensitive","path","id","index","children"]);function AO(t){return t.index===!0}function vf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(ct(i.index!==!0||!i.children,"Cannot specify children on an index route"),ct(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),AO(i)){let l=Kt({},i,e(i),{id:a});return r[a]=l,l}else{let l=Kt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=vf(i.children,e,o,r)),l}})}function Vs(t,e,n){return n===void 0&&(n="/"),hd(t,e,n,!1)}function hd(t,e,n,r){let i=typeof e=="string"?Os(e):e,s=qi(i.pathname||"/",n);if(s==null)return null;let o=$_(t);NO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=zO(s);a=FO(o[l],u,r)}return a}function DO(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function $_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ct(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Mi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(ct(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),$_(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:MO(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of W_(s.path))i(s,o,l)}),e}function W_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=W_(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function NO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TO=/^:[\w-]+$/,RO=3,IO=2,LO=1,PO=10,OO=-2,ob=t=>t==="*";function MO(t,e){let n=t.split("/"),r=n.length;return n.some(ob)&&(r+=OO),e&&(r+=IO),n.filter(i=>!ob(i)).reduce((i,s)=>i+(TO.test(s)?RO:s===""?LO:PO),r)}function jO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function FO(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",c=yf({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=yf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:Mi([s,c.pathname]),pathnameBase:HO(Mi([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=Mi([s,c.pathnameBase]))}return o}function yf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,c)=>{let{paramName:h,isOptional:f}=d;if(h==="*"){let x=a[c]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[c];return f&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function BO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const UO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$O=t=>UO.test(t);function WO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Os(t):t,s;if(n)if($O(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),uo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=ab(n.substring(1),"/"):s=ab(n,e)}else s=e;return{pathname:s,search:VO(r),hash:qO(i)}}function ab(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kh(t,e){let n=H_(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Eh(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Os(t):(i=Kt({},t),ct(!i.pathname||!i.pathname.includes("?"),zp("?","pathname","search",i)),ct(!i.pathname||!i.pathname.includes("#"),zp("#","pathname","hash",i)),ct(!i.search||!i.search.includes("#"),zp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let c=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),c-=1;i.pathname=h.join("/")}a=c>=0?e[c]:"/"}let l=WO(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Mi=t=>t.join("/").replace(/\/\/+/g,"/"),HO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xf{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function bu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const V_=["post","put","patch","delete"],KO=new Set(V_),XO=["get",...V_],GO=new Set(XO),YO=new Set([301,302,303,307,308]),ZO=new Set([307,308]),Up={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},QO={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ja={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},qv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JO=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),q_="remix-router-transitions";function e5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ct(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let j=t.detectErrorBoundary;i=U=>({hasErrorBoundary:j(U)})}else i=JO;let s={},o=vf(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.dataStrategy||i5,d=t.patchRoutesOnNavigation,c=Kt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,v=null,x=null,g=null,p=t.hydrationData!=null,m=Vs(o,t.history.location,l),w=!1,_=null;if(m==null&&!d){let j=Yn(404,{pathname:t.history.location.pathname}),{matches:U,route:V}=yb(o);m=U,_={[V.id]:j}}m&&!t.hydrationData&&re(m,o,t.history.location.pathname).active&&(m=null);let E;if(m)if(m.some(j=>j.route.lazy))E=!1;else if(!m.some(j=>j.route.loader))E=!0;else if(c.v7_partialHydration){let j=t.hydrationData?t.hydrationData.loaderData:null,U=t.hydrationData?t.hydrationData.errors:null;if(U){let V=m.findIndex(ie=>U[ie.route.id]!==void 0);E=m.slice(0,V+1).every(ie=>!Og(ie.route,j,U))}else E=m.every(V=>!Og(V.route,j,U))}else E=t.hydrationData!=null;else if(E=!1,m=[],c.v7_partialHydration){let j=re(null,o,t.history.location.pathname);j.active&&j.matches&&(w=!0,m=j.matches)}let S,b={historyAction:t.history.action,location:t.history.location,matches:m,initialized:E,navigation:Up,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||_,fetchers:new Map,blockers:new Map},D=dn.Pop,T=!1,C,I=!1,M=new Map,H=null,q=!1,W=!1,K=[],G=new Set,$=new Map,te=0,L=-1,ce=new Map,oe=new Set,F=new Map,xe=new Map,Fe=new Set,Ne=new Map,He=new Map,le;function Pe(){if(h=t.history.listen(j=>{let{action:U,location:V,delta:ie}=j;if(le){le(),le=void 0;return}uo(He.size===0||ie!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=Y({currentLocation:b.location,nextLocation:V,historyAction:U});if(ge&&ie!=null){let we=new Promise(Ee=>{le=Ee});t.history.go(ie*-1),Oe(ge,{state:"blocked",location:V,proceed(){Oe(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),we.then(()=>t.history.go(ie))},reset(){let Ee=new Map(b.blockers);Ee.set(ge,Ja),Ue({blockers:Ee})}});return}return vt(U,V)}),n){y5(e,M);let j=()=>x5(e,M);e.addEventListener("pagehide",j),H=()=>e.removeEventListener("pagehide",j)}return b.initialized||vt(dn.Pop,b.location,{initialHydration:!0}),S}function ve(){h&&h(),H&&H(),f.clear(),C&&C.abort(),b.fetchers.forEach((j,U)=>pt(U)),b.blockers.forEach((j,U)=>pe(U))}function ke(j){return f.add(j),()=>f.delete(j)}function Ue(j,U){U===void 0&&(U={}),b=Kt({},b,j);let V=[],ie=[];c.v7_fetcherPersist&&b.fetchers.forEach((ge,we)=>{ge.state==="idle"&&(Fe.has(we)?ie.push(we):V.push(we))}),Fe.forEach(ge=>{!b.fetchers.has(ge)&&!$.has(ge)&&ie.push(ge)}),[...f].forEach(ge=>ge(b,{deletedFetchers:ie,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),c.v7_fetcherPersist?(V.forEach(ge=>b.fetchers.delete(ge)),ie.forEach(ge=>pt(ge))):ie.forEach(ge=>Fe.delete(ge))}function Ve(j,U,V){var ie,ge;let{flushSync:we}=V===void 0?{}:V,Ee=b.actionData!=null&&b.navigation.formMethod!=null&&$r(b.navigation.formMethod)&&b.navigation.state==="loading"&&((ie=j.state)==null?void 0:ie._isRedirect)!==!0,_e;U.actionData?Object.keys(U.actionData).length>0?_e=U.actionData:_e=null:Ee?_e=b.actionData:_e=null;let De=U.loaderData?gb(b.loaderData,U.loaderData,U.matches||[],U.errors):b.loaderData,Te=b.blockers;Te.size>0&&(Te=new Map(Te),Te.forEach((Ke,Nt)=>Te.set(Nt,Ja)));let Me=T===!0||b.navigation.formMethod!=null&&$r(b.navigation.formMethod)&&((ge=j.state)==null?void 0:ge._isRedirect)!==!0;a&&(o=a,a=void 0),q||D===dn.Pop||(D===dn.Push?t.history.push(j,j.state):D===dn.Replace&&t.history.replace(j,j.state));let et;if(D===dn.Pop){let Ke=M.get(b.location.pathname);Ke&&Ke.has(j.pathname)?et={currentLocation:b.location,nextLocation:j}:M.has(j.pathname)&&(et={currentLocation:j,nextLocation:b.location})}else if(I){let Ke=M.get(b.location.pathname);Ke?Ke.add(j.pathname):(Ke=new Set([j.pathname]),M.set(b.location.pathname,Ke)),et={currentLocation:b.location,nextLocation:j}}Ue(Kt({},U,{actionData:_e,loaderData:De,historyAction:D,location:j,initialized:!0,navigation:Up,revalidation:"idle",restoreScrollPosition:ne(j,U.matches||b.matches),preventScrollReset:Me,blockers:Te}),{viewTransitionOpts:et,flushSync:we===!0}),D=dn.Pop,T=!1,I=!1,q=!1,W=!1,K=[]}async function ot(j,U){if(typeof j=="number"){t.history.go(j);return}let V=Pg(b.location,b.matches,l,c.v7_prependBasename,j,c.v7_relativeSplatPath,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:ie,submission:ge,error:we}=lb(c.v7_normalizeFormMethod,!1,V,U),Ee=b.location,_e=wu(b.location,ie,U&&U.state);_e=Kt({},_e,t.history.encodeLocation(_e));let De=U&&U.replace!=null?U.replace:void 0,Te=dn.Push;De===!0?Te=dn.Replace:De===!1||ge!=null&&$r(ge.formMethod)&&ge.formAction===b.location.pathname+b.location.search&&(Te=dn.Replace);let Me=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,et=(U&&U.flushSync)===!0,Ke=Y({currentLocation:Ee,nextLocation:_e,historyAction:Te});if(Ke){Oe(Ke,{state:"blocked",location:_e,proceed(){Oe(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),ot(j,U)},reset(){let Nt=new Map(b.blockers);Nt.set(Ke,Ja),Ue({blockers:Nt})}});return}return await vt(Te,_e,{submission:ge,pendingError:we,preventScrollReset:Me,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:et})}function ft(){if(me(),Ue({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){vt(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}vt(D||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:I===!0})}}async function vt(j,U,V){C&&C.abort(),C=null,D=j,q=(V&&V.startUninterruptedRevalidation)===!0,k(b.location,b.matches),T=(V&&V.preventScrollReset)===!0,I=(V&&V.enableViewTransition)===!0;let ie=a||o,ge=V&&V.overrideNavigation,we=V!=null&&V.initialHydration&&b.matches&&b.matches.length>0&&!w?b.matches:Vs(ie,U,l),Ee=(V&&V.flushSync)===!0;if(we&&b.initialized&&!W&&c5(b.location,U)&&!(V&&V.submission&&$r(V.submission.formMethod))){Ve(U,{matches:we},{flushSync:Ee});return}let _e=re(we,ie,U.pathname);if(_e.active&&_e.matches&&(we=_e.matches),!we){let{error:nt,notFoundMatches:st,route:yt}=ue(U.pathname);Ve(U,{matches:st,loaderData:{},errors:{[yt.id]:nt}},{flushSync:Ee});return}C=new AbortController;let De=Co(t.history,U,C.signal,V&&V.submission),Te;if(V&&V.pendingError)Te=[qs(we).route.id,{type:Ot.error,error:V.pendingError}];else if(V&&V.submission&&$r(V.submission.formMethod)){let nt=await at(De,U,V.submission,we,_e.active,{replace:V.replace,flushSync:Ee});if(nt.shortCircuited)return;if(nt.pendingActionResult){let[st,yt]=nt.pendingActionResult;if(hr(yt)&&bu(yt.error)&&yt.error.status===404){C=null,Ve(U,{matches:nt.matches,loaderData:{},errors:{[st]:yt.error}});return}}we=nt.matches||we,Te=nt.pendingActionResult,ge=$p(U,V.submission),Ee=!1,_e.active=!1,De=Co(t.history,De.url,De.signal)}let{shortCircuited:Me,matches:et,loaderData:Ke,errors:Nt}=await Ct(De,U,we,_e.active,ge,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,Ee,Te);Me||(C=null,Ve(U,Kt({matches:et||we},vb(Te),{loaderData:Ke,errors:Nt})))}async function at(j,U,V,ie,ge,we){we===void 0&&(we={}),me();let Ee=g5(U,V);if(Ue({navigation:Ee},{flushSync:we.flushSync===!0}),ge){let Te=await N(ie,U.pathname,j.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Me=qs(Te.partialMatches).route.id;return{matches:Te.partialMatches,pendingActionResult:[Me,{type:Ot.error,error:Te.error}]}}else if(Te.matches)ie=Te.matches;else{let{notFoundMatches:Me,error:et,route:Ke}=ue(U.pathname);return{matches:Me,pendingActionResult:[Ke.id,{type:Ot.error,error:et}]}}}let _e,De=dl(ie,U);if(!De.route.action&&!De.route.lazy)_e={type:Ot.error,error:Yn(405,{method:j.method,pathname:U.pathname,routeId:De.route.id})};else if(_e=(await rn("action",b,j,[De],ie,null))[De.route.id],j.signal.aborted)return{shortCircuited:!0};if(Qs(_e)){let Te;return we&&we.replace!=null?Te=we.replace:Te=hb(_e.response.headers.get("Location"),new URL(j.url),l)===b.location.pathname+b.location.search,await It(j,_e,!0,{submission:V,replace:Te}),{shortCircuited:!0}}if(ms(_e))throw Yn(400,{type:"defer-action"});if(hr(_e)){let Te=qs(ie,De.route.id);return(we&&we.replace)!==!0&&(D=dn.Push),{matches:ie,pendingActionResult:[Te.route.id,_e]}}return{matches:ie,pendingActionResult:[De.route.id,_e]}}async function Ct(j,U,V,ie,ge,we,Ee,_e,De,Te,Me){let et=ge||$p(U,we),Ke=we||Ee||wb(et),Nt=!q&&(!c.v7_partialHydration||!De);if(ie){if(Nt){let qt=Tt(Me);Ue(Kt({navigation:et},qt!==void 0?{actionData:qt}:{}),{flushSync:Te})}let St=await N(V,U.pathname,j.signal);if(St.type==="aborted")return{shortCircuited:!0};if(St.type==="error"){let qt=qs(St.partialMatches).route.id;return{matches:St.partialMatches,loaderData:{},errors:{[qt]:St.error}}}else if(St.matches)V=St.matches;else{let{error:qt,notFoundMatches:ti,route:Fs}=ue(U.pathname);return{matches:ti,loaderData:{},errors:{[Fs.id]:qt}}}}let nt=a||o,[st,yt]=cb(t.history,b,V,Ke,U,c.v7_partialHydration&&De===!0,c.v7_skipActionErrorRevalidation,W,K,G,Fe,F,oe,nt,l,Me);if(R(St=>!(V&&V.some(qt=>qt.route.id===St))||st&&st.some(qt=>qt.route.id===St)),L=++te,st.length===0&&yt.length===0){let St=Yt();return Ve(U,Kt({matches:V,loaderData:{},errors:Me&&hr(Me[1])?{[Me[0]]:Me[1].error}:null},vb(Me),St?{fetchers:new Map(b.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(Nt){let St={};if(!ie){St.navigation=et;let qt=Tt(Me);qt!==void 0&&(St.actionData=qt)}yt.length>0&&(St.fetchers=Dt(yt)),Ue(St,{flushSync:Te})}yt.forEach(St=>{it(St.key),St.controller&&$.set(St.key,St.controller)});let Pr=()=>yt.forEach(St=>it(St.key));C&&C.signal.addEventListener("abort",Pr);let{loaderResults:js,fetcherResults:br}=await ae(b,V,st,yt,j);if(j.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Pr),yt.forEach(St=>$.delete(St.key));let Ln=Nc(js);if(Ln)return await It(j,Ln.result,!0,{replace:_e}),{shortCircuited:!0};if(Ln=Nc(br),Ln)return oe.add(Ln.key),await It(j,Ln.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:yo,errors:Sr}=mb(b,V,js,Me,yt,br,Ne);Ne.forEach((St,qt)=>{St.subscribe(ti=>{(ti||St.done)&&Ne.delete(qt)})}),c.v7_partialHydration&&De&&b.errors&&(Sr=Kt({},b.errors,Sr));let ki=Yt(),Ei=O(L),Ji=ki||Ei||yt.length>0;return Kt({matches:V,loaderData:yo,errors:Sr},Ji?{fetchers:new Map(b.fetchers)}:{})}function Tt(j){if(j&&!hr(j[1]))return{[j[0]]:j[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Dt(j){return j.forEach(U=>{let V=b.fetchers.get(U.key),ie=el(void 0,V?V.data:void 0);b.fetchers.set(U.key,ie)}),new Map(b.fetchers)}function Rt(j,U,V,ie){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");it(j);let ge=(ie&&ie.flushSync)===!0,we=a||o,Ee=Pg(b.location,b.matches,l,c.v7_prependBasename,V,c.v7_relativeSplatPath,U,ie==null?void 0:ie.relative),_e=Vs(we,Ee,l),De=re(_e,we,Ee);if(De.active&&De.matches&&(_e=De.matches),!_e){We(j,U,Yn(404,{pathname:Ee}),{flushSync:ge});return}let{path:Te,submission:Me,error:et}=lb(c.v7_normalizeFormMethod,!0,Ee,ie);if(et){We(j,U,et,{flushSync:ge});return}let Ke=dl(_e,Te),Nt=(ie&&ie.preventScrollReset)===!0;if(Me&&$r(Me.formMethod)){ut(j,U,Te,Ke,_e,De.active,ge,Nt,Me);return}F.set(j,{routeId:U,path:Te}),Je(j,U,Te,Ke,_e,De.active,ge,Nt,Me)}async function ut(j,U,V,ie,ge,we,Ee,_e,De){me(),F.delete(j);function Te(en){if(!en.route.action&&!en.route.lazy){let P=Yn(405,{method:De.formMethod,pathname:V,routeId:U});return We(j,U,P,{flushSync:Ee}),!0}return!1}if(!we&&Te(ie))return;let Me=b.fetchers.get(j);Be(j,v5(De,Me),{flushSync:Ee});let et=new AbortController,Ke=Co(t.history,V,et.signal,De);if(we){let en=await N(ge,new URL(Ke.url).pathname,Ke.signal,j);if(en.type==="aborted")return;if(en.type==="error"){We(j,U,en.error,{flushSync:Ee});return}else if(en.matches){if(ge=en.matches,ie=dl(ge,V),Te(ie))return}else{We(j,U,Yn(404,{pathname:V}),{flushSync:Ee});return}}$.set(j,et);let Nt=te,st=(await rn("action",b,Ke,[ie],ge,j))[ie.route.id];if(Ke.signal.aborted){$.get(j)===et&&$.delete(j);return}if(c.v7_fetcherPersist&&Fe.has(j)){if(Qs(st)||hr(st)){Be(j,ss(void 0));return}}else{if(Qs(st))if($.delete(j),L>Nt){Be(j,ss(void 0));return}else return oe.add(j),Be(j,el(De)),It(Ke,st,!1,{fetcherSubmission:De,preventScrollReset:_e});if(hr(st)){We(j,U,st.error);return}}if(ms(st))throw Yn(400,{type:"defer-action"});let yt=b.navigation.location||b.location,Pr=Co(t.history,yt,et.signal),js=a||o,br=b.navigation.state!=="idle"?Vs(js,b.navigation.location,l):b.matches;ct(br,"Didn't find any matches after fetcher action");let Ln=++te;ce.set(j,Ln);let yo=el(De,st.data);b.fetchers.set(j,yo);let[Sr,ki]=cb(t.history,b,br,De,yt,!1,c.v7_skipActionErrorRevalidation,W,K,G,Fe,F,oe,js,l,[ie.route.id,st]);ki.filter(en=>en.key!==j).forEach(en=>{let P=en.key,X=b.fetchers.get(P),B=el(void 0,X?X.data:void 0);b.fetchers.set(P,B),it(P),en.controller&&$.set(P,en.controller)}),Ue({fetchers:new Map(b.fetchers)});let Ei=()=>ki.forEach(en=>it(en.key));et.signal.addEventListener("abort",Ei);let{loaderResults:Ji,fetcherResults:St}=await ae(b,br,Sr,ki,Pr);if(et.signal.aborted)return;et.signal.removeEventListener("abort",Ei),ce.delete(j),$.delete(j),ki.forEach(en=>$.delete(en.key));let qt=Nc(Ji);if(qt)return It(Pr,qt.result,!1,{preventScrollReset:_e});if(qt=Nc(St),qt)return oe.add(qt.key),It(Pr,qt.result,!1,{preventScrollReset:_e});let{loaderData:ti,errors:Fs}=mb(b,br,Ji,void 0,ki,St,Ne);if(b.fetchers.has(j)){let en=ss(st.data);b.fetchers.set(j,en)}O(Ln),b.navigation.state==="loading"&&Ln>L?(ct(D,"Expected pending action"),C&&C.abort(),Ve(b.navigation.location,{matches:br,loaderData:ti,errors:Fs,fetchers:new Map(b.fetchers)})):(Ue({errors:Fs,loaderData:gb(b.loaderData,ti,br,Fs),fetchers:new Map(b.fetchers)}),W=!1)}async function Je(j,U,V,ie,ge,we,Ee,_e,De){let Te=b.fetchers.get(j);Be(j,el(De,Te?Te.data:void 0),{flushSync:Ee});let Me=new AbortController,et=Co(t.history,V,Me.signal);if(we){let st=await N(ge,new URL(et.url).pathname,et.signal,j);if(st.type==="aborted")return;if(st.type==="error"){We(j,U,st.error,{flushSync:Ee});return}else if(st.matches)ge=st.matches,ie=dl(ge,V);else{We(j,U,Yn(404,{pathname:V}),{flushSync:Ee});return}}$.set(j,Me);let Ke=te,nt=(await rn("loader",b,et,[ie],ge,j))[ie.route.id];if(ms(nt)&&(nt=await Kv(nt,et.signal,!0)||nt),$.get(j)===Me&&$.delete(j),!et.signal.aborted){if(Fe.has(j)){Be(j,ss(void 0));return}if(Qs(nt))if(L>Ke){Be(j,ss(void 0));return}else{oe.add(j),await It(et,nt,!1,{preventScrollReset:_e});return}if(hr(nt)){We(j,U,nt.error);return}ct(!ms(nt),"Unhandled fetcher deferred data"),Be(j,ss(nt.data))}}async function It(j,U,V,ie){let{submission:ge,fetcherSubmission:we,preventScrollReset:Ee,replace:_e}=ie===void 0?{}:ie;U.response.headers.has("X-Remix-Revalidate")&&(W=!0);let De=U.response.headers.get("Location");ct(De,"Expected a Location header on the redirect Response"),De=hb(De,new URL(j.url),l);let Te=wu(b.location,De,{_isRedirect:!0});if(n){let st=!1;if(U.response.headers.has("X-Remix-Reload-Document"))st=!0;else if(qv.test(De)){const yt=t.history.createURL(De);st=yt.origin!==e.location.origin||qi(yt.pathname,l)==null}if(st){_e?e.location.replace(De):e.location.assign(De);return}}C=null;let Me=_e===!0||U.response.headers.has("X-Remix-Replace")?dn.Replace:dn.Push,{formMethod:et,formAction:Ke,formEncType:Nt}=b.navigation;!ge&&!we&&et&&Ke&&Nt&&(ge=wb(b.navigation));let nt=ge||we;if(ZO.has(U.response.status)&&nt&&$r(nt.formMethod))await vt(Me,Te,{submission:Kt({},nt,{formAction:De}),preventScrollReset:Ee||T,enableViewTransition:V?I:void 0});else{let st=$p(Te,ge);await vt(Me,Te,{overrideNavigation:st,fetcherSubmission:we,preventScrollReset:Ee||T,enableViewTransition:V?I:void 0})}}async function rn(j,U,V,ie,ge,we){let Ee,_e={};try{Ee=await s5(u,j,U,V,ie,ge,we,s,i)}catch(De){return ie.forEach(Te=>{_e[Te.route.id]={type:Ot.error,error:De}}),_e}for(let[De,Te]of Object.entries(Ee))if(d5(Te)){let Me=Te.result;_e[De]={type:Ot.redirect,response:l5(Me,V,De,ge,l,c.v7_relativeSplatPath)}}else _e[De]=await a5(Te);return _e}async function ae(j,U,V,ie,ge){let we=j.matches,Ee=rn("loader",j,ge,V,U,null),_e=Promise.all(ie.map(async Me=>{if(Me.matches&&Me.match&&Me.controller){let Ke=(await rn("loader",j,Co(t.history,Me.path,Me.controller.signal),[Me.match],Me.matches,Me.key))[Me.match.route.id];return{[Me.key]:Ke}}else return Promise.resolve({[Me.key]:{type:Ot.error,error:Yn(404,{pathname:Me.path})}})})),De=await Ee,Te=(await _e).reduce((Me,et)=>Object.assign(Me,et),{});return await Promise.all([p5(U,De,ge.signal,we,j.loaderData),m5(U,Te,ie)]),{loaderResults:De,fetcherResults:Te}}function me(){W=!0,K.push(...R()),F.forEach((j,U)=>{$.has(U)&&G.add(U),it(U)})}function Be(j,U,V){V===void 0&&(V={}),b.fetchers.set(j,U),Ue({fetchers:new Map(b.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function We(j,U,V,ie){ie===void 0&&(ie={});let ge=qs(b.matches,U);pt(j),Ue({errors:{[ge.route.id]:V},fetchers:new Map(b.fetchers)},{flushSync:(ie&&ie.flushSync)===!0})}function Ze(j){return xe.set(j,(xe.get(j)||0)+1),Fe.has(j)&&Fe.delete(j),b.fetchers.get(j)||QO}function pt(j){let U=b.fetchers.get(j);$.has(j)&&!(U&&U.state==="loading"&&ce.has(j))&&it(j),F.delete(j),ce.delete(j),oe.delete(j),c.v7_fetcherPersist&&Fe.delete(j),G.delete(j),b.fetchers.delete(j)}function Bt(j){let U=(xe.get(j)||0)-1;U<=0?(xe.delete(j),Fe.add(j),c.v7_fetcherPersist||pt(j)):xe.set(j,U),Ue({fetchers:new Map(b.fetchers)})}function it(j){let U=$.get(j);U&&(U.abort(),$.delete(j))}function Ft(j){for(let U of j){let V=Ze(U),ie=ss(V.data);b.fetchers.set(U,ie)}}function Yt(){let j=[],U=!1;for(let V of oe){let ie=b.fetchers.get(V);ct(ie,"Expected fetcher: "+V),ie.state==="loading"&&(oe.delete(V),j.push(V),U=!0)}return Ft(j),U}function O(j){let U=[];for(let[V,ie]of ce)if(ie<j){let ge=b.fetchers.get(V);ct(ge,"Expected fetcher: "+V),ge.state==="loading"&&(it(V),ce.delete(V),U.push(V))}return Ft(U),U.length>0}function fe(j,U){let V=b.blockers.get(j)||Ja;return He.get(j)!==U&&He.set(j,U),V}function pe(j){b.blockers.delete(j),He.delete(j)}function Oe(j,U){let V=b.blockers.get(j)||Ja;ct(V.state==="unblocked"&&U.state==="blocked"||V.state==="blocked"&&U.state==="blocked"||V.state==="blocked"&&U.state==="proceeding"||V.state==="blocked"&&U.state==="unblocked"||V.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+U.state);let ie=new Map(b.blockers);ie.set(j,U),Ue({blockers:ie})}function Y(j){let{currentLocation:U,nextLocation:V,historyAction:ie}=j;if(He.size===0)return;He.size>1&&uo(!1,"A router only supports one blocker at a time");let ge=Array.from(He.entries()),[we,Ee]=ge[ge.length-1],_e=b.blockers.get(we);if(!(_e&&_e.state==="proceeding")&&Ee({currentLocation:U,nextLocation:V,historyAction:ie}))return we}function ue(j){let U=Yn(404,{pathname:j}),V=a||o,{matches:ie,route:ge}=yb(V);return R(),{notFoundMatches:ie,route:ge,error:U}}function R(j){let U=[];return Ne.forEach((V,ie)=>{(!j||j(ie))&&(V.cancel(),U.push(ie),Ne.delete(ie))}),U}function de(j,U,V){if(v=j,g=U,x=V||null,!p&&b.navigation===Up){p=!0;let ie=ne(b.location,b.matches);ie!=null&&Ue({restoreScrollPosition:ie})}return()=>{v=null,g=null,x=null}}function ze(j,U){return x&&x(j,U.map(ie=>DO(ie,b.loaderData)))||j.key}function k(j,U){if(v&&g){let V=ze(j,U);v[V]=g()}}function ne(j,U){if(v){let V=ze(j,U),ie=v[V];if(typeof ie=="number")return ie}return null}function re(j,U,V){if(d)if(j){if(Object.keys(j[0].params).length>0)return{active:!0,matches:hd(U,V,l,!0)}}else return{active:!0,matches:hd(U,V,l,!0)||[]};return{active:!1,matches:null}}async function N(j,U,V,ie){if(!d)return{type:"success",matches:j};let ge=j;for(;;){let we=a==null,Ee=a||o,_e=s;try{await d({signal:V,path:U,matches:ge,fetcherKey:ie,patch:(Me,et)=>{V.aborted||fb(Me,et,Ee,_e,i)}})}catch(Me){return{type:"error",error:Me,partialMatches:ge}}finally{we&&!V.aborted&&(o=[...o])}if(V.aborted)return{type:"aborted"};let De=Vs(Ee,U,l);if(De)return{type:"success",matches:De};let Te=hd(Ee,U,l,!0);if(!Te||ge.length===Te.length&&ge.every((Me,et)=>Me.route.id===Te[et].route.id))return{type:"success",matches:null};ge=Te}}function z(j){s={},a=vf(j,i,void 0,s)}function Z(j,U){let V=a==null;fb(j,U,a||o,s,i),V&&(o=[...o],Ue({}))}return S={get basename(){return l},get future(){return c},get state(){return b},get routes(){return o},get window(){return e},initialize:Pe,subscribe:ke,enableScrollRestoration:de,navigate:ot,fetch:Rt,revalidate:ft,createHref:j=>t.history.createHref(j),encodeLocation:j=>t.history.encodeLocation(j),getFetcher:Ze,deleteFetcher:Bt,dispose:ve,getBlocker:fe,deleteBlocker:pe,patchRoutes:Z,_internalFetchControllers:$,_internalActiveDeferreds:Ne,_internalSetRoutes:z},S}function t5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Pg(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let c of e)if(l.push(c),c.route.id===o){u=c;break}}else l=e,u=e[e.length-1];let d=Eh(i||".",kh(l,s),qi(t.pathname,n)||t.pathname,a==="path");if(i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&u){let c=Xv(d.search);if(u.route.index&&!c)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&c){let h=new URLSearchParams(d.search),f=h.getAll("index");h.delete("index"),f.filter(x=>x).forEach(x=>h.append("index",x));let v=h.toString();d.search=v?"?"+v:""}}return r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Mi([n,d.pathname])),co(d)}function lb(t,e,n,r){if(!r||!t5(r))return{path:n};if(r.formMethod&&!h5(r.formMethod))return{path:n,error:Yn(405,{method:r.formMethod})};let i=()=>({path:n,error:Yn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=G_(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!$r(o))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,v)=>{let[x,g]=v;return""+f+x+"="+g+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!$r(o))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}ct(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Mg(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Mg(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=pb(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=pb(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if($r(d.formMethod))return{path:n,submission:d};let c=Os(n);return e&&c.search&&Xv(c.search)&&l.append("index",""),c.search="?"+l,{path:co(c),submission:d}}function ub(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function cb(t,e,n,r,i,s,o,a,l,u,d,c,h,f,v,x){let g=x?hr(x[1])?x[1].error:x[1].data:void 0,p=t.createURL(e.location),m=t.createURL(i),w=n;s&&e.errors?w=ub(n,Object.keys(e.errors)[0],!0):x&&hr(x[1])&&(w=ub(n,x[0]));let _=x?x[1].statusCode:void 0,E=o&&_&&_>=400,S=w.filter((D,T)=>{let{route:C}=D;if(C.lazy)return!0;if(C.loader==null)return!1;if(s)return Og(C,e.loaderData,e.errors);if(n5(e.loaderData,e.matches[T],D)||l.some(H=>H===D.route.id))return!0;let I=e.matches[T],M=D;return db(D,Kt({currentUrl:p,currentParams:I.params,nextUrl:m,nextParams:M.params},r,{actionResult:g,actionStatus:_,defaultShouldRevalidate:E?!1:a||p.pathname+p.search===m.pathname+m.search||p.search!==m.search||K_(I,M)}))}),b=[];return c.forEach((D,T)=>{if(s||!n.some(q=>q.route.id===D.routeId)||d.has(T))return;let C=Vs(f,D.path,v);if(!C){b.push({key:T,routeId:D.routeId,path:D.path,matches:null,match:null,controller:null});return}let I=e.fetchers.get(T),M=dl(C,D.path),H=!1;h.has(T)?H=!1:u.has(T)?(u.delete(T),H=!0):I&&I.state!=="idle"&&I.data===void 0?H=a:H=db(M,Kt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},r,{actionResult:g,actionStatus:_,defaultShouldRevalidate:E?!1:a})),H&&b.push({key:T,routeId:D.routeId,path:D.path,matches:C,match:M,controller:new AbortController})}),[S,b]}function Og(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function n5(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function K_(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function db(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function fb(t,e,n,r,i){var s;let o;if(t){let u=r[t];ct(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),o=u.children}else o=n;let a=e.filter(u=>!o.some(d=>X_(u,d))),l=vf(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...l)}function X_(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>X_(n,s))}):!1}async function r5(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ct(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";uo(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!CO.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Kt({},e(i),{lazy:void 0}))}async function i5(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function s5(t,e,n,r,i,s,o,a,l,u){let d=s.map(f=>f.route.lazy?r5(f.route,l,a):void 0),c=s.map((f,v)=>{let x=d[v],g=i.some(m=>m.route.id===f.route.id);return Kt({},f,{shouldLoad:g,resolve:async m=>(m&&r.method==="GET"&&(f.route.lazy||f.route.loader)&&(g=!0),g?o5(e,r,f,x,m,u):Promise.resolve({type:Ot.data,result:void 0}))})}),h=await t({matches:c,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(d)}catch{}return h}async function o5(t,e,n,r,i,s){let o,a,l=u=>{let d,c=new Promise((v,x)=>d=x);a=()=>d(),e.signal.addEventListener("abort",a);let h=v=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...v!==void 0?[v]:[]),f=(async()=>{try{return{type:"data",result:await(i?i(x=>h(x)):h())}}catch(v){return{type:"error",result:v}}})();return Promise.race([f,c])};try{let u=n.route[t];if(r)if(u){let d,[c]=await Promise.all([l(u).catch(h=>{d=h}),r]);if(d!==void 0)throw d;o=c}else if(await r,u=n.route[t],u)o=await l(u);else if(t==="action"){let d=new URL(e.url),c=d.pathname+d.search;throw Yn(405,{method:e.method,pathname:c,routeId:n.route.id})}else return{type:Ot.data,result:void 0};else if(u)o=await l(u);else{let d=new URL(e.url),c=d.pathname+d.search;throw Yn(404,{pathname:c})}ct(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Ot.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function a5(t){let{result:e,type:n}=t;if(Y_(e)){let c;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(h){return{type:Ot.error,error:h}}return n===Ot.error?{type:Ot.error,error:new xf(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Ot.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Ot.error){if(xb(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Ot.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Ot.error,error:new xf(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:bu(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Ot.error,error:e,statusCode:bu(e)?e.status:void 0}}if(f5(e)){var a,l;return{type:Ot.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(xb(e)){var u,d;return{type:Ot.data,data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}}return{type:Ot.data,data:e}}function l5(t,e,n,r,i,s){let o=t.headers.get("Location");if(ct(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!qv.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Pg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function hb(t,e,n){if(qv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=qi(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Co(t,e,n,r){let i=t.createURL(G_(e)).toString(),s={signal:n};if(r&&$r(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Mg(r.formData):s.body=r.formData}return new Request(i,s)}function Mg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function pb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function u5(t,e,n,r,i){let s={},o=null,a,l=!1,u={},d=n&&hr(n[1])?n[1].error:void 0;return t.forEach(c=>{if(!(c.route.id in e))return;let h=c.route.id,f=e[h];if(ct(!Qs(f),"Cannot handle redirect results in processLoaderData"),hr(f)){let v=f.error;d!==void 0&&(v=d,d=void 0),o=o||{};{let x=qs(t,h);o[x.route.id]==null&&(o[x.route.id]=v)}s[h]=void 0,l||(l=!0,a=bu(f.error)?f.error.status:500),f.headers&&(u[h]=f.headers)}else ms(f)?(r.set(h,f.deferredData),s[h]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(u[h]=f.headers)):(s[h]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(u[h]=f.headers))}),d!==void 0&&n&&(o={[n[0]]:d},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function mb(t,e,n,r,i,s,o){let{loaderData:a,errors:l}=u5(e,n,r,o);return i.forEach(u=>{let{key:d,match:c,controller:h}=u,f=s[d];if(ct(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(hr(f)){let v=qs(t.matches,c==null?void 0:c.route.id);l&&l[v.route.id]||(l=Kt({},l,{[v.route.id]:f.error})),t.fetchers.delete(d)}else if(Qs(f))ct(!1,"Unhandled fetcher revalidation redirect");else if(ms(f))ct(!1,"Unhandled fetcher deferred data");else{let v=ss(f.data);t.fetchers.set(d,v)}}),{loaderData:a,errors:l}}function gb(t,e,n,r){let i=Kt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function vb(t){return t?hr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function qs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function yb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Yn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new xf(t||500,a,new Error(l),!0)}function Nc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Qs(i))return{key:r,result:i}}}function G_(t){let e=typeof t=="string"?Os(t):t;return co(Kt({},e,{hash:""}))}function c5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function d5(t){return Y_(t.result)&&YO.has(t.result.status)}function ms(t){return t.type===Ot.deferred}function hr(t){return t.type===Ot.error}function Qs(t){return(t&&t.type)===Ot.redirect}function xb(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function f5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Y_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function h5(t){return GO.has(t.toLowerCase())}function $r(t){return KO.has(t.toLowerCase())}async function p5(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],u=t.find(h=>(h==null?void 0:h.route.id)===a);if(!u)continue;let d=r.find(h=>h.route.id===u.route.id),c=d!=null&&!K_(d,u)&&(i&&i[u.route.id])!==void 0;ms(l)&&c&&await Kv(l,n,!1).then(h=>{h&&(e[a]=h)})}}async function m5(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&ms(a)&&(ct(o,"Expected an AbortController for revalidating fetcher deferred result"),await Kv(a,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function Kv(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ot.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ot.error,error:i}}return{type:Ot.data,data:t.deferredData.data}}}function Xv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function dl(t,e){let n=typeof e=="string"?Os(e).search:e.search;if(t[t.length-1].route.index&&Xv(n||""))return t[t.length-1];let r=H_(t);return r[r.length-1]}function wb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function $p(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function g5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function el(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function v5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ss(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function y5(t,e){try{let n=t.sessionStorage.getItem(q_);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function x5(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(q_,JSON.stringify(n))}catch(r){uo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wf.apply(this,arguments)}const qu=A.createContext(null),Gv=A.createContext(null),Xi=A.createContext(null),Yv=A.createContext(null),bi=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Z_=A.createContext(null);function w5(t,e){let{relative:n}=e===void 0?{}:e;Ia()||ct(!1);let{basename:r,navigator:i}=A.useContext(Xi),{hash:s,pathname:o,search:a}=_h(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Mi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ia(){return A.useContext(Yv)!=null}function Gi(){return Ia()||ct(!1),A.useContext(Yv).location}function Q_(t){A.useContext(Xi).static||A.useLayoutEffect(t)}function ei(){let{isDataRoute:t}=A.useContext(bi);return t?P5():b5()}function b5(){Ia()||ct(!1);let t=A.useContext(qu),{basename:e,future:n,navigator:r}=A.useContext(Xi),{matches:i}=A.useContext(bi),{pathname:s}=Gi(),o=JSON.stringify(kh(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return Q_(()=>{a.current=!0}),A.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let c=Eh(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Mi([e,c.pathname])),(d.replace?r.replace:r.push)(c,d.state,d)},[e,r,o,s,t])}const S5=A.createContext(null);function k5(t){let e=A.useContext(bi).outlet;return e&&A.createElement(S5.Provider,{value:t},e)}function Zv(){let{matches:t}=A.useContext(bi),e=t[t.length-1];return e?e.params:{}}function _h(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Xi),{matches:i}=A.useContext(bi),{pathname:s}=Gi(),o=JSON.stringify(kh(i,r.v7_relativeSplatPath));return A.useMemo(()=>Eh(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function E5(t,e,n,r){Ia()||ct(!1);let{navigator:i}=A.useContext(Xi),{matches:s}=A.useContext(bi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Gi(),d;d=u;let c=d.pathname||"/",h=c;if(l!=="/"){let x=l.replace(/^\//,"").split("/");h="/"+c.replace(/^\//,"").split("/").slice(x.length).join("/")}let f=Vs(t,{pathname:h});return N5(f&&f.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Mi([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Mi([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r)}function _5(){let t=L5(),e=bu(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const C5=A.createElement(_5,null);class A5 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(bi.Provider,{value:this.props.routeContext},A.createElement(Z_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D5(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(qu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(bi.Provider,{value:e},r)}function N5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);d>=0||ct(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let c=o[d];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=d),c.route.id){let{loaderData:h,errors:f}=n,v=c.route.loader&&h[c.route.id]===void 0&&(!f||f[c.route.id]===void 0);if(c.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,c,h)=>{let f,v=!1,x=null,g=null;n&&(f=a&&c.route.id?a[c.route.id]:void 0,x=c.route.errorElement||C5,l&&(u<0&&h===0?(O5("route-fallback"),v=!0,g=null):u===h&&(v=!0,g=c.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,h+1)),m=()=>{let w;return f?w=x:v?w=g:c.route.Component?w=A.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=d,A.createElement(D5,{match:c,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?A.createElement(A5,{location:n.location,revalidation:n.revalidation,component:x,error:f,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var J_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(J_||{}),eC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eC||{});function T5(t){let e=A.useContext(qu);return e||ct(!1),e}function R5(t){let e=A.useContext(Gv);return e||ct(!1),e}function I5(t){let e=A.useContext(bi);return e||ct(!1),e}function tC(t){let e=I5(),n=e.matches[e.matches.length-1];return n.route.id||ct(!1),n.route.id}function L5(){var t;let e=A.useContext(Z_),n=R5(eC.UseRouteError),r=tC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function P5(){let{router:t}=T5(J_.UseNavigateStable),e=tC(),n=A.useRef(!1);return Q_(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,wf({fromRouteId:e},s)))},[t,e])}const bb={};function O5(t,e,n){bb[t]||(bb[t]=!0)}function M5(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function j5(t){let{to:e,replace:n,state:r,relative:i}=t;Ia()||ct(!1);let{future:s,static:o}=A.useContext(Xi),{matches:a}=A.useContext(bi),{pathname:l}=Gi(),u=ei(),d=Eh(e,kh(a,s.v7_relativeSplatPath),l,i==="path"),c=JSON.stringify(d);return A.useEffect(()=>u(JSON.parse(c),{replace:n,state:r,relative:i}),[u,c,i,n,r]),null}function F5(t){return k5(t.context)}function B5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dn.Pop,navigator:s,static:o=!1,future:a}=t;Ia()&&ct(!1);let l=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:wf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Os(r));let{pathname:d="/",search:c="",hash:h="",state:f=null,key:v="default"}=r,x=A.useMemo(()=>{let g=qi(d,l);return g==null?null:{location:{pathname:g,search:c,hash:h,state:f,key:v},navigationType:i}},[l,d,c,h,f,v,i]);return x==null?null:A.createElement(Xi.Provider,{value:u},A.createElement(Yv.Provider,{children:n,value:x}))}new Promise(()=>{});function z5(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:A.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:A.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:A.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_a.apply(this,arguments)}function nC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function U5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $5(t,e){return t.button===0&&(!e||e==="_self")&&!U5(t)}function jg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function W5(t,e){let n=jg(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const H5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],q5="6";try{window.__reactRouterVersion=q5}catch{}function K5(t,e){return e5({basename:void 0,future:_a({},void 0,{v7_prependBasename:!0}),history:kO({window:void 0}),hydrationData:X5(),routes:t,mapRouteProperties:z5,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function X5(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_a({},e,{errors:G5(e.errors)})),e}function G5(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new xf(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const rC=A.createContext({isTransitioning:!1}),Y5=A.createContext(new Map),Z5="startTransition",Sb=iT[Z5],Q5="flushSync",kb=g3[Q5];function J5(t){Sb?Sb(t):t()}function tl(t){kb?kb(t):t()}class eM{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function tM(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=A.useState(n.state),[o,a]=A.useState(),[l,u]=A.useState({isTransitioning:!1}),[d,c]=A.useState(),[h,f]=A.useState(),[v,x]=A.useState(),g=A.useRef(new Map),{v7_startTransition:p}=r||{},m=A.useCallback(D=>{p?J5(D):D()},[p]),w=A.useCallback((D,T)=>{let{deletedFetchers:C,flushSync:I,viewTransitionOpts:M}=T;D.fetchers.forEach((q,W)=>{q.data!==void 0&&g.current.set(W,q.data)}),C.forEach(q=>g.current.delete(q));let H=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!M||H){I?tl(()=>s(D)):m(()=>s(D));return}if(I){tl(()=>{h&&(d&&d.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let q=n.window.document.startViewTransition(()=>{tl(()=>s(D))});q.finished.finally(()=>{tl(()=>{c(void 0),f(void 0),a(void 0),u({isTransitioning:!1})})}),tl(()=>f(q));return}h?(d&&d.resolve(),h.skipTransition(),x({state:D,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(a(D),u({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,h,d,g,m]);A.useLayoutEffect(()=>n.subscribe(w),[n,w]),A.useEffect(()=>{l.isTransitioning&&!l.flushSync&&c(new eM)},[l]),A.useEffect(()=>{if(d&&o&&n.window){let D=o,T=d.promise,C=n.window.document.startViewTransition(async()=>{m(()=>s(D)),await T});C.finished.finally(()=>{c(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f(C)}},[m,o,d,n.window]),A.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,h,i.location,o]),A.useEffect(()=>{!l.isTransitioning&&v&&(a(v.state),u({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),x(void 0))},[l.isTransitioning,v]),A.useEffect(()=>{},[]);let _=A.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:D=>n.navigate(D),push:(D,T,C)=>n.navigate(D,{state:T,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(D,T,C)=>n.navigate(D,{replace:!0,state:T,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),E=n.basename||"/",S=A.useMemo(()=>({router:n,navigator:_,static:!1,basename:E}),[n,_,E]),b=A.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return A.useEffect(()=>M5(r,n.future),[r,n.future]),A.createElement(A.Fragment,null,A.createElement(qu.Provider,{value:S},A.createElement(Gv.Provider,{value:i},A.createElement(Y5.Provider,{value:g.current},A.createElement(rC.Provider,{value:l},A.createElement(B5,{basename:E,location:i.location,navigationType:i.historyAction,navigator:_,future:b},i.initialized||n.future.v7_partialHydration?A.createElement(nM,{routes:n.routes,future:n.future,state:i}):e))))),null)}const nM=A.memo(rM);function rM(t){let{routes:e,future:n,state:r}=t;return E5(e,void 0,r,n)}const iM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ch=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:c}=e,h=nC(e,H5),{basename:f}=A.useContext(Xi),v,x=!1;if(typeof u=="string"&&sM.test(u)&&(v=u,iM))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),E=qi(_.pathname,f);_.origin===w.origin&&E!=null?u=E+_.search+_.hash:x=!0}catch{}let g=w5(u,{relative:i}),p=lM(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:c});function m(w){r&&r(w),w.defaultPrevented||p(w)}return A.createElement("a",_a({},h,{href:v||g,onClick:x||s?r:m,ref:n,target:l}))}),oM=A.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,c=nC(e,V5),h=_h(l,{relative:c.relative}),f=Gi(),v=A.useContext(Gv),{navigator:x,basename:g}=A.useContext(Xi),p=v!=null&&cM(h)&&u===!0,m=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,w=f.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(w=w.toLowerCase(),_=_?_.toLowerCase():null,m=m.toLowerCase()),_&&g&&(_=qi(_,g)||_);const E=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let S=w===m||!o&&w.startsWith(m)&&w.charAt(E)==="/",b=_!=null&&(_===m||!o&&_.startsWith(m)&&_.charAt(m.length)==="/"),D={isActive:S,isPending:b,isTransitioning:p},T=S?r:void 0,C;typeof s=="function"?C=s(D):C=[s,S?"active":null,b?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(D):a;return A.createElement(Ch,_a({},c,{"aria-current":T,className:C,ref:n,style:I,to:l,viewTransition:u}),typeof d=="function"?d(D):d)});var Fg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fg||(Fg={}));var Eb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Eb||(Eb={}));function aM(t){let e=A.useContext(qu);return e||ct(!1),e}function lM(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ei(),u=Gi(),d=_h(t,{relative:o});return A.useCallback(c=>{if($5(c,n)){c.preventDefault();let h=r!==void 0?r:co(u)===co(d);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function uM(t){let e=A.useRef(jg(t)),n=A.useRef(!1),r=Gi(),i=A.useMemo(()=>W5(r.search,n.current?null:e.current),[r.search]),s=ei(),o=A.useCallback((a,l)=>{const u=jg(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}function cM(t,e){e===void 0&&(e={});let n=A.useContext(rC);n==null&&ct(!1);let{basename:r}=aM(Fg.useViewTransitionState),i=_h(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=qi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=qi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yf(i.pathname,o)!=null||yf(i.pathname,s)!=null}const rt=t=>typeof t=="string",nl=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},_b=t=>t==null?"":""+t,dM=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},fM=/###/g,Cb=t=>t&&t.indexOf("###")>-1?t.replace(fM,"."):t,Ab=t=>!t||rt(t),Ol=(t,e,n)=>{const r=rt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Ab(t))return{};const s=Cb(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return Ab(t)?{}:{obj:t,k:Cb(r[i])}},Db=(t,e,n)=>{const{obj:r,k:i}=Ol(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Ol(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Ol(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},hM=(t,e,n,r)=>{const{obj:i,k:s}=Ol(t,e,Object);i[s]=i[s]||[],i[s].push(n)},bf=(t,e)=>{const{obj:n,k:r}=Ol(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},pM=(t,e,n)=>{const r=bf(t,n);return r!==void 0?r:bf(e,n)},iC=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?rt(t[r])||t[r]instanceof String||rt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):iC(t[r],e[r],n):t[r]=e[r]);return t},Ao=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var mM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const gM=t=>rt(t)?t.replace(/[&<>"'\/]/g,e=>mM[e]):t;class vM{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const yM=[" ",",","?","!",";"],xM=new vM(20),wM=(t,e,n)=>{e=e||"",n=n||"";const r=yM.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=xM.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},Bg=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},Su=t=>t==null?void 0:t.replace("_","-"),bM={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class Sf{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||bM,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(rt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Sf(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Sf(this.logger,e)}}var ci=new Sf;class Ah{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[e,...n])})}}class Nb extends Ah{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var u,d;const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):rt(r)&&s?a.push(...r.split(s)):a.push(r)));const l=bf(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!rt(r)?l:Bg((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[n],r,s)}addResource(e,n,r,i,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),Db(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const s in r)(rt(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=bf(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?iC(l,r,s):l={...l,...r},Db(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var sC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{var o;e=((o=this.processors[s])==null?void 0:o.process(e,n,r,i))??e}),e}};const oC=Symbol("i18next/PATH_KEY");function SM(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var s;return(s=n==null?void 0:n.revoke)==null||s.call(n),i===oC?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function zg(t,e){const{[oC]:n}=t(SM());return n.join((e==null?void 0:e.keySeparator)??".")}const Tb={},Wp=t=>!rt(t)&&typeof t!="boolean"&&typeof t!="number";class kf extends Ah{constructor(e,n={}){super(),dM(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ci.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if((i==null?void 0:i.res)===void 0)return!1;const s=Wp(i.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!wM(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:rt(s)?[s]:s};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(i)}return{key:e,namespaces:rt(s)?[s]:s}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=zg(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],i),u=l[l.length-1];let d=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const c=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode")return h?s?{res:`${u}${d}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${d}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:a;const f=this.resolve(e,i);let v=f==null?void 0:f.res;const x=(f==null?void 0:f.usedKey)||a,g=(f==null?void 0:f.exactUsedKey)||a,p=["[object Number]","[object Function]","[object RegExp]"],m=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,_=i.count!==void 0&&!rt(i.count),E=kf.hasDefaultValue(i),S=_?this.pluralResolver.getSuffix(c,i.count,i):"",b=i.ordinal&&_?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",D=_&&!i.ordinal&&i.count===0,T=D&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${S}`]||i[`defaultValue${b}`]||i.defaultValue;let C=v;w&&!v&&E&&(C=T);const I=Wp(C),M=Object.prototype.toString.apply(C);if(w&&C&&I&&p.indexOf(M)<0&&!(rt(m)&&Array.isArray(C))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const H=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,C,{...i,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(f.res=H,f.usedParams=this.getUsedParamsDetails(i),f):H}if(o){const H=Array.isArray(C),q=H?[]:{},W=H?g:x;for(const K in C)if(Object.prototype.hasOwnProperty.call(C,K)){const G=`${W}${o}${K}`;E&&!v?q[K]=this.translate(G,{...i,defaultValue:Wp(T)?T[K]:void 0,joinArrays:!1,ns:l}):q[K]=this.translate(G,{...i,joinArrays:!1,ns:l}),q[K]===G&&(q[K]=C[K])}v=q}}else if(w&&rt(m)&&Array.isArray(v))v=v.join(m),v&&(v=this.extendTranslation(v,e,i,r));else{let H=!1,q=!1;!this.isValidLookup(v)&&E&&(H=!0,v=T),this.isValidLookup(v)||(q=!0,v=a);const K=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:v,G=E&&T!==v&&this.options.updateMissing;if(q||H||G){if(this.logger.log(G?"updateKey":"missingKey",c,u,a,G?T:v),o){const ce=this.resolve(a,{...i,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const te=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&te&&te[0])for(let ce=0;ce<te.length;ce++)$.push(te[ce]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(i.lng||this.language):$.push(i.lng||this.language);const L=(ce,oe,F)=>{var Fe;const xe=E&&F!==v?F:K;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,u,oe,xe,G,i):(Fe=this.backendConnector)!=null&&Fe.saveMissing&&this.backendConnector.saveMissing(ce,u,oe,xe,G,i),this.emit("missingKey",ce,u,oe,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?$.forEach(ce=>{const oe=this.pluralResolver.getSuffixes(ce,i);D&&i[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(F=>{L([ce],a+F,i[`defaultValue${F}`]||T)})}):L($,a,T))}v=this.extendTranslation(v,e,i,f,r),q&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${u}${d}${a}`),(q||H)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${a}`:a,H?v:void 0,i))}return s?(f.res=v,f.usedParams=this.getUsedParamsDetails(i),f):v}extendTranslation(e,n,r,i,s){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=rt(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(d){const f=e.match(this.interpolator.nestingRegexp);c=f&&f.length}let h=r.replace&&!rt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||i.usedLng,r),d){const f=e.match(this.interpolator.nestingRegexp),v=f&&f.length;c<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...f)=>(s==null?void 0:s[0])===f[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):this.translate(...f,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=rt(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=sC.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,s,o,a;return rt(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),d=u.key;i=d;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const h=n.count!==void 0&&!rt(n.count),f=h&&!n.ordinal&&n.count===0,v=n.context!==void 0&&(rt(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);c.forEach(g=>{var p,m;this.isValidLookup(r)||(a=g,!Tb[`${x[0]}-${g}`]&&((p=this.utils)!=null&&p.hasLoadedNamespace)&&!((m=this.utils)!=null&&m.hasLoadedNamespace(a))&&(Tb[`${x[0]}-${g}`]=!0,this.logger.warn(`key "${i}" for languages "${x.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(w=>{var S;if(this.isValidLookup(r))return;o=w;const _=[d];if((S=this.i18nFormat)!=null&&S.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,w,g,n);else{let b;h&&(b=this.pluralResolver.getSuffix(w,n.count,n));const D=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(n.ordinal&&b.indexOf(T)===0&&_.push(d+b.replace(T,this.options.pluralSeparator)),_.push(d+b),f&&_.push(d+D)),v){const C=`${d}${this.options.contextSeparator||"_"}${n.context}`;_.push(C),h&&(n.ordinal&&b.indexOf(T)===0&&_.push(C+b.replace(T,this.options.pluralSeparator)),_.push(C+b),f&&_.push(C+D))}}let E;for(;E=_.pop();)this.isValidLookup(r)||(s=E,r=this.getResource(w,g,E,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var s;return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!rt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Rb{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ci.create("languageUtils")}getScriptPartFromCode(e){if(e=Su(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Su(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(rt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),rt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return rt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):rt(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}const Ib={zero:0,one:1,two:2,few:3,many:4,other:5},Lb={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kM{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ci.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Su(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Lb;if(!e.match(/-|_/))return Lb;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>Ib[i]-Ib[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Pb=(t,e,n,r=".",i=!0)=>{let s=pM(t,e,n);return!s&&i&&rt(n)&&(s=Bg(t,n,r),s===void 0&&(s=Bg(e,n,r))),s},Hp=t=>t.replace(/\$/g,"$$$$");class Ob{constructor(e={}){var n;this.logger=ci.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:d,unescapePrefix:c,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:v,nestingSuffixEscaped:x,nestingOptionsSeparator:g,maxReplaces:p,alwaysFormat:m}=e.interpolation;this.escape=n!==void 0?n:gM,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Ao(s):o||"{{",this.suffix=a?Ao(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?Ao(h):f||Ao("$t("),this.nestingSuffix=v?Ao(v):x||Ao(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=p||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var f;let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const m=Pb(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...i,...n,interpolationkey:v}):m}const x=v.split(this.formatSeparator),g=x.shift().trim(),p=x.join(this.formatSeparator).trim();return this.format(Pb(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),p,r,{...i,...n,interpolationkey:g})};this.resetRegExp();const d=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,c=((f=i==null?void 0:i.interpolation)==null?void 0:f.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>Hp(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?Hp(this.escape(v)):Hp(v)}].forEach(v=>{for(a=0;s=v.regex.exec(e);){const x=s[1].trim();if(o=u(x),o===void 0)if(typeof d=="function"){const p=d(e,s,i);o=rt(p)?p:""}else if(i&&Object.prototype.hasOwnProperty.call(i,x))o="";else if(c){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!rt(o)&&!this.useRawValueToEscape&&(o=_b(o));const g=v.safeValue(o);if(e=e.replace(s[0],g),c?(v.regex.lastIndex+=o.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,s,o;const a=(l,u)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const c=l.split(new RegExp(`${d}[ ]*{`));let h=`{${c[1]}`;l=c[0],h=this.interpolate(h,o);const f=h.match(/'/g),v=h.match(/"/g);(((f==null?void 0:f.length)??0)%2===0&&!v||v.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,x),`${l}${d}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!rt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(l=i[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!rt(s))return s;rt(s)||(s=_b(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((d,c)=>this.format(d,c,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const EM=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},Mb=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Su(r),i),e[o]=a),a(n)}},_M=t=>(e,n,r)=>t(Su(n),r)(e);class CM{constructor(e={}){this.logger=ci.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Mb:_M;this.formats={number:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:r((i,s)=>{const o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:r((i,s)=>{const o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:r((i,s)=>{const o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Mb(n)}format(e,n,r,i={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{var c;const{formatName:u,formatOptions:d}=EM(l);if(this.formats[u]){let h=a;try{const f=((c=i==null?void 0:i.formatParams)==null?void 0:c[i.interpolationkey])||{},v=f.locale||f.lng||i.locale||i.lng||r;h=this.formats[u](a,v,{...d,...i,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const AM=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class DM extends Ah{constructor(e,n,r,i={}){var s,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ci.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(s=this.backend)==null?void 0:s.init)==null||o.call(s,r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(u=>{let d=!0;n.forEach(c=>{const h=`${u}|${c}`;!r.reload&&this.store.hasResourceBundle(u,c)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,d=!1,o[h]===void 0&&(o[h]=!0),s[h]===void 0&&(s[h]=!0),l[c]===void 0&&(l[c]=!0)))}),d||(a[u]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{hM(l.loaded,[s],o),AM(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const d=l.loaded[u];d.length&&d.forEach(c=>{a[u][c]===void 0&&(a[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,i=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(u,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}return}return l(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();rt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),rt(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s,o={},a=()=>{}){var l,u,d,c,h;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((c=(d=this.services)==null?void 0:d.utils)!=null&&c.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((h=this.backend)!=null&&h.create){const f={...o,isUpdate:s},v=this.backend.create.bind(this.backend);if(v.length<6)try{let x;v.length===5?x=v(e,n,r,i,f):x=v(e,n,r,i),x&&typeof x.then=="function"?x.then(g=>a(null,g)).catch(a):a(null,x)}catch(x){a(x)}else v(e,n,r,i,a,f)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const jb=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),rt(t[1])&&(e.defaultValue=t[1]),rt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Fb=t=>{var e,n;return rt(t.ns)&&(t.ns=[t.ns]),rt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),rt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Tc=()=>{},NM=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ml extends Ah{constructor(e={},n){if(super(),this.options=Fb(e),this.services={},this.logger=ci,this.modules={external:[]},NM(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(rt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=jb();this.options={...r,...this.options,...Fb(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?ci.init(i(this.modules.logger),this.options):ci.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=CM;const d=new Rb(this.options);this.store=new Nb(this.options.resources,this.options);const c=this.services;c.logger=ci,c.resourceStore=this.store,c.languageUtils=d,c.pluralResolver=new kM(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(c.formatter=i(u),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Ob(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new DM(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(f,...v)=>{this.emit(f,...v)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new kf(this.services,this.options),this.translator.on("*",(f,...v)=>{this.emit(f,...v)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Tc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const a=nl(),l=()=>{const u=(d,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(c),n(d,c)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=Tc){var s,o;let r=n;const i=rt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(c=>{c!=="cimode"&&a.indexOf(c)<0&&a.push(c)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(o=(s=this.options.preload)==null?void 0:s.forEach)==null||o.call(s,u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const i=nl();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Tc),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&sC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=nl();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},o=a=>{var d,c;!e&&!a&&this.services.languageDetector&&(a=[]);const l=rt(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(rt(a)?[a]:a);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),(c=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||c.call(d,u)),this.loadResources(u,h=>{s(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(s,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([s,o].concat(a)):l={...o},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(s)?d=s.map(c=>(typeof c=="function"&&(c=zg(c,{...this.options,...o})),`${l.keyPrefix}${u}${c}`)):(typeof s=="function"&&(s=zg(s,{...this.options,...o})),d=l.keyPrefix?`${l.keyPrefix}${u}${s}`:s),this.t(d,l)};return rt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=nl();return this.options.ns?(rt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=nl();rt(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new Rb(jb());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new Ml(e,n);return r.createInstance=Ml.createInstance,r}cloneInstance(e={},n=Tc){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Ml(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((d,c)=>(d[c]={...l[u][c]},d),l[u]),l),{});s.store=new Nb(a,i),s.services.resourceStore=s.store}return e.interpolation&&(s.services.interpolator=new Ob(i)),s.translator=new kf(s.services,i),s.translator.on("*",(a,...l)=>{s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Xn=Ml.createInstance();Xn.createInstance;Xn.dir;Xn.init;Xn.loadResources;Xn.reloadResources;Xn.use;Xn.changeLanguage;Xn.getFixedT;Xn.t;Xn.exists;Xn.setDefaultNamespace;Xn.hasLoadedNamespace;Xn.loadNamespaces;Xn.loadLanguages;const TM=(t,e,n,r)=>{var s,o,a,l;const i=[n,{code:e,...r||{}}];if((o=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);fo(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Bb={},aC=(t,e,n,r)=>{fo(n)&&Bb[n]||(fo(n)&&(Bb[n]=new Date),TM(t,e,n,r))},lC=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Ug=(t,e,n)=>{t.loadNamespaces(e,lC(t,n))},zb=(t,e,n,r)=>{if(fo(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Ug(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,lC(t,r))},RM=(t,e,n={})=>!e.languages||!e.languages.length?(aC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),fo=t=>typeof t=="string",IM=t=>typeof t=="object"&&t!==null,LM=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PM={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},OM=t=>PM[t],MM=t=>t.replace(LM,OM);let $g={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:MM};const jM=(t={})=>{$g={...$g,...t}},FM=()=>$g;let uC;const BM=t=>{uC=t},zM=()=>uC,UM={type:"3rdParty",init(t){jM(t.options.react),BM(t)}},$M=A.createContext();class WM{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var cC={exports:{}},dC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=A;function HM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VM=typeof Object.is=="function"?Object.is:HM,qM=Ca.useState,KM=Ca.useEffect,XM=Ca.useLayoutEffect,GM=Ca.useDebugValue;function YM(t,e){var n=e(),r=qM({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return XM(function(){i.value=n,i.getSnapshot=e,Vp(i)&&s({inst:i})},[t,n,e]),KM(function(){return Vp(i)&&s({inst:i}),t(function(){Vp(i)&&s({inst:i})})},[t]),GM(n),n}function Vp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!VM(t,n)}catch{return!0}}function ZM(t,e){return e()}var QM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZM:YM;dC.useSyncExternalStore=Ca.useSyncExternalStore!==void 0?Ca.useSyncExternalStore:QM;cC.exports=dC;var JM=cC.exports;const ej=(t,e)=>fo(e)?e:IM(e)&&fo(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,tj={t:ej,ready:!1},nj=()=>()=>{},_t=(t,e={})=>{var T,C,I;const{i18n:n}=e,{i18n:r,defaultNS:i}=A.useContext($M)||{},s=n||r||zM();s&&!s.reportNamespaces&&(s.reportNamespaces=new WM),s||aC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=A.useMemo(()=>{var M;return{...FM(),...(M=s==null?void 0:s.options)==null?void 0:M.react,...e}},[s,e]),{useSuspense:a,keyPrefix:l}=o,u=t||i||((T=s==null?void 0:s.options)==null?void 0:T.defaultNS),d=fo(u)?[u]:u||["translation"],c=A.useMemo(()=>d,d);(I=(C=s==null?void 0:s.reportNamespaces)==null?void 0:C.addUsedNamespaces)==null||I.call(C,c);const h=A.useRef(0),f=A.useCallback(M=>{if(!s)return nj;const{bindI18n:H,bindI18nStore:q}=o,W=()=>{h.current+=1,M()};return H&&s.on(H,W),q&&s.store.on(q,W),()=>{H&&H.split(" ").forEach(K=>s.off(K,W)),q&&q.split(" ").forEach(K=>s.store.off(K,W))}},[s,o]),v=A.useRef(),x=A.useCallback(()=>{if(!s)return tj;const M=!!(s.isInitialized||s.initializedStoreOnce)&&c.every($=>RM($,s,o)),H=e.lng||s.language,q=h.current,W=v.current;if(W&&W.ready===M&&W.lng===H&&W.keyPrefix===l&&W.revision===q)return W;const G={t:s.getFixedT(H,o.nsMode==="fallback"?c:c[0],l),ready:M,lng:H,keyPrefix:l,revision:q};return v.current=G,G},[s,c,l,o,e.lng]),[g,p]=A.useState(0),{t:m,ready:w}=JM.useSyncExternalStore(f,x,x);A.useEffect(()=>{if(s&&!w&&!a){const M=()=>p(H=>H+1);e.lng?zb(s,e.lng,c,M):Ug(s,c,M)}},[s,e.lng,c,w,a,g]);const _=s||{},E=A.useRef(null),S=A.useRef(),b=M=>{const H=Object.getOwnPropertyDescriptors(M);H.__original&&delete H.__original;const q=Object.create(Object.getPrototypeOf(M),H);if(!Object.prototype.hasOwnProperty.call(q,"__original"))try{Object.defineProperty(q,"__original",{value:M,writable:!1,enumerable:!1,configurable:!1})}catch{}return q},D=A.useMemo(()=>{const M=_,H=M==null?void 0:M.language;let q=M;M&&(E.current&&E.current.__original===M?S.current!==H?(q=b(M),E.current=q,S.current=H):q=E.current:(q=b(M),E.current=q,S.current=H));const W=[m,q,w];return W.t=m,W.i18n=q,W.ready=w,W},[m,_,w,_.resolvedLanguage,_.language,_.languages]);if(s&&a&&!w)throw new Promise(M=>{const H=()=>M();e.lng?zb(s,e.lng,c,H):Ug(s,c,H)});return D};var fC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ub=kt.createContext&&kt.createContext(fC),rj=["attr","size","title"];function ij(t,e){if(t==null)return{};var n=sj(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}function $b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$b(Object(n),!0).forEach(function(r){oj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$b(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oj(t,e,n){return e=aj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aj(t){var e=lj(t,"string");return typeof e=="symbol"?e:e+""}function lj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hC(t){return t&&t.map((e,n)=>kt.createElement(e.tag,_f({key:n},e.attr),hC(e.child)))}function Gt(t){return e=>kt.createElement(uj,Ef({attr:_f({},t.attr)},e),hC(t.child))}function uj(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=ij(t,rj),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),kt.createElement("svg",Ef({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:_f(_f({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&kt.createElement("title",null,s),t.children)};return Ub!==void 0?kt.createElement(Ub.Consumer,null,n=>e(n)):e(fC)}function cj(t){return Gt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"},child:[]}]})(t)}function dj(t){return Gt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},child:[]}]})(t)}function pC(t){return Gt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"},child:[]}]})(t)}function fj(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"},child:[]}]})(t)}function hj(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},child:[]}]})(t)}function pj(t){return Gt({attr:{viewBox:"0 0 128 512"},child:[{tag:"path",attr:{d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"},child:[]}]})(t)}function mj(t){return Gt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M170.5 51.6L151.5 80l145 0-19-28.4c-1.5-2.2-4-3.6-6.7-3.6l-93.7 0c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80 368 80l48 0 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-8 0 0 304c0 44.2-35.8 80-80 80l-224 0c-44.2 0-80-35.8-80-80l0-304-8 0c-13.3 0-24-10.7-24-24S10.7 80 24 80l8 0 48 0 13.8 0 36.7-55.1C140.9 9.4 158.4 0 177.1 0l93.7 0c18.7 0 36.2 9.4 46.6 24.9zM80 128l0 304c0 17.7 14.3 32 32 32l224 0c17.7 0 32-14.3 32-32l0-304L80 128zm80 64l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16z"},child:[]}]})(t)}function gj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function vj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 17H4V5h8V3H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2v-3h-2v3z"},child:[]},{tag:"path",attr:{d:"m17 14 5-5-1.41-1.41L18 10.17V3h-2v7.17l-2.59-2.58L12 9z"},child:[]}]})(t)}function yj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(t)}function xj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function wj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(t)}function ku(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function bj(t){return Gt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(t)}const Wg=({isOpen:t,title:e,onClose:n,children:r,footer:i,closeLabel:s="Close"})=>{if(A.useEffect(()=>{if(!t)return;const a=l=>{l.key==="Escape"&&n()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[t,n]),!t)return null;const o=a=>{a.target===a.currentTarget&&n()};return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-label":e,onClick:o,children:y.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white shadow-xl",children:[y.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),y.jsx("button",{type:"button",onClick:n,className:"rounded p-1 text-gray-500 hover:bg-gray-100 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-blue-500","aria-label":s,children:y.jsx(ku,{className:"h-5 w-5"})})]}),y.jsx("div",{className:"px-4 py-3 text-gray-800",children:r}),i?y.jsx("div",{className:"flex flex-wrap justify-end gap-2 border-t px-4 py-3",children:i}):null]})})};function Sj(t){const{t:e}=_t("homepage");if(!t)return{displayName:e("bookshelf.unknownTitle"),displayAuthor:e("bookshelf.unknownAuthor"),displayProgress:0,displaySize:e("bookshelf.unknownSize")};const n=t.name||e("bookshelf.unknownTitle"),r=t.author||e("bookshelf.unknownAuthor"),i=t.status==="downloading"?t.downloadProgress??0:t.progress||0,s=t.size||e("bookshelf.unknownSize");return{displayName:n,displayAuthor:r,displayProgress:i,displaySize:s}}const kj=({coverPath:t,title:e,onError:n,className:r=""})=>{const{t:i}=_t("common"),[s,o]=A.useState(),[a,l]=A.useState(!1),[u,d]=A.useState(!1);return A.useEffect(()=>{if(!t){l(!1),d(!1);return}(async()=>{l(!0),d(!1);try{const h=await aO(t);h?o(h):(d(!0),n==null||n())}catch(h){console.error("Failed to load cover:",h),d(!0),n==null||n()}finally{l(!1)}})()},[t,n]),a?y.jsx("div",{className:`relative aspect-[3/4] animate-pulse bg-gray-200 ${r}`,children:y.jsx("div",{className:"flex h-full w-full items-center justify-center",children:y.jsxs("div",{className:"text-gray-400",children:[y.jsx("div",{className:"mb-2 text-4xl",children:""}),y.jsx("div",{className:"text-sm",children:i("loading")})]})})}):u||!s?y.jsx("div",{className:`relative aspect-[3/4] bg-gradient-to-br from-blue-100 to-purple-100 ${r}`,children:y.jsx("div",{className:"flex h-full w-full items-center justify-center",children:y.jsxs("div",{className:"p-4 text-center",children:[y.jsx("div",{className:"mb-2 text-4xl",children:""}),y.jsx("div",{className:"truncate px-2 text-sm font-medium text-gray-600",title:e,children:e})]})})}):y.jsx("div",{className:`relative aspect-[3/4] bg-gray-200 ${r}`,children:y.jsx("img",{src:s,alt:e,className:"h-full w-full object-cover",onError:c=>{c.currentTarget.style.display="none",d(!0),n==null||n()}})})},Ej=({progress:t,className:e="",showPercentage:n=!0,color:r="bg-blue-600",hideWhenZero:i=!0})=>{const{t:s}=_t("common");return typeof t!="number"||t<0||t>100?(console.warn("ProgressBar: progress must be a number between 0 and 100"),null):t>0||!i?y.jsxs("div",{className:`mb-3 ${e}`,children:[n&&y.jsxs("div",{className:"mb-1 flex justify-between text-xs text-gray-500",children:[y.jsx("span",{children:s("progress")}),y.jsxs("span",{children:[t,"%"]})]}),y.jsx("div",{className:"h-1.5 w-full rounded-full bg-gray-200",children:y.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${r}`,style:{width:`${t}%`},role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${s("progress")}: ${t}%`})})]}):null},_j=({book:t,onOpen:e,onDelete:n})=>{const{t:r}=_t("homepage"),{displayName:i,displayAuthor:s,displayProgress:o,displaySize:a}=Sj(t),l=t.status==="downloading",u=t.status==="error",d=!l&&!u,c=l?t.downloadProgress??0:o,[h,f]=A.useState(!1),[v,x]=A.useState(!1),[g,p]=A.useState(!1),m=A.useRef(null),w=A.useRef(null),[_,E]=A.useState({top:0,left:0});A.useEffect(()=>{if(!h)return;const M=H=>{const q=H.target;w.current&&!w.current.contains(q)&&m.current&&!m.current.contains(q)&&f(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[h]);const S=()=>{d&&(f(!1),e(t.id))},b=M=>{var q;if(M.stopPropagation(),h){f(!1);return}const H=(q=m.current)==null?void 0:q.getBoundingClientRect();if(H){const G=window.innerWidth,$=window.innerHeight,te=8,L=8,ce=Math.min(Math.max(H.right-192,te),G-192-te),oe=Math.min(Math.max(H.bottom+L,L),$-200-L);E({top:oe,left:ce})}f(!0)},D=M=>{M.stopPropagation(),x(!0),f(!1)},T=M=>{M.stopPropagation(),!l&&(p(!0),f(!1))},C=()=>{p(!1),n(t.id)},I=A.useMemo(()=>{const M=typeof t.chapterCount=="number"?r("bookshelf.chapters",{count:t.chapterCount}):r("bookshelf.detailsModal.unknown"),H=typeof t.createdAt=="number"?new Date(t.createdAt).toLocaleString():r("bookshelf.detailsModal.unknown");return[{label:r("bookshelf.detailsModal.name"),value:i},{label:r("bookshelf.detailsModal.author"),value:s},{label:r("bookshelf.detailsModal.chapters"),value:M},{label:r("bookshelf.detailsModal.size"),value:a},{label:r("bookshelf.detailsModal.createdAt"),value:H}]},[t.chapterCount,t.createdAt,s,i,a,r]);return t.id?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"group relative cursor-pointer rounded-lg",onClick:S,role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),S())},"aria-label":r("bookshelf.openBookAria",{name:i}),children:[y.jsx("button",{type:"button",ref:m,onClick:b,className:"absolute right-2 top-2 rounded-full bg-gray-100 p-2 text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1focus-visible:outline-blue-500","aria-label":r("bookshelf.actions.openMenu"),style:{zIndex:1},children:y.jsx(pj,{className:"h-4 w-4"})}),h?y.jsxs("div",{ref:w,className:"fixed z-20 w-48 overflow-hidden rounded-md border border-gray-200 bg-white shadow-lg",style:{top:_.top,left:_.left},onClick:M=>M.stopPropagation(),children:[y.jsx("div",{className:"border-b px-3 py-2 text-sm font-semibold text-gray-900",title:i,children:i}),y.jsxs("button",{type:"button",onClick:D,className:"flex w-full items-center gap-2 px-3 py-2 text-sm text-gray-700 transition-colors duration-150 hover:bg-gray-100",children:[y.jsx(hj,{className:"h-4 w-4"}),y.jsx("span",{children:r("bookshelf.actions.details")})]}),y.jsxs("button",{type:"button",onClick:T,disabled:l,className:"flex w-full items-center gap-2 px-3 py-2 text-sm text-red-600 transition-colors duration-150 hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-50",children:[y.jsx(mj,{className:"h-4 w-4"}),y.jsx("span",{children:r("bookshelf.actions.delete")})]})]}):null,y.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-md transition-shadow duration-200 group-focus-within:shadow-lg group-hover:shadow-lg",children:[y.jsx(kj,{coverPath:t.coverPath,title:i,className:"overflow-hidden rounded-t-lg"}),y.jsxs("div",{className:"p-2",children:[y.jsx("h3",{className:"mb-1 truncate text-lg font-semibold text-gray-900",title:i,children:i}),y.jsxs("p",{className:"mb-1 inline-block flex justify-between truncate text-sm text-gray-600",title:s,children:[y.jsx("span",{children:s}),y.jsx("span",{children:typeof t.chapterCount=="number"?r("bookshelf.chapters",{count:t.chapterCount}):r("bookshelf.detailsModal.unknown")})]}),l&&y.jsx("div",{className:"mb-2 text-xs font-semibold text-blue-700",children:r("bookshelf.downloading")}),u&&y.jsx("div",{className:"mb-2 text-xs font-semibold text-red-700",children:t.downloadError||r("bookshelf.downloadFailed")}),y.jsx(Ej,{progress:c,hideWhenZero:!l})]})]})]}),y.jsx(Wg,{isOpen:g,title:r("bookshelf.deleteModal.title"),onClose:()=>p(!1),closeLabel:r("common:close"),footer:y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:()=>p(!1),className:"rounded border px-4 py-2 text-sm font-medium text-gray-700 transition-colors duration-150 hover:bg-gray-50 focus-visible:outline focus-visible:outline-2focus-visible:outline-offset-1 focus-visible:outline-blue-500",children:r("common:cancel")}),y.jsx("button",{type:"button",onClick:C,className:"rounded bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-150 hover:bg-red-700 focus-visible:outline focus-visible:outline-2focus-visible:outline-offset-1 focus-visible:outline-blue-500",children:r("bookshelf.deleteModal.confirm")})]}),children:y.jsx("p",{className:"text-sm text-gray-700",children:r("bookshelf.deleteModal.message",{name:i})})}),y.jsx(Wg,{isOpen:v,title:r("bookshelf.detailsModal.title"),onClose:()=>x(!1),closeLabel:r("common:close"),footer:y.jsx("button",{type:"button",onClick:()=>x(!1),className:"rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-150 hover:bg-blue-700 focus-visible:outline focus-visible:outline-2focus-visible:outline-offset-1 focus-visible:outline-blue-500",children:r("common:close")}),children:y.jsx("dl",{className:"space-y-3",children:I.map(M=>y.jsxs("div",{className:"flex justify-between gap-4 text-sm",children:[y.jsx("dt",{className:"text-gray-500",children:M.label}),y.jsx("dd",{className:"max-w-[60%] text-right text-gray-900",children:M.value})]},M.label))})})]}):null},Cj=({isVisible:t})=>{const{t:e}=_t("homepage");return t?y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm transition-opacity duration-200",children:y.jsxs("div",{className:"rounded-xl border-4 border-dashed border-blue-500 p-12 text-center",children:[y.jsx("div",{className:"mb-4 text-6xl",children:""}),y.jsx("h2",{className:"text-2xl font-bold text-blue-600",children:e("dragOverlay.title")}),y.jsx("p",{className:"mt-2 text-gray-600",children:e("dragOverlay.description")})]})}):null},Aj=()=>y.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),mC=()=>y.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Dj=()=>y.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Nj=()=>y.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),Tj=()=>y.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Rj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),Ij=()=>y.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Lj=t=>y.jsxs("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-5"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4z"})]}),Pj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),Oj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),Mj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jj=t=>y.jsx("svg",{className:`h-5 w-5 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 12h16M4 16h16"})}),Fj=t=>y.jsx("svg",{className:`size-5 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Bj=t=>y.jsxs("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),zj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),Uj=t=>y.jsx("svg",{className:`h-6 w-6 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),$j=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Wj=t=>y.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),gC=()=>{const[t,e]=A.useState(null),[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!0);A.useEffect(()=>{console.log("PWA Install Hook: Initializing...");const d=f=>{console.log("PWA Install Hook: beforeinstallprompt event fired"),f.preventDefault(),e(f)},c=()=>{console.log("PWA Install Hook: App installed"),r(!0),e(null)},h=()=>{if(console.log("PWA Install Hook: Checking compatibility..."),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){console.log("PWA Install Hook: Already in standalone mode"),r(!0),s(!0),a(!1);return}"serviceWorker"in navigator?(console.log("PWA Install Hook: Service Worker supported"),navigator.serviceWorker.getRegistration().then(v=>{console.log("PWA Install Hook: Service Worker registration:",v),console.log(v?"PWA Install Hook: Service Worker is registered":"PWA Install Hook: Service Worker NOT registered")})):console.log("PWA Install Hook: Service Worker NOT supported");const f=document.querySelector('link[rel="manifest"]');console.log("PWA Install Hook: Manifest link:",f),f&&console.log("PWA Install Hook: Manifest href:",f.getAttribute("href")),console.log("PWA Install Hook: Protocol:",window.location.protocol),console.log("PWA Install Hook: Hostname:",window.location.hostname),console.log("PWA Install Hook: Is localhost:",window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),console.log("PWA Install Hook: Is secure context:",window.isSecureContext),a(!1)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",c),h(),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",c)}},[]);const u={isInstalled:n,isStandalone:i,installPWA:async()=>{if(t){t.prompt();const{outcome:d}=await t.userChoice;d==="accepted"&&r(!0),e(null)}},canInstall:!!t&&!o};return console.log("PWA Install Hook: Returning state:",u),u},Hj=()=>y.jsx("svg",{className:"icon",style:{width:"1em",height:"1em",verticalAlign:"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1618",children:y.jsx("path",{d:"M880.241778 917.902222l-33.450667-91.704889H688.924444l-33.450666 91.704889H555.064889l153.031111-385.251555h114.744889l153.031111 385.251555h-95.630222z m-109.966222-302.648889l-57.457778 142.165334h114.801778l-57.344-142.222223z m-253.496889 142.165334l43.064889-96.369778c-14.392889-9.102222-28.728889-18.318222-38.286223-27.477333 71.736889-77.937778 129.137778-174.307556 172.202667-288.995556h129.137778V252.928h-363.52l71.736889-22.926222c-9.557333-32.085333-33.450667-82.545778-57.400889-123.847111l-105.187556 32.142222c19.114667 36.693333 38.286222 82.488889 47.786667 114.631111h-353.848889v91.761778h133.916444a884.053333 884.053333 0 0 0 176.924445 288.938666C287.288889 697.742222 177.208889 743.651556 48.128 775.736889c19.114667 22.926222 47.786667 68.835556 62.179556 91.704889 133.859556-36.693333 248.604444-91.704889 339.512888-165.091556 19.114667 18.375111 43.064889 36.693333 66.958223 55.068445zM296.789333 344.632889h286.947556c-33.450667 87.096889-81.351111 160.483556-138.695111 224.711111-62.179556-64.227556-114.744889-137.614222-148.252445-224.711111z",fill:"#1F2037","p-id":"1619"})}),vC=()=>{var s;const{i18n:t}=_t(),n=(s=t.language)!=null&&s.startsWith("en")?"en":"zh-CN",r=A.useCallback(o=>{t.changeLanguage(o)},[t]),i=A.useCallback(()=>{r(n==="zh-CN"?"en":"zh-CN")},[r,n]);return{currentLanguage:n,changeLanguage:r,toggleLanguage:i}},Vj=({className:t=""})=>{const{t:e}=_t("common"),{currentLanguage:n,toggleLanguage:r}=vC(),i=e(n==="zh-CN"?"language.zhCN":"language.en");return y.jsx("button",{onClick:r,className:`text-gray-600 hover:text-gray-900 ${t}`,"aria-label":e("language.switchAria",{language:i}),title:e("language.currentLabel",{language:i}),children:y.jsx(Hj,{})})},qj=()=>{const t=U_(),e=ei(),{t:n}=_t("homepage"),{books:r,isLoading:i,error:s}=SO(b=>b.bookshelf),{isInstalled:o,installPWA:a,canInstall:l}=gC(),u=r.filter(b=>b.status==="error");console.log("BookshelfPage: PWA State - isInstalled:",o,"canInstall:",l);const[d,c]=A.useState(!1),h=A.useRef(null),f=A.useRef(0);A.useEffect(()=>{if(r.length>0)return;(async()=>{try{await t(Ll()).unwrap()}catch(D){console.error("Failed to initialize bookshelf:",D)}})()},[r.length,t]);const v=b=>{e(`/reader/${b}`)},x=async b=>{try{await t(fd(b)).unwrap()}catch(D){const T=D instanceof Error?D.message:String(D);alert(n("alerts.deleteFailed",{error:T}))}},g=A.useCallback(async b=>{const D=bh(b);if(D){alert(D);return}try{await t(dd(b)).unwrap(),t(Pl())}catch(T){const C=T instanceof Error?T.message:String(T);alert(n("alerts.uploadFailed",{error:C}))}},[t,n]),p=A.useCallback(b=>{b.preventDefault(),b.stopPropagation(),f.current+=1,b.dataTransfer.items&&b.dataTransfer.items.length>0&&c(!0)},[]),m=A.useCallback(b=>{b.preventDefault(),b.stopPropagation(),f.current-=1,f.current===0&&c(!1)},[]),w=A.useCallback(b=>{b.preventDefault(),b.stopPropagation()},[]),_=A.useCallback(b=>{b.preventDefault(),b.stopPropagation(),c(!1),f.current=0;const D=Array.from(b.dataTransfer.files),T=D.find(C=>WP(C));T?g(T):D.length>0&&alert(n("alerts.invalidFile"))},[g,n]),E=()=>{var b;(b=h.current)==null||b.click()},S=b=>{var T;const D=(T=b.target.files)==null?void 0:T[0];D&&g(D),h.current&&(h.current.value="")};return y.jsxs("div",{className:"min-h-screen bg-gray-50",onDragEnter:p,onDragLeave:m,onDragOver:w,onDrop:_,children:[y.jsx(Cj,{isVisible:d}),y.jsx("input",{type:"file",accept:".epub,application/epub+zip",className:"hidden",ref:h,onChange:S}),y.jsx("header",{className:"border-b bg-white shadow-sm",children:y.jsx("div",{className:"mx-auto max-w-7xl p-2 sm:px-2 lg:px-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"sm:text-1xl font-bold text-gray-900",children:n("appTitle")}),y.jsx("p",{className:"text-sm text-gray-600",children:n("slogan.title")})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Vj,{}),!o&&l&&y.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-900","aria-label":n("header.installApp"),title:n("header.installTitle"),children:y.jsx(vj,{})}),y.jsx("button",{onClick:()=>e("/settings"),className:"text-gray-600 hover:text-gray-900","aria-label":n("header.settings"),title:n("header.settings"),children:y.jsx(mC,{})}),y.jsx("button",{onClick:E,className:"text-gray-600 hover:text-gray-900","aria-label":n("header.uploadBook"),title:n("header.uploadBook"),children:y.jsx(Uj,{})})]})]})})}),y.jsxs("main",{className:"mx-auto max-w-7xl px-2 py-2 sm:px-6 lg:px-8",children:[s&&y.jsxs("div",{className:"mb-6 rounded-md border border-red-200 bg-red-50 p-4",children:[y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("span",{className:"text-red-400",children:""})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800",children:n("errorHeading")}),y.jsx("div",{className:"mt-2 text-sm text-red-700",children:y.jsx("p",{children:s})})]})]}),y.jsx("div",{className:"mt-4",children:y.jsx("button",{onClick:()=>t(gO()),className:"text-sm text-red-600 hover:text-red-500",children:n("common:dismiss")})})]}),!Vu()&&y.jsx("div",{className:"mb-6 rounded-md border border-yellow-200 bg-yellow-50 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("span",{className:"text-yellow-400",children:""})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:n("browserWarning.title")}),y.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:y.jsx("p",{children:n("browserWarning.description")})})]})]})}),i&&r.length===0&&y.jsxs("div",{className:"py-12 text-center",children:[y.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),y.jsx("p",{className:"text-gray-600",children:n("loadingBookshelf")})]}),u.length>0&&y.jsxs("div",{className:"mb-6 rounded-md border border-red-200 bg-red-50 p-4",children:[y.jsx("h3",{className:"text-sm font-semibold text-red-800",children:n("bookshelf.downloadFailed")}),y.jsx("ul",{className:"mt-2 space-y-1 text-sm text-red-700",children:u.map(b=>y.jsxs("li",{className:"flex items-center justify-between gap-2",children:[y.jsx("span",{className:"truncate",children:b.name}),b.downloadError?y.jsx("span",{className:"text-xs text-red-600",children:b.downloadError}):null]},b.id))})]}),!i&&r.length===0&&y.jsxs("div",{className:"py-12 text-center",children:[y.jsx("div",{className:"mb-4 text-6xl",children:""}),y.jsx("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:n("emptyState.title")}),y.jsx("p",{className:"mb-4 text-gray-600",children:n("emptyState.description")}),y.jsx("button",{onClick:E,className:"rounded-md bg-blue-600 px-6 py-2 text-white transition-colors duration-200 hover:bg-blue-700",children:n("emptyState.uploadButton")})]}),!i&&r.length>0&&y.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:r.map(b=>y.jsx(_j,{book:b,onOpen:v,onDelete:x},b.id))})]})]})},Kj=t=>{const{t:e}=_t("reader"),n=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},r=ei(),{isStandalone:i}=gC();return y.jsx("header",{className:`absolute left-0 right-0 top-0 z-50 transform border-b bg-white shadow-sm transition-transform duration-300 ease-in-out ${t.visible?"translate-y-0":"-translate-y-full"} `,children:y.jsx("div",{className:"mx-auto max-w-4xl px-4 py-3",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:e("header.toc"),"aria-label":e("header.toc"),onClick:t.onOpenToc,children:y.jsx(Aj,{})}),y.jsx("button",{onClick:()=>r("/"),className:"p-2 text-gray-600 hover:text-gray-900","aria-label":e("header.home"),title:e("header.home"),children:y.jsx(Fj,{})})]}),y.jsx("div",{className:"flex items-center space-x-4",children:y.jsx("span",{className:"text-lg font-semibold text-gray-900",children:e("header.title")})}),y.jsxs("div",{className:"flex items-center space-x-4",children:[!i&&y.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-gray-900",title:e("header.fullscreen"),"aria-label":e("header.fullscreen"),children:y.jsx(Dj,{})}),y.jsx("button",{onClick:()=>r("/settings"),className:"p-2 text-gray-600 hover:text-gray-900",title:e("header.settings"),"aria-label":e("header.settings"),children:y.jsx(mC,{})})]})]})})})},Xj=({onClose:t})=>{const{t:e}=_t("reader");return y.jsxs("div",{className:"absolute inset-0 z-40 flex h-full w-full cursor-pointer bg-black/50 text-white backdrop-blur-sm",onClick:n=>{n.stopPropagation(),t()},children:[y.jsx("div",{className:"flex h-full w-[20%] items-center justify-center border-r border-white/30 hover:bg-white/10",children:y.jsx("span",{className:"select-none text-lg font-bold drop-shadow-md",children:e("helpOverlay.previous")})}),y.jsx("div",{className:"flex h-full w-[60%] items-center justify-center border-r border-white/30 hover:bg-white/10",children:y.jsx("span",{className:"select-none text-lg font-bold drop-shadow-md",children:e("helpOverlay.menu")})}),y.jsx("div",{className:"flex h-full w-[20%] items-center justify-center hover:bg-white/10",children:y.jsx("span",{className:"select-none text-lg font-bold drop-shadow-md",children:e("helpOverlay.next")})})]})},yC=()=>{const{t}=_t("reader");return y.jsx("div",{className:"flex flex-1 items-center justify-center bg-gray-50",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),y.jsx("p",{className:"text-gray-600",children:t("loading")})]})})},Gj=t=>{const{t:e}=_t("reader");return t.visible?y.jsx("button",{onClick:n=>{n.stopPropagation(),t.setVisible(!0)},className:"absolute left-1 top-1 z-20 rounded-sm bg-opacity-90 text-gray-700 shadow-md transition-all duration-200 hover:bg-opacity-100 hover:shadow-lg",title:e("menuButton.show"),"aria-label":e("menuButton.show"),children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}):y.jsx(y.Fragment,{})},Yj=t=>{const{t:e}=_t("reader"),n=t.totalPages>0?Math.round((t.currentPage+1)/t.totalPages*100):0;return y.jsx("footer",{className:`absolute bottom-0 left-0 right-0 z-50 transform border-b bg-white shadow-sm transition-transform duration-300 ease-in-out ${t.visible?"block translate-y-0":"hidden"} `,children:y.jsx("div",{className:"mx-auto max-w-4xl px-4 py-3",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"mr-4 flex-1",children:[y.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm text-gray-600",children:[y.jsx("span",{children:e("footer.pageStatus",{current:t.currentPage+1,total:t.totalPages})}),y.jsxs("span",{children:[n,"%"]})]}),y.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:y.jsx("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${n}%`}})})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:t.onPrev,className:"p-2 text-gray-600 hover:text-gray-900 disabled:cursor-not-allowed disabled:opacity-50",title:e("common:previousPage"),children:y.jsx(Tj,{})}),y.jsx("button",{onClick:t.onNext,className:"p-2 text-gray-600 hover:text-gray-900 disabled:cursor-not-allowed disabled:opacity-50",title:e("common:nextPage"),children:y.jsx(Nj,{})})]})]})})})},Zj=t=>{const{t:e}=_t("reader"),n=(r,i=0)=>r.map(s=>{var o;return y.jsxs("div",{className:"w-full",children:[y.jsx("button",{onClick:()=>t.onChapterSelect(s.href),className:`w-full rounded px-3 py-2 text-left text-sm transition-colors ${i>0?"ml-4":""} ${(o=t.currentChapter)!=null&&o.startsWith(s.href)?"bg-blue-100 font-medium text-blue-700":"text-gray-700 hover:bg-gray-100"} `,style:{paddingLeft:`${12+i*16}px`},children:s.label}),s.subitems&&s.subitems.length>0&&y.jsx("div",{className:"ml-2",children:n(s.subitems,i+1)})]},s.href)});return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:`fixed left-0 top-0 z-40 h-screen w-64 transform bg-white shadow-lg transition-transform duration-300 ${t.isOpen?"translate-x-0":"-translate-x-full"} `,children:[y.jsx("div",{className:"border-b p-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e("toc.title")}),y.jsx("button",{onClick:t.onToggle,className:"p-1 text-gray-500 hover:text-gray-700","aria-label":e("toc.closeAria"),children:y.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),y.jsx("div",{className:"h-[calc(100vh-4rem)] overflow-y-auto p-4",children:t.tableOfContents.length===0?y.jsx("div",{className:"py-8 text-center text-gray-500",children:y.jsx("p",{children:e("toc.empty")})}):y.jsx("div",{className:"space-y-1",children:n(t.tableOfContents)})})]}),t.isOpen&&y.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 md:hidden",onClick:t.onToggle})]})},Qj=({error:t})=>{const{t:e}=_t("reader");return y.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"mb-4 text-2xl font-bold text-gray-900",children:e("invalidBook.title")}),y.jsx("p",{className:"text-gray-600",children:e("invalidBook.message")}),t&&y.jsx("p",{className:"text-red-600",children:t})]})})};var Qv=(t,e)=>{let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>{t(r)},e)}},Jj=(t=>(t.red="\x1B[31m",t.green="\x1B[32m",t.bold="\x1B[1m",t.reset="\x1B[0m",t))(Jj||{});function eF({scrollContainerRef:t,isAutoScrollRef:e,isGoToBottomRef:n,duration:r=600}){const i=A.useRef(null),s=A.useCallback(h=>{if(t===null)return;const f=t.current;if(!f)return;if(i.current&&(cancelAnimationFrame(i.current),i.current=null),(h==null?void 0:h.behavior)==="auto"){f.scrollTop=f.scrollHeight-f.clientHeight;return}const v=performance.now(),x=f.scrollTop,g=m=>1-Math.pow(1-m,3),p=()=>{const w=performance.now()-v,_=Math.min(w/r,1),E=g(_),S=f.scrollHeight-f.clientHeight;f.scrollTop=x+(S-x)*E,_<1?i.current=requestAnimationFrame(p):i.current=null};i.current=requestAnimationFrame(p)},[t,r]),o=A.useCallback(()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null)},[]);A.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]);const a=h=>{h.stopPropagation(),e.current=!1,o(),console.log("Pause auto scroll")},l=100,u=h=>{h.stopPropagation(),e.current=!0,n.current=h.currentTarget.scrollTop+h.currentTarget.clientHeight>=h.currentTarget.scrollHeight-l,console.log("Resume auto scroll. Is at bottom:",n.current)},d=A.useMemo(()=>Qv(()=>{e.current=!0},200),[e]);return{scrollToBottom:s,handleOnPauseAutoScroll:a,handleResumeAutoScroll:u,bufferPx:l,handleWheelEvent:()=>{o(),e.current=!1,d()}}}function Wb(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const Wn=Ms(/[A-Za-z]/),jn=Ms(/[\dA-Za-z]/),tF=Ms(/[#-'*+\--9=?A-Z^-~]/);function Cf(t){return t!==null&&(t<32||t===127)}const Hg=Ms(/\d/),nF=Ms(/[\dA-Fa-f]/),rF=Ms(/[!-/:-@[-`{-~]/);function Ye(t){return t!==null&&t<-2}function Ut(t){return t!==null&&(t<0||t===32)}function mt(t){return t===-2||t===-1||t===32}const Dh=Ms(new RegExp("\\p{P}|\\p{S}","u")),ho=Ms(/\s/);function Ms(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function iF(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const Nh=function(t){if(t==null)return lF;if(typeof t=="function")return Th(t);if(typeof t=="object")return Array.isArray(t)?sF(t):oF(t);if(typeof t=="string")return aF(t);throw new Error("Expected function, string, or object as test")};function sF(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Nh(t[n]);return Th(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function oF(t){const e=t;return Th(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function aF(t){return Th(e);function e(n){return n&&n.type===t}}function Th(t){return e;function e(n,r,i){return!!(uF(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function lF(){return!0}function uF(t){return t!==null&&typeof t=="object"&&"type"in t}const xC=[],cF=!0,Vg=!1,dF="skip";function wC(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Nh(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,d){const c=l&&typeof l=="object"?l:{};if(typeof c.type=="string"){const f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=xC,v,x,g;if((!e||s(l,u,d[d.length-1]||void 0))&&(f=fF(n(l,d)),f[0]===Vg))return f;if("children"in l&&l.children){const p=l;if(p.children&&f[0]!==dF)for(x=(r?p.children.length:-1)+o,g=d.concat(p);x>-1&&x<p.children.length;){const m=p.children[x];if(v=a(m,x,g)(),v[0]===Vg)return v;x=typeof v[1]=="number"?v[1]:x+o}}return f}}}function fF(t){return Array.isArray(t)?t:typeof t=="number"?[cF,t]:t==null?xC:[t]}function hF(t,e,n){const i=Nh((n||{}).ignore||[]),s=pF(e);let o=-1;for(;++o<s.length;)wC(t,"text",a);function a(u,d){let c=-1,h;for(;++c<d.length;){const f=d[c],v=h?h.children:void 0;if(i(f,v?v.indexOf(f):void 0,h))return;h=f}if(h)return l(u,d)}function l(u,d){const c=d[d.length-1],h=s[o][0],f=s[o][1];let v=0;const g=c.children.indexOf(u);let p=!1,m=[];h.lastIndex=0;let w=h.exec(u.value);for(;w;){const _=w.index,E={index:w.index,input:w.input,stack:[...d,u]};let S=f(...w,E);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?h.lastIndex=_+1:(v!==_&&m.push({type:"text",value:u.value.slice(v,_)}),Array.isArray(S)?m.push(...S):S&&m.push(S),v=_+w[0].length,p=!0),!h.global)break;w=h.exec(u.value)}return p?(v<u.value.length&&m.push({type:"text",value:u.value.slice(v)}),c.children.splice(g,1,...m)):m=[u],g+m.length}}function pF(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([mF(i[0]),gF(i[1])])}return e}function mF(t){return typeof t=="string"?new RegExp(iF(t),"g"):t}function gF(t){return typeof t=="function"?t:function(){return t}}const qp="phrasing",Kp=["autolink","link","image","label"];function vF(){return{transforms:[EF],enter:{literalAutolink:xF,literalAutolinkEmail:Xp,literalAutolinkHttp:Xp,literalAutolinkWww:Xp},exit:{literalAutolink:kF,literalAutolinkEmail:SF,literalAutolinkHttp:wF,literalAutolinkWww:bF}}}function yF(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:qp,notInConstruct:Kp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:qp,notInConstruct:Kp},{character:":",before:"[ps]",after:"\\/",inConstruct:qp,notInConstruct:Kp}]}}function xF(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Xp(t){this.config.enter.autolinkProtocol.call(this,t)}function wF(t){this.config.exit.autolinkProtocol.call(this,t)}function bF(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function SF(t){this.config.exit.autolinkEmail.call(this,t)}function kF(t){this.exit(t)}function EF(t){hF(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,_F],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),CF]],{ignore:["link","linkReference"]})}function _F(t,e,n,r,i){let s="";if(!bC(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!AF(n)))return!1;const o=DF(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function CF(t,e,n,r){return!bC(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function AF(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function DF(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Wb(t,"(");let s=Wb(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function bC(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ho(n)||Dh(n))&&(!e||n!==47)}function Gr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}SC.peek=jF;function NF(){this.buffer()}function TF(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function RF(){this.buffer()}function IF(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function LF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function PF(t){this.exit(t)}function OF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function MF(t){this.exit(t)}function jF(){return"["}function SC(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function FF(){return{enter:{gfmFootnoteCallString:NF,gfmFootnoteCall:TF,gfmFootnoteDefinitionLabelString:RF,gfmFootnoteDefinition:IF},exit:{gfmFootnoteCallString:LF,gfmFootnoteCall:PF,gfmFootnoteDefinitionLabelString:OF,gfmFootnoteDefinition:MF}}}function BF(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:SC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),d(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?kC:zF))),u(),l}}function zF(t,e,n){return e===0?t:kC(t,e,n)}function kC(t,e,n){return(n?"":"    ")+t}const UF=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];EC.peek=qF;function $F(){return{canContainEols:["delete"],enter:{strikethrough:HF},exit:{strikethrough:VF}}}function WF(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:UF}],handlers:{delete:EC}}}function HF(t){this.enter({type:"delete",children:[]},t)}function VF(t){this.exit(t)}function EC(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function qF(){return"~"}function KF(t){return t.length}function XF(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||KF,s=[],o=[],a=[],l=[];let u=0,d=-1;for(;++d<t.length;){const x=[],g=[];let p=-1;for(t[d].length>u&&(u=t[d].length);++p<t[d].length;){const m=GF(t[d][p]);if(n.alignDelimiters!==!1){const w=i(m);g[p]=w,(l[p]===void 0||w>l[p])&&(l[p]=w)}x.push(m)}o[d]=x,a[d]=g}let c=-1;if(typeof r=="object"&&"length"in r)for(;++c<u;)s[c]=Hb(r[c]);else{const x=Hb(r);for(;++c<u;)s[c]=x}c=-1;const h=[],f=[];for(;++c<u;){const x=s[c];let g="",p="";x===99?(g=":",p=":"):x===108?g=":":x===114&&(p=":");let m=n.alignDelimiters===!1?1:Math.max(1,l[c]-g.length-p.length);const w=g+"-".repeat(m)+p;n.alignDelimiters!==!1&&(m=g.length+m+p.length,m>l[c]&&(l[c]=m),f[c]=m),h[c]=w}o.splice(1,0,h),a.splice(1,0,f),d=-1;const v=[];for(;++d<o.length;){const x=o[d],g=a[d];c=-1;const p=[];for(;++c<u;){const m=x[c]||"";let w="",_="";if(n.alignDelimiters!==!1){const E=l[c]-(g[c]||0),S=s[c];S===114?w=" ".repeat(E):S===99?E%2?(w=" ".repeat(E/2+.5),_=" ".repeat(E/2-.5)):(w=" ".repeat(E/2),_=w):_=" ".repeat(E)}n.delimiterStart!==!1&&!c&&p.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&m==="")&&(n.delimiterStart!==!1||c)&&p.push(" "),n.alignDelimiters!==!1&&p.push(w),p.push(m),n.alignDelimiters!==!1&&p.push(_),n.padding!==!1&&p.push(" "),(n.delimiterEnd!==!1||c!==u-1)&&p.push("|")}v.push(n.delimiterEnd===!1?p.join("").replace(/ +$/,""):p.join(""))}return v.join(`
`)}function GF(t){return t==null?"":String(t)}function Hb(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function YF(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),ZF);return i(),o}function ZF(t,e,n){return">"+(n?"":" ")+t}function QF(t,e){return Vb(t,e.inConstruct,!0)&&!Vb(t,e.notInConstruct,!1)}function Vb(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function qb(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&QF(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function JF(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function e6(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function t6(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function n6(t,e,n,r){const i=t6(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(e6(t,n)){const c=n.enter("codeIndented"),h=n.indentLines(s,r6);return c(),h}const a=n.createTracker(r),l=i.repeat(Math.max(JF(s,i)+1,3)),u=n.enter("codeFenced");let d=a.move(l);if(t.lang){const c=n.enter(`codeFencedLang${o}`);d+=a.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...a.current()})),c()}if(t.lang&&t.meta){const c=n.enter(`codeFencedMeta${o}`);d+=a.move(" "),d+=a.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...a.current()})),c()}return d+=a.move(`
`),s&&(d+=a.move(s+`
`)),d+=a.move(l),u(),d}function r6(t,e,n){return(n?"":"    ")+t}function Jv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function i6(t,e,n,r){const i=Jv(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function s6(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Eu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Aa(t){if(t===null||Ut(t)||ho(t))return 1;if(Dh(t))return 2}function Af(t,e,n){const r=Aa(t),i=Aa(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}_C.peek=o6;function _C(t,e,n,r){const i=s6(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),d=Af(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(l=Eu(u)+l.slice(1));const c=l.charCodeAt(l.length-1),h=Af(r.after.charCodeAt(0),c,i);h.inside&&(l=l.slice(0,-1)+Eu(c));const f=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},a+l+f}function o6(t,e,n){return n.options.emphasis||"*"}function ey(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),wC(t,s,a,i);function a(l,u){const d=u[u.length-1],c=d?d.children.indexOf(l):void 0;return o(l,c,d)}}const a6={};function ty(t,e){const n=a6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return CC(t,r,i)}function CC(t,e,n){if(l6(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Kb(t.children,e,n)}return Array.isArray(t)?Kb(t,e,n):""}function Kb(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=CC(t[i],e,n);return r.join("")}function l6(t){return!!(t&&typeof t=="object")}function u6(t,e){let n=!1;return ey(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Vg}),!!((!t.depth||t.depth<3)&&ty(t)&&(e.options.setext||n))}function c6(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(u6(t,n)){const d=n.enter("headingSetext"),c=n.enter("phrasing"),h=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return c(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Eu(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}AC.peek=d6;function AC(t){return t.value||""}function d6(){return"<"}DC.peek=f6;function DC(t,e,n,r){const i=Jv(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function f6(){return"!"}NC.peek=h6;function NC(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const c=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!u||u!==c?l+=a.move(c+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function h6(){return"!"}TC.peek=p6;function TC(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function p6(){return"`"}function RC(t,e){const n=ty(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}IC.peek=m6;function IC(t,e,n,r){const i=Jv(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(RC(t,n)){const d=n.stack;n.stack=[],a=n.enter("autolink");let c=o.move("<");return c+=o.move(n.containerPhrasing(t,{before:c,after:">",...o.current()})),c+=o.move(">"),a(),n.stack=d,c}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function m6(t,e,n){return RC(t,n)?"<":"["}LC.peek=g6;function LC(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const c=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!u||u!==c?l+=a.move(c+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function g6(){return"["}function ny(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function v6(t){const e=ny(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function y6(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function PC(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function x6(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?y6(n):ny(n);const a=t.ordered?o==="."?")":".":v6(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),PC(n)===o&&d){let c=-1;for(;++c<t.children.length;){const h=t.children[c];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function w6(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function b6(t,e,n,r){const i=w6(n);let s=n.bulletCurrent||ny(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),d);return l(),u;function d(c,h,f){return h?(f?"":" ".repeat(o))+c:(f?s:s+" ".repeat(o-s.length))+c}}function S6(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const k6=Nh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function E6(t,e,n,r){return(t.children.some(function(o){return k6(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function _6(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}OC.peek=C6;function OC(t,e,n,r){const i=_6(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),d=Af(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(l=Eu(u)+l.slice(1));const c=l.charCodeAt(l.length-1),h=Af(r.after.charCodeAt(0),c,i);h.inside&&(l=l.slice(0,-1)+Eu(c));const f=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},a+l+f}function C6(t,e,n){return n.options.strong||"*"}function A6(t,e,n,r){return n.safe(t.value,r)}function D6(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function N6(t,e,n){const r=(PC(n)+(n.options.ruleSpaces?" ":"")).repeat(D6(n));return n.options.ruleSpaces?r.slice(0,-1):r}const MC={blockquote:YF,break:qb,code:n6,definition:i6,emphasis:_C,hardBreak:qb,heading:c6,html:AC,image:DC,imageReference:NC,inlineCode:TC,link:IC,linkReference:LC,list:x6,listItem:b6,paragraph:S6,root:E6,strong:OC,text:A6,thematicBreak:N6},Xb=document.createElement("i");function ry(t){const e="&"+t+";";Xb.innerHTML=e;const n=Xb.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function jC(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const T6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function R6(t){return t.replace(T6,I6)}function I6(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return jC(n.slice(s?2:1),s?16:10)}return ry(n)||t}function L6(){return{enter:{table:P6,tableData:Gb,tableHeader:Gb,tableRow:M6},exit:{codeText:j6,table:O6,tableData:Gp,tableHeader:Gp,tableRow:Gp}}}function P6(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function O6(t){this.exit(t),this.data.inTable=void 0}function M6(t){this.enter({type:"tableRow",children:[]},t)}function Gp(t){this.exit(t)}function Gb(t){this.enter({type:"tableCell",children:[]},t)}function j6(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,F6));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function F6(t,e){return e==="|"?e:t}function B6(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(f,v,x,g){return u(d(f,x,g),f.align)}function a(f,v,x,g){const p=c(f,x,g),m=u([p]);return m.slice(0,m.indexOf(`
`))}function l(f,v,x,g){const p=x.enter("tableCell"),m=x.enter("phrasing"),w=x.containerPhrasing(f,{...g,before:s,after:s});return m(),p(),w}function u(f,v){return XF(f,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function d(f,v,x){const g=f.children;let p=-1;const m=[],w=v.enter("table");for(;++p<g.length;)m[p]=c(g[p],v,x);return w(),m}function c(f,v,x){const g=f.children;let p=-1;const m=[],w=v.enter("tableRow");for(;++p<g.length;)m[p]=l(g[p],f,v,x);return w(),m}function h(f,v,x){let g=MC.inlineCode(f,v,x);return x.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function z6(){return{exit:{taskListCheckValueChecked:Yb,taskListCheckValueUnchecked:Yb,paragraph:$6}}}function U6(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:W6}}}function Yb(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function $6(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function W6(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=MC.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(d){return d+o}}function H6(){return[vF(),FF(),$F(),L6(),z6()]}function V6(t){return{extensions:[yF(),BF(t),WF(),B6(t),U6()]}}function vr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Dr(t,e){return t.length>0?(vr(t,t.length,0,e),t):e}const Zb={}.hasOwnProperty;function FC(t){const e={};let n=-1;for(;++n<t.length;)q6(e,t[n]);return e}function q6(t,e){let n;for(n in e){const i=(Zb.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Zb.call(i,o)||(i[o]=[]);const a=s[o];K6(i[o],Array.isArray(a)?a:a?[a]:[])}}}function K6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);vr(t,0,0,r)}const X6={tokenize:eB,partial:!0},BC={tokenize:tB,partial:!0},zC={tokenize:nB,partial:!0},UC={tokenize:rB,partial:!0},G6={tokenize:iB,partial:!0},$C={name:"wwwAutolink",tokenize:Q6,previous:HC},WC={name:"protocolAutolink",tokenize:J6,previous:VC},Yi={name:"emailAutolink",tokenize:Z6,previous:qC},Si={};function Y6(){return{text:Si}}let Bs=48;for(;Bs<123;)Si[Bs]=Yi,Bs++,Bs===58?Bs=65:Bs===91&&(Bs=97);Si[43]=Yi;Si[45]=Yi;Si[46]=Yi;Si[95]=Yi;Si[72]=[Yi,WC];Si[104]=[Yi,WC];Si[87]=[Yi,$C];Si[119]=[Yi,$C];function Z6(t,e,n){const r=this;let i,s;return o;function o(c){return!qg(c)||!qC.call(r,r.previous)||iy(r.events)?n(c):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(c))}function a(c){return qg(c)?(t.consume(c),a):c===64?(t.consume(c),l):n(c)}function l(c){return c===46?t.check(G6,d,u)(c):c===45||c===95||jn(c)?(s=!0,t.consume(c),l):d(c)}function u(c){return t.consume(c),i=!0,l}function d(c){return s&&i&&Wn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(c)):n(c)}}function Q6(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!HC.call(r,r.previous)||iy(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(X6,t.attempt(BC,t.attempt(zC,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function J6(t,e,n){const r=this;let i="",s=!1;return o;function o(c){return(c===72||c===104)&&VC.call(r,r.previous)&&!iy(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(c),t.consume(c),a):n(c)}function a(c){if(Wn(c)&&i.length<5)return i+=String.fromCodePoint(c),t.consume(c),a;if(c===58){const h=i.toLowerCase();if(h==="http"||h==="https")return t.consume(c),l}return n(c)}function l(c){return c===47?(t.consume(c),s?u:(s=!0,l)):n(c)}function u(c){return c===null||Cf(c)||Ut(c)||ho(c)||Dh(c)?n(c):t.attempt(BC,t.attempt(zC,d),n)(c)}function d(c){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(c)}}function eB(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function tB(t,e,n){let r,i,s;return o;function o(u){return u===46||u===95?t.check(UC,l,a)(u):u===null||Ut(u)||ho(u)||u!==45&&Dh(u)?l(u):(s=!0,t.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),o}function l(u){return i||r||!s?n(u):e(u)}}function nB(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(UC,e,s)(o):o===null||Ut(o)||ho(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function rB(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||Ut(a)||ho(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||Ut(a)||ho(a)?e(a):r(a)}function s(a){return Wn(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Wn(a)?(t.consume(a),o):n(a)}}function iB(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return jn(s)?n(s):e(s)}}function HC(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ut(t)}function VC(t){return!Wn(t)}function qC(t){return!(t===47||qg(t))}function qg(t){return t===43||t===45||t===46||t===95||jn(t)}function iy(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function La(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&jn(t.charCodeAt(n+1))&&jn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Rh(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Kg={name:"attention",resolveAll:sB,tokenize:oB};function sB(t,e){let n=-1,r,i,s,o,a,l,u,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const c={...t[r][1].end},h={...t[n][1].start};Qb(c,-l),Qb(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:c,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Dr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Dr(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=Dr(u,Rh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Dr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,u=Dr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,vr(t,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function oB(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Aa(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),d=Aa(l),c=!d||d===2&&i||n.includes(l),h=!i||i===2&&d||n.includes(r);return u._open=!!(s===42?c:c&&(i||!h)),u._close=!!(s===42?h:h&&(d||!c)),e(l)}}function Qb(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const aB={name:"autolink",tokenize:lB};function lB(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return Wn(f)?(t.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||jn(f)?(r=1,a(f)):u(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||jn(f))&&r++<32?(t.consume(f),a):(r=0,u(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Cf(f)?n(f):(t.consume(f),l)}function u(f){return f===64?(t.consume(f),d):tF(f)?(t.consume(f),u):n(f)}function d(f){return jn(f)?c(f):n(f)}function c(f){return f===46?(t.consume(f),r=0,d):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||jn(f))&&r++<63){const v=f===45?h:c;return t.consume(f),v}return n(f)}}function Et(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return mt(l)?(t.enter(n),a(l)):e(l)}function a(l){return mt(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const Ku={partial:!0,tokenize:uB};function uB(t,e,n){return r;function r(s){return mt(s)?Et(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ye(s)?e(s):n(s)}}const KC={continuation:{tokenize:dB},exit:fB,name:"blockQuote",tokenize:cB};function cB(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return mt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function dB(t,e,n){const r=this;return i;function i(o){return mt(o)?Et(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(KC,e,n)(o)}}function fB(t){t.exit("blockQuote")}const XC={name:"characterEscape",tokenize:hB};function hB(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return rF(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const GC={name:"characterReference",tokenize:pB};function pB(t,e,n){const r=this;let i=0,s,o;return a;function a(c){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(c),t.exit("characterReferenceMarker"),l}function l(c){return c===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(c),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=jn,d(c))}function u(c){return c===88||c===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(c),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=nF,d):(t.enter("characterReferenceValue"),s=7,o=Hg,d(c))}function d(c){if(c===59&&i){const h=t.exit("characterReferenceValue");return o===jn&&!ry(r.sliceSerialize(h))?n(c):(t.enter("characterReferenceMarker"),t.consume(c),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(c)&&i++<s?(t.consume(c),d):n(c)}}const Jb={partial:!0,tokenize:gB},e2={concrete:!0,name:"codeFenced",tokenize:mB};function mB(t,e,n){const r=this,i={partial:!0,tokenize:E};let s=0,o=0,a;return l;function l(S){return u(S)}function u(S){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,a=S,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(S)}function d(S){return S===a?(o++,t.consume(S),d):o<3?n(S):(t.exit("codeFencedFenceSequence"),mt(S)?Et(t,c,"whitespace")(S):c(S))}function c(S){return S===null||Ye(S)?(t.exit("codeFencedFence"),r.interrupt?e(S):t.check(Jb,x,_)(S)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||Ye(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),c(S)):mt(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Et(t,f,"whitespace")(S)):S===96&&S===a?n(S):(t.consume(S),h)}function f(S){return S===null||Ye(S)?c(S):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===null||Ye(S)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),c(S)):S===96&&S===a?n(S):(t.consume(S),v)}function x(S){return t.attempt(i,_,g)(S)}function g(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),p}function p(S){return s>0&&mt(S)?Et(t,m,"linePrefix",s+1)(S):m(S)}function m(S){return S===null||Ye(S)?t.check(Jb,x,_)(S):(t.enter("codeFlowValue"),w(S))}function w(S){return S===null||Ye(S)?(t.exit("codeFlowValue"),m(S)):(t.consume(S),w)}function _(S){return t.exit("codeFenced"),e(S)}function E(S,b,D){let T=0;return C;function C(W){return S.enter("lineEnding"),S.consume(W),S.exit("lineEnding"),I}function I(W){return S.enter("codeFencedFence"),mt(W)?Et(S,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):M(W)}function M(W){return W===a?(S.enter("codeFencedFenceSequence"),H(W)):D(W)}function H(W){return W===a?(T++,S.consume(W),H):T>=o?(S.exit("codeFencedFenceSequence"),mt(W)?Et(S,q,"whitespace")(W):q(W)):D(W)}function q(W){return W===null||Ye(W)?(S.exit("codeFencedFence"),b(W)):D(W)}}}function gB(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Yp={name:"codeIndented",tokenize:yB},vB={partial:!0,tokenize:xB};function yB(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),Et(t,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Ye(u)?t.attempt(vB,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Ye(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function xB(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ye(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Et(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Ye(o)?i(o):n(o)}}const wB={name:"codeText",previous:SB,resolve:bB,tokenize:kB};function bB(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function SB(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kB(t,e,n){let r=0,i,s;return o;function o(c){return t.enter("codeText"),t.enter("codeTextSequence"),a(c)}function a(c){return c===96?(t.consume(c),r++,a):(t.exit("codeTextSequence"),l(c))}function l(c){return c===null?n(c):c===32?(t.enter("space"),t.consume(c),t.exit("space"),l):c===96?(s=t.enter("codeTextSequence"),i=0,d(c)):Ye(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||Ye(c)?(t.exit("codeTextData"),l(c)):(t.consume(c),u)}function d(c){return c===96?(t.consume(c),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(c)):(s.type="codeTextData",u(c))}}class EB{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&rl(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),rl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),rl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);rl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);rl(this.left,n.reverse())}}}function rl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function YC(t){const e={};let n=-1,r,i,s,o,a,l,u;const d=new EB(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,_B(d,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return vr(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function _B(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let d,c,h=-1,f=n,v=0,x=0;const g=[x];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),c&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),c=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(x=h+1,g.push(x),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):g.pop(),h=g.length;h--;){const p=a.slice(g[h],g[h+1]),m=s.pop();l.push([m,m+p.length-1]),t.splice(m,2,p)}for(l.reverse(),h=-1;++h<l.length;)u[v+l[h][0]]=v+l[h][1],v+=l[h][1]-l[h][0]-1;return u}const CB={resolve:DB,tokenize:NB},AB={partial:!0,tokenize:TB};function DB(t){return YC(t),t}function NB(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Ye(a)?t.check(AB,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function TB(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Et(t,s,"linePrefix")}function s(o){if(o===null||Ye(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function ZC(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return c;function c(p){return p===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(p),t.exit(s),h):p===null||p===32||p===41||Cf(p)?n(p):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),x(p))}function h(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===62?(t.exit("chunkString"),t.exit(a),h(p)):p===null||p===60||Ye(p)?n(p):(t.consume(p),p===92?v:f)}function v(p){return p===60||p===62||p===92?(t.consume(p),f):f(p)}function x(p){return!d&&(p===null||p===41||Ut(p))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(p)):d<u&&p===40?(t.consume(p),d++,x):p===41?(t.consume(p),d--,x):p===null||p===32||p===40||Cf(p)?n(p):(t.consume(p),p===92?g:x)}function g(p){return p===40||p===41||p===92?(t.consume(p),x):x(p)}}function QC(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),d}function d(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Ye(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===null||f===91||f===93||Ye(f)||a++>999?(t.exit("chunkString"),d(f)):(t.consume(f),l||(l=!mt(f)),f===92?h:c)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,c):c(f)}}function JC(t,e,n,r,i,s){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),u(h))}function u(h){return h===o?(t.exit(s),l(o)):h===null?n(h):Ye(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Et(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||Ye(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?c:d)}function c(h){return h===o||h===92?(t.consume(h),d):d(h)}}function jl(t,e){let n;return r;function r(i){return Ye(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):mt(i)?Et(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const RB={name:"definition",tokenize:LB},IB={partial:!0,tokenize:PB};function LB(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return QC.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=Gr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return Ut(f)?jl(t,u)(f):u(f)}function u(f){return ZC(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return t.attempt(IB,c,c)(f)}function c(f){return mt(f)?Et(t,h,"whitespace")(f):h(f)}function h(f){return f===null||Ye(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function PB(t,e,n){return r;function r(a){return Ut(a)?jl(t,i)(a):n(a)}function i(a){return JC(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return mt(a)?Et(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Ye(a)?e(a):n(a)}}const OB={name:"hardBreakEscape",tokenize:MB};function MB(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Ye(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const jB={name:"headingAtx",resolve:FB,tokenize:BB};function FB(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},vr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function BB(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||Ut(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Ye(d)?(t.exit("atxHeading"),e(d)):mt(d)?Et(t,a,"whitespace")(d):(t.enter("atxHeadingText"),u(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function u(d){return d===null||d===35||Ut(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),u)}}const zB=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],t2=["pre","script","style","textarea"],UB={concrete:!0,name:"htmlFlow",resolveTo:HB,tokenize:VB},$B={partial:!0,tokenize:KB},WB={partial:!0,tokenize:qB};function HB(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function VB(t,e,n){const r=this;let i,s,o,a,l;return u;function u(F){return d(F)}function d(F){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(F),c}function c(F){return F===33?(t.consume(F),h):F===47?(t.consume(F),s=!0,x):F===63?(t.consume(F),i=3,r.interrupt?e:L):Wn(F)?(t.consume(F),o=String.fromCharCode(F),g):n(F)}function h(F){return F===45?(t.consume(F),i=2,f):F===91?(t.consume(F),i=5,a=0,v):Wn(F)?(t.consume(F),i=4,r.interrupt?e:L):n(F)}function f(F){return F===45?(t.consume(F),r.interrupt?e:L):n(F)}function v(F){const xe="CDATA[";return F===xe.charCodeAt(a++)?(t.consume(F),a===xe.length?r.interrupt?e:M:v):n(F)}function x(F){return Wn(F)?(t.consume(F),o=String.fromCharCode(F),g):n(F)}function g(F){if(F===null||F===47||F===62||Ut(F)){const xe=F===47,Fe=o.toLowerCase();return!xe&&!s&&t2.includes(Fe)?(i=1,r.interrupt?e(F):M(F)):zB.includes(o.toLowerCase())?(i=6,xe?(t.consume(F),p):r.interrupt?e(F):M(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?m(F):w(F))}return F===45||jn(F)?(t.consume(F),o+=String.fromCharCode(F),g):n(F)}function p(F){return F===62?(t.consume(F),r.interrupt?e:M):n(F)}function m(F){return mt(F)?(t.consume(F),m):C(F)}function w(F){return F===47?(t.consume(F),C):F===58||F===95||Wn(F)?(t.consume(F),_):mt(F)?(t.consume(F),w):C(F)}function _(F){return F===45||F===46||F===58||F===95||jn(F)?(t.consume(F),_):E(F)}function E(F){return F===61?(t.consume(F),S):mt(F)?(t.consume(F),E):w(F)}function S(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),l=F,b):mt(F)?(t.consume(F),S):D(F)}function b(F){return F===l?(t.consume(F),l=null,T):F===null||Ye(F)?n(F):(t.consume(F),b)}function D(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||Ut(F)?E(F):(t.consume(F),D)}function T(F){return F===47||F===62||mt(F)?w(F):n(F)}function C(F){return F===62?(t.consume(F),I):n(F)}function I(F){return F===null||Ye(F)?M(F):mt(F)?(t.consume(F),I):n(F)}function M(F){return F===45&&i===2?(t.consume(F),K):F===60&&i===1?(t.consume(F),G):F===62&&i===4?(t.consume(F),ce):F===63&&i===3?(t.consume(F),L):F===93&&i===5?(t.consume(F),te):Ye(F)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check($B,oe,H)(F)):F===null||Ye(F)?(t.exit("htmlFlowData"),H(F)):(t.consume(F),M)}function H(F){return t.check(WB,q,oe)(F)}function q(F){return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),W}function W(F){return F===null||Ye(F)?H(F):(t.enter("htmlFlowData"),M(F))}function K(F){return F===45?(t.consume(F),L):M(F)}function G(F){return F===47?(t.consume(F),o="",$):M(F)}function $(F){if(F===62){const xe=o.toLowerCase();return t2.includes(xe)?(t.consume(F),ce):M(F)}return Wn(F)&&o.length<8?(t.consume(F),o+=String.fromCharCode(F),$):M(F)}function te(F){return F===93?(t.consume(F),L):M(F)}function L(F){return F===62?(t.consume(F),ce):F===45&&i===2?(t.consume(F),L):M(F)}function ce(F){return F===null||Ye(F)?(t.exit("htmlFlowData"),oe(F)):(t.consume(F),ce)}function oe(F){return t.exit("htmlFlow"),e(F)}}function qB(t,e,n){const r=this;return i;function i(o){return Ye(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function KB(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Ku,e,n)}}const XB={name:"htmlText",tokenize:GB};function GB(t,e,n){const r=this;let i,s,o;return a;function a(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),l}function l(L){return L===33?(t.consume(L),u):L===47?(t.consume(L),E):L===63?(t.consume(L),w):Wn(L)?(t.consume(L),D):n(L)}function u(L){return L===45?(t.consume(L),d):L===91?(t.consume(L),s=0,v):Wn(L)?(t.consume(L),m):n(L)}function d(L){return L===45?(t.consume(L),f):n(L)}function c(L){return L===null?n(L):L===45?(t.consume(L),h):Ye(L)?(o=c,G(L)):(t.consume(L),c)}function h(L){return L===45?(t.consume(L),f):c(L)}function f(L){return L===62?K(L):L===45?h(L):c(L)}function v(L){const ce="CDATA[";return L===ce.charCodeAt(s++)?(t.consume(L),s===ce.length?x:v):n(L)}function x(L){return L===null?n(L):L===93?(t.consume(L),g):Ye(L)?(o=x,G(L)):(t.consume(L),x)}function g(L){return L===93?(t.consume(L),p):x(L)}function p(L){return L===62?K(L):L===93?(t.consume(L),p):x(L)}function m(L){return L===null||L===62?K(L):Ye(L)?(o=m,G(L)):(t.consume(L),m)}function w(L){return L===null?n(L):L===63?(t.consume(L),_):Ye(L)?(o=w,G(L)):(t.consume(L),w)}function _(L){return L===62?K(L):w(L)}function E(L){return Wn(L)?(t.consume(L),S):n(L)}function S(L){return L===45||jn(L)?(t.consume(L),S):b(L)}function b(L){return Ye(L)?(o=b,G(L)):mt(L)?(t.consume(L),b):K(L)}function D(L){return L===45||jn(L)?(t.consume(L),D):L===47||L===62||Ut(L)?T(L):n(L)}function T(L){return L===47?(t.consume(L),K):L===58||L===95||Wn(L)?(t.consume(L),C):Ye(L)?(o=T,G(L)):mt(L)?(t.consume(L),T):K(L)}function C(L){return L===45||L===46||L===58||L===95||jn(L)?(t.consume(L),C):I(L)}function I(L){return L===61?(t.consume(L),M):Ye(L)?(o=I,G(L)):mt(L)?(t.consume(L),I):T(L)}function M(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),i=L,H):Ye(L)?(o=M,G(L)):mt(L)?(t.consume(L),M):(t.consume(L),q)}function H(L){return L===i?(t.consume(L),i=void 0,W):L===null?n(L):Ye(L)?(o=H,G(L)):(t.consume(L),H)}function q(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||Ut(L)?T(L):(t.consume(L),q)}function W(L){return L===47||L===62||Ut(L)?T(L):n(L)}function K(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),e):n(L)}function G(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),$}function $(L){return mt(L)?Et(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):te(L)}function te(L){return t.enter("htmlTextData"),o(L)}}const sy={name:"labelEnd",resolveAll:JB,resolveTo:e8,tokenize:t8},YB={tokenize:n8},ZB={tokenize:r8},QB={tokenize:i8};function JB(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&vr(t,0,t.length,n),t}function e8(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=Dr(a,t.slice(s+1,s+r+3)),a=Dr(a,[["enter",d,e]]),a=Dr(a,Rh(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Dr(a,[["exit",d,e],t[o-2],t[o-1],["exit",u,e]]),a=Dr(a,t.slice(o+1)),a=Dr(a,[["exit",l,e]]),vr(t,s,t.length,a),t}function t8(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(h){return s?s._inactive?c(h):(o=r.parser.defined.includes(Gr(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(YB,d,o?d:c)(h):h===91?t.attempt(ZB,d,o?u:c)(h):o?d(h):c(h)}function u(h){return t.attempt(QB,d,c)(h)}function d(h){return e(h)}function c(h){return s._balanced=!0,n(h)}}function n8(t,e,n){return r;function r(c){return t.enter("resource"),t.enter("resourceMarker"),t.consume(c),t.exit("resourceMarker"),i}function i(c){return Ut(c)?jl(t,s)(c):s(c)}function s(c){return c===41?d(c):ZC(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function o(c){return Ut(c)?jl(t,l)(c):d(c)}function a(c){return n(c)}function l(c){return c===34||c===39||c===40?JC(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):d(c)}function u(c){return Ut(c)?jl(t,d)(c):d(c)}function d(c){return c===41?(t.enter("resourceMarker"),t.consume(c),t.exit("resourceMarker"),t.exit("resource"),e):n(c)}}function r8(t,e,n){const r=this;return i;function i(a){return QC.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Gr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function i8(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const s8={name:"labelStartImage",resolveAll:sy.resolveAll,tokenize:o8};function o8(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const a8={name:"labelStartLink",resolveAll:sy.resolveAll,tokenize:l8};function l8(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Zp={name:"lineEnding",tokenize:u8};function u8(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Et(t,e,"linePrefix")}}const pd={name:"thematicBreak",tokenize:c8};function c8(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Ye(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),mt(u)?Et(t,a,"whitespace")(u):a(u))}}const Gn={continuation:{tokenize:p8},exit:g8,name:"list",tokenize:h8},d8={partial:!0,tokenize:v8},f8={partial:!0,tokenize:m8};function h8(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const v=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Hg(f)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(pd,n,u)(f):u(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return Hg(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),u(f)):n(f)}function u(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Ku,r.interrupt?n:d,t.attempt(d8,h,c))}function d(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function c(f){return mt(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function p8(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Ku,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Et(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!mt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(f8,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Et(t,t.attempt(Gn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function m8(t,e,n){const r=this;return Et(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function g8(t){t.exit(this.containerState.type)}function v8(t,e,n){const r=this;return Et(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!mt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const n2={name:"setextUnderline",resolveTo:y8,tokenize:x8};function y8(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function x8(t,e,n){const r=this;let i;return s;function s(u){let d=r.events.length,c;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){c=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||c)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),mt(u)?Et(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Ye(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const w8={tokenize:D8,partial:!0};function b8(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:_8,continuation:{tokenize:C8},exit:A8}},text:{91:{name:"gfmFootnoteCall",tokenize:E8},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:S8,resolveTo:k8}}}}function S8(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=Gr(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function k8(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function E8(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(c){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),l}function l(c){return c!==94?n(c):(t.enter("gfmFootnoteCallMarker"),t.consume(c),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(c){if(s>999||c===93&&!o||c===null||c===91||Ut(c))return n(c);if(c===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return i.includes(Gr(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(c)}return Ut(c)||(o=!0),s++,t.consume(c),c===92?d:u}function d(c){return c===91||c===92||c===93?(t.consume(c),s++,u):u(c)}}function _8(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(v)}function d(v){if(o>999||v===93&&!a||v===null||v===91||Ut(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return s=Gr(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Ut(v)||(a=!0),o++,t.consume(v),v===92?c:d}function c(v){return v===91||v===92||v===93?(t.consume(v),o++,d):d(v)}function h(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),Et(t,f,"gfmFootnoteDefinitionWhitespace")):n(v)}function f(v){return e(v)}}function C8(t,e,n){return t.check(Ku,e,t.attempt(w8,e,n))}function A8(t){t.exit("gfmFootnoteDefinition")}function D8(t,e,n){const r=this;return Et(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function N8(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},c={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",d,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",c,a]],f=a.parser.constructs.insideSpan.null;f&&vr(h,h.length,0,Rh(f,o.slice(u+1,l),a)),vr(h,h.length,0,[["exit",c,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",d,a]]),vr(o,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,d=this.events;let c=0;return h;function h(v){return u===126&&d[d.length-1][1].type!=="characterEscape"?l(v):(o.enter("strikethroughSequenceTemporary"),f(v))}function f(v){const x=Aa(u);if(v===126)return c>1?l(v):(o.consume(v),c++,f);if(c<2&&!n)return l(v);const g=o.exit("strikethroughSequenceTemporary"),p=Aa(v);return g._open=!p||p===2&&!!x,g._close=!x||x===2&&!!p,a(v)}}}class T8{constructor(){this.map=[]}add(e,n,r){R8(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function R8(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function I8(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function L8(){return{flow:{null:{name:"table",tokenize:P8,resolveAll:O8}}}}function P8(t,e,n){const r=this;let i=0,s=0,o;return a;function a(C){let I=r.events.length-1;for(;I>-1;){const q=r.events[I][1].type;if(q==="lineEnding"||q==="linePrefix")I--;else break}const M=I>-1?r.events[I][1].type:null,H=M==="tableHead"||M==="tableRow"?S:l;return H===S&&r.parser.lazy[r.now().line]?n(C):H(C)}function l(C){return t.enter("tableHead"),t.enter("tableRow"),u(C)}function u(C){return C===124||(o=!0,s+=1),d(C)}function d(C){return C===null?n(C):Ye(C)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),f):n(C):mt(C)?Et(t,d,"whitespace")(C):(s+=1,o&&(o=!1,i+=1),C===124?(t.enter("tableCellDivider"),t.consume(C),t.exit("tableCellDivider"),o=!0,d):(t.enter("data"),c(C)))}function c(C){return C===null||C===124||Ut(C)?(t.exit("data"),d(C)):(t.consume(C),C===92?h:c)}function h(C){return C===92||C===124?(t.consume(C),c):c(C)}function f(C){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(C):(t.enter("tableDelimiterRow"),o=!1,mt(C)?Et(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):v(C))}function v(C){return C===45||C===58?g(C):C===124?(o=!0,t.enter("tableCellDivider"),t.consume(C),t.exit("tableCellDivider"),x):E(C)}function x(C){return mt(C)?Et(t,g,"whitespace")(C):g(C)}function g(C){return C===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(C),t.exit("tableDelimiterMarker"),p):C===45?(s+=1,p(C)):C===null||Ye(C)?_(C):E(C)}function p(C){return C===45?(t.enter("tableDelimiterFiller"),m(C)):E(C)}function m(C){return C===45?(t.consume(C),m):C===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(C),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(C))}function w(C){return mt(C)?Et(t,_,"whitespace")(C):_(C)}function _(C){return C===124?v(C):C===null||Ye(C)?!o||i!==s?E(C):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(C)):E(C)}function E(C){return n(C)}function S(C){return t.enter("tableRow"),b(C)}function b(C){return C===124?(t.enter("tableCellDivider"),t.consume(C),t.exit("tableCellDivider"),b):C===null||Ye(C)?(t.exit("tableRow"),e(C)):mt(C)?Et(t,b,"whitespace")(C):(t.enter("data"),D(C))}function D(C){return C===null||C===124||Ut(C)?(t.exit("data"),b(C)):(t.consume(C),C===92?T:D)}function T(C){return C===92||C===124?(t.consume(C),D):D(C)}}function O8(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,d,c;const h=new T8;for(;++n<t.length;){const f=t[n],v=f[1];f[0]==="enter"?v.type==="tableHead"?(a=!1,l!==0&&(r2(h,e,l,u,d),d=void 0,l=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},h.add(n,0,[["enter",u,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,c=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},h.add(n,0,[["enter",d,e]])),i=v.type==="tableDelimiterRow"?2:d?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],c=Rc(h,e,s,i,void 0,c),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],c=Rc(h,e,s,i,void 0,c)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(a=!0,l=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],c=Rc(h,e,s,i,n,c)):o[1]!==0&&(c=Rc(h,e,o,i,n,c)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&r2(h,e,l,u,d),h.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=I8(e.events,n))}return t}function Rc(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Fo(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Fo(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Fo(e.events,n[2]),d=Fo(e.events,n[3]),c={type:a,start:Object.assign({},u),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",c,e]]),r!==2){const h=e.events[n[2]],f=e.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",c,e]])}return i!==void 0&&(s.end=Object.assign({},Fo(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function r2(t,e,n,r,i){const s=[],o=Fo(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Fo(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const M8={name:"tasklistCheck",tokenize:F8};function j8(){return{text:{91:M8}}}function F8(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Ut(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Ye(l)?e(l):mt(l)?t.check({tokenize:B8},e,n)(l):n(l)}}function B8(t,e,n){return Et(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function z8(t){return FC([Y6(),b8(),N8(t),L8(),j8()])}const U8={};function $8(t){const e=this,n=t||U8,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(z8(n)),s.push(H6()),o.push(V6(n))}function W8(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const H8=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,V8=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,q8={};function i2(t,e){return(q8.jsx?V8:H8).test(t)}const K8=/[ \t\n\f\r]/g;function X8(t){return typeof t=="object"?t.type==="text"?s2(t.value):!1:s2(t)}function s2(t){return t.replace(K8,"")===""}class Xu{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Xu.prototype.normal={};Xu.prototype.property={};Xu.prototype.space=void 0;function eA(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Xu(n,r,e)}function Xg(t){return t.toLowerCase()}class or{constructor(e,n){this.attribute=n,this.property=e}}or.prototype.attribute="";or.prototype.booleanish=!1;or.prototype.boolean=!1;or.prototype.commaOrSpaceSeparated=!1;or.prototype.commaSeparated=!1;or.prototype.defined=!1;or.prototype.mustUseProperty=!1;or.prototype.number=!1;or.prototype.overloadedBoolean=!1;or.prototype.property="";or.prototype.spaceSeparated=!1;or.prototype.space=void 0;let G8=0;const lt=vo(),cn=vo(),Gg=vo(),Se=vo(),$t=vo(),ua=vo(),lr=vo();function vo(){return 2**++G8}const Yg=Object.freeze(Object.defineProperty({__proto__:null,boolean:lt,booleanish:cn,commaOrSpaceSeparated:lr,commaSeparated:ua,number:Se,overloadedBoolean:Gg,spaceSeparated:$t},Symbol.toStringTag,{value:"Module"})),Qp=Object.keys(Yg);class oy extends or{constructor(e,n,r,i){let s=-1;if(super(e,n),o2(this,"space",i),typeof r=="number")for(;++s<Qp.length;){const o=Qp[s];o2(this,Qp[s],(r&Yg[o])===Yg[o])}}}oy.prototype.defined=!0;function o2(t,e,n){n&&(t[e]=n)}function Pa(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new oy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Xg(r)]=r,n[Xg(s.attribute)]=r}return new Xu(e,n,t.space)}const tA=Pa({properties:{ariaActiveDescendant:null,ariaAtomic:cn,ariaAutoComplete:null,ariaBusy:cn,ariaChecked:cn,ariaColCount:Se,ariaColIndex:Se,ariaColSpan:Se,ariaControls:$t,ariaCurrent:null,ariaDescribedBy:$t,ariaDetails:null,ariaDisabled:cn,ariaDropEffect:$t,ariaErrorMessage:null,ariaExpanded:cn,ariaFlowTo:$t,ariaGrabbed:cn,ariaHasPopup:null,ariaHidden:cn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:$t,ariaLevel:Se,ariaLive:null,ariaModal:cn,ariaMultiLine:cn,ariaMultiSelectable:cn,ariaOrientation:null,ariaOwns:$t,ariaPlaceholder:null,ariaPosInSet:Se,ariaPressed:cn,ariaReadOnly:cn,ariaRelevant:null,ariaRequired:cn,ariaRoleDescription:$t,ariaRowCount:Se,ariaRowIndex:Se,ariaRowSpan:Se,ariaSelected:cn,ariaSetSize:Se,ariaSort:null,ariaValueMax:Se,ariaValueMin:Se,ariaValueNow:Se,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function nA(t,e){return e in t?t[e]:e}function rA(t,e){return nA(t,e.toLowerCase())}const Y8=Pa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ua,acceptCharset:$t,accessKey:$t,action:null,allow:null,allowFullScreen:lt,allowPaymentRequest:lt,allowUserMedia:lt,alt:null,as:null,async:lt,autoCapitalize:null,autoComplete:$t,autoFocus:lt,autoPlay:lt,blocking:$t,capture:null,charSet:null,checked:lt,cite:null,className:$t,cols:Se,colSpan:null,content:null,contentEditable:cn,controls:lt,controlsList:$t,coords:Se|ua,crossOrigin:null,data:null,dateTime:null,decoding:null,default:lt,defer:lt,dir:null,dirName:null,disabled:lt,download:Gg,draggable:cn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:lt,formTarget:null,headers:$t,height:Se,hidden:Gg,high:Se,href:null,hrefLang:null,htmlFor:$t,httpEquiv:$t,id:null,imageSizes:null,imageSrcSet:null,inert:lt,inputMode:null,integrity:null,is:null,isMap:lt,itemId:null,itemProp:$t,itemRef:$t,itemScope:lt,itemType:$t,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:lt,low:Se,manifest:null,max:null,maxLength:Se,media:null,method:null,min:null,minLength:Se,multiple:lt,muted:lt,name:null,nonce:null,noModule:lt,noValidate:lt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:lt,optimum:Se,pattern:null,ping:$t,placeholder:null,playsInline:lt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:lt,referrerPolicy:null,rel:$t,required:lt,reversed:lt,rows:Se,rowSpan:Se,sandbox:$t,scope:null,scoped:lt,seamless:lt,selected:lt,shadowRootClonable:lt,shadowRootDelegatesFocus:lt,shadowRootMode:null,shape:null,size:Se,sizes:null,slot:null,span:Se,spellCheck:cn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Se,step:null,style:null,tabIndex:Se,target:null,title:null,translate:null,type:null,typeMustMatch:lt,useMap:null,value:cn,width:Se,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:$t,axis:null,background:null,bgColor:null,border:Se,borderColor:null,bottomMargin:Se,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:lt,declare:lt,event:null,face:null,frame:null,frameBorder:null,hSpace:Se,leftMargin:Se,link:null,longDesc:null,lowSrc:null,marginHeight:Se,marginWidth:Se,noResize:lt,noHref:lt,noShade:lt,noWrap:lt,object:null,profile:null,prompt:null,rev:null,rightMargin:Se,rules:null,scheme:null,scrolling:cn,standby:null,summary:null,text:null,topMargin:Se,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Se,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:lt,disableRemotePlayback:lt,prefix:null,property:null,results:Se,security:null,unselectable:null},space:"html",transform:rA}),Z8=Pa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:lr,accentHeight:Se,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Se,amplitude:Se,arabicForm:null,ascent:Se,attributeName:null,attributeType:null,azimuth:Se,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Se,by:null,calcMode:null,capHeight:Se,className:$t,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Se,diffuseConstant:Se,direction:null,display:null,dur:null,divisor:Se,dominantBaseline:null,download:lt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Se,enableBackground:null,end:null,event:null,exponent:Se,externalResourcesRequired:null,fill:null,fillOpacity:Se,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ua,g2:ua,glyphName:ua,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Se,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Se,horizOriginX:Se,horizOriginY:Se,id:null,ideographic:Se,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Se,k:Se,k1:Se,k2:Se,k3:Se,k4:Se,kernelMatrix:lr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Se,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Se,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Se,overlineThickness:Se,paintOrder:null,panose1:null,path:null,pathLength:Se,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:$t,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Se,pointsAtY:Se,pointsAtZ:Se,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lr,rev:lr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lr,requiredFeatures:lr,requiredFonts:lr,requiredFormats:lr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Se,specularExponent:Se,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Se,strikethroughThickness:Se,string:null,stroke:null,strokeDashArray:lr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Se,strokeOpacity:Se,strokeWidth:null,style:null,surfaceScale:Se,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lr,tabIndex:Se,tableValues:null,target:null,targetX:Se,targetY:Se,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Se,underlineThickness:Se,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Se,values:null,vAlphabetic:Se,vMathematical:Se,vectorEffect:null,vHanging:Se,vIdeographic:Se,version:null,vertAdvY:Se,vertOriginX:Se,vertOriginY:Se,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Se,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:nA}),iA=Pa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),sA=Pa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:rA}),oA=Pa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Q8={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},J8=/[A-Z]/g,a2=/-[a-z]/g,ez=/^data[-\w.:]+$/i;function tz(t,e){const n=Xg(e);let r=e,i=or;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ez.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(a2,rz);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!a2.test(s)){let o=s.replace(J8,nz);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=oy}return new i(r,e)}function nz(t){return"-"+t.toLowerCase()}function rz(t){return t.charAt(1).toUpperCase()}const iz=eA([tA,Y8,iA,sA,oA],"html"),ay=eA([tA,Z8,iA,sA,oA],"svg");function sz(t){return t.join(" ").trim()}var ly={},l2=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,oz=/\n/g,az=/^\s*/,lz=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,uz=/^:\s*/,cz=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,dz=/^[;\s]*/,fz=/^\s+|\s+$/g,hz=`
`,u2="/",c2="*",Ks="",pz="comment",mz="declaration";function gz(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(v){var x=v.match(oz);x&&(n+=x.length);var g=v.lastIndexOf(hz);r=~g?v.length-g:r+v.length}function s(){var v={line:n,column:r};return function(x){return x.position=new o(v),u(),x}}function o(v){this.start=v,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(v){var x=new Error(e.source+":"+n+":"+r+": "+v);if(x.reason=v,x.filename=e.source,x.line=n,x.column=r,x.source=t,!e.silent)throw x}function l(v){var x=v.exec(t);if(x){var g=x[0];return i(g),t=t.slice(g.length),x}}function u(){l(az)}function d(v){var x;for(v=v||[];x=c();)x!==!1&&v.push(x);return v}function c(){var v=s();if(!(u2!=t.charAt(0)||c2!=t.charAt(1))){for(var x=2;Ks!=t.charAt(x)&&(c2!=t.charAt(x)||u2!=t.charAt(x+1));)++x;if(x+=2,Ks===t.charAt(x-1))return a("End of comment missing");var g=t.slice(2,x-2);return r+=2,i(g),t=t.slice(x),r+=2,v({type:pz,comment:g})}}function h(){var v=s(),x=l(lz);if(x){if(c(),!l(uz))return a("property missing ':'");var g=l(cz),p=v({type:mz,property:d2(x[0].replace(l2,Ks)),value:g?d2(g[0].replace(l2,Ks)):Ks});return l(dz),p}}function f(){var v=[];d(v);for(var x;x=h();)x!==!1&&(v.push(x),d(v));return v}return u(),f()}function d2(t){return t?t.replace(fz,Ks):Ks}var vz=gz,yz=Dn&&Dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ly,"__esModule",{value:!0});ly.default=wz;const xz=yz(vz);function wz(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,xz.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.camelCase=void 0;var bz=/^--[a-zA-Z0-9_-]+$/,Sz=/-([a-z])/g,kz=/^[^-]+$/,Ez=/^-(webkit|moz|ms|o|khtml)-/,_z=/^-(ms)-/,Cz=function(t){return!t||kz.test(t)||bz.test(t)},Az=function(t,e){return e.toUpperCase()},f2=function(t,e){return"".concat(e,"-")},Dz=function(t,e){return e===void 0&&(e={}),Cz(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(_z,f2):t=t.replace(Ez,f2),t.replace(Sz,Az))};Ih.camelCase=Dz;var Nz=Dn&&Dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Tz=Nz(ly),Rz=Ih;function Zg(t,e){var n={};return!t||typeof t!="string"||(0,Tz.default)(t,function(r,i){r&&i&&(n[(0,Rz.camelCase)(r,e)]=i)}),n}Zg.default=Zg;var Iz=Zg;const Lz=Jr(Iz),aA=lA("end"),uy=lA("start");function lA(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Pz(t){const e=uy(t),n=aA(t);if(e&&n)return{start:e,end:n}}function Fl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?h2(t.position):"start"in t||"end"in t?h2(t):"line"in t||"column"in t?Qg(t):""}function Qg(t){return p2(t&&t.line)+":"+p2(t&&t.column)}function h2(t){return Qg(t&&t.start)+"-"+Qg(t&&t.end)}function p2(t){return t&&typeof t=="number"?t:1}class zn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Fl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zn.prototype.file="";zn.prototype.name="";zn.prototype.reason="";zn.prototype.message="";zn.prototype.stack="";zn.prototype.column=void 0;zn.prototype.line=void 0;zn.prototype.ancestors=void 0;zn.prototype.cause=void 0;zn.prototype.fatal=void 0;zn.prototype.place=void 0;zn.prototype.ruleId=void 0;zn.prototype.source=void 0;const cy={}.hasOwnProperty,Oz=new Map,Mz=/[A-Z]/g,jz=new Set(["table","tbody","thead","tfoot","tr"]),Fz=new Set(["td","th"]),uA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Bz(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Kz(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=qz(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ay:iz,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=cA(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function cA(t,e,n){if(e.type==="element")return zz(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Uz(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Wz(t,e,n);if(e.type==="mdxjsEsm")return $z(t,e);if(e.type==="root")return Hz(t,e,n);if(e.type==="text")return Vz(t,e)}function zz(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ay,t.schema=i),t.ancestors.push(e);const s=fA(t,e.tagName,!1),o=Xz(t,e);let a=fy(t,e);return jz.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!X8(l):!0})),dA(t,o,s,e),dy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Uz(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}_u(t,e.position)}function $z(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);_u(t,e.position)}function Wz(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=ay,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:fA(t,e.name,!0),o=Gz(t,e),a=fy(t,e);return dA(t,o,s,e),dy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Hz(t,e,n){const r={};return dy(r,fy(t,e)),t.create(e,t.Fragment,r,n)}function Vz(t,e){return e.value}function dA(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function dy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function qz(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function Kz(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=uy(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Xz(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&cy.call(e.properties,i)){const s=Yz(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Fz.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Gz(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else _u(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else _u(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function fy(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Oz;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=cA(t,s,o);a!==void 0&&n.push(a)}return n}function Yz(t,e,n){const r=tz(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?W8(n):sz(n)),r.property==="style"){let i=typeof n=="object"?n:Zz(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Qz(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Q8[r.property]||r.property:r.attribute,n]}}function Zz(t,e){try{return Lz(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new zn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=uA+"#cannot-parse-style-attribute",i}}function fA(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=i2(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=i2(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return cy.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);_u(t)}function _u(t,e){const n=new zn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=uA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Qz(t){const e={};let n;for(n in t)cy.call(t,n)&&(e[Jz(n)]=t[n]);return e}function Jz(t){let e=t.replace(Mz,e7);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function e7(t){return"-"+t.toLowerCase()}const Jp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},t7={tokenize:n7};function n7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Et(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Ye(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const r7={tokenize:i7},m2={tokenize:s7};function i7(t){const e=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const _=n[r];return e.containerState=_[1],t.attempt(_[0].continuation,l,u)(w)}return u(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&m();const _=e.events.length;let E=_,S;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){S=e.events[E][1].end;break}p(r);let b=_;for(;b<e.events.length;)e.events[b][1].end={...S},b++;return vr(e.events,E+1,0,e.events.slice(_)),e.events.length=b,u(w)}return a(w)}function u(w){if(r===n.length){if(!i)return h(w);if(i.currentConstruct&&i.currentConstruct.concrete)return v(w);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(m2,d,c)(w)}function d(w){return i&&m(),p(r),h(w)}function c(w){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,v(w)}function h(w){return e.containerState={},t.attempt(m2,f,v)(w)}function f(w){return r++,n.push([e.currentConstruct,e.containerState]),h(w)}function v(w){if(w===null){i&&m(),p(0),t.consume(w);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(w)}function x(w){if(w===null){g(t.exit("chunkFlow"),!0),p(0),t.consume(w);return}return Ye(w)?(t.consume(w),g(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(w),x)}function g(w,_){const E=e.sliceStream(w);if(_&&E.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(E),e.parser.lazy[w.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const b=e.events.length;let D=b,T,C;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(T){C=e.events[D][1].end;break}T=!0}for(p(r),S=b;S<e.events.length;)e.events[S][1].end={...C},S++;vr(e.events,D+1,0,e.events.slice(b)),e.events.length=S}}function p(w){let _=n.length;for(;_-- >w;){const E=n[_];e.containerState=E[1],E[0].exit.call(e,t)}n.length=w}function m(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function s7(t,e,n){return Et(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const o7={tokenize:a7};function a7(t){const e=this,n=t.attempt(Ku,r,t.attempt(this.parser.constructs.flowInitial,i,Et(t,t.attempt(this.parser.constructs.flow,i,t.attempt(CB,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const l7={resolveAll:pA()},u7=hA("string"),c7=hA("text");function hA(t){return{resolveAll:pA(t==="text"?d7:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return u(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function u(d){if(d===null)return!0;const c=i[d];let h=-1;if(c)for(;++h<c.length;){const f=c[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function pA(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function d7(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const f7={42:Gn,43:Gn,45:Gn,48:Gn,49:Gn,50:Gn,51:Gn,52:Gn,53:Gn,54:Gn,55:Gn,56:Gn,57:Gn,62:KC},h7={91:RB},p7={[-2]:Yp,[-1]:Yp,32:Yp},m7={35:jB,42:pd,45:[n2,pd],60:UB,61:n2,95:pd,96:e2,126:e2},g7={38:GC,92:XC},v7={[-5]:Zp,[-4]:Zp,[-3]:Zp,33:s8,38:GC,42:Kg,60:[aB,XB],91:a8,92:[OB,XC],93:sy,95:Kg,96:wB},y7={null:[Kg,l7]},x7={null:[42,95]},w7={null:[]},b7=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:x7,contentInitial:h7,disable:w7,document:f7,flow:m7,flowInitial:p7,insideSpan:y7,string:g7,text:v7},Symbol.toStringTag,{value:"Module"}));function S7(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:b(E),check:b(S),consume:m,enter:w,exit:_,interrupt:b(S,{interrupt:!0})},u={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:h,sliceStream:f,write:c};let d=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function c(I){return o=Dr(o,I),g(),o[o.length-1]!==null?[]:(D(e,0),u.events=Rh(s,u.events,u),u.events)}function h(I,M){return E7(f(I),M)}function f(I){return k7(o,I)}function v(){const{_bufferIndex:I,_index:M,line:H,column:q,offset:W}=r;return{_bufferIndex:I,_index:M,line:H,column:q,offset:W}}function x(I){i[I.line]=I.column,C()}function g(){let I;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<M.length;)p(M.charCodeAt(r._bufferIndex));else p(M)}}function p(I){d=d(I)}function m(I){Ye(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,C()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=I}function w(I,M){const H=M||{};return H.type=I,H.start=v(),u.events.push(["enter",H,u]),a.push(H),H}function _(I){const M=a.pop();return M.end=v(),u.events.push(["exit",M,u]),M}function E(I,M){D(I,M.from)}function S(I,M){M.restore()}function b(I,M){return H;function H(q,W,K){let G,$,te,L;return Array.isArray(q)?oe(q):"tokenize"in q?oe([q]):ce(q);function ce(Ne){return He;function He(le){const Pe=le!==null&&Ne[le],ve=le!==null&&Ne.null,ke=[...Array.isArray(Pe)?Pe:Pe?[Pe]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return oe(ke)(le)}}function oe(Ne){return G=Ne,$=0,Ne.length===0?K:F(Ne[$])}function F(Ne){return He;function He(le){return L=T(),te=Ne,Ne.partial||(u.currentConstruct=Ne),Ne.name&&u.parser.constructs.disable.null.includes(Ne.name)?Fe():Ne.tokenize.call(M?Object.assign(Object.create(u),M):u,l,xe,Fe)(le)}}function xe(Ne){return I(te,L),W}function Fe(Ne){return L.restore(),++$<G.length?F(G[$]):K}}}function D(I,M){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&vr(u.events,M,u.events.length-M,I.resolve(u.events.slice(M),u)),I.resolveTo&&(u.events=I.resolveTo(u.events,u))}function T(){const I=v(),M=u.previous,H=u.currentConstruct,q=u.events.length,W=Array.from(a);return{from:q,restore:K};function K(){r=I,u.previous=M,u.currentConstruct=H,u.events.length=q,a=W,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function k7(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function E7(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function _7(t){const r={constructs:FC([b7,...(t||{}).extensions||[]]),content:i(t7),defined:[],document:i(r7),flow:i(o7),lazy:{},string:i(u7),text:i(c7)};return r;function i(s){return o;function o(a){return S7(r,s,a)}}}function C7(t){for(;!YC(t););return t}const g2=/[\0\t\n\r]/g;function A7(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,d,c,h,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),c=0,e="",n&&(s.charCodeAt(0)===65279&&c++,n=void 0);c<s.length;){if(g2.lastIndex=c,u=g2.exec(s),h=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(h),!u){e=s.slice(c);break}if(f===10&&c===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),c<h&&(l.push(s.slice(c,h)),t+=h-c),f){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}c=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const mA={}.hasOwnProperty;function D7(t,e,n){return typeof e!="string"&&(n=e,e=void 0),N7(n)(C7(_7(n).document().write(A7()(t,e,!0))))}function N7(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Tt),autolinkProtocol:T,autolinkEmail:T,atxHeading:s(ft),blockQuote:s(ve),characterEscape:T,characterReference:T,codeFenced:s(ke),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ke,o),codeText:s(Ue,o),codeTextData:T,data:T,codeFlowValue:T,definition:s(Ve),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ot),hardBreakEscape:s(vt),hardBreakTrailing:s(vt),htmlFlow:s(at,o),htmlFlowData:T,htmlText:s(at,o),htmlTextData:T,image:s(Ct),label:o,link:s(Tt),listItem:s(Rt),listItemValue:h,listOrdered:s(Dt,c),listUnordered:s(Dt),paragraph:s(ut),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ft),strong:s(Je),thematicBreak:s(rn)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:Pe,autolinkProtocol:le,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:Fe,characterReferenceMarkerNumeric:Fe,characterReferenceValue:Ne,characterReference:He,codeFenced:l(g),codeFencedFence:x,codeFencedFenceInfo:f,codeFencedFenceMeta:v,codeFlowValue:C,codeIndented:l(p),codeText:l(W),codeTextData:C,data:C,definition:l(),definitionDestinationString:_,definitionLabelString:m,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(M),hardBreakTrailing:l(M),htmlFlow:l(H),htmlFlowData:C,htmlText:l(q),htmlTextData:C,image:l(G),label:te,labelText:$,lineEnding:I,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:xe,resourceDestinationString:L,resourceTitleString:ce,resource:oe,setextHeading:l(D),setextHeadingLineSequence:b,setextHeadingText:S,strong:l(),thematicBreak:l()}};gA(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ae){let me={type:"root",children:[]};const Be={stack:[me],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:d,data:n},We=[];let Ze=-1;for(;++Ze<ae.length;)if(ae[Ze][1].type==="listOrdered"||ae[Ze][1].type==="listUnordered")if(ae[Ze][0]==="enter")We.push(Ze);else{const pt=We.pop();Ze=i(ae,pt,Ze)}for(Ze=-1;++Ze<ae.length;){const pt=e[ae[Ze][0]];mA.call(pt,ae[Ze][1].type)&&pt[ae[Ze][1].type].call(Object.assign({sliceSerialize:ae[Ze][2].sliceSerialize},Be),ae[Ze][1])}if(Be.tokenStack.length>0){const pt=Be.tokenStack[Be.tokenStack.length-1];(pt[1]||v2).call(Be,void 0,pt[0])}for(me.position={start:ns(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:ns(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Ze=-1;++Ze<e.transforms.length;)me=e.transforms[Ze](me)||me;return me}function i(ae,me,Be){let We=me-1,Ze=-1,pt=!1,Bt,it,Ft,Yt;for(;++We<=Be;){const O=ae[We];switch(O[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{O[0]==="enter"?Ze++:Ze--,Yt=void 0;break}case"lineEndingBlank":{O[0]==="enter"&&(Bt&&!Yt&&!Ze&&!Ft&&(Ft=We),Yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Yt=void 0}if(!Ze&&O[0]==="enter"&&O[1].type==="listItemPrefix"||Ze===-1&&O[0]==="exit"&&(O[1].type==="listUnordered"||O[1].type==="listOrdered")){if(Bt){let fe=We;for(it=void 0;fe--;){const pe=ae[fe];if(pe[1].type==="lineEnding"||pe[1].type==="lineEndingBlank"){if(pe[0]==="exit")continue;it&&(ae[it][1].type="lineEndingBlank",pt=!0),pe[1].type="lineEnding",it=fe}else if(!(pe[1].type==="linePrefix"||pe[1].type==="blockQuotePrefix"||pe[1].type==="blockQuotePrefixWhitespace"||pe[1].type==="blockQuoteMarker"||pe[1].type==="listItemIndent"))break}Ft&&(!it||Ft<it)&&(Bt._spread=!0),Bt.end=Object.assign({},it?ae[it][1].start:O[1].end),ae.splice(it||We,0,["exit",Bt,O[2]]),We++,Be++}if(O[1].type==="listItemPrefix"){const fe={type:"listItem",_spread:!1,start:Object.assign({},O[1].start),end:void 0};Bt=fe,ae.splice(We,0,["enter",fe,O[2]]),We++,Be++,Ft=void 0,Yt=!0}}}return ae[me][1]._spread=pt,Be}function s(ae,me){return Be;function Be(We){a.call(this,ae(We),We),me&&me.call(this,We)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ae,me,Be){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([me,Be||void 0]),ae.position={start:ns(me.start),end:void 0}}function l(ae){return me;function me(Be){ae&&ae.call(this,Be),u.call(this,Be)}}function u(ae,me){const Be=this.stack.pop(),We=this.tokenStack.pop();if(We)We[0].type!==ae.type&&(me?me.call(this,ae,We[0]):(We[1]||v2).call(this,ae,We[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Fl({start:ae.start,end:ae.end})+"): its not open");Be.position.end=ns(ae.end)}function d(){return ty(this.stack.pop())}function c(){this.data.expectingFirstListItemValue=!0}function h(ae){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function f(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.lang=ae}function v(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.meta=ae}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function p(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.value=ae.replace(/(\r?\n|\r)$/g,"")}function m(ae){const me=this.resume(),Be=this.stack[this.stack.length-1];Be.label=me,Be.identifier=Gr(this.sliceSerialize(ae)).toLowerCase()}function w(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.title=ae}function _(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.url=ae}function E(ae){const me=this.stack[this.stack.length-1];if(!me.depth){const Be=this.sliceSerialize(ae).length;me.depth=Be}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function b(ae){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function T(ae){const Be=this.stack[this.stack.length-1].children;let We=Be[Be.length-1];(!We||We.type!=="text")&&(We=It(),We.position={start:ns(ae.start),end:void 0},Be.push(We)),this.stack.push(We)}function C(ae){const me=this.stack.pop();me.value+=this.sliceSerialize(ae),me.position.end=ns(ae.end)}function I(ae){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Be=me.children[me.children.length-1];Be.position.end=ns(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(me.type)&&(T.call(this,ae),C.call(this,ae))}function M(){this.data.atHardBreak=!0}function H(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.value=ae}function q(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.value=ae}function W(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.value=ae}function K(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=me,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function G(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=me,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function $(ae){const me=this.sliceSerialize(ae),Be=this.stack[this.stack.length-2];Be.label=R6(me),Be.identifier=Gr(me).toLowerCase()}function te(){const ae=this.stack[this.stack.length-1],me=this.resume(),Be=this.stack[this.stack.length-1];if(this.data.inReference=!0,Be.type==="link"){const We=ae.children;Be.children=We}else Be.alt=me}function L(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.url=ae}function ce(){const ae=this.resume(),me=this.stack[this.stack.length-1];me.title=ae}function oe(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function xe(ae){const me=this.resume(),Be=this.stack[this.stack.length-1];Be.label=me,Be.identifier=Gr(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function Fe(ae){this.data.characterReferenceType=ae.type}function Ne(ae){const me=this.sliceSerialize(ae),Be=this.data.characterReferenceType;let We;Be?(We=jC(me,Be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):We=ry(me);const Ze=this.stack[this.stack.length-1];Ze.value+=We}function He(ae){const me=this.stack.pop();me.position.end=ns(ae.end)}function le(ae){C.call(this,ae);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(ae)}function Pe(ae){C.call(this,ae);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(ae)}function ve(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function Ue(){return{type:"inlineCode",value:""}}function Ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function ft(){return{type:"heading",depth:0,children:[]}}function vt(){return{type:"break"}}function at(){return{type:"html",value:""}}function Ct(){return{type:"image",title:null,url:"",alt:null}}function Tt(){return{type:"link",title:null,url:"",children:[]}}function Dt(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Rt(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function It(){return{type:"text",value:""}}function rn(){return{type:"thematicBreak"}}}function ns(t){return{line:t.line,column:t.column,offset:t.offset}}function gA(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?gA(t,r):T7(t,r)}}function T7(t,e){let n;for(n in e)if(mA.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function v2(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Fl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Fl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Fl({start:e.start,end:e.end})+") is still open")}function R7(t){const e=this;e.parser=n;function n(r){return D7(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function I7(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function L7(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function P7(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function O7(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function M7(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function j7(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=La(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function F7(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function B7(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function vA(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function z7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return vA(t,e);const i={src:La(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function U7(t,e){const n={src:La(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function $7(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function W7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return vA(t,e);const i={href:La(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function H7(t,e){const n={href:La(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function V7(t,e,n){const r=t.all(e),i=n?q7(n):yA(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let c;d&&d.type==="element"&&d.tagName==="p"?c=d:(c={type:"element",tagName:"p",properties:{},children:[]},r.unshift(c)),c.children.length>0&&c.children.unshift({type:"text",value:" "}),c.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function q7(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=yA(n[r])}return e}function yA(t){const e=t.spread;return e??t.children.length>1}function K7(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function X7(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function G7(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Y7(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Z7(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=uy(e.children[1]),l=aA(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Q7(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const c=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let v={type:"element",tagName:s,properties:h,children:[]};c&&(v.children=t.all(c),t.patch(c,v),v=t.applyData(c,v)),u.push(v)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,d),t.applyData(e,d)}function J7(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const y2=9,x2=32;function e9(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(w2(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(w2(e.slice(i),i>0,!1)),s.join("")}function w2(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===y2||s===x2;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===y2||s===x2;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function t9(t,e){const n={type:"text",value:e9(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function n9(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const r9={blockquote:I7,break:L7,code:P7,delete:O7,emphasis:M7,footnoteReference:j7,heading:F7,html:B7,imageReference:z7,image:U7,inlineCode:$7,linkReference:W7,link:H7,listItem:V7,list:K7,paragraph:X7,root:G7,strong:Y7,table:Z7,tableCell:J7,tableRow:Q7,text:t9,thematicBreak:n9,toml:Ic,yaml:Ic,definition:Ic,footnoteDefinition:Ic};function Ic(){}const xA=-1,Lh=0,Bl=1,Df=2,hy=3,py=4,my=5,gy=6,wA=7,bA=8,b2=typeof self=="object"?self:globalThis,i9=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Lh:case xA:return n(o,i);case Bl:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Df:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case hy:return n(new Date(o),i);case py:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case my:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case gy:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case wA:{const{name:a,message:l}=o;return n(new b2[a](l),i)}case bA:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new b2[s](o),i)};return r},S2=t=>i9(new Map,t)(0),Do="",{toString:s9}={},{keys:o9}=Object,il=t=>{const e=typeof t;if(e!=="object"||!t)return[Lh,e];const n=s9.call(t).slice(8,-1);switch(n){case"Array":return[Bl,Do];case"Object":return[Df,Do];case"Date":return[hy,Do];case"RegExp":return[py,Do];case"Map":return[my,Do];case"Set":return[gy,Do];case"DataView":return[Bl,n]}return n.includes("Array")?[Bl,n]:n.includes("Error")?[wA,n]:[Df,n]},Lc=([t,e])=>t===Lh&&(e==="function"||e==="symbol"),a9=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=il(o);switch(a){case Lh:{let d=o;switch(l){case"bigint":a=bA,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([xA],o)}return i([a,d],o)}case Bl:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const d=[],c=i([a,d],o);for(const h of o)d.push(s(h));return c}case Df:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],c=i([a,d],o);for(const h of o9(o))(t||!Lc(il(o[h])))&&d.push([s(h),s(o[h])]);return c}case hy:return i([a,o.toISOString()],o);case py:{const{source:d,flags:c}=o;return i([a,{source:d,flags:c}],o)}case my:{const d=[],c=i([a,d],o);for(const[h,f]of o)(t||!(Lc(il(h))||Lc(il(f))))&&d.push([s(h),s(f)]);return c}case gy:{const d=[],c=i([a,d],o);for(const h of o)(t||!Lc(il(h)))&&d.push(s(h));return c}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},k2=(t,{json:e,lossy:n}={})=>{const r=[];return a9(!(e||n),!!e,new Map,r)(t),r},Nf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?S2(k2(t,e)):structuredClone(t):(t,e)=>S2(k2(t,e));function l9(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function u9(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function c9(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||l9,r=t.options.footnoteBackLabel||u9,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const d=t.all(u),c=String(u.identifier).toUpperCase(),h=La(c.toLowerCase());let f=0;const v=[],x=t.footnoteCounts.get(c);for(;x!==void 0&&++f<=x;){v.length>0&&v.push({type:"text",value:" "});let m=typeof n=="string"?n:n(l,f);typeof m=="string"&&(m={type:"text",value:m}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(m)?m:[m]})}const g=d[d.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const m=g.children[g.children.length-1];m&&m.type==="text"?m.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...v)}else d.push(...v);const p={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(d,!0)};t.patch(u,p),a.push(p)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Nf(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Jg={}.hasOwnProperty,d9={};function f9(t,e){const n=e||d9,r=new Map,i=new Map,s=new Map,o={...r9,...n.handlers},a={all:u,applyData:p9,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:h9,wrap:g9};return ey(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const c=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();c.has(h)||c.set(h,d)}}),a;function l(d,c){const h=d.type,f=a.handlers[h];if(Jg.call(a.handlers,h)&&f)return f(a,d,c);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in d){const{children:x,...g}=d,p=Nf(g);return p.children=a.all(d),p}return Nf(d)}return(a.options.unknownHandler||m9)(a,d,c)}function u(d){const c=[];if("children"in d){const h=d.children;let f=-1;for(;++f<h.length;){const v=a.one(h[f],d);if(v){if(f&&h[f-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=E2(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=E2(x.value))}Array.isArray(v)?c.push(...v):c.push(v)}}}return c}}function h9(t,e){t.position&&(e.position=Pz(t))}function p9(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Nf(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function m9(t,e){const n=e.data||{},r="value"in e&&!(Jg.call(n,"hProperties")||Jg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function g9(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function E2(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function _2(t,e){const n=f9(t,e),r=n.one(t,void 0),i=c9(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function v9(t,e){return t&&"run"in t?async function(n,r){const i=_2(n,{file:r,...e});await t.run(i,r)}:function(n,r){return _2(n,{file:r,...t||e})}}function C2(t){if(t)throw t}var md=Object.prototype.hasOwnProperty,SA=Object.prototype.toString,A2=Object.defineProperty,D2=Object.getOwnPropertyDescriptor,N2=function(e){return typeof Array.isArray=="function"?Array.isArray(e):SA.call(e)==="[object Array]"},T2=function(e){if(!e||SA.call(e)!=="[object Object]")return!1;var n=md.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&md.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||md.call(e,i)},R2=function(e,n){A2&&n.name==="__proto__"?A2(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},I2=function(e,n){if(n==="__proto__")if(md.call(e,n)){if(D2)return D2(e,n).value}else return;return e[n]},y9=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=I2(a,n),i=I2(e,n),a!==i&&(d&&i&&(T2(i)||(s=N2(i)))?(s?(s=!1,o=r&&N2(r)?r:[]):o=r&&T2(r)?r:{},R2(a,{name:n,newValue:t(d,o,i)})):typeof i<"u"&&R2(a,{name:n,newValue:i}));return a};const em=Jr(y9);function e0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function x9(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const d=t[++s];let c=-1;if(l){o(l);return}for(;++c<i.length;)(u[c]===null||u[c]===void 0)&&(u[c]=i[c]);i=u,d?w9(d,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function w9(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const d=u;if(a&&n)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const oi={basename:b9,dirname:S9,extname:k9,join:E9,sep:"/"};function b9(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Gu(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function S9(t){if(Gu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function k9(t){Gu(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function E9(...t){let e=-1,n;for(;++e<t.length;)Gu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":_9(n)}function _9(t){Gu(t);const e=t.codePointAt(0)===47;let n=C9(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function C9(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Gu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const A9={cwd:D9};function D9(){return"/"}function t0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function N9(t){if(typeof t=="string")t=new URL(t);else if(!t0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return T9(t)}function T9(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const tm=["history","path","basename","stem","extname","dirname"];class kA{constructor(e){let n;e?t0(e)?n={path:e}:typeof e=="string"||R9(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":A9.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<tm.length;){const s=tm[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)tm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?oi.basename(this.path):void 0}set basename(e){rm(e,"basename"),nm(e,"basename"),this.path=oi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?oi.dirname(this.path):void 0}set dirname(e){L2(this.basename,"dirname"),this.path=oi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?oi.extname(this.path):void 0}set extname(e){if(nm(e,"extname"),L2(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){t0(e)&&(e=N9(e)),rm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?oi.basename(this.path,this.extname):void 0}set stem(e){rm(e,"stem"),nm(e,"stem"),this.path=oi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new zn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function nm(t,e){if(t&&t.includes(oi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+oi.sep+"`")}function rm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function L2(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function R9(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const I9=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},L9={}.hasOwnProperty;class vy extends I9{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=x9()}copy(){const e=new vy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(em(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(om("data",this.frozen),this.namespace[e]=n,this):L9.call(this.namespace,e)&&this.namespace[e]||void 0:e?(om("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Pc(e),r=this.parser||this.Parser;return im("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),im("process",this.parser||this.Parser),sm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Pc(e),l=r.parse(a);r.run(l,a,function(d,c,h){if(d||!c||!h)return u(d);const f=c,v=r.stringify(f,h);M9(v)?h.value=v:h.result=v,u(d,h)});function u(d,c){d||!c?o(d):s?s(c):n(void 0,c)}}}processSync(e){let n=!1,r;return this.freeze(),im("processSync",this.parser||this.Parser),sm("processSync",this.compiler||this.Compiler),this.process(e,i),O2("processSync","process",n),r;function i(s,o){n=!0,C2(s),r=o}}run(e,n,r){P2(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Pc(n);i.run(e,l,u);function u(d,c,h){const f=c||e;d?a(d):o?o(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),O2("runSync","run",r),i;function s(o,a){C2(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Pc(n),i=this.compiler||this.Compiler;return sm("stringify",i),P2(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(om("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...c]=u;l(d,c)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=em(!0,i.settings,u.settings))}function a(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const c=u[d];s(c)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,d){let c=-1,h=-1;for(;++c<r.length;)if(r[c][0]===u){h=c;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[f,...v]=d;const x=r[h][1];e0(x)&&e0(f)&&(f=em(!0,x,f)),r[h]=[u,f,...v]}}}}const P9=new vy().freeze();function im(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function sm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function om(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function P2(t){if(!e0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function O2(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Pc(t){return O9(t)?t:new kA(t)}function O9(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function M9(t){return typeof t=="string"||j9(t)}function j9(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const F9="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",M2=[],j2={allowDangerousHtml:!0},B9=/^(https?|ircs?|mailto|xmpp)$/i,z9=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function U9(t){const e=$9(t),n=W9(t);return H9(e.runSync(e.parse(n),n),t)}function $9(t){const e=t.rehypePlugins||M2,n=t.remarkPlugins||M2,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...j2}:j2;return P9().use(R7).use(n).use(v9,r).use(e)}function W9(t){const e=t.children||"",n=new kA;return typeof e=="string"&&(n.value=e),n}function H9(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||V9;for(const d of z9)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+F9+d.id,void 0);return ey(t,u),Bz(t,{Fragment:y.Fragment,components:i,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function u(d,c,h){if(d.type==="raw"&&h&&typeof c=="number")return o?h.children.splice(c,1):h.children[c]={type:"text",value:d.value},c;if(d.type==="element"){let f;for(f in Jp)if(Object.hasOwn(Jp,f)&&Object.hasOwn(d.properties,f)){const v=d.properties[f],x=Jp[f];(x===null||x.includes(d.tagName))&&(d.properties[f]=l(String(v||""),f,d))}}if(d.type==="element"){let f=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!f&&r&&typeof c=="number"&&(f=!r(d,c,h)),f&&h&&typeof c=="number")return a&&d.children?h.children.splice(c,1,...d.children):h.children.splice(c,1),c}}}function V9(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||B9.test(t.slice(0,e))?t:""}const yy=t=>{const e=A.useMemo(()=>({strong:({children:n})=>y.jsx("strong",{className:"font-bold",children:n}),h1:({children:n})=>y.jsx("h1",{className:"my-4 border-b-2 border-gray-200 pb-2 text-2xl font-black text-gray-900",children:n}),h2:({children:n})=>y.jsx("h2",{className:"my-3 text-xl font-extrabold text-gray-800",children:n}),h3:({children:n})=>y.jsx("h3",{className:"my-2 text-lg font-bold text-gray-700",children:n}),p:({children:n})=>y.jsx("p",{className:"mb-3 leading-relaxed",children:n}),code:({children:n})=>y.jsx("code",{className:"rounded bg-gray-100 px-1 py-0.5 font-mono text-sm",children:n}),pre:({children:n})=>y.jsx("pre",{className:"mb-4 overflow-x-scroll rounded-md bg-gray-100 p-3 text-sm",children:n}),a:({href:n,children:r,...i})=>y.jsx("a",{href:n,className:"text-blue-600 underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...i,children:r}),blockquote:({children:n})=>y.jsx("blockquote",{className:"my-4 border-l-4 border-gray-300 pl-4 italic text-gray-700",children:n}),ul:({children:n})=>y.jsx("ul",{className:"mb-2 pl-4",children:n}),ol:({children:n})=>y.jsx("ol",{className:"mb-2 list-inside list-decimal space-y-1 pl-2",children:n}),li:({children:n})=>y.jsx("li",{className:"leading-relaxed",children:n})}),[]);return y.jsx(U9,{remarkPlugins:[$8],components:e,children:t.content})},EA=({roleName:t,children:e,hideRoleLabel:n=!1,onContentClick:r,contentRef:i})=>y.jsxs("div",{className:"py-2",children:[!n&&y.jsxs("header",{className:"mb-2 text-sm font-semibold text-gray-600",children:["ROLE: ",t]}),y.jsx("main",{ref:i,onClick:r,className:"prose prose-sm w-full max-w-none",children:e})]}),q9=t=>{const[e,n]=kt.useState(t.content),r=A.useCallback(()=>{let i=t.content;if(t.hightWords){const s=t.hightWords;if(s){const o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=new RegExp(`\\b(${o})\\b`,"gi");i=i.replace(a,"**$1**")}}n(i)},[t.content,t.hightWords]);return A.useEffect(()=>{r()},[r]),y.jsx(EA,{roleName:"User",children:y.jsx(yy,{content:e})})},K9=t=>y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-1 text-xs text-gray-700 sm:gap-4 sm:text-sm",children:[y.jsx("span",{className:"font-medium",children:"Usage:"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(pC,{}),y.jsx("span",{children:t.usage.promptTokens})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(dj,{}),y.jsx("span",{children:t.usage.completionTokens})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(fj,{}),y.jsx("span",{children:t.usage.totalTokens})]}),y.jsxs("div",{className:"flex items-center gap-1",children:["LLM:",y.jsx("span",{children:t.model})]}),y.jsxs("div",{className:"ml-auto flex gap-2",children:[t.onChatClick&&y.jsx("button",{onClick:t.onChatClick,className:"rounded p-1 transition-colors hover:bg-gray-200","aria-label":"Open conversation",title:"Open conversation",children:y.jsx(Wj,{className:"h-4 w-4 text-gray-600"})}),y.jsx("button",{onClick:t.onCopy,className:"rounded p-1 transition-colors hover:bg-gray-200","aria-label":"Copy token usage",title:t.copied?"Copied!":"Copy token usage",children:t.copied?y.jsx(Mj,{className:"h-4 w-4 text-green-500"}):y.jsx(Rj,{className:"h-4 w-4 text-gray-600"})})]})]}),X9=({reasoningContent:t,content:e})=>{const r="none",[i,s]=A.useState(!1),[o,a]=A.useState(!1),l=A.useRef(null),[u,d]=A.useState(r),[c,h]=A.useState(!0);A.useEffect(()=>{const g=l.current;if(!g)return;const p=m=>{m.propertyName==="max-height"&&!i&&d(r)};return g.addEventListener("transitionend",p),()=>g.removeEventListener("transitionend",p)},[i]);const f=A.useCallback(()=>{const g=l.current;if(!g){s(!0);return}const p=g.scrollHeight;d(`${p}px`),requestAnimationFrame(()=>{h(!1),s(!0),d("0px")})},[]),v=A.useCallback(()=>{const g=l.current;if(!g){s(!1);return}s(!1),h(!0),d("0px"),requestAnimationFrame(()=>{const p=g.scrollHeight;d(`${p}px`)})},[]);A.useEffect(()=>{e.trim().length>0&&!i&&!o&&(Le.info("The reasoning content is being folded."),f())},[e,o,i,f]);const x=A.useCallback(g=>{g.stopPropagation(),a(!0),i?v():f()},[i,v,f]);return y.jsx(y.Fragment,{children:t&&y.jsxs("div",{className:"mb-4 rounded-r-md border-l-4 border-gray-400 bg-gray-50",onClick:x,children:[y.jsxs("div",{className:"flex cursor-pointer items-center justify-between p-4 transition-colors","aria-expanded":!i,"aria-controls":"reasoning-content",children:[y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"text-sm font-medium",children:" Thinking process"})}),i?y.jsx(Oj,{className:"h-4 w-4 text-gray-600"}):y.jsx(Pj,{className:"h-4 w-4 text-gray-600"})]}),y.jsx("div",{id:"reasoning-content",ref:l,style:{maxHeight:u,opacity:c?1:0,transition:"max-height 800ms ease, opacity 800ms ease",overflow:"hidden"},children:y.jsx("div",{className:"px-4 pb-4",children:y.jsx("div",{className:"text-sm text-gray-700",children:y.jsx(yy,{content:t})})})})]})})},G9='a,button,input,textarea,select,option,label,[role="button"],[contenteditable="true"]',F2=t=>/[A-Za-z]/.test(t),Y9=t=>{const e=t.startContainer;if(e.nodeType!==Node.TEXT_NODE)return null;const n=e.textContent??"";let r=t.startOffset,i=t.startOffset;for(;r>0&&F2(n[r-1]);)r-=1;for(;i<n.length&&F2(n[i]);)i+=1;if(r===i)return null;const s=n.slice(r,i);if(!/^[A-Za-z]+$/.test(s))return null;const o=document.createRange();return o.setStart(e,r),o.setEnd(e,i),{word:s,wordRange:o}},Z9=(t,e,n)=>{if(!t.contains(e.commonAncestorContainer))return null;const r=document.createRange();r.selectNodeContents(t),r.setEnd(e.startContainer,e.startOffset);const i=r.toString(),s=document.createRange();s.selectNodeContents(t),s.setStart(e.endContainer,e.endOffset);const o=s.toString();return`${i}<selected>${n}</selected>${o}`},Q9=(t,e)=>{const n=e;if(n.caretRangeFromPoint)return n.caretRangeFromPoint(t.clientX,t.clientY);const r=n.caretPositionFromPoint?n.caretPositionFromPoint(t.clientX,t.clientY):null;if(!r||!r.offsetNode)return null;const i=e.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(!0),i},J9=({event:t,container:e})=>{const n=t.target;if(!n||!e.contains(n)||n.closest(G9))return null;const r=e.ownerDocument,i=Q9(t,r);if(!i||!e.contains(i.startContainer))return null;const s=Y9(i);if(!s)return null;const o=Z9(e,s.wordRange,s.word);return o?{words:s.word,context:o}:null},_A=({content:t,reasoningContent:e,usage:n,model:r,hideRoleLabel:i=!1,onDrilldownSelect:s,contextContainer:o,onChatClick:a})=>{const[l,u]=A.useState(!1),d=A.useRef(null),c=async()=>{if(n)try{await navigator.clipboard.writeText(t),u(!0),setTimeout(()=>u(!1),2e3),Le.info("Token usage copied to clipboard")}catch(v){Le.error("Failed to copy token usage",{error:v})}},h=()=>{Le.info("Refresh token usage requested")},f=v=>{if(!s)return;const x=o??d.current;if(!x)return;const g=J9({event:v,container:x});g&&(v.stopPropagation(),s(g))};return y.jsx(y.Fragment,{children:y.jsxs(EA,{roleName:"Agent",hideRoleLabel:i,onContentClick:f,contentRef:d,children:[y.jsx(X9,{reasoningContent:e,content:t}),y.jsx(yy,{content:t}),n&&y.jsx(K9,{usage:n,onRefresh:h,onCopy:c,onChatClick:a,copied:l,model:r})]})})},eU=({messageList:t,fallbackModel:e,onDrilldownSelect:n,onChatClick:r})=>{const i=[...t].reverse().find(o=>o.role==="assistant");return i?i.data.content&&i.data.content.trim().length>0||i.data.reasoningContent&&i.data.reasoningContent.trim().length>0?y.jsx("div",{className:"flex h-full flex-col overflow-y-auto p-4",children:y.jsx(_A,{...i.data,model:i.data.model||e,hideRoleLabel:!0,onDrilldownSelect:n,onChatClick:r})}):y.jsx("div",{className:"flex h-full items-center justify-center px-4 text-sm text-gray-500",children:"Awaiting AI response..."}):y.jsx("div",{className:"flex h-full items-center justify-center px-4 text-sm text-gray-500",children:"Awaiting AI response..."})},B2=({messageList:t,onDrilldownSelect:e,viewMode:n,onChatClick:r,fallbackModel:i})=>{const s=A.useRef(null);return n==="conversation"?y.jsx("div",{className:"flex flex-col gap-2 divide-y divide-gray-300 p-4",ref:s,children:t.map((o,a)=>o.role==="user"?y.jsx(q9,{content:o.content,hightWords:o.highlightWords},a):y.jsx(_A,{...o.data,onDrilldownSelect:e,contextContainer:s.current},a))}):y.jsx(eU,{messageList:t,fallbackModel:i||"",onDrilldownSelect:e,onChatClick:r})},tU=()=>{const t="ontouchstart"in window||navigator.maxTouchPoints>0,e=window.innerWidth>768;return!t||e},nU=({onSend:t,mode:e,onModeChange:n})=>{const[r,i]=kt.useState(""),s=kt.useRef(null),o=kt.useMemo(()=>tU(),[]),a=1,l=f=>{const v=f.target.value;if(i(v),s.current){s.current.style.height="auto";const x=8,g=v.split(`
`).length,p=g>x?x:g;s.current.rows=p}},u=f=>{o&&f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),d())},d=()=>{r.trim()&&(t(r),i(""))},c=f=>{f.preventDefault(),d()},h=f=>{f.preventDefault(),d()};return kt.useEffect(()=>{e==="conversation"&&s.current&&s.current.focus()},[e]),e==="conversation"?y.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-transparent p-4",children:y.jsxs("form",{className:"flex min-h-16 items-center rounded-lg border border-gray-200 bg-white shadow-lg",onSubmit:c,children:[y.jsx("textarea",{name:"message",ref:s,className:"flex-1 resize-y rounded-l-lg border-0 px-3 outline-none focus:ring-0",placeholder:o?"Type your message... (Press Enter to send, Shift+Enter for new line)":"Type your message...",rows:a,value:r,onChange:l,onKeyDown:u,style:{resize:"none"}}),y.jsx("button",{type:"button",className:"flex size-16 items-center justify-center rounded transition-colors",onClick:h,children:y.jsx(pC,{className:"size-5"})}),y.jsx("button",{className:"flex size-16 items-center justify-center rounded-r-lg",onClick:()=>n("simple"),type:"button",children:y.jsx(ku,{className:"size-6"})})]})}):null},CA=({template:t,words:e,context:n,wrapContext:r=!0})=>{let i=t.replace(/\{\{words\}\}/g,e);if(n){const s=/<context>\s*\{\{context\}\}\s*<\/context>/i.test(t),o=!r||s?n:`<context>
${n}
</context>`;i=i.replace(/\{\{context\}\}/g,o)}return i};function tt(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function se(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let AA=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return AA=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function n0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const r0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Xe extends Error{}class In extends Xe{constructor(e,n,r,i){super(`${In.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ph({message:r,cause:r0(n)});const s=n==null?void 0:n.error;return e===400?new DA(e,s,r,i):e===401?new NA(e,s,r,i):e===403?new TA(e,s,r,i):e===404?new RA(e,s,r,i):e===409?new IA(e,s,r,i):e===422?new LA(e,s,r,i):e===429?new PA(e,s,r,i):e>=500?new OA(e,s,r,i):new In(e,s,r,i)}}class Tr extends In{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ph extends In{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xy extends Ph{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DA extends In{}class NA extends In{}class TA extends In{}class RA extends In{}class IA extends In{}class LA extends In{}class PA extends In{}class OA extends In{}class MA extends Xe{constructor(){super("Could not parse response content as the length limit was reached")}}class jA extends Xe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class fl extends Error{constructor(e){super(e)}}const rU=/^[a-z][a-z0-9+.-]*:/i,iU=t=>rU.test(t);let Zn=t=>(Zn=Array.isArray,Zn(t)),z2=Zn;function FA(t){return typeof t!="object"?{}:t??{}}function sU(t){if(!t)return!0;for(const e in t)return!1;return!0}function oU(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function am(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const aU=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xe(`${t} must be an integer`);if(e<0)throw new Xe(`${t} must be a positive integer`);return e},lU=t=>{try{return JSON.parse(t)}catch{return}},Yu=t=>new Promise(e=>setTimeout(e,t)),Bo="5.23.2",uU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function cU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const dU=()=>{var n;const t=cU();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bo,"X-Stainless-OS":$2(Deno.build.os),"X-Stainless-Arch":U2(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bo,"X-Stainless-OS":$2(globalThis.process.platform??"unknown"),"X-Stainless-Arch":U2(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=fU();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function fU(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const U2=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",$2=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let W2;const hU=()=>W2??(W2=dU());function pU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function BA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function zA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return BA({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function UA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function mU(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const gU=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),$A="RFC3986",WA=t=>String(t),H2={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:WA},vU="RFC1738";let i0=(t,e)=>(i0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),i0(t,e));const ii=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),lm=1024,yU=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=lm){const l=s.length>=lm?s.slice(a,a+lm):s,u=[];for(let d=0;d<l.length;++d){let c=l.charCodeAt(d);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===vU&&(c===40||c===41)){u[u.length]=l.charAt(d);continue}if(c<128){u[u.length]=ii[c];continue}if(c<2048){u[u.length]=ii[192|c>>6]+ii[128|c&63];continue}if(c<55296||c>=57344){u[u.length]=ii[224|c>>12]+ii[128|c>>6&63]+ii[128|c&63];continue}d+=1,c=65536+((c&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=ii[240|c>>18]+ii[128|c>>12&63]+ii[128|c>>6&63]+ii[128|c&63]}o+=u.join("")}return o};function xU(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function V2(t,e){if(Zn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const HA={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},VA=function(t,e){Array.prototype.push.apply(t,Zn(e)?e:[e])};let q2;const mn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yU,encodeValuesOnly:!1,format:$A,formatter:WA,indices:!1,serializeDate(t){return(q2??(q2=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function wU(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const um={};function qA(t,e,n,r,i,s,o,a,l,u,d,c,h,f,v,x,g,p){let m=t,w=p,_=0,E=!1;for(;(w=w.get(um))!==void 0&&!E;){const C=w.get(t);if(_+=1,typeof C<"u"){if(C===_)throw new RangeError("Cyclic object value");E=!0}typeof w.get(um)>"u"&&(_=0)}if(typeof u=="function"?m=u(e,m):m instanceof Date?m=h==null?void 0:h(m):n==="comma"&&Zn(m)&&(m=V2(m,function(C){return C instanceof Date?h==null?void 0:h(C):C})),m===null){if(s)return l&&!x?l(e,mn.encoder,g,"key",f):e;m=""}if(wU(m)||xU(m)){if(l){const C=x?e:l(e,mn.encoder,g,"key",f);return[(v==null?void 0:v(C))+"="+(v==null?void 0:v(l(m,mn.encoder,g,"value",f)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(m)))]}const S=[];if(typeof m>"u")return S;let b;if(n==="comma"&&Zn(m))x&&l&&(m=V2(m,l)),b=[{value:m.length>0?m.join(",")||null:void 0}];else if(Zn(u))b=u;else{const C=Object.keys(m);b=d?C.sort(d):C}const D=a?String(e).replace(/\./g,"%2E"):String(e),T=r&&Zn(m)&&m.length===1?D+"[]":D;if(i&&Zn(m)&&m.length===0)return T+"[]";for(let C=0;C<b.length;++C){const I=b[C],M=typeof I=="object"&&typeof I.value<"u"?I.value:m[I];if(o&&M===null)continue;const H=c&&a?I.replace(/\./g,"%2E"):I,q=Zn(m)?typeof n=="function"?n(T,H):T:T+(c?"."+H:"["+H+"]");p.set(t,_);const W=new WeakMap;W.set(um,p),VA(S,qA(M,q,n,r,i,s,o,a,n==="comma"&&x&&Zn(m)?null:l,u,d,c,h,f,v,x,g,W))}return S}function bU(t=mn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||mn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=$A;if(typeof t.format<"u"){if(!i0(H2,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=H2[n];let i=mn.filter;(typeof t.filter=="function"||Zn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in HA?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=mn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:mn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:mn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:mn.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:mn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?mn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:mn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:mn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:mn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:mn.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:mn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:mn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:mn.strictNullHandling}}function SU(t,e={}){let n=t;const r=bU(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Zn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=HA[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let h=0;h<i.length;++h){const f=i[h];r.skipNulls&&n[f]===null||VA(o,qA(n[f],f,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const d=o.join(r.delimiter);let c=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),d.length>0?c+d:""}function kU(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let K2;function wy(t){let e;return(K2??(e=new globalThis.TextEncoder,K2=e.encode.bind(e)))(t)}let X2;function G2(t){let e;return(X2??(e=new globalThis.TextDecoder,X2=e.decode.bind(e)))(t)}var ur,cr;class Oh{constructor(){ur.set(this,void 0),cr.set(this,void 0),tt(this,ur,new Uint8Array),tt(this,cr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wy(e):e;tt(this,ur,kU([se(this,ur,"f"),n]));const r=[];let i;for(;(i=EU(se(this,ur,"f"),se(this,cr,"f")))!=null;){if(i.carriage&&se(this,cr,"f")==null){tt(this,cr,i.index);continue}if(se(this,cr,"f")!=null&&(i.index!==se(this,cr,"f")+1||i.carriage)){r.push(G2(se(this,ur,"f").subarray(0,se(this,cr,"f")-1))),tt(this,ur,se(this,ur,"f").subarray(se(this,cr,"f"))),tt(this,cr,null);continue}const s=se(this,cr,"f")!==null?i.preceding-1:i.preceding,o=G2(se(this,ur,"f").subarray(0,s));r.push(o),tt(this,ur,se(this,ur,"f").subarray(i.index)),tt(this,cr,null)}return r}flush(){return se(this,ur,"f").length?this.decode(`
`):[]}}ur=new WeakMap,cr=new WeakMap;Oh.NEWLINE_CHARS=new Set([`
`,"\r"]);Oh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function EU(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function _U(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Tf={off:0,error:200,warn:300,info:400,debug:500},Y2=(t,e,n)=>{if(t){if(oU(Tf,t))return t;Cn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Tf))}`)}};function hl(){}function Oc(t,e,n){return!e||Tf[t]>Tf[n]?hl:e[t].bind(e)}const CU={error:hl,warn:hl,info:hl,debug:hl};let Z2=new WeakMap;function Cn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return CU;const r=Z2.get(e);if(r&&r[0]===n)return r[1];const i={error:Oc("error",e,n),warn:Oc("warn",e,n),info:Oc("info",e,n),debug:Oc("debug",e,n)};return Z2.set(e,[n,i]),i}const Hs=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var sl;class di{constructor(e,n,r){this.iterator=e,sl.set(this,void 0),this.controller=n,tt(this,sl,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Cn(r):console;async function*o(){if(i)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of AU(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(d){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),d}if(u&&u.error)throw new In(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new In(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(n0(l))return;throw l}finally{a||n.abort()}}return new di(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Oh,l=UA(e);for await(const u of l)for(const d of a.decode(u))yield d;for(const u of a.flush())yield u}async function*o(){if(i)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(n0(l))return;throw l}finally{a||n.abort()}}return new di(o,n,r)}[(sl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new di(()=>i(e),this.controller,se(this,sl,"f")),new di(()=>i(n),this.controller,se(this,sl,"f"))]}toReadableStream(){const e=this;let n;return BA({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=wy(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*AU(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xe("Attempted to iterate over a response with no body");const n=new NU,r=new Oh,i=UA(t.body);for await(const s of DU(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*DU(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?wy(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=_U(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class NU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=TU(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function TU(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function KA(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var c;if(e.options.stream)return Cn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):di.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(c=a==null?void 0:a.split(";")[0])==null?void 0:c.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const h=await n.json();return XA(h,n)}return await n.text()})();return Cn(t).debug(`[${r}] response parsed`,Hs({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function XA(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var pl;class Mh extends Promise{constructor(e,n,r=KA){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,pl.set(this,void 0),tt(this,pl,e)}_thenUnwrap(e){return new Mh(se(this,pl,"f"),this.responsePromise,async(n,r)=>XA(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(se(this,pl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}pl=new WeakMap;var Mc;class by{constructor(e,n,r,i){Mc.set(this,void 0),tt(this,Mc,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Xe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await se(this,Mc,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Mc=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class RU extends Mh{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await KA(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class jh extends by{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class hn extends by{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...FA(this.options.query),after:n}}:null}}class IU extends by{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...FA(this.options.query),after:e}}:null}}const GA=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zl(t,e,n){return GA(),new File(t,e??"unknown_file",n)}function gd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const YA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",po=async(t,e)=>({...t,body:await PU(t.body,e)}),Q2=new WeakMap;function LU(t){const e=typeof t=="function"?t:t.fetch,n=Q2.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return Q2.set(e,r),r}const PU=async(t,e)=>{if(!await LU(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>s0(n,r,i))),n},OU=t=>t instanceof Blob&&"name"in t,s0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,zl([await n.blob()],gd(n)));else if(YA(n))t.append(e,zl([await new Response(zA(n)).blob()],gd(n)));else if(OU(n))t.append(e,n,gd(n));else if(Array.isArray(n))await Promise.all(n.map(r=>s0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>s0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},ZA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",MU=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ZA(t),jU=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function FU(t,e,n){if(GA(),t=await t,MU(t))return t instanceof File?t:zl([await t.arrayBuffer()],t.name);if(jU(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),zl(await o0(i),e,n)}const r=await o0(t);if(e||(e=gd(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return zl(r,e,n)}async function o0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(ZA(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(YA(t))for await(const r of t)e.push(...await o0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${BU(t)}`)}return e}function BU(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Qe{constructor(e){this._client=e}}function QA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const J2=Object.freeze(Object.create(null)),zU=(t=QA)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((d,c,h)=>{var x;/[?#]/.test(c)&&(i=!0);const f=r[h];let v=(i?encodeURIComponent:t)(""+f);return h!==r.length&&(f==null||typeof f=="object"&&f.toString===((x=Object.getPrototypeOf(Object.getPrototypeOf(f.hasOwnProperty??J2)??J2))==null?void 0:x.toString))&&(v=f+"",s.push({start:d.length+c.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(f).slice(8,-1)} is not a valid path parameter`})),d+c+(h===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,c)=>d.start-c.start),s.length>0){let d=0;const c=s.reduce((h,f)=>{const v=" ".repeat(f.start-d),x="^".repeat(f.length);return d=f.start+f.length,h+v+x},"");throw new Xe(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${o}
${c}`)}return o},Re=zU(QA);let JA=class extends Qe{list(e,n={},r){return this._client.getAPIList(Re`/chat/completions/${e}/messages`,hn,{query:n,...r})}};function Rf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Sy(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Zu(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function UU(t,e){return!e||!eD(e)?{...t,choices:t.choices.map(n=>(tD(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:ky(t,e)}function ky(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new MA;if(r.finish_reason==="content_filter")throw new jA;return tD(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>WU(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?$U(e,r.message.content):null}}});return{...t,choices:n}}function $U(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function WU(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return Rf(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Zu(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function HU(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return Rf(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return Rf(n)&&(Zu(n)||(n==null?void 0:n.function.strict)||!1)}function eD(t){var e;return Sy(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Zu(n)||n.type==="function"&&n.function.strict===!0))??!1}function tD(t){for(const e of t||[])if(e.type!=="function")throw new Xe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function VU(t){for(const e of t??[]){if(e.type!=="function")throw new Xe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Xe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const If=t=>(t==null?void 0:t.role)==="assistant",nD=t=>(t==null?void 0:t.role)==="tool";var a0,vd,yd,ml,gl,xd,vl,Ci,yl,Lf,Pf,zo,rD;class Ey{constructor(){a0.add(this),this.controller=new AbortController,vd.set(this,void 0),yd.set(this,()=>{}),ml.set(this,()=>{}),gl.set(this,void 0),xd.set(this,()=>{}),vl.set(this,()=>{}),Ci.set(this,{}),yl.set(this,!1),Lf.set(this,!1),Pf.set(this,!1),zo.set(this,!1),tt(this,vd,new Promise((e,n)=>{tt(this,yd,e,"f"),tt(this,ml,n,"f")})),tt(this,gl,new Promise((e,n)=>{tt(this,xd,e,"f"),tt(this,vl,n,"f")})),se(this,vd,"f").catch(()=>{}),se(this,gl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},se(this,a0,"m",rD).bind(this))},0)}_connected(){this.ended||(se(this,yd,"f").call(this),this._emit("connect"))}get ended(){return se(this,yl,"f")}get errored(){return se(this,Lf,"f")}get aborted(){return se(this,Pf,"f")}abort(){this.controller.abort()}on(e,n){return(se(this,Ci,"f")[e]||(se(this,Ci,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=se(this,Ci,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(se(this,Ci,"f")[e]||(se(this,Ci,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{tt(this,zo,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){tt(this,zo,!0),await se(this,gl,"f")}_emit(e,...n){if(se(this,yl,"f"))return;e==="end"&&(tt(this,yl,!0),se(this,xd,"f").call(this));const r=se(this,Ci,"f")[e];if(r&&(se(this,Ci,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!se(this,zo,"f")&&!(r!=null&&r.length)&&Promise.reject(i),se(this,ml,"f").call(this,i),se(this,vl,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!se(this,zo,"f")&&!(r!=null&&r.length)&&Promise.reject(i),se(this,ml,"f").call(this,i),se(this,vl,"f").call(this,i),this._emit("end")}}_emitFinal(){}}vd=new WeakMap,yd=new WeakMap,ml=new WeakMap,gl=new WeakMap,xd=new WeakMap,vl=new WeakMap,Ci=new WeakMap,yl=new WeakMap,Lf=new WeakMap,Pf=new WeakMap,zo=new WeakMap,a0=new WeakSet,rD=function(e){if(tt(this,Lf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Tr),e instanceof Tr)return tt(this,Pf,!0),this._emit("abort",e);if(e instanceof Xe)return this._emit("error",e);if(e instanceof Error){const n=new Xe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Xe(String(e)))};function qU(t){return typeof t.parse=="function"}var Un,l0,Of,u0,c0,d0,iD,sD;const KU=10;class oD extends Ey{constructor(){super(...arguments),Un.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),nD(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(If(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),se(this,Un,"m",l0).call(this)}async finalMessage(){return await this.done(),se(this,Un,"m",Of).call(this)}async finalFunctionToolCall(){return await this.done(),se(this,Un,"m",u0).call(this)}async finalFunctionToolCallResult(){return await this.done(),se(this,Un,"m",c0).call(this)}async totalUsage(){return await this.done(),se(this,Un,"m",d0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=se(this,Un,"m",Of).call(this);n&&this._emit("finalMessage",n);const r=se(this,Un,"m",l0).call(this);r&&this._emit("finalContent",r);const i=se(this,Un,"m",u0).call(this);i&&this._emit("finalFunctionToolCall",i);const s=se(this,Un,"m",c0).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",se(this,Un,"m",d0).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),se(this,Un,"m",iD).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ky(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var f,v,x;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((f=s==null?void 0:s.function)==null?void 0:f.name),{maxChatCompletions:u=KU}=r||{},d=n.tools.map(g=>{if(Zu(g)){if(!g.$callback)throw new Xe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),c={};for(const g of d)g.type==="function"&&(c[g.function.name||g.function.function.name]=g.function);const h="tools"in n?d.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<u;++g){const m=(v=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!m)throw new Xe("missing message in ChatCompletion response");if(!((x=m.tool_calls)!=null&&x.length))return;for(const w of m.tool_calls){if(w.type!=="function")continue;const _=w.id,{name:E,arguments:S}=w.function,b=c[E];if(b){if(l&&l!==E){const I=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:_,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(c).map(M=>JSON.stringify(M)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:_,content:I});continue}let D;try{D=qU(b)?await b.parse(S):S}catch(I){const M=I instanceof Error?I.message:String(I);this._addMessage({role:i,tool_call_id:_,content:M});continue}const T=await b.function(D,this),C=se(this,Un,"m",sD).call(this,T);if(this._addMessage({role:i,tool_call_id:_,content:C}),l)return}}}}Un=new WeakSet,l0=function(){return se(this,Un,"m",Of).call(this).content??null},Of=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(If(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Xe("stream ended without producing a ChatCompletionMessage with role=assistant")},u0=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(If(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},c0=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(nD(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},d0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},iD=function(e){if(e.n!=null&&e.n>1)throw new Xe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},sD=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class _y extends oD{static runTools(e,n,r){const i=new _y,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),If(e)&&e.content&&this._emit("content",e.content)}}const aD=1,lD=2,uD=4,cD=8,dD=16,fD=32,hD=64,pD=128,mD=256,gD=pD|mD,vD=dD|fD|gD|hD,yD=aD|lD|vD,xD=uD|cD,XU=yD|xD,xn={STR:aD,NUM:lD,ARR:uD,OBJ:cD,NULL:dD,BOOL:fD,NAN:hD,INFINITY:pD,MINUS_INFINITY:mD,INF:gD,SPECIAL:vD,ATOM:yD,COLLECTION:xD,ALL:XU};class GU extends Error{}class YU extends Error{}function ZU(t,e=xn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return QU(t.trim(),e)}const QU=(t,e)=>{const n=t.length;let r=0;const i=h=>{throw new GU(`${h} at position ${r}`)},s=h=>{throw new YU(`${h} at position ${r}`)},o=()=>(c(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||xn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||xn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||xn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||xn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||xn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||xn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),a=()=>{const h=r;let f=!1;for(r++;r<n&&(t[r]!=='"'||f&&t[r-1]==="\\");)f=t[r]==="\\"?!f:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(h,++r-Number(f)))}catch(v){s(String(v))}else if(xn.STR&e)try{return JSON.parse(t.substring(h,r-Number(f))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,c();const h={};try{for(;t[r]!=="}";){if(c(),r>=n&&xn.OBJ&e)return h;const f=a();c(),r++;try{const v=o();Object.defineProperty(h,f,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(xn.OBJ&e)return h;throw v}c(),t[r]===","&&r++}}catch{if(xn.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},u=()=>{r++;const h=[];try{for(;t[r]!=="]";)h.push(o()),c(),t[r]===","&&r++}catch{if(xn.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},d=()=>{if(r===0){t==="-"&&xn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(f){if(xn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(f))}}const h=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(xn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(h,r))}catch{t.substring(h,r)==="-"&&xn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(v){s(String(v))}}},c=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},e1=t=>ZU(t,xn.ALL^xn.NUM);var pn,_i,No,rs,cm,jc,dm,fm,hm,Fc,pm,t1;class Cu extends oD{constructor(e){super(),pn.add(this),_i.set(this,void 0),No.set(this,void 0),rs.set(this,void 0),tt(this,_i,e),tt(this,No,[])}get currentChatCompletionSnapshot(){return se(this,rs,"f")}static fromReadableStream(e){const n=new Cu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Cu(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),se(this,pn,"m",cm).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)se(this,pn,"m",dm).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new Tr;return this._addChatCompletion(se(this,pn,"m",Fc).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),se(this,pn,"m",cm).call(this),this._connected();const i=di.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(se(this,pn,"m",Fc).call(this)),se(this,pn,"m",dm).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new Tr;return this._addChatCompletion(se(this,pn,"m",Fc).call(this))}[(_i=new WeakMap,No=new WeakMap,rs=new WeakMap,pn=new WeakSet,cm=function(){this.ended||tt(this,rs,void 0)},jc=function(n){let r=se(this,No,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},se(this,No,"f")[n.index]=r,r)},dm=function(n){var i,s,o,a,l,u,d,c,h,f,v,x,g,p,m;if(this.ended)return;const r=se(this,pn,"m",t1).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const _=r.choices[w.index];w.delta.content!=null&&((i=_.message)==null?void 0:i.role)==="assistant"&&((s=_.message)!=null&&s.content)&&(this._emit("content",w.delta.content,_.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),w.delta.refusal!=null&&((o=_.message)==null?void 0:o.role)==="assistant"&&((a=_.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:_.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=_.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=w.logprobs)==null?void 0:d.content,snapshot:((c=_.logprobs)==null?void 0:c.content)??[]}),((h=w.logprobs)==null?void 0:h.refusal)!=null&&((f=_.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=w.logprobs)==null?void 0:v.refusal,snapshot:((x=_.logprobs)==null?void 0:x.refusal)??[]});const E=se(this,pn,"m",jc).call(this,_);_.finish_reason&&(se(this,pn,"m",hm).call(this,_),E.current_tool_call_index!=null&&se(this,pn,"m",fm).call(this,_,E.current_tool_call_index));for(const S of w.delta.tool_calls??[])E.current_tool_call_index!==S.index&&(se(this,pn,"m",hm).call(this,_),E.current_tool_call_index!=null&&se(this,pn,"m",fm).call(this,_,E.current_tool_call_index)),E.current_tool_call_index=S.index;for(const S of w.delta.tool_calls??[]){const b=(g=_.message.tool_calls)==null?void 0:g[S.index];b!=null&&b.type&&((b==null?void 0:b.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(p=b.function)==null?void 0:p.name,index:S.index,arguments:b.function.arguments,parsed_arguments:b.function.parsed_arguments,arguments_delta:((m=S.function)==null?void 0:m.arguments)??""}):(b==null||b.type,void 0))}}},fm=function(n,r){var o,a,l;if(se(this,pn,"m",jc).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=se(this,_i,"f"))==null?void 0:a.tools)==null?void 0:l.find(d=>Rf(d)&&d.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Zu(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},hm=function(n){var i,s;const r=se(this,pn,"m",jc).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=se(this,pn,"m",pm).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Fc=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=se(this,rs,"f");if(!n)throw new Xe("request ended without sending any chunks");return tt(this,rs,void 0),tt(this,No,[]),JU(n,se(this,_i,"f"))},pm=function(){var r;const n=(r=se(this,_i,"f"))==null?void 0:r.response_format;return Sy(n)?n:null},t1=function(n){var r,i,s,o;let a=se(this,rs,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=tt(this,rs,{...u,choices:[]});for(const{delta:d,finish_reason:c,index:h,logprobs:f=null,...v}of n.choices){let x=a.choices[h];if(x||(x=a.choices[h]={finish_reason:c,index:h,message:{},logprobs:f,...v}),f)if(!x.logprobs)x.logprobs=Object.assign({},f);else{const{content:S,refusal:b,...D}=f;Object.assign(x.logprobs,D),S&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...S)),b&&((i=x.logprobs).refusal??(i.refusal=[]),x.logprobs.refusal.push(...b))}if(c&&(x.finish_reason=c,se(this,_i,"f")&&eD(se(this,_i,"f")))){if(c==="length")throw new MA;if(c==="content_filter")throw new jA}if(Object.assign(x,v),!d)continue;const{content:g,refusal:p,function_call:m,role:w,tool_calls:_,...E}=d;if(Object.assign(x.message,E),p&&(x.message.refusal=(x.message.refusal||"")+p),w&&(x.message.role=w),m&&(x.message.function_call?(m.name&&(x.message.function_call.name=m.name),m.arguments&&((s=x.message.function_call).arguments??(s.arguments=""),x.message.function_call.arguments+=m.arguments)):x.message.function_call=m),g&&(x.message.content=(x.message.content||"")+g,!x.message.refusal&&se(this,pn,"m",pm).call(this)&&(x.message.parsed=e1(x.message.content))),_){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:S,id:b,type:D,function:T,...C}of _){const I=(o=x.message.tool_calls)[S]??(o[S]={});Object.assign(I,C),b&&(I.id=b),D&&(I.type=D),T&&(I.function??(I.function={name:T.name??"",arguments:""})),T!=null&&T.name&&(I.function.name=T.name),T!=null&&T.arguments&&(I.function.arguments+=T.arguments,HU(se(this,_i,"f"),I)&&(I.function.parsed_arguments=e1(I.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new di(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function JU(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:d,index:c,logprobs:h,...f})=>{if(!d)throw new Xe(`missing finish_reason for choice ${c}`);const{content:v=null,function_call:x,tool_calls:g,...p}=u,m=u.role;if(!m)throw new Xe(`missing role for choice ${c}`);if(x){const{arguments:w,name:_}=x;if(w==null)throw new Xe(`missing function_call.arguments for choice ${c}`);if(!_)throw new Xe(`missing function_call.name for choice ${c}`);return{...f,message:{content:v,function_call:{arguments:w,name:_},role:m,refusal:u.refusal??null},finish_reason:d,index:c,logprobs:h}}return g?{...f,index:c,finish_reason:d,logprobs:h,message:{...p,role:m,content:v,refusal:u.refusal??null,tool_calls:g.map((w,_)=>{const{function:E,type:S,id:b,...D}=w,{arguments:T,name:C,...I}=E||{};if(b==null)throw new Xe(`missing choices[${c}].tool_calls[${_}].id
${Bc(t)}`);if(S==null)throw new Xe(`missing choices[${c}].tool_calls[${_}].type
${Bc(t)}`);if(C==null)throw new Xe(`missing choices[${c}].tool_calls[${_}].function.name
${Bc(t)}`);if(T==null)throw new Xe(`missing choices[${c}].tool_calls[${_}].function.arguments
${Bc(t)}`);return{...D,id:b,type:S,function:{...I,name:C,arguments:T}}})}}:{...f,message:{...p,content:v,role:m,refusal:u.refusal??null},finish_reason:d,index:c,logprobs:h}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return UU(l,e)}function Bc(t){return JSON.stringify(t)}class Mf extends Cu{static fromReadableStream(e){const n=new Mf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Mf(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let Cy=class extends Qe{constructor(){super(...arguments),this.messages=new JA(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(Re`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(Re`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",hn,{query:e,...n})}delete(e,n){return this._client.delete(Re`/chat/completions/${e}`,n)}parse(e,n){return VU(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>ky(r,e))}runTools(e,n){return e.stream?Mf.runTools(this._client,e,n):_y.runTools(this._client,e,n)}stream(e,n){return Cu.createChatCompletion(this._client,e,n)}};Cy.Messages=JA;class Ay extends Qe{constructor(){super(...arguments),this.completions=new Cy(this._client)}}Ay.Completions=Cy;const wD=Symbol("brand.privateNullableHeaders");function*e$(t){if(!t)return;if(wD in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():z2(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=z2(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ge=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of e$(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[wD]:!0,values:e,nulls:n}};class bD extends Qe{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ge([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class SD extends Qe{create(e,n){return this._client.post("/audio/transcriptions",po({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class kD extends Qe{create(e,n){return this._client.post("/audio/translations",po({body:e,...n,__metadata:{model:e.model}},this._client))}}class Qu extends Qe{constructor(){super(...arguments),this.transcriptions=new SD(this._client),this.translations=new kD(this._client),this.speech=new bD(this._client)}}Qu.Transcriptions=SD;Qu.Translations=kD;Qu.Speech=bD;class ED extends Qe{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Re`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",hn,{query:e,...n})}cancel(e,n){return this._client.post(Re`/batches/${e}/cancel`,n)}}class _D extends Qe{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Re`/assistants/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Re`/assistants/${e}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",hn,{query:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(Re`/assistants/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class CD extends Qe{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class AD extends Qe{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Fh=class extends Qe{constructor(){super(...arguments),this.sessions=new CD(this._client),this.transcriptionSessions=new AD(this._client)}};Fh.Sessions=CD;Fh.TranscriptionSessions=AD;class DD extends Qe{create(e,n,r){return this._client.post(Re`/threads/${e}/messages`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(Re`/threads/${i}/messages/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(Re`/threads/${i}/messages/${e}`,{body:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Re`/threads/${e}/messages`,hn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(Re`/threads/${i}/messages/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class ND extends Qe{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(Re`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(Re`/threads/${i}/runs/${e}/steps`,hn,{query:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const t$=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var mm={};const To=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=mm==null?void 0:mm[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var An,Js,f0,ai,wd,Br,eo,ta,Xs,jf,dr,bd,Sd,Ul,xl,wl,n1,r1,i1,s1,o1,a1,l1;class $l extends Ey{constructor(){super(...arguments),An.add(this),f0.set(this,[]),ai.set(this,{}),wd.set(this,{}),Br.set(this,void 0),eo.set(this,void 0),ta.set(this,void 0),Xs.set(this,void 0),jf.set(this,void 0),dr.set(this,void 0),bd.set(this,void 0),Sd.set(this,void 0),Ul.set(this,void 0)}[(f0=new WeakMap,ai=new WeakMap,wd=new WeakMap,Br=new WeakMap,eo=new WeakMap,ta=new WeakMap,Xs=new WeakMap,jf=new WeakMap,dr=new WeakMap,bd=new WeakMap,Sd=new WeakMap,Ul=new WeakMap,An=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Js;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=di.fromReadableStream(e,this.controller);for await(const o of i)se(this,An,"m",xl).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new Tr;return this._addRun(se(this,An,"m",wl).call(this))}toReadableStream(){return new di(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new Js;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)se(this,An,"m",xl).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Tr;return this._addRun(se(this,An,"m",wl).call(this))}static createThreadAssistantStream(e,n,r){const i=new Js;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Js;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return se(this,bd,"f")}currentRun(){return se(this,Sd,"f")}currentMessageSnapshot(){return se(this,Br,"f")}currentRunStepSnapshot(){return se(this,Ul,"f")}async finalRunSteps(){return await this.done(),Object.values(se(this,ai,"f"))}async finalMessages(){return await this.done(),Object.values(se(this,wd,"f"))}async finalRun(){if(await this.done(),!se(this,eo,"f"))throw Error("Final run was not received.");return se(this,eo,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)se(this,An,"m",xl).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Tr;return this._addRun(se(this,An,"m",wl).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)se(this,An,"m",xl).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Tr;return this._addRun(se(this,An,"m",wl).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(am(s)&&am(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!am(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Js=$l,xl=function(e){if(!this.ended)switch(tt(this,bd,e),se(this,An,"m",i1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":se(this,An,"m",l1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":se(this,An,"m",r1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":se(this,An,"m",n1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wl=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");if(!se(this,eo,"f"))throw Error("Final run has not been received");return se(this,eo,"f")},n1=function(e){const[n,r]=se(this,An,"m",o1).call(this,e,se(this,Br,"f"));tt(this,Br,n),se(this,wd,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=se(this,ta,"f")){if(se(this,Xs,"f"))switch(se(this,Xs,"f").type){case"text":this._emit("textDone",se(this,Xs,"f").text,se(this,Br,"f"));break;case"image_file":this._emit("imageFileDone",se(this,Xs,"f").image_file,se(this,Br,"f"));break}tt(this,ta,i.index)}tt(this,Xs,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(se(this,ta,"f")!==void 0){const i=e.data.content[se(this,ta,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,se(this,Br,"f"));break;case"text":this._emit("textDone",i.text,se(this,Br,"f"));break}}se(this,Br,"f")&&this._emit("messageDone",e.data),tt(this,Br,void 0)}},r1=function(e){const n=se(this,An,"m",s1).call(this,e);switch(tt(this,Ul,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==se(this,jf,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(se(this,dr,"f")&&this._emit("toolCallDone",se(this,dr,"f")),tt(this,jf,s.index),tt(this,dr,n.step_details.tool_calls[s.index]),se(this,dr,"f")&&this._emit("toolCallCreated",se(this,dr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":tt(this,Ul,void 0),e.data.step_details.type=="tool_calls"&&se(this,dr,"f")&&(this._emit("toolCallDone",se(this,dr,"f")),tt(this,dr,void 0)),this._emit("runStepDone",e.data,n);break}},i1=function(e){se(this,f0,"f").push(e),this._emit("event",e)},s1=function(e){switch(e.event){case"thread.run.step.created":return se(this,ai,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=se(this,ai,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Js.accumulateDelta(n,r.delta);se(this,ai,"f")[e.data.id]=i}return se(this,ai,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":se(this,ai,"f")[e.data.id]=e.data;break}if(se(this,ai,"f")[e.data.id])return se(this,ai,"f")[e.data.id];throw new Error("No snapshot available")},o1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=se(this,An,"m",a1).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},a1=function(e,n){return Js.accumulateDelta(n,e)},l1=function(e){switch(tt(this,Sd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":tt(this,eo,e.data),se(this,dr,"f")&&(this._emit("toolCallDone",se(this,dr,"f")),tt(this,dr,void 0));break}};let Dy=class extends Qe{constructor(){super(...arguments),this.steps=new ND(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(Re`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(Re`/threads/${i}/runs/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(Re`/threads/${i}/runs/${e}`,{body:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Re`/threads/${e}/runs`,hn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(Re`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return $l.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Yu(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return $l.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(Re`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return $l.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Dy.Steps=ND;class Bh extends Qe{constructor(){super(...arguments),this.runs=new Dy(this._client),this.messages=new DD(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Re`/threads/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Re`/threads/${e}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(Re`/threads/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return $l.createThreadAssistantStream(e,this._client.beta.threads,n)}}Bh.Runs=Dy;Bh.Messages=DD;class Ju extends Qe{constructor(){super(...arguments),this.realtime=new Fh(this._client),this.assistants=new _D(this._client),this.threads=new Bh(this._client)}}Ju.Realtime=Fh;Ju.Assistants=_D;Ju.Threads=Bh;class TD extends Qe{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class RD extends Qe{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(Re`/containers/${i}/files/${e}/content`,{...r,headers:Ge([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let Ny=class extends Qe{constructor(){super(...arguments),this.content=new RD(this._client)}create(e,n,r){return this._client.post(Re`/containers/${e}/files`,po({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(Re`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(Re`/containers/${e}/files`,hn,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(Re`/containers/${i}/files/${e}`,{...r,headers:Ge([{Accept:"*/*"},r==null?void 0:r.headers])})}};Ny.Content=RD;class Ty extends Qe{constructor(){super(...arguments),this.files=new Ny(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(Re`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",hn,{query:e,...n})}delete(e,n){return this._client.delete(Re`/containers/${e}`,{...n,headers:Ge([{Accept:"*/*"},n==null?void 0:n.headers])})}}Ty.Files=Ny;class ID extends Qe{create(e,n,r){const{include:i,...s}=n;return this._client.post(Re`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(Re`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(Re`/conversations/${e}/items`,IU,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(Re`/conversations/${i}/items/${e}`,r)}}class Ry extends Qe{constructor(){super(...arguments),this.items=new ID(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(Re`/conversations/${e}`,n)}update(e,n,r){return this._client.post(Re`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(Re`/conversations/${e}`,n)}}Ry.Items=ID;class LD extends Qe{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Cn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Cn(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=t$(l)}),o)))}}class PD extends Qe{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(Re`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(Re`/evals/${i}/runs/${e}/output_items`,hn,{query:s,...r})}}class Iy extends Qe{constructor(){super(...arguments),this.outputItems=new PD(this._client)}create(e,n,r){return this._client.post(Re`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(Re`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(Re`/evals/${e}/runs`,hn,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(Re`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(Re`/evals/${i}/runs/${e}`,r)}}Iy.OutputItems=PD;class Ly extends Qe{constructor(){super(...arguments),this.runs=new Iy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(Re`/evals/${e}`,n)}update(e,n,r){return this._client.post(Re`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",hn,{query:e,...n})}delete(e,n){return this._client.delete(Re`/evals/${e}`,n)}}Ly.Runs=Iy;let OD=class extends Qe{create(e,n){return this._client.post("/files",po({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Re`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",hn,{query:e,...n})}delete(e,n){return this._client.delete(Re`/files/${e}`,n)}content(e,n){return this._client.get(Re`/files/${e}/content`,{...n,headers:Ge([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Yu(n),o=await this.retrieve(e),Date.now()-s>r)throw new xy({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class MD extends Qe{}let jD=class extends Qe{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Py extends Qe{constructor(){super(...arguments),this.graders=new jD(this._client)}}Py.Graders=jD;class FD extends Qe{create(e,n,r){return this._client.getAPIList(Re`/fine_tuning/checkpoints/${e}/permissions`,jh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(Re`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(Re`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let Oy=class extends Qe{constructor(){super(...arguments),this.permissions=new FD(this._client)}};Oy.Permissions=FD;class BD extends Qe{list(e,n={},r){return this._client.getAPIList(Re`/fine_tuning/jobs/${e}/checkpoints`,hn,{query:n,...r})}}class My extends Qe{constructor(){super(...arguments),this.checkpoints=new BD(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(Re`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",hn,{query:e,...n})}cancel(e,n){return this._client.post(Re`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(Re`/fine_tuning/jobs/${e}/events`,hn,{query:n,...r})}pause(e,n){return this._client.post(Re`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(Re`/fine_tuning/jobs/${e}/resume`,n)}}My.Checkpoints=BD;class Oa extends Qe{constructor(){super(...arguments),this.methods=new MD(this._client),this.jobs=new My(this._client),this.checkpoints=new Oy(this._client),this.alpha=new Py(this._client)}}Oa.Methods=MD;Oa.Jobs=My;Oa.Checkpoints=Oy;Oa.Alpha=Py;class zD extends Qe{}class jy extends Qe{constructor(){super(...arguments),this.graderModels=new zD(this._client)}}jy.GraderModels=zD;class UD extends Qe{createVariation(e,n){return this._client.post("/images/variations",po({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",po({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class $D extends Qe{retrieve(e,n){return this._client.get(Re`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",jh,e)}delete(e,n){return this._client.delete(Re`/models/${e}`,n)}}class WD extends Qe{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class HD extends Qe{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Fy extends Qe{constructor(){super(...arguments),this.clientSecrets=new HD(this._client)}}Fy.ClientSecrets=HD;function n$(t,e){return!e||!i$(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:VD(t,e)}function VD(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:a$(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:r$(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||h0(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function r$(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function i$(t){var e;return!!Sy((e=t.text)==null?void 0:e.format)}function s$(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function o$(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function a$(t,e){const n=o$(t.tools??[],e.name);return{...e,...e,parsed_arguments:s$(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function h0(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ro,zc,is,Uc,u1,c1,d1,f1;class By extends Ey{constructor(e){super(),Ro.add(this),zc.set(this,void 0),is.set(this,void 0),Uc.set(this,void 0),tt(this,zc,e)}static createResponse(e,n,r){const i=new By(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),se(this,Ro,"m",u1).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)se(this,Ro,"m",c1).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Tr;return se(this,Ro,"m",d1).call(this)}[(zc=new WeakMap,is=new WeakMap,Uc=new WeakMap,Ro=new WeakSet,u1=function(){this.ended||tt(this,is,void 0)},c1=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=se(this,Ro,"m",f1).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new Xe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},d1=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=se(this,is,"f");if(!n)throw new Xe("request ended without sending any events");tt(this,is,void 0);const r=l$(n,se(this,zc,"f"));return tt(this,Uc,r),r},f1=function(n){var i;let r=se(this,is,"f");if(!r){if(n.type!=="response.created")throw new Xe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=tt(this,is,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Xe(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Xe(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new Xe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Xe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Xe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new Xe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new Xe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{tt(this,is,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=se(this,Uc,"f");if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}}function l$(t,e){return n$(t,e)}class qD extends Qe{list(e,n={},r){return this._client.getAPIList(Re`/responses/${e}/input_items`,hn,{query:n,...r})}}class zy extends Qe{constructor(){super(...arguments),this.inputItems=new qD(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&h0(r),r))}retrieve(e,n={},r){return this._client.get(Re`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&h0(i),i))}delete(e,n){return this._client.delete(Re`/responses/${e}`,{...n,headers:Ge([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>VD(r,e))}stream(e,n){return By.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(Re`/responses/${e}/cancel`,n)}}zy.InputItems=qD;class KD extends Qe{create(e,n,r){return this._client.post(Re`/uploads/${e}/parts`,po({body:n,...r},this._client))}}class Uy extends Qe{constructor(){super(...arguments),this.parts=new KD(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(Re`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(Re`/uploads/${e}/complete`,{body:n,...r})}}Uy.Parts=KD;const u$=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class XD extends Qe{create(e,n,r){return this._client.post(Re`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(Re`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(Re`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(Re`/vector_stores/${i}/file_batches/${e}/files`,hn,{query:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Yu(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function d(h){for(let f of h){const v=await a.files.create({file:f,purpose:"assistants"},i);u.push(v.id)}}const c=Array(o).fill(l).map(d);return await u$(c),await this.createAndPoll(e,{file_ids:u})}}class GD extends Qe{create(e,n,r){return this._client.post(Re`/vector_stores/${e}/files`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(Re`/vector_stores/${i}/files/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(Re`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Re`/vector_stores/${e}/files`,hn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(Re`/vector_stores/${i}/files/${e}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=Ge([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Yu(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(Re`/vector_stores/${i}/files/${e}/content`,jh,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class zh extends Qe{constructor(){super(...arguments),this.files=new GD(this._client),this.fileBatches=new XD(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Re`/vector_stores/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Re`/vector_stores/${e}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",hn,{query:e,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(Re`/vector_stores/${e}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(Re`/vector_stores/${e}/search`,jh,{body:n,method:"post",...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}zh.Files=GD;zh.FileBatches=XD;var Uo,YD,kd;class ZD extends Qe{constructor(){super(...arguments),Uo.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");se(this,Uo,"m",YD).call(this,r);const s=Ge([n]).values,o=se(this,Uo,"m",kd).call(this,s,"webhook-signature"),a=se(this,Uo,"m",kd).call(this,s,"webhook-timestamp"),l=se(this,Uo,"m",kd).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new fl("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-u>i)throw new fl("Webhook timestamp is too old");if(u>d+i)throw new fl("Webhook timestamp is too new");const c=o.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),h=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),f=l?`${l}.${a}.${e}`:`${a}.${e}`,v=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of c)try{const g=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,g,new TextEncoder().encode(f)))return}catch{continue}throw new fl("The given webhook signature does not match the expected signature")}}Uo=new WeakSet,YD=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},kd=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var p0,$y,Ed,QD;class dt{constructor({baseURL:e=To("OPENAI_BASE_URL"),apiKey:n=To("OPENAI_API_KEY"),organization:r=To("OPENAI_ORG_ID")??null,project:i=To("OPENAI_PROJECT_ID")??null,webhookSecret:s=To("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(p0.add(this),Ed.set(this,void 0),this.completions=new TD(this),this.chat=new Ay(this),this.embeddings=new LD(this),this.files=new OD(this),this.images=new UD(this),this.audio=new Qu(this),this.moderations=new WD(this),this.models=new $D(this),this.fineTuning=new Oa(this),this.graders=new jy(this),this.vectorStores=new zh(this),this.webhooks=new ZD(this),this.beta=new Ju(this),this.batches=new ED(this),this.uploads=new Uy(this),this.responses=new zy(this),this.realtime=new Fy(this),this.conversations=new Ry(this),this.evals=new Ly(this),this.containers=new Ty(this),n===void 0)throw new Xe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&uU())throw new Xe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??$y.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=Y2(a.logLevel,"ClientOptions.logLevel",this)??Y2(To("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??pU(),tt(this,Ed,gU),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ge([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return SU(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Bo}`}defaultIdempotencyKey(){return`stainless-node-retry-${AA()}`}makeStatusError(e,n,r,i){return In.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Xe?r:new Xe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Xe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!se(this,p0,"m",QD).call(this)&&r||this.baseURL,s=iU(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return sU(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new Mh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var p,m;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=r===void 0?"":`, retryOf: ${r}`,c=Date.now();if(Cn(this).debug(`[${u}] sending request`,Hs({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(p=i.signal)!=null&&p.aborted)throw new Tr;const h=new AbortController,f=await this.fetchWithTimeout(a,o,l,h).catch(r0),v=Date.now();if(f instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((m=i.signal)!=null&&m.aborted)throw new Tr;const _=n0(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(n)return Cn(this).info(`[${u}] connection ${_?"timed out":"failed"} - ${w}`),Cn(this).debug(`[${u}] connection ${_?"timed out":"failed"} (${w})`,Hs({retryOfRequestLogID:r,url:a,durationMs:v-c,message:f.message})),this.retryRequest(i,n,r??u);throw Cn(this).info(`[${u}] connection ${_?"timed out":"failed"} - error; no more retries left`),Cn(this).debug(`[${u}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Hs({retryOfRequestLogID:r,url:a,durationMs:v-c,message:f.message})),_?new xy:new Ph({cause:f})}const x=[...f.headers.entries()].filter(([w])=>w==="x-request-id").map(([w,_])=>", "+w+": "+JSON.stringify(_)).join(""),g=`[${u}${d}${x}] ${o.method} ${a} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${v-c}ms`;if(!f.ok){const w=await this.shouldRetry(f);if(n&&w){const T=`retrying, ${n} attempts remaining`;return await mU(f.body),Cn(this).info(`${g} - ${T}`),Cn(this).debug(`[${u}] response error (${T})`,Hs({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:v-c})),this.retryRequest(i,n,r??u,f.headers)}const _=w?"error; no more retries left":"error; not retryable";Cn(this).info(`${g} - ${_}`);const E=await f.text().catch(T=>r0(T).message),S=lU(E),b=S?void 0:E;throw Cn(this).debug(`[${u}] response error (${_})`,Hs({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:b,durationMs:Date.now()-c})),this.makeStatusError(f.status,S,b,f.headers)}return Cn(this).info(g),Cn(this).debug(`[${u}] response start`,Hs({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:v-c})),{response:f,options:i,controller:h,requestLogID:u,retryOfRequestLogID:r,startTime:c}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new RU(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,d={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(d.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Yu(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&aU("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:r}),c=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:c,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=Ge([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...hU(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ge([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:zA(e)}:se(this,Ed,"f").call(this,{body:e,headers:r})}}$y=dt,Ed=new WeakMap,p0=new WeakSet,QD=function(){return this.baseURL!=="https://api.openai.com/v1"};dt.OpenAI=$y;dt.DEFAULT_TIMEOUT=6e5;dt.OpenAIError=Xe;dt.APIError=In;dt.APIConnectionError=Ph;dt.APIConnectionTimeoutError=xy;dt.APIUserAbortError=Tr;dt.NotFoundError=RA;dt.ConflictError=IA;dt.RateLimitError=PA;dt.BadRequestError=DA;dt.AuthenticationError=NA;dt.InternalServerError=OA;dt.PermissionDeniedError=TA;dt.UnprocessableEntityError=LA;dt.InvalidWebhookSignatureError=fl;dt.toFile=FU;dt.Completions=TD;dt.Chat=Ay;dt.Embeddings=LD;dt.Files=OD;dt.Images=UD;dt.Audio=Qu;dt.Moderations=WD;dt.Models=$D;dt.FineTuning=Oa;dt.Graders=jy;dt.VectorStores=zh;dt.Webhooks=ZD;dt.Beta=Ju;dt.Batches=ED;dt.Uploads=Uy;dt.Responses=zy;dt.Realtime=Fy;dt.Conversations=Ry;dt.Evals=Ly;dt.Containers=Ty;const un={query:"thinking.type",disable:"disabled",enable:"enabled"},h1={"glm-4.5":un,"glm-4.5-air":un,"glm-4.5-x":un,"glm-4.5-flash":un,"glm-4.5v":un,"glm-4.1v-thinking-flashx":un,"glm-4.1v-thinking-flash":un,"glm-z1-air":un,"glm-z1-airx":un,"glm-z1-flash":un,"glm-z1-flashx":un,"glm-4-air-250414":un,"glm-4-flash-250414":un,"glm-4-plus":un,"glm-4-air":un,"glm-4-airx":un,"glm-4-flash":un,"glm-4-flashx":un,"glm-4v-plus-0111":un,"glm-4v-flash":un},Zi="contextMenu",Wy="hashMapId",ec="cache",Ff="latest-id.json",Qi=async()=>{if(!("storage"in navigator&&"getDirectory"in navigator.storage))throw new Error("OPFS is not supported in this browser");return await navigator.storage.getDirectory()},c$=async()=>{const t=await xi(async()=>{const n=await(await Qi()).getDirectoryHandle(Zi,{create:!0});await Promise.all([n.getDirectoryHandle(Wy,{create:!0}),n.getDirectoryHandle(ec,{create:!0})]);try{await n.getFileHandle(Ff)}catch{const i=await(await n.getFileHandle(Ff,{create:!0})).createWritable(),s={latestId:0};await i.write(JSON.stringify(s,null,2)),await i.close()}return!0},"initialize OPFS structure");if(!t.success)throw Le.error("Failed to initialize OPFS structure:",t.error),new Error(t.error);Le.log("OPFS structure initialized successfully")},d$=async t=>{if(!t||t.trim().length===0)throw new Error("Context cannot be empty");const n=new TextEncoder().encode(t.trim()),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(o=>o.toString(16).padStart(2,"0")).join("")},f$=async()=>{const t=await xi(async()=>{const s=await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getFileHandle(Ff)).getFile()).text();return JSON.parse(s).latestId},"read latest ID");return t.success?t.data:(Le.error("Failed to read latest ID:",t.error),0)},h$=async t=>{if(t<0)throw new Error("ID must be non-negative");const e=await xi(async()=>{const s=await(await(await(await Qi()).getDirectoryHandle(Zi)).getFileHandle(Ff,{create:!0})).createWritable(),o={latestId:t};return await s.write(JSON.stringify(o,null,2)),await s.close(),!0},`update latest ID to ${t}`);if(!e.success)throw Le.error("Failed to update latest ID:",e.error),new Error(e.error);Le.log(`Latest ID updated to ${t}`)},p$=async t=>{try{const o=await(await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(Wy)).getFileHandle(`${t}.json`)).getFile()).text();return JSON.parse(o)}catch{return null}},m$=async(t,e)=>{const n=await xi(async()=>{const a=await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(Wy,{create:!0})).getFileHandle(`${t}.json`,{create:!0})).createWritable(),l={id:e,hash:t,createdAt:new Date().toISOString()};return await a.write(JSON.stringify(l,null,2)),await a.close(),!0},"save hash mapping");if(!n.success)throw Le.error("Failed to save hash mapping:",n.error),new Error(n.error)},g$=c$,v$=async t=>{const e=await xi(async()=>{const a=await(await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(ec,{create:!0})).getDirectoryHandle(t.id.toString(),{create:!0})).getFileHandle("cache.json",{create:!0})).createWritable();return await a.write(JSON.stringify(t,null,2)),await a.close(),!0},`save context metadata for ID ${t.id}`);if(!e.success)throw Le.error("Failed to save context metadata:",e.error),new Error(e.error)},y$=async(t,e)=>{Le.log("[ContextCache] getOrCreateContextId called",{wordsLength:t.length,contextLength:e.length,wordsPreview:t.slice(0,50)});const n=await d$(e);Le.log("[ContextCache] Hash generated:",n.slice(0,16)+"...");const r=await p$(n);if(r)return Le.log(`[ContextCache]  Reusing existing context ID ${r.id} for hash ${n.slice(0,8)}...`),r.id;Le.log("[ContextCache] Creating new context ID...");const s=await f$()+1;Le.log(`[ContextCache] New ID assigned: ${s}`);const o={id:s,words:t,context:e,createdAt:new Date().toISOString()};return Le.log("[ContextCache] Saving mappings to OPFS..."),await Promise.all([m$(n,s),v$(o),h$(s)]),Le.log(`[ContextCache]  Created new context ID ${s} for hash ${n.slice(0,8)}...`),s},x$=async t=>{const e=await xi(async()=>{const l=await(await(await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(ec)).getDirectoryHandle(t.toString())).getFileHandle("cache.json")).getFile()).text();return JSON.parse(l)},`read context metadata for ID ${t}`);return e.success?e.data:(Le.error(`Context metadata not found for ID ${t}:`,e.error),null)},w$=async(t,e)=>{const n=await xi(async()=>{const u=await(await(await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(ec)).getDirectoryHandle(t.toString())).getFileHandle(`${e}.json`)).getFile()).text();return JSON.parse(u)},`check AI tool cache for ${e} (context ${t})`);return n.success?(Le.log(`Cache HIT for ${e} (context ${t})`),n.data):null},b$=async(t,e,n)=>{const r=await xi(async()=>{const u=await(await(await(await(await(await Qi()).getDirectoryHandle(Zi)).getDirectoryHandle(ec)).getDirectoryHandle(t.toString(),{create:!0})).getFileHandle(`${e}.json`,{create:!0})).createWritable();return await u.write(JSON.stringify(n,null,2)),await u.close(),!0},`save AI tool cache for ${e} (context ${t})`);if(!r.success)throw Le.error("Failed to save AI tool cache:",r.error),new Error(r.error);Le.log(`Cache saved for ${e} (context ${t})`)},S$=({setMessageList:t,messageList:e,onUpdateAIResponse:n,...r})=>{const i=o=>{t(a=>{if(!a.length||a[a.length-1].role!=="assistant")return[...a,{role:"assistant",data:{content:o,model:r.model,reasoningContentCompleted:!0}}];const l=[...a],u=l[l.length-1];return u.role==="assistant"&&(l[l.length-1]={role:"assistant",data:{...u.data,content:o,reasoningContentCompleted:!0}}),l})};return async(o,a)=>{var f,v,x;if(!(a!=null&&a.ignoreCache)&&o.length===1&&o[0].role==="user"){Le.log(`[useFetchAIMessage] Checking cache for tool "${r.toolName}" (context ${r.contextId})`);const g=await w$(r.contextId,r.toolName);if(g){Le.log(`[useFetchAIMessage]  Cache HIT! Using cached response for "${r.toolName}"`);const p=g.conversations.map(m=>m.role==="user"?{role:"user",content:m.content}:{role:"assistant",data:{content:m.content,model:g.model,reasoningContentCompleted:!0,usage:{promptTokens:g.tokenUsage.prompt,completionTokens:g.tokenUsage.completion,totalTokens:g.tokenUsage.total}}});t(p),Le.log(`[useFetchAIMessage]  Cache restored ${p.length} messages`);return}Le.log("[useFetchAIMessage] Cache MISS - fetching from API")}const l={content:"",reasoningContentCompleted:!1,model:r.model};t([...o,{role:"assistant",data:l}]),(f=r.abortControllerRef.current)==null||f.abort();const u=new AbortController;r.abortControllerRef.current=u;const d=new dt({apiKey:r.apiKey,baseURL:r.api,dangerouslyAllowBrowser:!0}),c=o.map(g=>({role:g.role,content:g.role==="user"?g.content:g.data.content}));let h={model:r.model,messages:c,stream:!0,stream_options:{include_usage:!0}};h=k$(h,r.model,!!r.reasoningEnabled);try{const g=await d.chat.completions.create(h,{signal:u.signal});for await(const p of g){if(u.signal.aborted)break;if((x=(v=p==null?void 0:p.choices)==null?void 0:v[0])!=null&&x.delta){const m=p.choices[0].delta;if(l.content+=m.content||"",r.reasoningEnabled){const w=m.reasoning_content||m.reasoningContent||"";w&&(l.reasoningContent?l.reasoningContent+=w:l.reasoningContent=w)}n(l)}p!=null&&p.usage&&(l.usage={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens,totalTokens:p.usage.total_tokens},n(l))}}catch(g){if(!u.signal.aborted){const p=g instanceof Error?g.message:"Request failed";i(p)}}finally{if(r.abortControllerRef.current=null,o.length===1&&o[0].role==="user"&&l.usage&&l.content){Le.log(`[useFetchAIMessage] Saving response to cache for tool "${r.toolName}"`);const g=o[0];try{await b$(r.contextId,r.toolName,{toolName:r.toolName,conversations:[{role:"user",content:g.content},{role:"assistant",content:l.content}],tokenUsage:{prompt:l.usage.promptTokens,completion:l.usage.completionTokens,total:l.usage.totalTokens},updatedAt:new Date().toISOString(),model:r.model}),Le.log("[useFetchAIMessage]  Cache saved successfully")}catch(p){Le.error("[useFetchAIMessage] Failed to save cache:",p)}}}}},k$=(t,e,n)=>{n&&(t.reasoning_effort="low");const r=new Map,i=new Set(Object.keys(h1).map(h=>{const f=h.toLowerCase();return r.set(f,h),f})),s=e.toLowerCase();if(!i.has(s))return t;const a=r.get(s),l=h1[a];if(!l)return t;const d=l.query.split(".");let c=t;for(let h=0;h<d.length;h++){const f=d[h];if(h===d.length-1){const v=n?l.enable:l.disable;c[f]=v}else(typeof c[f]!="object"||c[f]===null)&&(c[f]={}),c=c[f]}return t},E$=t=>{const e=A.useRef(null),n=A.useRef(!0),r=A.useRef(!0),i=t.viewMode??"simple",{onViewModeChange:s,onScrollTargetMount:o}=t,a=CA({template:t.prompt,words:t.words,context:t.context}),[l,u]=A.useState([{role:"user",content:a}]),d=A.useRef(null),c=A.useCallback(D=>{u(T=>{const C=T[T.length-1];if(C.role!=="assistant")throw new Error("Latest message is not AI type");return T[T.length-1]={...C,data:{...C.data,...D}},[...T]})},[]),h=S$({setMessageList:u,apiKey:t.apiKey,api:t.api,model:t.model,messageList:l,onUpdateAIResponse:c,reasoningEnabled:t.reasoningEnabled,abortControllerRef:d,contextId:t.contextId,toolName:t.toolName}),f=A.useCallback(D=>{const T=[...l,{role:"user",content:D}];h(T)},[l,h]),v=A.useRef(!1);A.useEffect(()=>{v.current||(v.current=!0,h(l))},[h,l]);const x=A.useRef(t.refreshId);A.useEffect(()=>{if(t.refreshId!==void 0&&t.refreshId!==x.current){if(x.current=t.refreshId,l.length===0)return;let D=[...l];D[D.length-1].role==="assistant"&&(D=D.slice(0,-1),u(D)),h(D,{ignoreCache:!0})}},[t.refreshId,l,h]),A.useEffect(()=>()=>{var D;(D=d.current)==null||D.abort()},[]);const{scrollToBottom:g,handleOnPauseAutoScroll:p,handleResumeAutoScroll:m,bufferPx:w,handleWheelEvent:_}=eF({isAutoScrollRef:n,isGoToBottomRef:r,scrollContainerRef:e});A.useEffect(()=>(i==="conversation"&&e.current?o==null||o(e.current):o==null||o(null),()=>{o==null||o(null)}),[i,o]),A.useEffect(()=>{e.current&&(i==="simple"?e.current.scrollTop=0:i==="conversation"&&setTimeout(()=>{g({behavior:"auto"}),r.current=!0},0))},[e,i,g]),A.useEffect(()=>{n.current&&r.current&&i==="conversation"&&g()},[l,g,i]);const E=A.useCallback(()=>{r.current&&g()},[g]),S=A.useCallback(D=>{s==null||s(D)},[s]);if(i==="simple")return y.jsx("div",{className:"h-auto",children:y.jsx(B2,{messageList:l,viewMode:"simple",onChatClick:()=>S("conversation"),fallbackModel:t.model,onDrilldownSelect:t.onDrilldownSelect,...t})});const b=y.jsxs("div",{className:"pointer-events-auto relative flex h-full flex-col bg-white",style:{height:t.containerHeight?`${t.containerHeight}px`:"100%"},children:[y.jsxs("div",{className:"flex-1 overflow-y-scroll",ref:e,onTouchStart:p,onMouseDown:p,onTouchEnd:m,onMouseUp:m,onWheel:_,onScroll:D=>{const T=D.currentTarget.scrollTop+D.currentTarget.clientHeight>=D.currentTarget.scrollHeight-w;r.current=T},children:[y.jsx(B2,{messageList:l,viewMode:"conversation",onChatClick:()=>{},onDrilldownSelect:t.onDrilldownSelect,...t}),y.jsx("div",{className:"w-full pb-4 text-center text-sm text-gray-400",children:"-- You've reached the end! --"})]}),y.jsx(nU,{onVisible:E,onSend:f,mode:i,onModeChange:S})]});return i==="conversation"&&t.chatPortalTarget?Vr.createPortal(b,t.chatPortalTarget):b},JD=(t,e,n)=>CA({template:t,words:encodeURIComponent(e),context:encodeURIComponent(n),wrapContext:!1}),_$=({url:t,words:e,context:n,minHeight:r,preResolvedUrl:i})=>{const[s,o]=A.useState(!0),[a,l]=A.useState(!1),[u,d]=A.useState(!1),c=A.useMemo(()=>i||JD(t,e,n),[n,t,e,i]),h=()=>{o(!1),l(!1),d(!0)},f=()=>{o(!1),l(!0)};return a?y.jsx("div",{className:"flex flex-1 items-center justify-center bg-gray-50",children:y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"mb-2 text-red-600",children:"Failed to load content"}),y.jsx("p",{className:"text-gray-600",children:"Please try again later"})]})}):y.jsxs("div",{className:"relative w-full overflow-hidden",style:{height:r||"100%"},children:[s&&y.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-gray-50",children:y.jsx(yC,{})}),y.jsx("iframe",{src:c,title:"Iframe",className:"h-full w-full border-0",style:{visibility:s&&!u?"hidden":"visible",borderRadius:"inherit"},onLoad:h,onError:f})]})};function C$(t){return Gt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A6 6 0 0 1 5 6.708V2.277a3 3 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354m1.58 1.408-.002-.001zm-.002-.001.002.001A.5.5 0 0 1 6 2v5a.5.5 0 0 1-.276.447h-.002l-.012.007-.054.03a5 5 0 0 0-.827.58c-.318.278-.585.596-.725.936h7.792c-.14-.34-.407-.658-.725-.936a5 5 0 0 0-.881-.61l-.012-.006h-.002A.5.5 0 0 1 10 7V2a.5.5 0 0 1 .295-.458 1.8 1.8 0 0 0 .351-.271c.08-.08.155-.17.214-.271H5.14q.091.15.214.271a1.8 1.8 0 0 0 .37.282"},child:[]}]})(t)}function A$(t){return Gt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06L5.44 6.5H2.75a.75.75 0 0 0 0 1.5h4.5A.75.75 0 0 0 8 7.25v-4.5a.75.75 0 0 0-1.5 0v2.69L3.28 2.22ZM13.5 2.75a.75.75 0 0 0-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L13.5 5.44V2.75ZM3.28 17.78l3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 1 0 1.06 1.06ZM13.5 14.56l3.22 3.22a.75.75 0 1 0 1.06-1.06l-3.22-3.22h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-2.69Z"},child:[]}]})(t)}function D$(t){return Gt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"m13.28 7.78 3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 0 0 1.06 1.06ZM2 17.25v-4.5a.75.75 0 0 1 1.5 0v2.69l3.22-3.22a.75.75 0 0 1 1.06 1.06L4.56 16.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.747.747 0 0 1-.75-.75ZM12.22 13.28l3.22 3.22h-2.69a.75.75 0 0 0 0 1.5h4.5a.747.747 0 0 0 .75-.75v-4.5a.75.75 0 0 0-1.5 0v2.69l-3.22-3.22a.75.75 0 1 0-1.06 1.06ZM3.5 4.56l3.22 3.22a.75.75 0 0 0 1.06-1.06L4.56 3.5h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0V4.56Z"},child:[]}]})(t)}function N$(t){return Gt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function T$(t){return Gt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function R$(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(t)}function I$(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function L$(t){return Gt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},child:[]},{tag:"path",attr:{d:"M3 3v5h5"},child:[]},{tag:"path",attr:{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},child:[]},{tag:"path",attr:{d:"M16 16h5v5"},child:[]}]})(t)}function P$(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}function O$(t){return Gt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"},child:[]}]})(t)}const M$=t=>{const e=A.useRef({}),n=i=>{var s;return(s=e.current[t])==null?void 0:s[i]},r=(i,s)=>{e.current[t]||(e.current[t]={}),e.current[t][i]=s};return A.useEffect(()=>{const i=t,s=Object.keys(e.current).map(Number);s.length>5&&s.filter(a=>a!==i).forEach(a=>{delete e.current[a]})},[t]),{getCachedUrl:n,setCachedUrl:r}},p1=40*16,j$=/Mac/,m1=()=>typeof window>"u"?{width:0,height:0}:{width:window.innerWidth,height:window.innerHeight},tc=t=>t>=640?24:12,Bf=(t,e,n)=>Math.min(Math.max(t,e),n),zf=(t,e)=>{const n=tc(e.width),r=Math.max(e.width-n*2,0),i=Math.max(e.height-n*2,0);return{width:Math.min(t.width,r),height:Math.min(t.height,i)}},g1=(t,e,n)=>{const r=tc(n.width),i=r+Math.max(n.width-r*2-e.width,0),s=r+Math.max(n.height-r*2-e.height,0);return{left:Bf(t.left,r,i),top:Bf(t.top,r,s)}},v1=t=>{const e=zf({width:p1,height:p1},t),n=tc(t.width),r=Math.max(t.width-n*2-e.width,0),i=Math.max(t.height-n*2-e.height,0);return{size:e,position:{left:n+r/2,top:n+i/2}}},$c=t=>{const e=tc(t.width);return{size:zf({width:Math.max(t.width-e*2,0),height:Math.max(t.height-e*2,0)},t),position:{left:e,top:e}}},Wc=({onClick:t,ariaLabel:e,children:n,className:r})=>y.jsx("button",{type:"button","aria-label":e,onClick:t,onPointerDown:i=>i.stopPropagation(),className:"flex h-7 w-7 items-center justify-center rounded hover:bg-black/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-black"+(r?` ${r}`:""),children:n}),F$=t=>{const{tabIndex:e,onChangeIndex:n,isTopMost:r,onClose:i,selectionId:s,isWindowSizeLocked:o,pinnedMaximized:a,onPinnedChange:l}=t,u=o??!1,[d,c]=A.useState(!1),[h,f]=A.useState(m1()),[v,x]=A.useState(a),g=A.useMemo(()=>v?$c(h):v1(h),[h,v]),[p,m]=A.useState(v?"maximized":"normal"),[w,_]=A.useState(g.size),[E,S]=A.useState(g.position),b=A.useRef(null),D=A.useRef(null),T=A.useRef(h),C=A.useRef(E),I=A.useRef(w),M=A.useMemo(()=>t.items.filter(N=>N.enabled!==!1),[t.items]),H=A.useMemo(()=>typeof navigator<"u"&&j$.test(navigator.userAgent),[]),[q,W]=A.useState("stackedSimple"),K=A.useRef(null),G=A.useRef([]),$=A.useRef(!1),[te,L]=A.useState(0),ce=A.useRef(null),[oe,F]=A.useState({}),[xe,Fe]=A.useState({}),[Ne,He]=A.useState(null),[le,Pe]=A.useState({isAtTop:!0,isAtBottom:!1}),[ve,ke]=A.useState(!1),{getCachedUrl:Ue,setCachedUrl:Ve}=M$(s);A.useEffect(()=>{T.current=h},[h]),A.useEffect(()=>{C.current=E},[E]),A.useEffect(()=>{I.current=w},[w]),A.useEffect(()=>{x(a)},[a]),A.useEffect(()=>{F({}),Fe({})},[s]);const ot=A.useCallback(()=>q==="tabbedConversation"?Ne:K.current,[q,Ne]);A.useEffect(()=>{const N=ot();if(!N){Pe({isAtTop:!0,isAtBottom:!0});return}const z=()=>{const{scrollTop:j,scrollHeight:U,clientHeight:V}=N,ie=Math.abs(U-V-j)<2,ge=j<=0;Pe({isAtTop:ge,isAtBottom:ie})};z(),N.addEventListener("scroll",z);const Z=new ResizeObserver(z);return Z.observe(N),()=>{N.removeEventListener("scroll",z),Z.disconnect()}},[ot,te]);const ft=32,vt=A.useCallback(()=>{const N=ot();if(N){const z=N.clientHeight-ft;N.scrollBy({top:-z,behavior:"smooth"})}},[ot]),at=A.useCallback(()=>{const N=ot();if(N){const{scrollTop:z,scrollHeight:Z,clientHeight:j}=N,U=Z-j-z,V=j-ft;U<=V?N.scrollTo({top:Z,behavior:"smooth"}):N.scrollBy({top:V,behavior:"smooth"})}},[ot]);A.useEffect(()=>{e!==null&&M.length!==0&&(e<0||e>=M.length?(c(!0),n(0)):c(!1))},[e,M.length,n]),A.useEffect(()=>{const N=()=>f(m1());return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]),A.useEffect(()=>{if(p==="maximized"){const N=$c(h);_(N.size),S(N.position);return}_(N=>{const z=zf(N,h);return S(Z=>g1(Z,z,h)),z})},[h,p]),A.useEffect(()=>{if(!v)return;const N=$c(T.current);m("maximized"),_(N.size),S(N.position)},[v]),A.useEffect(()=>{if(q!=="stackedSimple")return;const N=K.current;if(!N)return;const z=()=>{if(!N)return;const Z=N.getBoundingClientRect(),j=Z.top+Z.height/2;let U=-1;G.current.forEach((V,ie)=>{if(!V)return;const ge=V.getBoundingClientRect();ge.top<=j&&ge.bottom>=j&&(U=ie)}),U!==-1&&U!==e&&($.current=!0,n(U),setTimeout(()=>{$.current=!1},100))};return N.addEventListener("scroll",z),()=>N.removeEventListener("scroll",z)},[q,e,M,n]),A.useEffect(()=>{q==="stackedSimple"&&!$.current&&e!==null&&G.current[e]&&setTimeout(()=>{var N;(N=G.current[e])==null||N.scrollIntoView({block:"start"})},0)},[q,s,e]);const Ct=A.useCallback(N=>{const z=D.current;if(!z)return;const Z=T.current,j=I.current,U=tc(Z.width),V=Math.max(Z.width-U*2-j.width,0),ie=Math.max(Z.height-U*2-j.height,0),ge=Bf(z.originLeft+(N.clientX-z.startX),U,U+V),we=Bf(z.originTop+(N.clientY-z.startY),U,U+ie);S({left:ge,top:we})},[]),Tt=A.useCallback(()=>{window.removeEventListener("pointermove",Ct),window.removeEventListener("pointerup",Tt),window.removeEventListener("pointercancel",Tt),D.current=null},[Ct]);A.useEffect(()=>()=>{window.removeEventListener("pointermove",Ct),window.removeEventListener("pointerup",Tt),window.removeEventListener("pointercancel",Tt)},[Tt,Ct]);const Dt=A.useCallback(N=>{p==="normal"&&(D.current={startX:N.clientX,startY:N.clientY,originLeft:C.current.left,originTop:C.current.top},window.addEventListener("pointermove",Ct),window.addEventListener("pointerup",Tt),window.addEventListener("pointercancel",Tt))},[Tt,Ct,p]),Rt=A.useCallback(()=>{const N=T.current,z=$c(N);b.current={position:C.current,size:I.current},m("maximized"),_(z.size),S(z.position)},[]),ut=A.useCallback(()=>{if(v)return;const N=T.current,z=b.current||v1(N),Z=zf(z.size,N),j=g1(z.position,Z,N);m("normal"),_(Z),S(j)},[v]),Je=N=>{var z;n(N),W("stackedSimple"),q==="stackedSimple"&&((z=G.current[N])==null||z.scrollIntoView({behavior:"smooth",block:"start"})),G.current.forEach(Z=>{Z&&(Z.style.height="")})},It=(N,z)=>{const Z=G.current[z];N==="conversation"?(Z&&(Z.style.height=`${Z.offsetHeight}px`),W("tabbedConversation"),n(z)):(Z&&(Z.style.height=""),W("stackedSimple"))},rn=A.useCallback(()=>{r&&i()},[r,i]);A.useEffect(()=>{const N=K.current;if(!N)return;const z=new ResizeObserver(Z=>{for(const j of Z)L(j.contentRect.height)});return z.observe(N),()=>z.disconnect()},[q,w]);const ae=N=>t.defaultModel||N.model||"",me=p==="maximized",Be=me&&!u,We={width:`${w.width}px`,height:`${w.height}px`,left:`${E.left}px`,top:`${E.top}px`},Ze=y.jsx(Wc,{ariaLabel:"Close window",onClick:i,children:y.jsx(ku,{className:"size-5"})}),pt=A.useCallback(()=>{x(N=>{const z=!N;return l(z),z})},[l]),Bt=Be?y.jsx(Wc,{ariaLabel:v?"Unpin window":"Pin window",onClick:pt,className:v?"bg-gray-500 text-white hover:bg-gray-500":"",children:y.jsx(C$,{className:`h-4 w-4 ${v?"text-white":"text-black"}`,"aria-hidden":!0})}):null,it=y.jsx(Wc,{ariaLabel:"Show help",onClick:()=>ke(!0),children:y.jsx(I$,{className:"h-4 w-4 text-black","aria-hidden":!0})}),Ft=y.jsx(Wc,{ariaLabel:me?"Restore window size":"Maximize window",onClick:me?ut:Rt,children:me?y.jsx(A$,{className:"h-4 w-4 text-black","aria-hidden":!0}):y.jsx(D$,{className:"h-4 w-4 text-black","aria-hidden":!0})}),Yt=y.jsxs("div",{className:"flex items-center gap-2",children:[Ze,v?null:Ft,Bt,it]}),O=y.jsxs("div",{className:"flex items-center gap-2",children:[it,Bt,v?null:Ft,Ze]}),fe=["flex size-6 items-center justify-center rounded-full","bg-white text-black shadow-md border border-gray-200","hover:bg-gray-50 active:bg-gray-100","disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none","transition-all duration-200"].join(" "),pe="size-5",Oe=y.jsxs("div",{className:"absolute bottom-[-1rem] right-1 z-50 flex -translate-y-1/2 flex-col gap-4",children:[y.jsx("button",{className:fe,onClick:vt,disabled:le.isAtTop,"aria-label":"Scroll up",children:y.jsx(O$,{className:pe})}),y.jsx("button",{className:fe,onClick:at,disabled:le.isAtBottom,"aria-label":"Scroll down",children:y.jsx(P$,{className:pe})})]}),Y=H?Yt:null,ue=H?null:O,R=A.useCallback(N=>{if(u)return;const z=N.target;z!=null&&z.closest("button")||(p==="maximized"?ut():Rt())},[Rt,ut,u,p]),de=90,ze=Math.max(w.height-163,200),k=w.height-de,ne=te>0?te:k;return e!==null&&M.length>0&&d===!1?y.jsxs("div",{className:"absolute inset-0 z-50 px-3 py-3 sm:px-6 sm:py-6",onClick:rn,style:t.zIndex?{zIndex:t.zIndex}:void 0,children:[y.jsxs("div",{className:["absolute flex flex-col divide-y divide-black overflow-hidden","rounded border border-black bg-white text-black shadow-lg"].join(" "),style:We,onClick:N=>N.stopPropagation(),children:[y.jsxs("div",{className:"relative flex h-10 items-center bg-slate-100 px-3 text-sm font-medium text-black",onPointerDown:Dt,onDoubleClick:R,role:"presentation",children:[y.jsx("div",{className:"flex flex-1 items-center gap-2",children:Y}),y.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 select-none",children:"Context Menu"}),y.jsx("div",{className:"flex flex-1 items-center justify-end gap-2",children:ue})]}),y.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[Oe,y.jsx("div",{ref:ce,className:`pointer-events-none absolute inset-0 z-20 ${q==="tabbedConversation"?"block":"hidden"}`}),y.jsx("div",{ref:K,className:`h-full w-full overflow-y-auto scroll-smooth ${q==="tabbedConversation"?"invisible":""}`,children:M.map((N,z)=>{const Z=`${t.selectionId}-${z}`,j=z===e,U="relative border-b border-gray-200 last:border-b-0",V=N.type==="iframe",ie=N.type==="AI",ge=`${z}`,we=z,Ee=V?oe[ge]??0:0,_e=ie?xe[we]??0:0;let De="";if(V){const Me=Ue(z);Me?De=Me:(De=JD(N.url,t.words,t.context),Ve(z,De))}const Te=["flex items-center justify-center rounded text-gray-500","hover:bg-gray-100","focus-visible:outline focus-visible:outline-2","focus-visible:outline-offset-2 focus-visible:outline-black","disabled:cursor-not-allowed disabled:text-gray-300"].join(" ");return y.jsxs("div",{ref:Me=>G.current[z]=Me,className:U,children:[y.jsxs("div",{className:["sticky top-0 z-20 flex items-center justify-between","border-b border-gray-100 bg-gray-50 px-4 py-2","text-xs font-semibold uppercase text-gray-500"].join(" "),children:[y.jsx("span",{className:"truncate",children:N.shortName||N.name}),V||ie?y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{type:"button","aria-label":ie?"Regenerate response":"Refresh iframe",className:Te,onClick:()=>{V?F(Me=>({...Me,[ge]:(Me[ge]??0)+1})):Fe(Me=>({...Me,[we]:(Me[we]??0)+1}))},disabled:V&&!De,children:y.jsx(L$,{className:"h-4 w-4","aria-hidden":!0})}),V&&y.jsx("button",{type:"button","aria-label":"Open iframe in new window",className:Te,onClick:()=>De&&window.open(De,"_blank","noreferrer noopener"),disabled:!De,children:y.jsx(R$,{className:"h-3.5 w-3.5","aria-hidden":!0})})]}):null]}),N.type==="AI"?y.jsx("div",{children:y.jsx(E$,{api:t.api,apiKey:t.apiKey,words:t.words,context:t.context,contextId:t.contextId,toolName:N.name,model:ae(N),prompt:N.prompt,reasoningEnabled:N.reasoningEnabled,onDrilldownSelect:t.onDrilldownSelect,viewMode:q==="tabbedConversation"&&j?"conversation":"simple",onViewModeChange:Me=>It(Me,z),containerHeight:ne,chatPortalTarget:ce.current,refreshId:_e,onScrollTargetMount:He})}):y.jsx(_$,{url:N.url,words:t.words,context:t.context,minHeight:`${ze}px`,preResolvedUrl:De},`${Z}-${Ee}`)]},Z)})})]}),y.jsx("div",{className:"flex h-12 justify-between divide-x divide-black",children:M.map((N,z)=>y.jsx("button",{onClick:()=>Je(z),className:`w-full ${z===e?"bg-black text-white":""}`,children:N.shortName||N.name},z))})]}),ve&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50",onClick:()=>ke(!1),children:y.jsxs("div",{className:"mx-4 max-w-lg rounded-lg bg-white p-6 shadow-xl",onClick:N=>N.stopPropagation(),children:[y.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Context Menu Help"}),y.jsx("button",{onClick:()=>ke(!1),className:"rounded p-1 hover:bg-gray-100","aria-label":"Close help",children:y.jsx(ku,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:"URL-Based State"}),y.jsxs("p",{children:["Context menus are saved in the URL (e.g.,"," ",y.jsx("code",{className:"rounded bg-gray-100 px-1",children:"?contextMenu=1,2,3"}),"). Share the URL or reload the page to restore your context menus."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:"Stacking Order"}),y.jsxs("p",{children:["Multiple context menus stack from left to right in the URL. The rightmost ID (e.g., ",y.jsx("code",{className:"rounded bg-gray-100 px-1",children:"3"}),") is the topmost menu."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Response Caching"}),y.jsx("p",{children:"AI responses are cached automatically. Selecting the same text again will show the cached response instantly."})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:"Closing Menus"}),y.jsxs("ul",{className:"list-inside list-disc space-y-1",children:[y.jsxs("li",{children:["Click the ",y.jsx("strong",{children:"X"})," button in the header"]}),y.jsx("li",{children:"Click outside the context menu"}),y.jsxs("li",{children:["Press ",y.jsx("strong",{children:"ESC"})," key (closes topmost menu)"]}),y.jsx("li",{children:"Navigate to a different page"})]})]})]}),y.jsx("div",{className:"mt-6",children:y.jsx("button",{onClick:()=>ke(!1),className:"w-full rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:"Got it!"})})]})})]}):y.jsx(y.Fragment,{})},eN=({onClick:t,className:e,icon:n})=>{const r="absolute  z-20 text-gray-700 ";console.log("Render PrevPageButton");const i=kt.useRef(null),s=()=>{i.current.style.top=`calc(50% - ${i.current.offsetHeight/2}px)`};return A.useEffect(()=>{i.current&&s()},[i]),y.jsx("button",{ref:i,onClick:o=>{o.stopPropagation(),t()},className:`${r} ${e}`,children:n({className:"h-20 w-4 opacity-10"})})},B$=({onClick:t})=>y.jsx(eN,{onClick:t,icon:N$}),z$=({onClick:t})=>(console.log("Render NextPageButton"),y.jsx(eN,{onClick:t,icon:T$,className:"right-0"})),m0=[{id:"openai",name:"OpenAI",baseUrl:"https://api.openai.com/v1",docsUrl:"https://platform.openai.com/docs/api-reference"},{id:"openrouter",name:"OpenRouter",baseUrl:"https://openrouter.ai/api/v1",docsUrl:"https://openrouter.ai/docs"},{id:"together",name:"Together AI",baseUrl:"https://api.together.xyz/v1",docsUrl:"https://docs.together.ai/docs/introduction"},{id:"mistral",name:"Mistral",baseUrl:"https://api.mistral.ai/v1",docsUrl:"https://docs.mistral.ai/"},{id:"groq",name:"Groq",baseUrl:"https://api.groq.com/openai/v1",docsUrl:"https://console.groq.com/docs/openai"},{id:"fireworks",name:"Fireworks AI",baseUrl:"https://api.fireworks.ai/inference/v1",docsUrl:"https://docs.fireworks.ai/api-reference/introduction"},{id:"deepseek",name:"DeepSeek()",baseUrl:"https://api.deepseek.com",docsUrl:"https://api-docs.deepseek.com/"},{id:"cerebras",name:"Cerebras",baseUrl:"https://api.cerebras.ai/v1",docsUrl:"https://inference-docs.cerebras.ai/"},{id:"perplexity",name:"Perplexity",baseUrl:"https://api.perplexity.ai",docsUrl:"https://docs.perplexity.ai/"},{id:"zhipu",name:"Zhipu GLM()",baseUrl:"https://open.bigmodel.cn/api/paas/v4",docsUrl:"https://open.bigmodel.cn/dev/api"},{id:"qwen",name:"Qwen ()",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",docsUrl:"https://help.aliyun.com/zh/model-studio/developer-reference/use-qwen-by-calling-api"},{id:"kimi",name:"Kimi ()",baseUrl:"https://api.moonshot.cn/v1",docsUrl:"https://platform.moonshot.cn/docs/api/chat-completion"},{id:"minimax",name:"Minimax",baseUrl:"https://api.minimax.io/v1",docsUrl:"https://platform.minimaxi.com/"},{id:"custom",name:"OpenAI compatible (custom)",baseUrl:void 0,docsUrl:void 0}],U$=t=>{const e=t.supportsSingleWord!==!1,n=t.supportsMultiWord!==!1;return!e&&!n?{...t,supportsSingleWord:!0,supportsMultiWord:!1}:{...t,supportsSingleWord:e,supportsMultiWord:n}},zs=t=>{const{defaultFor:e,...n}=t;return U$(n)},Uh=()=>{const[t,e]=A.useState({api:"",key:"",defaultModel:"",pinnedMaximized:!1,items:[],providerId:void 0,providerApiKeyCache:{},providerDefaultModelCache:{}}),[n,r]=A.useState(!0),[i,s]=A.useState(!1),[o,a]=A.useState(null),l=A.useRef(t);l.current=t,A.useEffect(()=>{(async()=>{var T;try{r(!0),a(null);const C=await cO(),I=C.api||"",M=C.key||"";let H=C.providerId,q=C.providerApiKeyCache||{},W=C.providerDefaultModelCache||{};H||(H="custom",M&&!q.custom&&(q={...q,custom:M})),M&&!q[H]&&(q={...q,[H]:M});const K=q[H]||"";let $=W[H]||"";if(!$){const F=C.defaultModel,xe=(T=C.items)==null?void 0:T.find(Ne=>Ne.type==="AI"&&Ne.model),Fe=F||(xe==null?void 0:xe.model)||"";Fe&&($=Fe,W={...W,[H]:Fe})}const te=((C==null?void 0:C.items)||[]).map(F=>zs(F)),L=C.pinnedMaximized??!1,ce=C.maxSelectedWords??As.DEFAULT_MAX_SELECTED_WORDS;e({api:I,key:K,defaultModel:$,pinnedMaximized:L,maxSelectedWords:ce,items:te,providerId:H,providerApiKeyCache:q,providerDefaultModelCache:W})}catch(C){a("Failed to load settings"),console.error("Error loading context menu settings:",C),e({api:"",key:"",defaultModel:"",pinnedMaximized:!1,maxSelectedWords:As.DEFAULT_MAX_SELECTED_WORDS,items:[],providerId:"custom",providerApiKeyCache:{},providerDefaultModelCache:{}})}finally{r(!1)}})()},[]);const u=A.useCallback((D,T)=>{e(C=>({...C,[D]:T}))},[]),d=A.useCallback(D=>{e(T=>({...T,maxSelectedWords:D}))},[]),c=A.useCallback(D=>{e(T=>{var q,W;const C=m0.find(K=>K.id===D);let I=T.api;C&&C.baseUrl&&(I=C.baseUrl);const M=((q=T.providerApiKeyCache)==null?void 0:q[D])||"",H=((W=T.providerDefaultModelCache)==null?void 0:W[D])||"";return{...T,providerId:D,api:I,key:M,defaultModel:H}})},[]),h=A.useCallback(D=>{e(T=>({...T,api:D}))},[]),f=A.useCallback(D=>{e(T=>{const C=T.providerId||"custom",I={...T.providerApiKeyCache,[C]:D};return{...T,key:D,providerApiKeyCache:I}})},[]),v=A.useCallback(D=>{e(T=>{const C=T.providerId||"custom",I={...T.providerDefaultModelCache,[C]:D};return{...T,defaultModel:D,providerDefaultModelCache:I}})},[]),x=A.useCallback(async D=>{try{s(!0),a(null);const T={...l.current,pinnedMaximized:D};await _o(T),e(T)}catch(T){a("Failed to update pin preference"),console.error("Error updating pinnedMaximized:",T)}finally{s(!1)}},[]),g=A.useCallback(async D=>{try{s(!0),a(null);const T=zs(D),C={...l.current,items:[...l.current.items,T]};return await _o(C),e(C),!0}catch(T){return a("Failed to add tool"),console.error("Error adding tool:",T),!1}finally{s(!1)}},[]),p=A.useCallback(D=>{e(T=>({...T,items:T.items.filter((C,I)=>I!==D)}))},[]),m=A.useCallback((D,T)=>{e(C=>({...C,items:C.items.map((I,M)=>M!==D?I:zs({...I,...T}))}))},[]),w=A.useCallback((D,T)=>{e(C=>{const I=[...C.items],[M]=I.splice(D,1);return I.splice(T,0,M),{...C,items:I}})},[]),_=A.useCallback(async(D,T)=>{try{if(s(!0),a(null),D<0||D>=l.current.items.length)return a("Tool not found"),!1;const C=[...l.current.items];C[D]=zs(T);const I={...l.current,items:C};return await _o(I),e(I),!0}catch(C){return a("Failed to update tool"),console.error("Error updating tool:",C),!1}finally{s(!1)}},[]),E=A.useCallback(async(D,T)=>{try{s(!0),a(null);const C=[...l.current.items];if(D<0||D>=C.length)return;const I=C[D],M=zs({...I,enabled:T});C[D]=M;const H={...l.current,items:C};await _o(H),e(H)}catch(C){a("Failed to toggle tool"),console.error(C)}finally{s(!1)}},[]),S=A.useCallback(async(D,T)=>{try{s(!0),a(null);const C=[...l.current.items];if(D<0||D>=C.length)return;const I=C[D];if(I.enabled===!1)return;const M=T==="single"?I.supportsSingleWord===!1:I.supportsMultiWord===!1;let H={...I,supportsSingleWord:T==="single"?M:I.supportsSingleWord!==!1,supportsMultiWord:T==="multi"?M:I.supportsMultiWord!==!1};H=zs(H),C[D]=H;const q={...l.current,items:C};await _o(q),e(q)}catch(C){a("Failed to update tool support"),console.error(C)}finally{s(!1)}},[]),b=A.useCallback(async()=>{try{s(!0),a(null);const D={...t,items:t.items.map(T=>zs(T))};return await _o(D),e(D),!0}catch(D){return a("Failed to save settings"),console.error("Error saving context menu settings:",D),!1}finally{s(!1)}},[t]);return{settings:t,isLoading:n,isSaving:i,error:o,updateSettings:u,updateApiEndpoint:h,updateApiKey:f,updateDefaultModel:v,updateProvider:c,addTool:g,removeTool:p,updateTool:m,reorderTools:w,saveTool:_,saveSettings:b,toggleToolEnabled:E,toggleToolSupport:S,updatePinnedMaximized:x,updateMaxSelectedWords:d}};function ca(t){return t.trim().split(/\s+/).filter(e=>e.length>0).length}function $$(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;const e=t.tagName.toLowerCase();return["span","em","strong","b","i","u","a","mark","small","code"].includes(e)}const W$=({activeTools:t,maxSelectedWords:e,onShowMessage:n})=>{const[r,i]=A.useState([]),s=A.useRef(!1);A.useEffect(()=>{s.current=r.length>0},[r]);const o=A.useRef(0),a=A.useRef(0),l=ei(),u=A.useCallback(g=>{const w=g.trim().split(/\s+/).filter(Boolean).length===1;return t.filter(_=>w?_.supportsSingleWord!==!1:_.supportsMultiWord!==!1)},[t]),d=A.useCallback((g,p=null)=>{const m=g.words.trim();return m===""||u(m).length===0?null:(o.current+=1,a.current+=1,{id:a.current,parentId:p,selectionId:o.current,tabIndex:0,...g})},[u]),c=A.useCallback(async g=>{Le.log("[EpubReader] pushBaseMenu called",{words:g.words,contextLength:g.context.length});const p=e??As.DEFAULT_MAX_SELECTED_WORDS;if(ca(g.words)>p){n==null||n("Selection exceeds the max word limit. Reduce your selection to continue.");return}if(u(g.words).length===0){Le.warn("[EpubReader] No supported tools for selection"),t.length===0?alert("No enabled tools available. Enable one in Settings > Context Menu."):alert("No tools support this selection length. Enable single or multi-word support in Settings."),i([]);return}let _;try{Le.log("[EpubReader] Calling getOrCreateContextId..."),_=await y$(g.words,g.context),Le.log(`[EpubReader]  Got context ID: ${_}`)}catch(S){Le.error("[EpubReader]  Failed to get context ID:",S),a.current+=1,_=a.current,Le.log(`[EpubReader] Using fallback ID: ${_}`)}o.current+=1;const E={id:_,parentId:null,selectionId:o.current,tabIndex:0,words:g.words,context:g.context};Le.log("[EpubReader] Menu entry created:",{id:E.id,selectionId:E.selectionId}),i([E]),Le.log("[EpubReader]  MenuStack updated with new entry")},[t.length,u,e,n]),h=A.useCallback((g,p)=>{const m=e??As.DEFAULT_MAX_SELECTED_WORDS;if(ca(p.words)>m){n==null||n("Selection exceeds the max word limit. Reduce your selection to continue.");return}if(u(p.words).length===0){t.length===0?(alert("No enabled tools available. Enable one in Settings > Context Menu."),i([])):alert("No tools support this selection length. Enable single or multi-word support in Settings.");return}const E=d(p,g);E&&i(S=>[...S,E])},[t.length,d,u,e,n]),f=A.useCallback(g=>{i(p=>{const m=new Set,w=S=>{m.add(S),p.forEach(b=>{b.parentId===S&&w(b.id)})};w(g);const _=p.filter(S=>!m.has(S.id));return p.length>0&&p[p.length-1].id===g&&p.length>_.length?(l(-1),p):_})},[l]),v=A.useCallback((g,p)=>{i(m=>m.map(w=>w.id===g?{...w,tabIndex:p}:w))},[]),x=A.useCallback(async g=>{const p=[];for(const m of g){Le.log(`[EpubReader] Fetching metadata for context ID ${m}...`);const w=await x$(m);if(!w){Le.error(`[EpubReader]  Context metadata not found for ID ${m}`);continue}Le.log(`[EpubReader]  Metadata found for ID ${m}:`,{words:w.words.slice(0,30)}),o.current+=1,p.push({id:m,parentId:null,selectionId:o.current,tabIndex:0,words:w.words,context:w.context})}return p},[]);return{menuStack:r,setMenuStack:i,pushBaseMenu:c,pushDrilldownMenu:h,removeMenuAndChildren:f,updateTabIndex:v,getSupportedTools:u,restoreFromMetadata:x,selectionCounterRef:o,isMenuOpenRef:s}},H$=({menuStack:t,setMenuStack:e,restoreFromMetadata:n})=>{const[r,i]=uM(),s=ei(),o=Gi(),a=A.useRef(!1),l=A.useRef([]),u=A.useCallback((c,h=!1)=>{const f=new URLSearchParams(r),v=f.get("contextMenu"),x=c.length>0?c.join(","):null;v!==x&&(c.length===0?f.delete("contextMenu"):f.set("contextMenu",c.join(",")),h?s({pathname:o.pathname,search:f.toString()},{replace:!1}):i(f,{replace:!0}))},[r,i,s,o.pathname]),d=A.useCallback(async()=>{const c=r.get("contextMenu");if(Le.log("[EpubReader] rehydrateContextMenusFromURL called",{contextMenuParam:c}),!c){Le.log("[EpubReader] No contextMenu parameter in URL, skipping rehydration"),t.length>0&&(e([]),l.current=[]);return}const h=c.split(",").map(v=>parseInt(v.trim(),10)).filter(v=>!isNaN(v)&&v>0);if(h.length===0){Le.log("[EpubReader] No valid context menu IDs in URL"),e([]);return}Le.log(`[EpubReader]  Rehydrating ${h.length} context menus from URL:`,h);const f=await n(h);f.length>0?(Le.log(`[EpubReader]  Rehydrated ${f.length} context menus, updating menuStack`),e(f),l.current=f):(Le.warn("[EpubReader] No entries rehydrated"),e([]),l.current=[])},[r,t.length,n,e]);A.useEffect(()=>{if(a.current)return;(async()=>{try{await g$(),Le.log("Context menu cache initialized"),a.current=!0,await d()}catch(h){Le.error("Failed to initialize cache:",h)}})()},[d]),A.useEffect(()=>{const c=t.map(w=>w.id),h=r.get("contextMenu"),f=h?h.split(",").map(w=>parseInt(w.trim(),10)).filter(w=>!isNaN(w)):[],v=c.length===f.length&&c.every((w,_)=>w===f[_]),x=l.current.map(w=>w.id),g=c.length!==x.length||!c.every((w,_)=>w===x[_]);if(v){g&&(l.current=t);return}if(!g&&a.current)return;Le.log("[EpubReader] Syncing State to URL:",{currentIds:c,urlIds:f}),l.current=t;const m=c.length>f.length&&a.current;u(c,m)},[t,r,u]),A.useEffect(()=>{const c=r.get("contextMenu"),h=t.map(x=>x.id),f=c?c.split(",").map(x=>parseInt(x.trim(),10)).filter(x=>!isNaN(x)):[];!(h.length===f.length&&h.every((x,g)=>x===f[g]))&&a.current&&(Le.log("[EpubReader] URL changed externally (back/forward), rehydrating..."),d())},[r,t,d])},V$=t=>({get:e=>localStorage.getItem(`${t}${e}`),set:(e,n)=>localStorage.setItem(`${t}${e}`,n)}),q$=(t,e)=>({goToNext:()=>{var n;if((n=e.current)!=null&&n.atEnd){Le.warn("Reached the end of the book");return}t.next()},goToPrev:()=>{var n;if((n=e.current)!=null&&n.atStart){Le.log("Reached the start of the book");return}t.prev()},goToSelectChapter:n=>t.display(n)}),K$=t=>{const e=t.body;if(!e)return;Object.assign(e.style,{webkitUserSelect:"text",userSelect:"text",webkitTouchCallout:"default",touchAction:"manipulation",webkitTapHighlightColor:"transparent"});const n=t.createElement("style");n.textContent=`
    ::selection {
      background-color: ${Dc.BACKGROUND} !important;
      color: ${Dc.TEXT_INHERIT} !important;
    }
    ::-webkit-selection, ::-moz-selection {
      background-color: ${Dc.BACKGROUND} !important;
      color: ${Dc.TEXT_INHERIT} !important;
    }
    
    *, p, div, span, h1, h2, h3, h4, h5, h6 {
      -webkit-user-select: text !important;
      user-select: text !important;
      -webkit-touch-callout: default !important;
    }
  `,t.head.appendChild(n)},Hy=(t,e,n,r)=>{const i=X$(t,r);i?e(i):(console.log("No valid selection - processing click"),n())};function X$(t,e){var p,m,w,_,E;const n=t.getSelection();if(!n||n.rangeCount===0)return;const r=n.getRangeAt(0);if(n.isCollapsed&&e){const S=r.getBoundingClientRect(),b=Math.max(S.left-e.x,0,e.x-S.right),D=Math.max(S.top-e.y,0,e.y-S.bottom);if(Math.sqrt(b*b+D*D)>10)return}for(;r.startOffset>0&&/\w/.test(((p=r.startContainer.textContent)==null?void 0:p[r.startOffset-1])??"");)r.setStart(r.startContainer,r.startOffset-1);for(;r.endOffset<(((m=r.endContainer.textContent)==null?void 0:m.length)??0)&&/\w/.test(((w=r.endContainer.textContent)==null?void 0:w[r.endOffset])??"");)r.setEnd(r.endContainer,r.endOffset+1);n.removeAllRanges(),n.addRange(r);const i=n.toString();let s=r.commonAncestorContainer;for(s.nodeType===Node.TEXT_NODE&&s.parentNode&&(s=s.parentNode);s.parentNode&&$$(s);)s=s.parentNode;const o=t.createRange();o.selectNodeContents(s),o.setEnd(r.startContainer,r.startOffset);const a=o.toString(),l=t.createRange();l.selectNodeContents(s),l.setStart(r.endContainer,r.endOffset);const u=l.toString();let d=`${a}<selected>${i}</selected>${u}`;const c=20,h=5;let f=ca(d),v=s.previousSibling,x=0;for(;f<c&&v&&x<h;){if(v.nodeType===Node.ELEMENT_NODE){const S=(_=v.textContent)==null?void 0:_.trim();if(!S)break;d=`${S}
${d}`,f+=ca(S)}v=v.previousSibling,x++}let g=s.nextSibling;for(x=0;f<c&&g&&x<h;){if(g.nodeType===Node.ELEMENT_NODE){const S=(E=g.textContent)==null?void 0:E.trim();if(!S)break;d=`${d}
${S}`,f+=ca(S)}g=g.nextSibling,x++}return{words:i,context:d}}const tN=(t,e,n,r)=>{var i;try{const s=n-e.scrollX,o=r-e.scrollY,a=(i=t.caretPositionFromPoint)==null?void 0:i.call(t,s,o);if(!a)return null;const l=t.createRange();return l.setStart(a.offsetNode,a.offset),l.setEnd(a.offsetNode,a.offset),l}catch{return null}},G$=(t,e)=>{const n={isLongPress:!1,startTime:0,startPos:{x:0,y:0},timer:null},{document:r,window:i}=e;K$(r);const s=l=>{if(t.isMenuOpenRef.current){Le.log("Touch selection disabled - context menus are open");return}const u=l.touches[0];n.timer&&clearTimeout(n.timer),n.isLongPress=!1,n.startTime=Date.now(),n.startPos={x:u.clientX,y:u.clientY},n.timer=setTimeout(()=>{n.isLongPress=!0,Y$(u,r,i)},Tg.LONG_PRESS_DURATION)},o=l=>{if(l.touches.length!==1)return;const u=l.touches[0];n.isLongPress&&(Z$(u,r,i),l.preventDefault())},a=l=>{const u=Date.now()-n.startTime;n.timer&&(clearTimeout(n.timer),n.timer=null),n.isLongPress?y1(r,t.onSelectionCompleted,()=>{var d;(d=t.onClick)==null||d.call(t)},n.startPos):u<Tg.REGULAR_TAP_THRESHOLD&&y1(r,t.onSelectionCompleted,()=>{var d;(d=t.onClick)==null||d.call(t)},{x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY}),n.isLongPress=!1};return r.addEventListener("touchstart",s,{passive:!1}),r.addEventListener("touchmove",o,{passive:!1}),r.addEventListener("touchend",a,{passive:!1}),()=>{r.removeEventListener("touchstart",s),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),n.timer&&clearTimeout(n.timer)}},Y$=(t,e,n)=>{const r=e.elementFromPoint(t.clientX-n.scrollX,t.clientY-n.scrollY);if(r!=null&&r.closest("p, div, span, h1, h2, h3, h4, h5, h6")){const i=tN(e,n,t.clientX,t.clientY);if(i){const s=n.getSelection();s==null||s.removeAllRanges(),s==null||s.addRange(i)}}},Z$=(t,e,n)=>{const r=n.getSelection();if(r&&r.rangeCount>0)try{const i=r.getRangeAt(0),s=tN(e,n,t.clientX,t.clientY);if(s){const o=e.createRange();o.setStart(i.startContainer,i.startOffset),o.setEnd(s.startContainer,s.startOffset),r.removeAllRanges(),r.addRange(o)}}catch(i){Le.error("Selection extension failed:",i)}},y1=(t,e,n,r)=>{if(!t||typeof e!="function"){Le.error("Invalid parameters for completeSelection");return}setTimeout(()=>{Hy(t,e,n,r)},Tg.SELECTION_DELAY)},Q$=(t,e)=>{t.rendition.on("touchend",()=>{if(t.isMenuOpenRef.current){Le.log("Touch selection disabled - context menus are open");return}Le.log("Touch end event detected");const n=e.document;Hy(n,t.onSelectionCompleted,()=>{var r;(r=t.onClick)==null||r.call(t)})}),t.rendition.on("mouseup",n=>{if(t.isMenuOpenRef.current){Le.log("Mouse selection disabled - context menus are open");return}const r=e.document;J$({doc:r,event:n,props:t})})},J$=Qv(({doc:t,event:e,props:n})=>{Le.log("Mouse up event detected"),Hy(t,n.onSelectionCompleted,()=>{var r;n.isMenuOpenRef.current||(r=n.onClick)==null||r.call(n)},{x:e.clientX,y:e.clientY})},10),nN=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),eW=t=>{t.rendition.on("relocated",e=>{t.setter.setCurrentLocation(e);const n=t.book.locations.percentageFromCfi(e.start.cfi),r=t.book.locations.length(),i=n>=1?r:Math.floor(n*r)+1;t.setter.setCurrentPage(i),rN.set(t.bookId,e.start.cfi)}),t.rendition.on("rendered",(e,n)=>{const r=t.book.navigation.get(e.href);r&&t.setter.setCurrentChapterHref(r.href),nN()?G$(t,n):Q$(t,n)})},tW=(t,e,n={})=>{const{enableVolumeKeys:r=!1}=n;A.useEffect(()=>{const i=s=>{const o=s.key;o==="ArrowRight"||o==="ArrowDown"?t():(o==="ArrowLeft"||o==="ArrowUp")&&e(),r&&(o==="AudioVolumeUp"||o==="VolumeUp"||s.keyCode===183?(s.preventDefault(),t()):(o==="AudioVolumeDown"||o==="VolumeDown"||s.keyCode===182)&&(s.preventDefault(),e()))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,e,r])},rN=V$("latestReadingLocation_"),nW=()=>({width:Ws.WIDTH,height:Ws.HEIGHT,spread:Ws.SPREAD,minSpreadWidth:Ws.MIN_SPREAD_WIDTH,manager:Ws.MANAGER,flow:Ws.FLOW,allowScriptedContent:!0}),rW=t=>{const{bookId:e}=Zv(),n=A.useRef(null),r=A.useRef(null),i=A.useRef(null),s=A.useRef(t.onSelect),o=A.useRef(t.onClick),a=A.useRef(t.onSelectionActivity);A.useEffect(()=>{s.current=t.onSelect,o.current=t.onClick,a.current=t.onSelectionActivity},[t.onSelect,t.onClick,t.onSelectionActivity]);const[l,u]=A.useState(0),[d,c]=A.useState(0),[h,f]=A.useState([]),[v,x]=A.useState(""),[g,p]=A.useState({goToNext:()=>{},goToPrev:()=>{},goToSelectChapter:E=>{}}),m=A.useMemo(()=>Qv(E=>{console.log("selectedInfo",E),E?(Le.log("Omit event:",E),s.current(E)):Le.log("Emit click event")},200),[]),w=A.useCallback(E=>{var S;(S=a.current)==null||S.call(a),m(E)},[m]),_=A.useCallback(async()=>{if(!n.current)return;const E=t.book.renderTo(n.current,nW());r.current=E,eW({rendition:E,book:t.book,bookId:e,onSelectionCompleted:w,onClick:()=>{var D;return(D=o.current)==null?void 0:D.call(o)},isMenuOpenRef:t.isMenuOpenRef,setter:{setCurrentPage:c,setCurrentChapterHref:x,setCurrentLocation:D=>i.current=D}});const S=rN.get(e);E.display(S||void 0),await t.book.ready,await t.book.locations.generate(Ws.LOCATION_CHAR_COUNT),u(t.book.locations.length()),f(t.book.navigation.toc);const b=q$(E,i);p(b)},[e,w,t.book,t.isMenuOpenRef]);return tW(g.goToNext,g.goToPrev,{enableVolumeKeys:nN()}),A.useEffect(()=>{n.current&&t.book&&_()},[t.book,_]),{containerRef:n,tableOfContents:h,totalPages:l,currentPage:d,currentChapterHref:v,goToNext:g.goToNext,goToPrev:g.goToPrev,goToSelectChapter:g.goToSelectChapter}},iW=t=>t<0?0:t>1?1:t,sW=({book:t,menuStackLength:e,onMenuClose:n,onSelection:r,isMenuOpenRef:i,maxSelectedWords:s,onShowMessage:o})=>{const[a,l]=A.useState(!1),[u,d]=A.useState(!1),[c,h]=A.useState(!1),f=A.useRef(()=>{}),v=A.useRef(0),x=ei(),g=A.useCallback(()=>{v.current=Date.now()},[]),{containerRef:p,goToNext:m,goToPrev:w,tableOfContents:_,goToSelectChapter:E,currentPage:S,totalPages:b,currentChapterHref:D}=rW({book:t,onClick:()=>f.current(),onSelect:I=>{l(!1),d(!1);const M=s??As.DEFAULT_MAX_SELECTED_WORDS;if(ca(I.words)>M){o==null||o("Selection exceeds the max word limit. Reduce your selection to continue.");return}console.log("Selection completed:",I),v.current=Date.now(),r(I)},onSelectionActivity:g,isMenuOpenRef:i}),T=A.useCallback(I=>{var $;const M=I.view||window,H=M.frameElement,q=H==null?void 0:H.getBoundingClientRect();let K=(($=M.visualViewport)==null?void 0:$.width)||M.innerWidth||window.innerWidth||0,G=I.clientX;return q&&q.width>0&&(K=q.width,G=I.clientX-q.left),K?iW(G/K):.5},[]);return A.useEffect(()=>{f.current=()=>{console.log("Click detected"),l(I=>!I)}},[T,w,m,u,e,n]),A.useEffect(()=>{const I=M=>{M.key==="Escape"&&e>0&&(Le.log("[EpubReader] ESC pressed, closing topmost menu"),x(-1))};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[e,x]),A.useEffect(()=>{const I=M=>{const H=M.key||M.code;H==="AudioVolumeUp"||H==="VolumeUp"||M.keyCode===183?(M.preventDefault(),m()):(H==="AudioVolumeDown"||H==="VolumeDown"||M.keyCode===182)&&(M.preventDefault(),w())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[m,w]),{containerRef:p,menuVisible:a,setMenuVisible:l,tocVisible:u,setTocVisible:d,showHelp:c,setShowHelp:h,onToggleToc:()=>{u?d(!1):(d(!0),a&&l(!1))},onNext:m,onPrev:w,tableOfContents:_,goToSelectChapter:E,currentPage:S,totalPages:b,currentChapterHref:D}},oW=({message:t,onClose:e,index:n})=>{const[r,i]=A.useState(!1);A.useEffect(()=>{requestAnimationFrame(()=>i(!0));const o=setTimeout(()=>{i(!1),setTimeout(()=>e(t.id),300)},t.duration);return()=>clearTimeout(o)},[t,e]);const s=()=>{switch(t.type){case"success":return y.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return y.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return y.jsx("svg",{className:"h-5 w-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":default:return y.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return y.jsxs("div",{className:`pointer-events-auto mb-2 flex items-center rounded-md bg-white px-4 py-2 shadow-lg ring-1 ring-gray-200 transition-all duration-300 ease-in-out ${r?"translate-y-0 opacity-100":"-translate-y-4 opacity-0"}`,style:{marginTop:n===0?0:8},role:"alert",children:[y.jsx("div",{className:"mr-3 flex-shrink-0",children:s()}),y.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.content})]})},iN=A.createContext(null),aW=()=>{const t=A.useContext(iN);if(!t)throw new Error("useMessage must be used within a MessageProvider");return t};let lW=0;const uW=({children:t})=>{const[e,n]=A.useState([]),r=A.useCallback(u=>{n(d=>d.filter(c=>c.id!==u))},[]),i=A.useCallback((u,d,c=3e3)=>{const h=`msg_${Date.now()}_${lW++}`;n(f=>[...f,{id:h,type:u,content:d,duration:c}])},[]),s=A.useCallback((u,d)=>i("info",u,d),[i]),o=A.useCallback((u,d)=>i("success",u,d),[i]),a=A.useCallback((u,d)=>i("error",u,d),[i]),l=A.useCallback((u,d)=>i("warning",u,d),[i]);return y.jsxs(iN.Provider,{value:{info:s,success:o,error:a,warning:l},children:[t,Vr.createPortal(y.jsx("div",{className:"fixed top-4 left-1/2 z-[9999] flex -translate-x-1/2 flex-col items-center pointer-events-none",children:e.map((u,d)=>y.jsx(oW,{message:u,index:d,onClose:r},u.id))}),document.body)]})},cW=()=>{const{bookId:t}=Zv(),[e,n]=A.useState(null),[r,i]=A.useState(null),{t:s}=_t("reader");return A.useEffect(()=>{if(!t)return;let o=!0;return YP(t).then(a=>{o&&n(a)}).catch(a=>{o&&(console.error("Failed to load book:",a),i(s("invalidBook.loadError")))}),()=>{o=!1}},[t,s]),A.useEffect(()=>()=>{e==null||e.destroy()},[e]),!t||r?y.jsx(Qj,{error:r}):e?y.jsx(dW,{book:e}):y.jsx("div",{className:"flex h-screen w-screen flex-1 items-center justify-center bg-gray-50",children:y.jsx(yC,{})})},dW=t=>{const{settings:e,updatePinnedMaximized:n}=Uh(),r=aW(),i=A.useMemo(()=>e.items.filter(H=>H.enabled!==!1),[e.items]),{menuStack:s,isMenuOpenRef:o,setMenuStack:a,pushBaseMenu:l,pushDrilldownMenu:u,removeMenuAndChildren:d,updateTabIndex:c,getSupportedTools:h,restoreFromMetadata:f}=W$({activeTools:i,maxSelectedWords:e.maxSelectedWords,onShowMessage:H=>r.warning(H)});H$({menuStack:s,setMenuStack:a,restoreFromMetadata:f});const{containerRef:v,menuVisible:x,setMenuVisible:g,tocVisible:p,setTocVisible:m,showHelp:w,setShowHelp:_,onToggleToc:E,onNext:S,onPrev:b,tableOfContents:D,goToSelectChapter:T,currentPage:C,totalPages:I,currentChapterHref:M}=sW({book:t.book,menuStackLength:s.length,isMenuOpenRef:o,onMenuClose:()=>a([]),onSelection:l,maxSelectedWords:e.maxSelectedWords,onShowMessage:H=>r.warning(H)});return A.useEffect(()=>{if(i.length===0){a([]);return}a(H=>H.map(q=>q.tabIndex===null?q:q.tabIndex<0||q.tabIndex>=i.length?{...q,tabIndex:0}:q))},[i.length,a]),y.jsxs("div",{className:"relative flex h-screen flex-col bg-white",children:[y.jsx(Kj,{visible:x,onOpenToc:E,onHelpClick:()=>_(!0)}),w&&y.jsx(Xj,{onClose:()=>_(!1)}),s.map((H,q)=>{const W=h(H.words);return y.jsx(F$,{onChangeIndex:K=>c(H.id,K),tabIndex:H.tabIndex,words:H.words,context:H.context,selectionId:H.selectionId,contextId:H.id,items:W,api:e.api,apiKey:e.key,defaultModel:e.defaultModel,isTopMost:q===s.length-1,onClose:()=>d(H.id),onDrilldownSelect:K=>u(H.id,K),pinnedMaximized:e.pinnedMaximized??!1,onPinnedChange:n,zIndex:50+q},H.id)}),y.jsx(Zj,{isOpen:p,currentChapter:M,onChapterSelect:T,onToggle:()=>m(!1),tableOfContents:D}),y.jsx(Gj,{visible:!x,setVisible:g}),y.jsx(B$,{onClick:b}),y.jsx(z$,{onClick:S}),y.jsx("div",{className:"relative h-full w-full",ref:v}),y.jsx(Yj,{visible:x,currentPage:C,totalPages:I,onNext:S,onPrev:b})]})},fW=({to:t,label:e})=>{const n=ei(),{t:r}=_t("common"),i=e??r("back"),s=()=>{n(t||-1)};return y.jsxs("button",{onClick:s,className:"flex items-center space-x-1 text-gray-600 transition-colors hover:text-gray-900",title:i,children:[y.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),y.jsx("span",{children:i})]})},hW=({items:t})=>y.jsx("nav",{className:"flex items-center space-x-2 text-sm",children:t.map((e,n)=>y.jsxs(kt.Fragment,{children:[n>0&&y.jsx("span",{className:"text-gray-400",children:"/"}),e.path?y.jsx(Ch,{to:e.path,className:"text-blue-600 transition-colors hover:text-blue-800",children:e.label}):y.jsx("span",{className:"text-gray-900",children:e.label})]},n))}),Vy=t=>(console.log("Rendering Container component"),y.jsxs("div",{className:"flex h-screen w-full flex-col bg-gray-50",children:[y.jsx("header",{className:"sticky top-0 border-b bg-white shadow-sm",children:y.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:y.jsx("div",{className:"flex items-center justify-between",children:y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx(fW,{to:t.backTo,label:""}),y.jsx("div",{children:y.jsx(hW,{items:[...t.breadcrumbItems]})})]})})})}),y.jsx("main",{className:"flex-1 overflow-y-auto text-black",children:t.children})]})),pW=()=>{const t=Gi(),{t:e}=_t("settings"),n=A.useMemo(()=>[{label:e("nav.general"),path:"/settings/general",description:e("navDescriptions.general")},{label:e("nav.storage"),path:"/settings/storage",description:e("navDescriptions.storage")},{label:e("nav.contextMenu"),path:"/settings/contextmenu",description:e("navDescriptions.contextMenu")},{label:e("nav.about"),path:"/settings/about",description:e("navDescriptions.about")}],[e]),r=()=>{const i=[{label:e("breadcrumbs.home"),path:"/"},{label:e("breadcrumbs.settings"),path:"/settings"}],s=n.find(o=>o.path===t.pathname);return s&&i.push({label:s.label,path:s.path}),i};return y.jsx(Vy,{breadcrumbItems:r(),backTo:"/",children:y.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex flex-col overflow-hidden rounded-lg bg-white shadow md:flex-row",children:[y.jsx("nav",{className:"w-full border-b border-gray-200 bg-white md:min-h-[calc(100vh-12rem)] md:w-56 md:border-b-0 md:border-r","aria-label":e("breadcrumbs.settings"),children:y.jsx("div",{className:"flex flex-col space-y-1 p-2",children:n.map(i=>y.jsx(oM,{to:i.path,className:({isActive:s})=>`block rounded-md px-3 py-2 text-sm font-medium transition-colors ${s?"border border-blue-100 bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:i.label},i.path))})}),y.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y.jsx(F5,{})})]})})})},mW=()=>{const{t}=_t("settings"),{currentLanguage:e,changeLanguage:n}=vC();return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:t("general.title")}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("general.description")})]}),y.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[y.jsx("h3",{className:"mb-2 text-sm font-medium text-gray-900",children:t("general.languageSelection")}),y.jsx("p",{className:"mb-3 text-sm text-gray-500",children:t("general.languageDescription")}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:()=>n("zh-CN"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="zh-CN"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t("common:language.zhCN")}),y.jsx("button",{onClick:()=>n("en"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="en"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t("common:language.en")})]})]}),y.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[y.jsx("h3",{className:"mb-2 text-sm font-medium text-gray-900",children:t("general.comingSoon")}),y.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[y.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[y.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),y.jsx("span",{children:t("general.themeCustomization")})]}),y.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[y.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),y.jsx("span",{children:t("general.languageSelection")})]})]})]})]})},gW={version:"1.1.0",releasedAt:"2025-12-02",summary:"Multilingual UI, PWA install/fullscreen upgrades, preset books, and revamped storage plus context menu tooling.",changes:{feat:[{title:"Full internationalization with language switcher, translated UI copy, and updated product naming."},{title:"Preset book downloads with hash-based dedupe, progress tracking, and bundled Heidi sample."},{title:"Storage page rebuild with lazy directory tree, file detail/preview modals, and shallow OPFS listing."},{title:"PWA install hook, refreshed icons, fullscreen/portrait handling, and clearer install state feedback."},{title:"Context menu caching with stacked and parallel routing plus refreshed iframe and AI agent controls."},{title:"Selection word limit enforcement with message notifications and settings toggles."},{title:"Reader interaction refactor to separate click vs selection flows and add keyboard navigation hooks."},{title:"New logo assets and About page presentation updates."}],fix:[{title:"Fixed PWA orientation defaults and install button state mismatches."},{title:"Prevented reader click/selection conflicts and improved context menu scroll control placement."}],refactor:[{title:"Refined OPFS utilities with public array buffer conversion and preset book hash handling."},{title:"Updated context menu state management with caching service and URL synchronization hooks."}],docs:[{title:"Added specs/wiki coverage for PWA updates, selection limits, storage revamp, and context menu routing."},{title:"Documented preset books workflow and internationalization implementation."}],chore:[{title:"Removed unused files and refreshed lockfiles for new i18n and PWA tooling."}],perf:[],style:[{title:"Friendlier book card styling plus improved settings/About visuals with the new logo."}]}},vW={version:"1.0.1",releasedAt:"2025-11-30",summary:"Iframe tool enhancements with refresh/external controls, pinned window states, and integrated changelog settings.",changes:{feat:[{title:"Sticky header with refresh and external-link buttons for iframe tools."},{title:"Thumbtack control to pin context menu in maximized state (persisted in settings)."},{title:"Double-click header toggle between normal/maximized modes."}],fix:[],refactor:[{title:"Integrated changelog display directly into the About page."},{title:"Replaced dedicated ChangelogPage with enhanced AboutPage."}],docs:[],chore:[],perf:[],style:[]}},yW={version:"1.0.0",releasedAt:"2025-11-29",summary:"Major context menu drilldown, reader navigation zones, and settings redesign for the 1.0.0 release.",changes:{feat:[{title:"Context menu drilldown with stacked windows, draggable chrome, and simple view switching for nested AI."},{title:"Reader interaction zones with help overlay and protected selections for smoother navigation."},{title:"Context menu settings redesign with tool enable switches, defaults, and drag-and-drop layout."},{title:"Storage overview with cache reset plus improved About and settings shell."},{title:"AI provider dropdown with caching, default tools, and a global default model selector."},{title:"Simplified uploads, icon upload button, and mobile volume key navigation on the bookshelf."}],fix:[{title:"Prevented selection zone conflicts and stale text selection in the reader."},{title:"Centered popup titles in context menu UI elements."}],refactor:[{title:"Removed unused code and refreshed loading component styling."},{title:"Updated settings tag styling for consistency."}],docs:[{title:"Consolidated contributor guidelines into AGENTS.md and refreshed AI rules."},{title:"Updated README to reflect recent capabilities."}],chore:[],perf:[],style:[]}},sN=[gW,vW,yW],xW=sN[0],wW="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='shiro-svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3crect%20width='512'%20height='512'%20fill='%23ffffff'%20/%3e%3cg%20id='shiro-lines'%20stroke='black'%20stroke-width='10'%20fill='none'%20class='sketch-stroke'%20transform='translate(56%2056)'%20%3e%3cpath%20d='M%2070%2090%20Q%2040%2070%2030%20100%20Q%2025%20120%2070%20125'%20fill='white'%20class='fill-area'%20/%3e%3cpath%20d='M%20330%20110%20Q%20370%2090%20390%20120%20Q%20400%20150%20370%20150%20Q%20350%20150%20330%20130'%20fill='white'%20class='fill-area'%20/%3e%3cpath%20d='M%20280%20340%20Q%20310%20320%20330%20330%20Q%20350%20340%20340%20360%20Q%20320%20380%20300%20370%20Q%20290%20360%20270%20360'%20fill='white'%20class='fill-area'%20/%3e%3cpath%20d='M%20140%20260%20Q%20130%20300%20120%20350%20Q%20110%20380%20150%20380%20L%20170%20380%20Q%20175%20340%20200%20340%20Q%20225%20340%20230%20380%20L%20250%20380%20Q%20290%20380%20280%20340%20Q%20270%20300%20260%20260'%20fill='white'%20stroke-linejoin='round'%20class='fill-area'%20/%3e%3cpath%20d='M%2080%20120%20Q%2070%2080%20100%2060%20Q%20130%2040%20160%2050%20Q%20190%2030%20220%2050%20Q%20260%2040%20290%2070%20Q%20330%2090%20320%20140%20Q%20340%20180%20310%20210%20Q%20330%20250%20280%20260%20Q%20240%20280%20200%20270%20Q%20150%20280%20110%20250%20Q%2070%20230%2080%20180%20Q%2060%20140%2080%20120'%20fill='white'%20class='fill-area'%20/%3e%3cpath%20d='M%20100%20100%20Q%20120%2070%20150%20100'%20fill='none'%20/%3e%3cpath%20d='M%20250%20110%20Q%20280%2090%20310%20120'%20fill='none'%20/%3e%3ccircle%20cx='130'%20cy='140'%20r='7'%20fill='black'%20stroke='none'%20class='eye-fill'%20/%3e%3ccircle%20cx='270'%20cy='150'%20r='7'%20fill='black'%20stroke='none'%20class='eye-fill'%20/%3e%3cpath%20d='M%20170%20180%20Q%20190%20170%20210%20180%20Q%20230%20190%20220%20185%20Q%20200%20195%20170%20180'%20fill='black'%20class='mouth-fill'%20/%3e%3cg%20id='blush-lines'%20stroke='%23ff8888'%20stroke-width='3'%3e%3cline%20x1='280'%20y1='190'%20x2='270'%20y2='210'%20/%3e%3cline%20x1='295'%20y1='195'%20x2='285'%20y2='215'%20/%3e%3cline%20x1='310'%20y1='200'%20x2='300'%20y2='220'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",bW=["feat","fix","refactor","docs","chore","perf","style"],SW=({version:t,isOpen:e,onToggle:n,getCategoryLabel:r,expandLabel:i,collapseLabel:s})=>{const o=kt.useRef(null),[a,l]=kt.useState("0px"),[u,d]=kt.useState(!1),c=["flex w-full items-center justify-between gap-3 bg-white px-4 py-3 text-left","transition hover:bg-gray-50"].join(" "),h=["flex h-8 w-8 items-center justify-center rounded-full bg-gray-50 text-gray-600","transition hover:bg-gray-100"].join(" ");kt.useEffect(()=>{if(!o.current)return;const x=o.current.scrollHeight,g=300;if(e){d(!0),l(`${x}px`);const w=window.setTimeout(()=>{l("none"),d(!1)},g);return()=>window.clearTimeout(w)}d(!0),l(`${x}px`);const p=window.requestAnimationFrame(()=>{l("0px")}),m=window.setTimeout(()=>d(!1),g);return()=>{window.cancelAnimationFrame(p),window.clearTimeout(m)}},[e,t]);const f=bW.filter(v=>t.changes[v]&&t.changes[v].length>0);return y.jsxs("div",{className:"border-b border-gray-200 last:border-b-0",children:[y.jsxs("button",{type:"button",onClick:()=>n(t.version),"aria-expanded":e,"aria-label":e?s:i,className:c,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-700",children:["v",t.version]}),y.jsx("span",{className:"text-xs text-gray-500",children:t.releasedAt})]}),y.jsx("span",{"aria-hidden":"true",className:h,children:y.jsx(cj,{className:`text-lg transition-transform duration-200 ${e?"rotate-90":"rotate-0"}`})})]}),y.jsxs("div",{ref:o,className:"overflow-hidden px-4 transition-all duration-300 ease-in-out",style:{maxHeight:a,opacity:e||u?1:0,paddingTop:e?"0.75rem":0,paddingBottom:e?"1rem":0},children:[y.jsx("p",{className:"text-sm text-gray-600",children:t.summary}),y.jsx("div",{className:"mt-4 space-y-4",children:f.map(v=>y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("span",{className:"rounded bg-gray-100 px-2 py-0.5 text-xs font-semibold text-gray-700",children:r(v)})}),y.jsx("ul",{className:"space-y-2 text-sm text-gray-700",children:t.changes[v].map(x=>y.jsxs("li",{className:"flex gap-2",children:[y.jsx("span",{className:"mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-blue-500"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900",children:x.title}),x.description?y.jsx("p",{className:"text-gray-600",children:x.description}):null]})]},x.title))})]},v))})]})]})},kW=()=>{const{t}=_t("settings"),[e,n]=kt.useState(()=>new Set([xW.version])),r=s=>t(`about.categories.${s}`),i=s=>{n(o=>{const a=new Set(o);return a.has(s)?a.delete(s):a.add(s),a})};return y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{className:"space-y-10 p-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-6",children:[y.jsx("img",{src:wW,alt:"App Logo",className:"h-24 w-24"}),y.jsxs("div",{className:"space-y-2 text-center",children:[y.jsx("h4",{className:"text-2xl font-semibold text-gray-900",children:t("about.title")}),y.jsx("p",{className:"text-base text-gray-600",children:t("about.description")})]}),y.jsxs("p",{className:"inline-block flex items-center gap-2 text-sm text-gray-600",children:[y.jsxs("span",{className:"font-medium text-gray-900",children:[t("about.author"),":"]})," wuchuheng",y.jsx("a",{href:"mailto:root@wuchuheng.com",className:"text-blue-600 hover:underline",children:"root@wuchuheng.com"})]})]}),y.jsx("div",{className:"flex justify-center border-t border-gray-200 pt-8"}),y.jsxs("div",{className:"mt-8 space-y-4",children:[y.jsx("h5",{className:"text-lg font-semibold text-gray-900",children:t("about.changelogHistory")}),y.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:sN.map(s=>y.jsx(SW,{version:s,isOpen:e.has(s.version),onToggle:i,getCategoryLabel:r,expandLabel:t("about.expand"),collapseLabel:t("about.collapse")},s.version))})]})]})})},EW=t=>{var e;return((e=t.split(".").pop())==null?void 0:e.toLowerCase())??""},_W=(t,e,n)=>{const[r,i]=A.useState(null),[s,o]=A.useState(!1),[a,l]=A.useState(null);return A.useEffect(()=>{if(!e||!t||t.kind!=="file"){i(null),o(!1),l(null);return}let u=!1;return(async()=>{o(!0),l(null);try{const c=await Wv(t.path);if(u)return;i({type:c.type,lastModified:c.lastModified})}catch(c){if(u)return;const h=c instanceof Error?c.message:n;l(h)}finally{u||o(!1)}})(),()=>{u=!0}},[t,n,e]),{metadata:r,isLoading:s,error:a}},CW=({isOpen:t,file:e,onClose:n})=>{const{t:r}=_t("settings"),{metadata:i,isLoading:s,error:o}=_W(e,t,r("storage.error"));if(!t||!e||e.kind!=="file")return null;const a=EW(e.path),l=i!=null&&i.lastModified?new Date(i.lastModified).toLocaleString():r("storage.modals.detail.notAvailable"),u=(i==null?void 0:i.type)||r("storage.modals.detail.notAvailable");return y.jsx(Wg,{isOpen:t,title:r("storage.modals.detail.title"),onClose:n,closeLabel:r("storage.modals.detail.close"),children:y.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[s?y.jsx("p",{className:"text-gray-500",children:r("storage.table.loadingLabel")}):null,o?y.jsx("p",{className:"text-red-600",children:o}):null,y.jsxs("dl",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("dt",{className:"text-sm font-medium text-gray-500",children:r("storage.modals.detail.path")}),y.jsx("dd",{className:"mt-1 break-all text-sm text-gray-900",children:e.path})]}),y.jsxs("div",{children:[y.jsx("dt",{className:"text-sm font-medium text-gray-500",children:r("storage.modals.detail.size")}),y.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:yu(e.size??0)})]}),y.jsxs("div",{children:[y.jsx("dt",{className:"text-sm font-medium text-gray-500",children:r("storage.modals.detail.type")}),y.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:u||"--"})]}),y.jsxs("div",{children:[y.jsx("dt",{className:"text-sm font-medium text-gray-500",children:r("storage.modals.detail.extension")}),y.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a?`.${a}`:"--"})]}),y.jsxs("div",{children:[y.jsx("dt",{className:"text-sm font-medium text-gray-500",children:r("storage.modals.detail.lastModified")}),y.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:l})]})]})]})})},AW=t=>{var e;return((e=t.split(".").pop())==null?void 0:e.toLowerCase())??""},x1=t=>["json","txt","md","csv","xml","html","css","js","ts","tsx"].includes(t),w1=t=>["jpg","jpeg","png","gif","webp","svg","bmp"].includes(t),oN=5,DW=oN*1024*1024,NW=({isOpen:t,file:e,onClose:n})=>{const{t:r}=_t("settings"),[i,s]=A.useState(null),[o,a]=A.useState(!1),[l,u]=A.useState(null),[d,c]=A.useState(!1),h=A.useMemo(()=>e?AW(e.path):"",[e]),f=A.useMemo(()=>(e==null?void 0:e.path.split("/").pop())??"",[e]),v=["rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors","hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","focus-visible:outline-blue-500"].join(" "),x=["rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors","hover:bg-gray-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","focus-visible:outline-blue-500"].join(" "),g=["rounded p-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1","focus-visible:outline-blue-500"].join(" "),p=["max-h-96 w-full resize-none rounded-md border border-gray-300 bg-gray-50 p-4","font-mono text-sm text-gray-900"].join(" ");if(A.useEffect(()=>{if(!t||!e||e.kind!=="file"){s(null),u(null),a(!1),c(!1);return}if(!x1(h)&&!w1(h)){s({type:"unsupported",content:""}),a(!1),u(null),c(!1);return}let S=!1,b=null;return(async()=>{a(!0),u(null),c(!1);try{const T=await Wv(e.path);if(T.size>DW){S||(u(r("storage.modals.preview.tooLarge",{size:oN})),s(null),a(!1));return}if(x1(h)){const C=await T.text();S||s({type:"text",content:C})}else w1(h)&&(b=URL.createObjectURL(T),S||s({type:"image",content:b}))}catch(T){if(!S){const C=T instanceof Error?T.message:r("storage.error");u(C)}}finally{S||a(!1)}})(),()=>{S=!0,b&&URL.revokeObjectURL(b)}},[h,e,t,r]),A.useEffect(()=>{if(!t)return;const S=b=>{b.key==="Escape"&&n()};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[t,n]),A.useEffect(()=>{if(!d)return;const S=window.setTimeout(()=>c(!1),1500);return()=>window.clearTimeout(S)},[d]),!t||!e||e.kind!=="file")return null;const m=S=>{S.target===S.currentTarget&&n()},w=async()=>{if((i==null?void 0:i.type)==="text")try{await navigator.clipboard.writeText(i.content),c(!0)}catch(S){const b=S instanceof Error?S.message:r("storage.error");u(b)}},_=()=>o?y.jsx("p",{className:"text-gray-500",children:r("storage.modals.preview.loading")}):l?y.jsx("p",{className:"text-red-600",children:r("storage.modals.preview.error",{message:l})}):i?i.type==="text"?y.jsx("textarea",{readOnly:!0,value:i.content,className:p,rows:50}):i.type==="image"?y.jsx("img",{src:i.content,alt:f||e.path,className:"max-h-[70vh] max-w-full rounded object-contain"}):y.jsx("p",{className:"text-gray-700",children:r("storage.modals.preview.unsupported",{ext:h||"file"})}):null,E=()=>(i==null?void 0:i.type)==="text"?y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:w,className:v,children:r(d?"storage.modals.preview.copied":"storage.modals.preview.copy")}),y.jsx("button",{type:"button",onClick:n,className:x,children:r("storage.modals.preview.close")})]}):y.jsx("button",{type:"button",onClick:n,className:x,children:r("storage.modals.preview.close")});return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-label":r("storage.modals.preview.title",{filename:f}),onClick:m,children:y.jsxs("div",{className:"w-full max-w-3xl rounded-lg bg-white shadow-xl",children:[y.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r("storage.modals.preview.title",{filename:f||e.path})}),y.jsx("button",{type:"button",onClick:n,className:g,"aria-label":r("storage.modals.preview.close"),children:y.jsx(ku,{className:"h-5 w-5"})})]}),y.jsx("div",{className:"px-4 py-3 text-gray-800",children:_()}),y.jsx("div",{className:"flex flex-wrap justify-end gap-2 border-t px-4 py-3",children:E()})]})})},TW=()=>{const t=U_(),{t:e}=_t("settings"),[n,r]=A.useState(null),[i,s]=A.useState("idle"),[o,a]=A.useState({type:null,file:null}),[l,u]=A.useState([]),[d,c]=A.useState({}),[h,f]=A.useState(new Set),[v,x]=A.useState({}),[g,p]=A.useState({}),m=Vu(),[w,_]=A.useState(null),[E,S]=A.useState("idle"),[b,D]=A.useState(null),T=["rounded p-2 text-gray-500 transition-colors","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"].join(" "),C=["flex items-center gap-1 rounded px-1 py-0.5 text-gray-700 transition-colors","hover:bg-gray-100 focus-visible:outline focus-visible:outline-2","focus-visible:outline-offset-2 focus-visible:outline-blue-500"].join(" "),I=["rounded border border-red-200 px-2 py-1 text-xs font-medium text-red-700 transition-colors","hover:bg-red-50 focus-visible:outline focus-visible:outline-2","focus-visible:outline-offset-2 focus-visible:outline-red-500"].join(" "),M=A.useCallback(le=>{const Pe=le.filter(ke=>ke.kind==="directory").sort((ke,Ue)=>ke.name.localeCompare(Ue.name)),ve=le.filter(ke=>ke.kind==="file").sort((ke,Ue)=>ke.name.localeCompare(Ue.name));return[...Pe,...ve]},[]),H=A.useCallback((le,Pe)=>{x(ve=>{const ke={...ve};return Pe?ke[le]=!0:delete ke[le],ke})},[]),q=A.useCallback((le,Pe)=>{p(ve=>{const ke={...ve};return Pe?ke[le]=Pe:delete ke[le],ke})},[]),W=A.useCallback(async(le="")=>{if(!m){q(le,e("storage.notSupported"));return}H(le,!0),q(le,null);try{const Pe=await QP(le),ve=M(Pe);le?c(ke=>({...ke,[le]:ve})):u(ve)}catch(Pe){const ve=Pe instanceof Error?Pe.message:e("storage.error");q(le,ve)}finally{H(le,!1)}},[m,q,H,M,e]);A.useEffect(()=>{W("")},[W]);const K=async()=>{if(!m){s("error"),r(e("storage.notSupported"));return}if(window.confirm(e("storage.resetConfirm")))try{s("working"),r(null),await uO(),await t(Pl()),c({}),f(new Set),p({}),await W(""),s("success")}catch(Pe){const ve=Pe instanceof Error?Pe.message:e("storage.danger.error");s("error"),r(ve)}},G=A.useCallback(async()=>{if(!m){D(e("storage.notSupported")),S("error");return}try{S("working"),D(null);const le=await lO();_(le.totalBytes),S("success")}catch(le){const Pe=le instanceof Error?le.message:e("storage.error");D(Pe),S("error")}},[m,e]),$=A.useCallback(le=>{le.kind==="file"&&a({type:"detail",file:le})},[]),te=A.useCallback(le=>{le.kind==="file"&&a({type:"preview",file:le})},[]),L=A.useCallback(()=>{a({type:null,file:null})},[]),ce=A.useCallback(async le=>{if(le.kind==="file")try{const Pe=await Wv(le.path),ve=URL.createObjectURL(Pe),ke=document.createElement("a");ke.href=ve,ke.download=le.path.split("/").pop()||"download",document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(ve)}catch(Pe){const ve=Pe instanceof Error?Pe.message:e("storage.error");r(ve)}},[e]),oe=A.useCallback(le=>{if(le.kind!=="directory")return;const Pe=h.has(le.path);f(ve=>{const ke=new Set(ve);return Pe?ke.delete(le.path):ke.add(le.path),ke}),!Pe&&!d[le.path]&&!v[le.path]&&W(le.path)},[d,h,W,v]),F=A.useCallback(le=>{W(le)},[W]),xe=le=>le.kind!=="file"?null:y.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2",children:[y.jsx("button",{type:"button",onClick:()=>$(le),className:[T,"hover:bg-blue-50 hover:text-blue-600","focus-visible:outline-blue-500"].join(" "),"aria-label":e("storage.table.actions.detail"),children:y.jsx(gj,{className:"h-5 w-5"})}),y.jsx("button",{type:"button",onClick:()=>te(le),className:[T,"hover:bg-green-50 hover:text-green-600","focus-visible:outline-green-500"].join(" "),"aria-label":e("storage.table.actions.preview"),children:y.jsx(yj,{className:"h-5 w-5"})}),y.jsx("button",{type:"button",onClick:()=>ce(le),className:[T,"hover:bg-indigo-50 hover:text-indigo-600","focus-visible:outline-indigo-500"].join(" "),"aria-label":e("storage.table.actions.download"),children:y.jsx(xj,{className:"h-5 w-5"})})]}),Fe=(le,Pe)=>{const ve=le.kind==="directory",ke=h.has(le.path),Ue=Pe*16,Ve=ve?d[le.path]:void 0,ot=v[le.path],ft=g[le.path];return y.jsxs("div",{className:"px-4 py-3",children:[y.jsxs("div",{className:"flex items-center gap-3",style:{paddingLeft:Ue},children:[ve?y.jsxs("button",{type:"button",onClick:()=>oe(le),className:C,"aria-label":e(ke?"storage.tree.collapse":"storage.tree.expand"),"aria-expanded":ke,children:[ke?y.jsx(bj,{className:"h-4 w-4"}):y.jsx(wj,{className:"h-4 w-4"}),y.jsx("span",{className:"text-sm font-medium text-gray-900",children:le.name})]}):y.jsx("span",{className:"w-5","aria-hidden":!0}),y.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4",children:[y.jsx("div",{className:"min-w-0 flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-sm text-gray-800",style:{direction:"rtl",textAlign:"left"},title:le.path,children:le.path}),le.kind==="file"?y.jsx("div",{className:"min-w-[96px] text-right text-sm font-medium text-gray-900",children:yu(le.size??0)}):null,xe(le)]})]}),ve&&ke?y.jsx("div",{className:"mt-2 border-l border-gray-200 pl-4",children:ot?y.jsx("p",{className:"px-2 py-1 text-sm text-gray-500",children:e("storage.tree.loadingChildren")}):ft?y.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-sm text-red-700",children:[y.jsx("span",{children:e("storage.tree.loadError")}),y.jsx("button",{type:"button",onClick:()=>F(le.path),className:I,children:e("storage.tree.retry")})]}):((Ve==null?void 0:Ve.length)??0)===0?y.jsx("p",{className:"px-2 py-1 text-sm text-gray-500",children:e("storage.tree.emptyDirectory")}):Ve==null?void 0:Ve.map(vt=>Fe(vt,Pe+1))}):null]},le.path)},Ne=!!v[""],He=g[""];return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:e("storage.title")}),y.jsx("p",{className:"text-sm text-gray-600",children:e("storage.description")}),y.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[w!==null?y.jsx("span",{children:e("storage.usage.opfsSize",{size:yu(w)})}):null,b?y.jsx("span",{className:"text-red-700",children:b}):null,y.jsx("button",{type:"button",onClick:G,disabled:E==="working"||!m,className:["inline-flex items-center gap-1 rounded border border-gray-200 px-2 py-1 text-[11px] font-medium text-gray-700 transition-colors","hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500"].join(" "),children:e(E==="working"?"storage.usage.calculating":"storage.usage.calculate")})]})]}),!m&&y.jsx("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-4 text-sm text-yellow-800",children:e("storage.notSupported")}),n&&y.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:n}),y.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[y.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-base font-semibold text-gray-900",children:e("storage.table.title")}),y.jsx("p",{className:"text-sm text-gray-500",children:e("storage.table.description")})]}),y.jsx("span",{className:"text-xs text-gray-500",children:Ne?e("storage.tree.loadingRoot"):null})]}),y.jsxs("div",{className:"divide-y",children:[Ne&&y.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:e("storage.tree.loadingRoot")}),He&&y.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-red-700",children:[y.jsx("span",{children:He}),y.jsx("button",{type:"button",onClick:()=>F(""),className:I,children:e("storage.tree.retry")})]}),!Ne&&!He&&l.length===0&&y.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:e("storage.table.empty")}),!Ne&&!He&&l.length>0?l.map(le=>Fe(le,0)):null]})]}),y.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 shadow-sm",children:[y.jsxs("div",{className:"flex items-start justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-base font-semibold text-red-800",children:e("storage.danger.title")}),y.jsx("p",{className:"text-sm text-red-700",children:e("storage.danger.description")})]}),y.jsx("button",{onClick:K,disabled:i==="working"||!m,className:["rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors","hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-60"].join(" "),children:e(i==="working"?"storage.danger.action.working":"storage.danger.action.default")})]}),i==="success"&&y.jsx("p",{className:"mt-2 text-sm text-green-800",children:e("storage.danger.success")}),i==="error"&&y.jsx("p",{className:"mt-2 text-sm text-red-800",children:e("storage.danger.error")})]}),y.jsx(CW,{isOpen:o.type==="detail",file:o.file,onClose:L}),y.jsx(NW,{isOpen:o.type==="preview",file:o.file,onClose:L})]})},RW=({label:t,value:e,onChange:n,options:r,placeholder:i,disabled:s=!1,className:o="",renderOption:a,isFilterable:l=!0})=>{const{t:u}=_t("common"),d=i??u("selectPlaceholder"),[c,h]=A.useState(!1),[f,v]=A.useState(""),[x,g]=A.useState(r),p=A.useRef(null),m=A.useRef(null),[w,_]=A.useState("down");A.useEffect(()=>{g(r)},[r]),A.useEffect(()=>{const C=r.find(I=>I.value===e);C&&!c?v(C.label):!e&&!c&&v("")},[e,r,c]),A.useEffect(()=>{if(!c)return;const C=f.toLowerCase(),I=r.filter(M=>M.label.toLowerCase().includes(C)||M.value.toLowerCase().includes(C)||M.note&&M.note.toLowerCase().includes(C));g(l?I:r)},[f,r,c,l]),A.useEffect(()=>{const C=I=>{if(p.current&&!p.current.contains(I.target)){h(!1);const M=r.find(H=>H.value===e);v(M?M.label:"")}};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[e,r]),A.useEffect(()=>{if(!c||!p.current)return;const C=p.current.getBoundingClientRect(),I=window.innerHeight-C.bottom,M=C.top,H=I<200&&M>I;_(H?"up":"down")},[c,r.length]);const E=C=>{l&&(v(C.target.value),h(!0))},S=()=>{s||h(!0)},b=C=>{n(C.value),v(C.label),h(!1)},D=()=>{s||l||h(!0)},T=w==="up"?"bottom-full mb-1":"top-full mt-1";return y.jsxs("div",{className:`relative ${o}`,ref:p,children:[t&&y.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:t}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{ref:m,type:"text",className:`w-full rounded-md border border-gray-300 bg-white px-3 py-2 pr-10 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 ${s?"cursor-not-allowed bg-gray-100 text-gray-500":"text-gray-900"}`,value:f,readOnly:!l,onChange:E,onFocus:S,onClick:D,placeholder:d,disabled:s}),y.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:y.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform duration-200 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),c&&!s&&y.jsx("div",{className:`absolute z-50 ${T} max-h-60 w-full overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none`,children:x.length===0?y.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:u("noOptions")}):x.map(C=>y.jsx("div",{className:`cursor-pointer px-4 py-2 text-sm hover:bg-blue-50 ${C.value===e?"bg-blue-50 text-blue-700":"text-gray-900"}`,onClick:()=>b(C),children:a?a(C):y.jsx("div",{className:"flex flex-col",children:y.jsx("span",{className:"font-medium",children:C.label})})},C.value))})]})},Hc=t=>{if(!t.trim())return!1;try{const e=new URL(t);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},IW=({providerId:t,apiEndpoint:e,apiKey:n,onProviderChange:r,onApiEndpointChange:i,onApiKeyChange:s,onStatusChange:o,testNonce:a=0})=>{const{t:l}=_t("settings"),[u,d]=A.useState(""),[c,h]=A.useState(""),[f,v]=A.useState(!1),x=A.useMemo(()=>m0.find(m=>m.id===t),[t]),g=t==="custom",p=A.useMemo(()=>m0.map(m=>({value:m.id,label:m.name,note:m.baseUrl})),[]);return A.useEffect(()=>{const m=e.length>0&&!Hc(e),w=n.length>0&&e.length===0;d(m?l("contextMenu.api.errors.validUrl"):w?l("contextMenu.api.errors.baseUrlRequired"):"")},[e,n,l]),A.useEffect(()=>{const m=n.length===0&&e.length>0&&Hc(e);h(m?l("contextMenu.api.errors.apiKeyRequired"):"")},[n,e,l]),A.useEffect(()=>{const w=setTimeout(async()=>{if(e&&n&&Hc(e)){o==null||o({type:"success",message:l("contextMenu.api.status.testing"),isTesting:!0});try{const _=await fetch(`${e}/models`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(_.ok){const E=await _.json(),S=E.data&&Array.isArray(E.data)?E.data.length:0;o==null||o({type:"success",message:S>0?l("contextMenu.api.status.connectedWithCount",{count:S}):l("contextMenu.api.status.connected"),isTesting:!1})}else o==null||o({type:"error",message:l("contextMenu.api.status.failed",{status:`${_.status} ${_.statusText}`}),link:x==null?void 0:x.docsUrl,isTesting:!1})}catch(_){o==null||o({type:"error",message:l("contextMenu.api.status.networkError",{message:_ instanceof Error?_.message:l("errors:unknown")}),link:x==null?void 0:x.docsUrl,isTesting:!1})}}else!e&&!n?o==null||o({type:"warning",message:l("contextMenu.api.status.needConfig"),isTesting:!1}):e?n?Hc(e)?o==null||o(null):o==null||o({type:"error",message:l("contextMenu.api.errors.fixUrlFormat"),isTesting:!1}):o==null||o({type:"warning",message:l("contextMenu.api.status.missingApiKey"),isTesting:!1}):o==null||o({type:"warning",message:l("contextMenu.api.status.missingBaseUrl"),isTesting:!1})},1e3);return()=>clearTimeout(w)},[e,n,x,o,a,l]),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(RW,{label:l("contextMenu.api.providerLabel"),value:t||"",onChange:m=>r(m),options:p,placeholder:l("contextMenu.api.providerPlaceholder"),className:"w-full",isFilterable:!1}),x&&y.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[y.jsx("div",{className:"font-medium text-gray-700",children:x.baseUrl?`${l("contextMenu.api.baseUrl")}: ${x.baseUrl}`:l("contextMenu.api.customProvider")}),x.docsUrl&&y.jsx("a",{href:x.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:l("contextMenu.api.viewDocs")})]})]}),g&&y.jsxs("div",{children:[y.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:l("contextMenu.api.baseUrl")}),y.jsx("input",{type:"text",value:e,onChange:m=>i(m.target.value),placeholder:l("contextMenu.api.baseUrlPlaceholder"),className:`w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 ${u?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`}),u&&y.jsx("div",{className:"mt-1 text-sm text-red-600",children:u})]}),y.jsxs("div",{children:[y.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:l("contextMenu.api.apiKey")}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:f?"text":"password",value:n,onChange:m=>s(m.target.value),placeholder:l("contextMenu.api.apiKeyPlaceholder"),className:`w-full rounded-md border px-3 py-2 pr-10 focus:outline-none focus:ring-2 ${c?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`}),y.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:f?y.jsx(zj,{}):y.jsx(Bj,{})})]}),c&&y.jsx("div",{className:"mt-1 text-sm text-red-600",children:c})]})]})},LW=({value:t,onChange:e,apiEndpoint:n,apiKey:r,placeholder:i="Search or enter model name...",defaultModels:s=[]})=>{const{t:o}=_t("settings"),a=i||o("contextMenu.modelPlaceholder"),[l,u]=A.useState(t),[d,c]=A.useState(!1),[h,f]=A.useState(s),[v,x]=A.useState(s),[g,p]=A.useState(!1),[m,w]=A.useState(null),[_,E]=A.useState(!1),[S,b]=A.useState({}),D=A.useRef(null),T=A.useRef(null),C=()=>{if(!T.current)return;const W=T.current.getBoundingClientRect(),K=window.innerHeight-W.bottom,G=W.top,te=K<200&&G>K;b({position:"fixed",left:W.left,width:W.width,zIndex:9999,...te?{bottom:window.innerHeight-W.top+5,maxHeight:Math.min(G-20,300)}:{top:W.bottom+5,maxHeight:Math.min(K-20,300)}})};A.useLayoutEffect(()=>(d&&(C(),window.addEventListener("scroll",C,!0),window.addEventListener("resize",C)),()=>{window.removeEventListener("scroll",C,!0),window.removeEventListener("resize",C)}),[d,v.length]),A.useEffect(()=>{const W=K=>{const G=K.target,$=D.current&&D.current.contains(G),te=T.current&&T.current.contains(G);!$&&!te&&c(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]),A.useEffect(()=>{(async()=>{if(!(!n||!r||_)){p(!0),w(null);try{const K=await fetch(`${n}/models`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!K.ok)throw new Error(`Failed to fetch models: ${K.status}`);const G=await K.json();let $=[];G.data&&Array.isArray(G.data)?$=G.data.map(te=>te.id):Array.isArray(G)?$=G:G.models&&Array.isArray(G.models)&&($=G.models),$.length>0&&(f($),x($),E(!0))}catch(K){console.warn("Failed to fetch models from API, using defaults:",K),w(o("contextMenu.modelSearch.usingDefaults")),f(s),x(s)}finally{p(!1)}}})()},[n,r,_,s,o]),A.useEffect(()=>{const W=h.filter(K=>K.toLowerCase().includes(l.toLowerCase()));x(W)},[l,h]),A.useEffect(()=>{u(t)},[t]);const I=W=>{const K=W.target.value;u(K),c(!0),e(K)},M=W=>{u(W),e(W),c(!1)},H=()=>{c(!0),!_&&n&&r&&E(!0)},q=W=>{if(!d)return;const K=v,G=K.indexOf(l);switch(W.key){case"ArrowDown":W.preventDefault(),G<K.length-1&&M(K[G+1]);break;case"ArrowUp":W.preventDefault(),G>0&&M(K[G-1]);break;case"Enter":W.preventDefault(),K.length>0&&M(K[0]);break;case"Escape":W.preventDefault(),c(!1);break}};return y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"relative",children:y.jsx("input",{ref:T,type:"text",value:l,onChange:I,onFocus:H,onKeyDown:q,placeholder:a,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-black focus:border-blue-500 focus:outline-none focus:ring-blue-500"})}),d&&Vr.createPortal(y.jsx("div",{ref:D,style:S,className:"fixed z-[9999] rounded-md border border-gray-300 bg-white shadow-lg",children:y.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:S.maxHeight},children:[g&&y.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:o("contextMenu.modelSearch.loading")}),m&&y.jsx("div",{className:"px-3 py-2 text-sm text-orange-600",children:m}),!g&&!m&&v.length===0&&y.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:o("contextMenu.modelSearch.noResults",{query:l})}),!g&&!m&&v.length>0&&y.jsx("div",{className:"py-1",children:v.map(W=>y.jsx("div",{className:`cursor-pointer px-3 py-2 text-sm hover:bg-gray-100 ${W===l?"bg-blue-50 text-blue-600":"text-gray-900"}`,onClick:()=>M(W),children:W},W))})]})}),document.body)]})};function PW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return A.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const $h=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ma(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function qy(t){return"nodeType"in t}function ar(t){var e,n;return t?Ma(t)?t:qy(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Ky(t){const{Document:e}=ar(t);return t instanceof e}function nc(t){return Ma(t)?!1:t instanceof ar(t).HTMLElement}function aN(t){return t instanceof ar(t).SVGElement}function ja(t){return t?Ma(t)?t.document:qy(t)?Ky(t)?t:nc(t)||aN(t)?t.ownerDocument:document:document:document}const vi=$h?A.useLayoutEffect:A.useEffect;function Xy(t){const e=A.useRef(t);return vi(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function OW(){const t=A.useRef(null),e=A.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Au(t,e){e===void 0&&(e=[t]);const n=A.useRef(t);return vi(()=>{n.current!==t&&(n.current=t)},e),n}function rc(t,e){const n=A.useRef();return A.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Uf(t){const e=Xy(t),n=A.useRef(null),r=A.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function g0(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let gm={};function ic(t,e){return A.useMemo(()=>{if(e)return e;const n=gm[t]==null?0:gm[t]+1;return gm[t]=n,t+"-"+n},[t,e])}function lN(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const d=s[l];d!=null&&(s[l]=d+t*u)}return s},{...e})}}const da=lN(1),Du=lN(-1);function MW(t){return"clientX"in t&&"clientY"in t}function Gy(t){if(!t)return!1;const{KeyboardEvent:e}=ar(t.target);return e&&t instanceof e}function jW(t){if(!t)return!1;const{TouchEvent:e}=ar(t.target);return e&&t instanceof e}function v0(t){if(jW(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return MW(t)?{x:t.clientX,y:t.clientY}:null}const Nu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Nu.Translate.toString(t),Nu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),b1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function FW(t){return t.matches(b1)?t:t.querySelector(b1)}const BW={display:"none"};function zW(t){let{id:e,value:n}=t;return kt.createElement("div",{id:e,style:BW},n)}function UW(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return kt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function $W(){const[t,e]=A.useState("");return{announce:A.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const uN=A.createContext(null);function WW(t){const e=A.useContext(uN);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function HW(){const[t]=A.useState(()=>new Set),e=A.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[A.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const VW={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qW={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function KW(t){let{announcements:e=qW,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=VW}=t;const{announce:s,announcement:o}=$W(),a=ic("DndLiveRegion"),[l,u]=A.useState(!1);if(A.useEffect(()=>{u(!0)},[]),WW(A.useMemo(()=>({onDragStart(c){let{active:h}=c;s(e.onDragStart({active:h}))},onDragMove(c){let{active:h,over:f}=c;e.onDragMove&&s(e.onDragMove({active:h,over:f}))},onDragOver(c){let{active:h,over:f}=c;s(e.onDragOver({active:h,over:f}))},onDragEnd(c){let{active:h,over:f}=c;s(e.onDragEnd({active:h,over:f}))},onDragCancel(c){let{active:h,over:f}=c;s(e.onDragCancel({active:h,over:f}))}}),[s,e])),!l)return null;const d=kt.createElement(kt.Fragment,null,kt.createElement(zW,{id:r,value:i.draggable}),kt.createElement(UW,{id:a,announcement:o}));return n?Vr.createPortal(d,n):d}var vn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(vn||(vn={}));function $f(){}function S1(t,e){return A.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function XW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return A.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Qr=Object.freeze({x:0,y:0});function cN(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function dN(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function GW(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function k1(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function fN(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function E1(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const YW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=E1(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=cN(E1(l),i);s.push({id:a,data:{droppableContainer:o,value:u}})}}return s.sort(dN)},ZW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=k1(e),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=k1(l),d=i.reduce((h,f,v)=>h+cN(u[v],f),0),c=Number((d/4).toFixed(4));s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(dN)};function QW(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,d=o*a,c=d/(l+u-d);return Number(c.toFixed(4))}return 0}const JW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=QW(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(GW)};function eH(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function hN(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Qr}function tH(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const nH=tH(1);function rH(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function iH(t,e,n){const r=rH(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,c=s?t.height/s:t.height;return{width:d,height:c,top:u,right:l+d,bottom:u+c,left:l}}const sH={ignoreTransform:!1};function Fa(t,e){e===void 0&&(e=sH);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=ar(t).getComputedStyle(t);u&&(n=iH(n,u,d))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function _1(t){return Fa(t,{ignoreTransform:!0})}function oH(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function aH(t,e){return e===void 0&&(e=ar(t).getComputedStyle(t)),e.position==="fixed"}function lH(t,e){e===void 0&&(e=ar(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Wh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Ky(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!nc(i)||aN(i)||n.includes(i))return n;const s=ar(t).getComputedStyle(i);return i!==t&&lH(i,s)&&n.push(i),aH(i,s)?n:r(i.parentNode)}return t?r(t):n}function pN(t){const[e]=Wh(t,1);return e??null}function vm(t){return!$h||!t?null:Ma(t)?t:qy(t)?Ky(t)||t===ja(t).scrollingElement?window:nc(t)?t:null:null}function mN(t){return Ma(t)?t.scrollX:t.scrollLeft}function gN(t){return Ma(t)?t.scrollY:t.scrollTop}function y0(t){return{x:mN(t),y:gN(t)}}var bn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(bn||(bn={}));function vN(t){return!$h||!t?!1:t===document.scrollingElement}function yN(t){const e={x:0,y:0},n=vN(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const uH={x:.2,y:.2};function cH(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=uH);const{isTop:u,isBottom:d,isLeft:c,isRight:h}=yN(t),f={x:0,y:0},v={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+x.height?(f.y=bn.Backward,v.y=r*Math.abs((e.top+x.height-s)/x.height)):!d&&l>=e.bottom-x.height&&(f.y=bn.Forward,v.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!h&&a>=e.right-x.width?(f.x=bn.Forward,v.x=r*Math.abs((e.right-x.width-a)/x.width)):!c&&o<=e.left+x.width&&(f.x=bn.Backward,v.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:f,speed:v}}function dH(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function xN(t){return t.reduce((e,n)=>da(e,y0(n)),Qr)}function fH(t){return t.reduce((e,n)=>e+mN(n),0)}function hH(t){return t.reduce((e,n)=>e+gN(n),0)}function pH(t,e){if(e===void 0&&(e=Fa),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);pN(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const mH=[["x",["left","right"],fH],["y",["top","bottom"],hH]];class Yy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Wh(n),i=xN(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of mH)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),d=i[s]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function gH(t){const{EventTarget:e}=ar(t);return t instanceof e?t:ja(t)}function ym(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var _r;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(_r||(_r={}));function C1(t){t.preventDefault()}function vH(t){t.stopPropagation()}var xt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(xt||(xt={}));const wN={start:[xt.Space,xt.Enter],cancel:[xt.Esc],end:[xt.Space,xt.Enter,xt.Tab]},yH=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case xt.Right:return{...n,x:n.x+25};case xt.Left:return{...n,x:n.x-25};case xt.Down:return{...n,y:n.y+25};case xt.Up:return{...n,y:n.y-25}}};class Zy{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Wl(ja(n)),this.windowListeners=new Wl(ar(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_r.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&pH(r),n(Qr)}handleKeyDown(e){if(Gy(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=wN,coordinateGetter:o=yH,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Qr;this.referenceCoordinates||(this.referenceCoordinates=d);const c=o(e,{active:n,context:r.current,currentCoordinates:d});if(c){const h=Du(c,d),f={x:0,y:0},{scrollableAncestors:v}=r.current;for(const x of v){const g=e.code,{isTop:p,isRight:m,isLeft:w,isBottom:_,maxScroll:E,minScroll:S}=yN(x),b=dH(x),D={x:Math.min(g===xt.Right?b.right-b.width/2:b.right,Math.max(g===xt.Right?b.left:b.left+b.width/2,c.x)),y:Math.min(g===xt.Down?b.bottom-b.height/2:b.bottom,Math.max(g===xt.Down?b.top:b.top+b.height/2,c.y))},T=g===xt.Right&&!m||g===xt.Left&&!w,C=g===xt.Down&&!_||g===xt.Up&&!p;if(T&&D.x!==c.x){const I=x.scrollLeft+h.x,M=g===xt.Right&&I<=E.x||g===xt.Left&&I>=S.x;if(M&&!h.y){x.scrollTo({left:I,behavior:a});return}M?f.x=x.scrollLeft-I:f.x=g===xt.Right?x.scrollLeft-E.x:x.scrollLeft-S.x,f.x&&x.scrollBy({left:-f.x,behavior:a});break}else if(C&&D.y!==c.y){const I=x.scrollTop+h.y,M=g===xt.Down&&I<=E.y||g===xt.Up&&I>=S.y;if(M&&!h.x){x.scrollTo({top:I,behavior:a});return}M?f.y=x.scrollTop-I:f.y=g===xt.Down?x.scrollTop-E.y:x.scrollTop-S.y,f.y&&x.scrollBy({top:-f.y,behavior:a});break}}this.handleMove(e,da(Du(c,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zy.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=wN,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function A1(t){return!!(t&&"distance"in t)}function D1(t){return!!(t&&"delay"in t)}class Qy{constructor(e,n,r){var i;r===void 0&&(r=gH(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=ja(o),this.documentListeners=new Wl(this.document),this.listeners=new Wl(r),this.windowListeners=new Wl(ar(o)),this.initialCoordinates=(i=v0(s))!=null?i:Qr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.DragStart,C1),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),this.windowListeners.add(_r.ContextMenu,C1),this.documentListeners.add(_r.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(D1(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(A1(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(_r.Click,vH,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_r.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=v0(e))!=null?n:Qr,u=Du(i,l);if(!r&&a){if(A1(a)){if(a.tolerance!=null&&ym(u,a.tolerance))return this.handleCancel();if(ym(u,a.distance))return this.handleStart()}if(D1(a)&&ym(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===xt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const xH={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jy extends Qy{constructor(e){const{event:n}=e,r=ja(n.target);super(e,xH,r)}}Jy.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const wH={move:{name:"mousemove"},end:{name:"mouseup"}};var x0;(function(t){t[t.RightClick=2]="RightClick"})(x0||(x0={}));class bH extends Qy{constructor(e){super(e,wH,ja(e.event.target))}}bH.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===x0.RightClick?!1:(r==null||r({event:n}),!0)}}];const xm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class SH extends Qy{constructor(e){super(e,xm)}static setup(){return window.addEventListener(xm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(xm.move.name,e)};function e(){}}}SH.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Hl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Hl||(Hl={}));var Wf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wf||(Wf={}));function kH(t){let{acceleration:e,activator:n=Hl.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Wf.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:c,threshold:h}=t;const f=_H({delta:c,disabled:!s}),[v,x]=OW(),g=A.useRef({x:0,y:0}),p=A.useRef({x:0,y:0}),m=A.useMemo(()=>{switch(n){case Hl.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Hl.DraggableRect:return i}},[n,i,l]),w=A.useRef(null),_=A.useCallback(()=>{const S=w.current;if(!S)return;const b=g.current.x*p.current.x,D=g.current.y*p.current.y;S.scrollBy(b,D)},[]),E=A.useMemo(()=>a===Wf.TreeOrder?[...u].reverse():u,[a,u]);A.useEffect(()=>{if(!s||!u.length||!m){x();return}for(const S of E){if((r==null?void 0:r(S))===!1)continue;const b=u.indexOf(S),D=d[b];if(!D)continue;const{direction:T,speed:C}=cH(S,D,m,e,h);for(const I of["x","y"])f[I][T[I]]||(C[I]=0,T[I]=0);if(C.x>0||C.y>0){x(),w.current=S,v(_,o),g.current=C,p.current=T;return}}g.current={x:0,y:0},p.current={x:0,y:0},x()},[e,_,r,x,s,o,JSON.stringify(m),JSON.stringify(f),v,u,E,d,JSON.stringify(h)])}const EH={x:{[bn.Backward]:!1,[bn.Forward]:!1},y:{[bn.Backward]:!1,[bn.Forward]:!1}};function _H(t){let{delta:e,disabled:n}=t;const r=g0(e);return rc(i=>{if(n||!r||!i)return EH;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[bn.Backward]:i.x[bn.Backward]||s.x===-1,[bn.Forward]:i.x[bn.Forward]||s.x===1},y:{[bn.Backward]:i.y[bn.Backward]||s.y===-1,[bn.Forward]:i.y[bn.Forward]||s.y===1}}},[n,e,r])}function CH(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return rc(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function AH(t,e){return A.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Tu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Tu||(Tu={}));var w0;(function(t){t.Optimized="optimized"})(w0||(w0={}));const N1=new Map;function DH(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=A.useState(null),{frequency:a,measure:l,strategy:u}=i,d=A.useRef(t),c=g(),h=Au(c),f=A.useCallback(function(p){p===void 0&&(p=[]),!h.current&&o(m=>m===null?p:m.concat(p.filter(w=>!m.includes(w))))},[h]),v=A.useRef(null),x=rc(p=>{if(c&&!n)return N1;if(!p||p===N1||d.current!==t||s!=null){const m=new Map;for(let w of t){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){m.set(w.id,w.rect.current);continue}const _=w.node.current,E=_?new Yy(l(_),_):null;w.rect.current=E,E&&m.set(w.id,E)}return m}return p},[t,s,n,c,l]);return A.useEffect(()=>{d.current=t},[t]),A.useEffect(()=>{c||f()},[n,c]),A.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),A.useEffect(()=>{c||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{f(),v.current=null},a))},[a,c,f,...r]),{droppableRects:x,measureDroppableContainers:f,measuringScheduled:s!=null};function g(){switch(u){case Tu.Always:return!1;case Tu.BeforeDragging:return n;default:return!n}}}function bN(t,e){return rc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function NH(t,e){return bN(t,e)}function TH(t){let{callback:e,disabled:n}=t;const r=Xy(e),i=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Hh(t){let{callback:e,disabled:n}=t;const r=Xy(e),i=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function RH(t){return new Yy(Fa(t),t)}function T1(t,e,n){e===void 0&&(e=RH);const[r,i]=A.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=TH({callback(l){if(t)for(const u of l){const{type:d,target:c}=u;if(d==="childList"&&c instanceof HTMLElement&&c.contains(t)){s();break}}}}),a=Hh({callback:s});return vi(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function IH(t){const e=bN(t);return hN(t,e)}const R1=[];function LH(t){const e=A.useRef(t),n=rc(r=>t?r&&r!==R1&&t&&e.current&&t.parentNode===e.current.parentNode?r:Wh(t):R1,[t]);return A.useEffect(()=>{e.current=t},[t]),n}function PH(t){const[e,n]=A.useState(null),r=A.useRef(t),i=A.useCallback(s=>{const o=vm(s.target);o&&n(a=>a?(a.set(o,y0(o)),new Map(a)):null)},[]);return A.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=vm(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,y0(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=vm(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>da(s,o),Qr):xN(t):Qr,[t,e])}function I1(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const r=t!==Qr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Du(t,n.current):Qr}function OH(t){A.useEffect(()=>{if(!$h)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function MH(t,e){return A.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function SN(t){return A.useMemo(()=>t?oH(t):null,[t])}const L1=[];function jH(t,e){e===void 0&&(e=Fa);const[n]=t,r=SN(n?ar(n):null),[i,s]=A.useState(L1);function o(){s(()=>t.length?t.map(l=>vN(l)?r:new Yy(e(l),l)):L1)}const a=Hh({callback:o});return vi(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function FH(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return nc(e)?e:t}function BH(t){let{measure:e}=t;const[n,r]=A.useState(null),i=A.useCallback(u=>{for(const{target:d}of u)if(nc(d)){r(c=>{const h=e(d);return c?{...c,width:h.width,height:h.height}:h});break}},[e]),s=Hh({callback:i}),o=A.useCallback(u=>{const d=FH(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?e(d):null)},[e,s]),[a,l]=Uf(o);return A.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const zH=[{sensor:Jy,options:{}},{sensor:Zy,options:{}}],UH={current:{}},_d={draggable:{measure:_1},droppable:{measure:_1,strategy:Tu.WhileDragging,frequency:w0.Optimized},dragOverlay:{measure:Fa}};class Vl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const $H={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$f},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_d,measureDroppableContainers:$f,windowRect:null,measuringScheduled:!1},WH={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$f,draggableNodes:new Map,over:null,measureDroppableContainers:$f},Vh=A.createContext(WH),kN=A.createContext($H);function HH(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vl}}}function VH(t,e){switch(e.type){case vn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case vn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case vn.DragEnd:case vn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Vl(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case vn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Vl(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case vn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Vl(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function qH(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=A.useContext(Vh),s=g0(r),o=g0(n==null?void 0:n.id);return A.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!Gy(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const c=FW(d);if(c){c.focus();break}}})}},[r,e,i,o,s]),null}function KH(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function XH(t){return A.useMemo(()=>({draggable:{..._d.draggable,...t==null?void 0:t.draggable},droppable:{..._d.droppable,...t==null?void 0:t.droppable},dragOverlay:{..._d.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function GH(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=A.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;vi(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=n(u),c=hN(d,r);if(o||(c.x=0),a||(c.y=0),s.current=!0,Math.abs(c.x)>0||Math.abs(c.y)>0){const h=pN(u);h&&h.scrollBy({top:c.y,left:c.x})}},[e,o,a,r,n])}const EN=A.createContext({...Qr,scaleX:1,scaleY:1});var ls;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ls||(ls={}));const YH=A.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:d=zH,collisionDetection:c=JW,measuring:h,modifiers:f,...v}=e;const x=A.useReducer(VH,void 0,HH),[g,p]=x,[m,w]=HW(),[_,E]=A.useState(ls.Uninitialized),S=_===ls.Initialized,{draggable:{active:b,nodes:D,translate:T},droppable:{containers:C}}=g,I=b!=null?D.get(b):null,M=A.useRef({initial:null,translated:null}),H=A.useMemo(()=>{var R;return b!=null?{id:b,data:(R=I==null?void 0:I.data)!=null?R:UH,rect:M}:null},[b,I]),q=A.useRef(null),[W,K]=A.useState(null),[G,$]=A.useState(null),te=Au(v,Object.values(v)),L=ic("DndDescribedBy",o),ce=A.useMemo(()=>C.getEnabled(),[C]),oe=XH(h),{droppableRects:F,measureDroppableContainers:xe,measuringScheduled:Fe}=DH(ce,{dragging:S,dependencies:[T.x,T.y],config:oe.droppable}),Ne=CH(D,b),He=A.useMemo(()=>G?v0(G):null,[G]),le=ue(),Pe=NH(Ne,oe.draggable.measure);GH({activeNode:b!=null?D.get(b):null,config:le.layoutShiftCompensation,initialRect:Pe,measure:oe.draggable.measure});const ve=T1(Ne,oe.draggable.measure,Pe),ke=T1(Ne?Ne.parentElement:null),Ue=A.useRef({activatorEvent:null,active:null,activeNode:Ne,collisionRect:null,collisions:null,droppableRects:F,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ve=C.getNodeFor((n=Ue.current.over)==null?void 0:n.id),ot=BH({measure:oe.dragOverlay.measure}),ft=(r=ot.nodeRef.current)!=null?r:Ne,vt=S?(i=ot.rect)!=null?i:ve:null,at=!!(ot.nodeRef.current&&ot.rect),Ct=IH(at?null:ve),Tt=SN(ft?ar(ft):null),Dt=LH(S?Ve??Ne:null),Rt=jH(Dt),ut=KH(f,{transform:{x:T.x-Ct.x,y:T.y-Ct.y,scaleX:1,scaleY:1},activatorEvent:G,active:H,activeNodeRect:ve,containerNodeRect:ke,draggingNodeRect:vt,over:Ue.current.over,overlayNodeRect:ot.rect,scrollableAncestors:Dt,scrollableAncestorRects:Rt,windowRect:Tt}),Je=He?da(He,T):null,It=PH(Dt),rn=I1(It),ae=I1(It,[ve]),me=da(ut,rn),Be=vt?nH(vt,ut):null,We=H&&Be?c({active:H,collisionRect:Be,droppableRects:F,droppableContainers:ce,pointerCoordinates:Je}):null,Ze=fN(We,"id"),[pt,Bt]=A.useState(null),it=at?ut:da(ut,ae),Ft=eH(it,(s=pt==null?void 0:pt.rect)!=null?s:null,ve),Yt=A.useRef(null),O=A.useCallback((R,de)=>{let{sensor:ze,options:k}=de;if(q.current==null)return;const ne=D.get(q.current);if(!ne)return;const re=R.nativeEvent,N=new ze({active:q.current,activeNode:ne,event:re,options:k,context:Ue,onAbort(Z){if(!D.get(Z))return;const{onDragAbort:U}=te.current,V={id:Z};U==null||U(V),m({type:"onDragAbort",event:V})},onPending(Z,j,U,V){if(!D.get(Z))return;const{onDragPending:ge}=te.current,we={id:Z,constraint:j,initialCoordinates:U,offset:V};ge==null||ge(we),m({type:"onDragPending",event:we})},onStart(Z){const j=q.current;if(j==null)return;const U=D.get(j);if(!U)return;const{onDragStart:V}=te.current,ie={activatorEvent:re,active:{id:j,data:U.data,rect:M}};Vr.unstable_batchedUpdates(()=>{V==null||V(ie),E(ls.Initializing),p({type:vn.DragStart,initialCoordinates:Z,active:j}),m({type:"onDragStart",event:ie}),K(Yt.current),$(re)})},onMove(Z){p({type:vn.DragMove,coordinates:Z})},onEnd:z(vn.DragEnd),onCancel:z(vn.DragCancel)});Yt.current=N;function z(Z){return async function(){const{active:U,collisions:V,over:ie,scrollAdjustedTranslate:ge}=Ue.current;let we=null;if(U&&ge){const{cancelDrop:Ee}=te.current;we={activatorEvent:re,active:U,collisions:V,delta:ge,over:ie},Z===vn.DragEnd&&typeof Ee=="function"&&await Promise.resolve(Ee(we))&&(Z=vn.DragCancel)}q.current=null,Vr.unstable_batchedUpdates(()=>{p({type:Z}),E(ls.Uninitialized),Bt(null),K(null),$(null),Yt.current=null;const Ee=Z===vn.DragEnd?"onDragEnd":"onDragCancel";if(we){const _e=te.current[Ee];_e==null||_e(we),m({type:Ee,event:we})}})}}},[D]),fe=A.useCallback((R,de)=>(ze,k)=>{const ne=ze.nativeEvent,re=D.get(k);if(q.current!==null||!re||ne.dndKit||ne.defaultPrevented)return;const N={active:re};R(ze,de.options,N)===!0&&(ne.dndKit={capturedBy:de.sensor},q.current=k,O(ze,de))},[D,O]),pe=AH(d,fe);OH(d),vi(()=>{ve&&_===ls.Initializing&&E(ls.Initialized)},[ve,_]),A.useEffect(()=>{const{onDragMove:R}=te.current,{active:de,activatorEvent:ze,collisions:k,over:ne}=Ue.current;if(!de||!ze)return;const re={active:de,activatorEvent:ze,collisions:k,delta:{x:me.x,y:me.y},over:ne};Vr.unstable_batchedUpdates(()=>{R==null||R(re),m({type:"onDragMove",event:re})})},[me.x,me.y]),A.useEffect(()=>{const{active:R,activatorEvent:de,collisions:ze,droppableContainers:k,scrollAdjustedTranslate:ne}=Ue.current;if(!R||q.current==null||!de||!ne)return;const{onDragOver:re}=te.current,N=k.get(Ze),z=N&&N.rect.current?{id:N.id,rect:N.rect.current,data:N.data,disabled:N.disabled}:null,Z={active:R,activatorEvent:de,collisions:ze,delta:{x:ne.x,y:ne.y},over:z};Vr.unstable_batchedUpdates(()=>{Bt(z),re==null||re(Z),m({type:"onDragOver",event:Z})})},[Ze]),vi(()=>{Ue.current={activatorEvent:G,active:H,activeNode:Ne,collisionRect:Be,collisions:We,droppableRects:F,draggableNodes:D,draggingNode:ft,draggingNodeRect:vt,droppableContainers:C,over:pt,scrollableAncestors:Dt,scrollAdjustedTranslate:me},M.current={initial:vt,translated:Be}},[H,Ne,We,Be,D,ft,vt,F,C,pt,Dt,me]),kH({...le,delta:T,draggingRect:Be,pointerCoordinates:Je,scrollableAncestors:Dt,scrollableAncestorRects:Rt});const Oe=A.useMemo(()=>({active:H,activeNode:Ne,activeNodeRect:ve,activatorEvent:G,collisions:We,containerNodeRect:ke,dragOverlay:ot,draggableNodes:D,droppableContainers:C,droppableRects:F,over:pt,measureDroppableContainers:xe,scrollableAncestors:Dt,scrollableAncestorRects:Rt,measuringConfiguration:oe,measuringScheduled:Fe,windowRect:Tt}),[H,Ne,ve,G,We,ke,ot,D,C,F,pt,xe,Dt,Rt,oe,Fe,Tt]),Y=A.useMemo(()=>({activatorEvent:G,activators:pe,active:H,activeNodeRect:ve,ariaDescribedById:{draggable:L},dispatch:p,draggableNodes:D,over:pt,measureDroppableContainers:xe}),[G,pe,H,ve,p,L,D,pt,xe]);return kt.createElement(uN.Provider,{value:w},kt.createElement(Vh.Provider,{value:Y},kt.createElement(kN.Provider,{value:Oe},kt.createElement(EN.Provider,{value:Ft},u)),kt.createElement(qH,{disabled:(a==null?void 0:a.restoreFocus)===!1})),kt.createElement(KW,{...a,hiddenTextDescribedById:L}));function ue(){const R=(W==null?void 0:W.autoScrollEnabled)===!1,de=typeof l=="object"?l.enabled===!1:l===!1,ze=S&&!R&&!de;return typeof l=="object"?{...l,enabled:ze}:{enabled:ze}}}),ZH=A.createContext(null),P1="button",QH="Draggable";function JH(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=ic(QH),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:c,over:h}=A.useContext(Vh),{role:f=P1,roleDescription:v="draggable",tabIndex:x=0}=i??{},g=(l==null?void 0:l.id)===e,p=A.useContext(g?EN:ZH),[m,w]=Uf(),[_,E]=Uf(),S=MH(o,e),b=Au(n);vi(()=>(c.set(e,{id:e,key:s,node:m,activatorNode:_,data:b}),()=>{const T=c.get(e);T&&T.key===s&&c.delete(e)}),[c,e]);const D=A.useMemo(()=>({role:f,tabIndex:x,"aria-disabled":r,"aria-pressed":g&&f===P1?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,f,x,g,v,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:D,isDragging:g,listeners:r?void 0:S,node:m,over:h,setNodeRef:w,setActivatorNodeRef:E,transform:p}}function eV(){return A.useContext(kN)}const tV="Droppable",nV={timeout:25};function rV(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=ic(tV),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=A.useContext(Vh),d=A.useRef({disabled:n}),c=A.useRef(!1),h=A.useRef(null),f=A.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:g}={...nV,...i},p=Au(x??r),m=A.useCallback(()=>{if(!c.current){c.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(p.current)?p.current:[p.current]),f.current=null},g)},[g]),w=Hh({callback:m,disabled:v||!o}),_=A.useCallback((D,T)=>{w&&(T&&(w.unobserve(T),c.current=!1),D&&w.observe(D))},[w]),[E,S]=Uf(_),b=Au(e);return A.useEffect(()=>{!w||!E.current||(w.disconnect(),c.current=!1,w.observe(E.current))},[E,w]),A.useEffect(()=>(a({type:vn.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:h,data:b}}),()=>a({type:vn.UnregisterDroppable,key:s,id:r})),[r]),A.useEffect(()=>{n!==d.current.disabled&&(a({type:vn.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:o,rect:h,isOver:(l==null?void 0:l.id)===r,node:E,over:l,setNodeRef:S}}function _N(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function iV(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Vc(t){return t!==null&&t>=0}function sV(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function oV(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const CN=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=_N(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},qc={scaleX:1,scaleY:1},aV=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const u=s[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...qc}:null}const l=lV(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...qc}:i<n&&i>=o?{x:0,y:a.height+l,...qc}:{x:0,y:0,...qc}};function lV(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const AN="Sortable",DN=kt.createContext({activeIndex:-1,containerId:AN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:CN,disabled:{draggable:!1,droppable:!1}});function uV(t){let{children:e,id:n,items:r,strategy:i=CN,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:d}=eV(),c=ic(AN,n),h=a.rect!==null,f=A.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),v=o!=null,x=o?f.indexOf(o.id):-1,g=u?f.indexOf(u.id):-1,p=A.useRef(f),m=!sV(f,p.current),w=g!==-1&&x===-1||m,_=oV(s);vi(()=>{m&&v&&d(f)},[m,f,v,d]),A.useEffect(()=>{p.current=f},[f]);const E=A.useMemo(()=>({activeIndex:x,containerId:c,disabled:_,disableTransforms:w,items:f,overIndex:g,useDragOverlay:h,sortedRects:iV(f,l),strategy:i}),[x,c,_.draggable,_.droppable,w,f,g,l,h,i]);return kt.createElement(DN.Provider,{value:E},e)}const cV=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return _N(n,r,i).indexOf(e)},dV=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},fV={duration:200,easing:"ease"},NN="transform",hV=Nu.Transition.toString({property:NN,duration:0,easing:"linear"}),pV={roleDescription:"sortable"};function mV(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=A.useState(null),a=A.useRef(n);return vi(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const u=Fa(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&o(d)}}n!==a.current&&(a.current=n)},[e,n,r,i]),A.useEffect(()=>{s&&o(null)},[s]),s}function gV(t){let{animateLayoutChanges:e=dV,attributes:n,disabled:r,data:i,getNewIndex:s=cV,id:o,strategy:a,resizeObserverConfig:l,transition:u=fV}=t;const{items:d,containerId:c,activeIndex:h,disabled:f,disableTransforms:v,sortedRects:x,overIndex:g,useDragOverlay:p,strategy:m}=A.useContext(DN),w=vV(r,f),_=d.indexOf(o),E=A.useMemo(()=>({sortable:{containerId:c,index:_,items:d},...i}),[c,i,_,d]),S=A.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:b,node:D,isOver:T,setNodeRef:C}=rV({id:o,data:E,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:I,activatorEvent:M,activeNodeRect:H,attributes:q,setNodeRef:W,listeners:K,isDragging:G,over:$,setActivatorNodeRef:te,transform:L}=JH({id:o,data:E,attributes:{...pV,...n},disabled:w.draggable}),ce=PW(C,W),oe=!!I,F=oe&&!v&&Vc(h)&&Vc(g),xe=!p&&G,Fe=xe&&F?L:null,He=F?Fe??(a??m)({rects:x,activeNodeRect:H,activeIndex:h,overIndex:g,index:_}):null,le=Vc(h)&&Vc(g)?s({id:o,items:d,activeIndex:h,overIndex:g}):_,Pe=I==null?void 0:I.id,ve=A.useRef({activeId:Pe,items:d,newIndex:le,containerId:c}),ke=d!==ve.current.items,Ue=e({active:I,containerId:c,isDragging:G,isSorting:oe,id:o,index:_,items:d,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:u,wasDragging:ve.current.activeId!=null}),Ve=mV({disabled:!Ue,index:_,node:D,rect:b});return A.useEffect(()=>{oe&&ve.current.newIndex!==le&&(ve.current.newIndex=le),c!==ve.current.containerId&&(ve.current.containerId=c),d!==ve.current.items&&(ve.current.items=d)},[oe,le,c,d]),A.useEffect(()=>{if(Pe===ve.current.activeId)return;if(Pe!=null&&ve.current.activeId==null){ve.current.activeId=Pe;return}const ft=setTimeout(()=>{ve.current.activeId=Pe},50);return()=>clearTimeout(ft)},[Pe]),{active:I,activeIndex:h,attributes:q,data:E,rect:b,index:_,newIndex:le,items:d,isOver:T,isSorting:oe,isDragging:G,listeners:K,node:D,overIndex:g,over:$,setNodeRef:ce,setActivatorNodeRef:te,setDroppableNodeRef:C,setDraggableNodeRef:W,transform:Ve??He,transition:ot()};function ot(){if(Ve||ke&&ve.current.newIndex===_)return hV;if(!(xe&&!Gy(M)||!u)&&(oe||Ue))return Nu.Transition.toString({...u,property:NN})}}function vV(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Hf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const yV=[xt.Down,xt.Right,xt.Up,xt.Left],xV=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=e;if(yV.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const h=i.get(c.id);if(h)switch(t.code){case xt.Down:r.top<h.top&&l.push(c);break;case xt.Up:r.top>h.top&&l.push(c);break;case xt.Left:r.left>h.left&&l.push(c);break;case xt.Right:r.left<h.left&&l.push(c);break}});const u=ZW({collisionRect:r,droppableRects:i,droppableContainers:l});let d=fN(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const c=s.get(n.id),h=s.get(d),f=h?i.get(h.id):null,v=h==null?void 0:h.node.current;if(v&&f&&c&&h){const g=Wh(v).some((S,b)=>a[b]!==S),p=TN(c,h),m=wV(c,h),w=g||!p?{x:0,y:0}:{x:m?r.width-f.width:0,y:m?r.height-f.height:0},_={x:f.left,y:f.top};return w.x&&w.y?_:Du(_,w)}}}};function TN(t,e){return!Hf(t)||!Hf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function wV(t,e){return!Hf(t)||!Hf(e)||!TN(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const bV=({tool:t,index:e,onToolRemove:n,onToggleEnabled:r,onToggleSupport:i})=>{const{t:s}=_t("settings"),{attributes:o,listeners:a,setNodeRef:l,transform:u,transition:d,isDragging:c}=gV({id:e.toString()}),h={transform:Nu.Transform.toString(u),transition:d};return y.jsxs("div",{ref:l,style:h,className:`relative overflow-hidden rounded-lg border border-gray-200 bg-white/90 px-4 py-3 shadow-sm
      transition-all duration-200 ${c?"ring-2 ring-blue-200 shadow-lg":"hover:-translate-y-0.5 hover:shadow-md"}`,children:[y.jsx("span",{className:"absolute left-0 top-0 h-full w-1 bg-blue-200","aria-hidden":!0}),y.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[y.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-2 md:flex-row md:items-center md:gap-3",children:[y.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[y.jsx("h4",{className:"truncate text-base font-semibold text-gray-900",children:t.name}),y.jsx("span",{className:`inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-[11px]
              font-medium text-blue-800`,children:t.type==="AI"?s("contextMenu.toolType.ai"):s("contextMenu.toolType.iframe")})]}),y.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-600",children:[y.jsxs("label",{className:"flex cursor-pointer select-none items-center gap-1.5",children:[y.jsx("input",{type:"checkbox",checked:t.supportsSingleWord!==!1,disabled:t.enabled===!1,onChange:f=>{f.stopPropagation(),i(e,"single")},onClick:f=>f.stopPropagation(),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"font-medium",children:s("contextMenu.toolList.singleWord")})]}),y.jsxs("label",{className:"flex cursor-pointer select-none items-center gap-1.5",children:[y.jsx("input",{type:"checkbox",checked:t.supportsMultiWord!==!1,disabled:t.enabled===!1,onChange:f=>{f.stopPropagation(),i(e,"multi")},onClick:f=>f.stopPropagation(),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"font-medium",children:s("contextMenu.toolList.multiWord")})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2 self-start md:self-center",children:[y.jsx("button",{type:"button","aria-pressed":t.enabled!==!1,"aria-label":t.enabled!==!1?s("contextMenu.toolList.disable"):s("contextMenu.toolList.enable"),onClick:f=>{f.stopPropagation(),r(e,t.enabled===!1)},className:`relative inline-flex h-4 w-8 items-center rounded-full transition-colors ${t.enabled!==!1?"bg-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition ${t.enabled!==!1?"translate-x-4":"translate-x-1"}`})}),y.jsx(Ch,{to:`/settings/contextmenu/${e}/edit`,"aria-label":s("contextMenu.toolList.edit"),title:s("contextMenu.toolList.edit"),className:`flex h-8 w-8 items-center justify-center rounded-full border border-gray-200
            bg-white text-gray-600
            shadow-sm transition
            hover:border-blue-200 hover:text-blue-700`,children:y.jsx(Lj,{})}),y.jsx("button",{"aria-label":s("contextMenu.toolList.remove"),title:s("contextMenu.toolList.remove"),onClick:()=>n(e),className:`flex h-8 w-8 items-center justify-center rounded-full bg-red-50 text-red-600 transition
            hover:bg-red-100`,children:y.jsx(Ij,{})}),y.jsx("div",{...o,...a,className:`cursor-move touch-none rounded-md p-1 text-gray-400 transition hover:bg-gray-100
            hover:text-gray-700`,"aria-label":s("contextMenu.toolList.drag"),children:y.jsx(jj,{})})]})]})]})},SV=({tools:t,onToolRemove:e,onToolReorder:n,onToggleEnabled:r,onToggleSupport:i})=>{const{t:s}=_t("settings"),o=XW(S1(Jy),S1(Zy,{coordinateGetter:xV}));function a(l){const{active:u,over:d}=l;if(u.id!==(d==null?void 0:d.id)){const c=parseInt(u.id.toString()),h=parseInt((d==null?void 0:d.id.toString())||c.toString());n(c,h)}}return t.length===0?y.jsxs("div",{className:`flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-200 bg-white/70
        px-6 py-8 text-center text-gray-600`,children:[y.jsx("div",{className:"mb-2 text-lg font-semibold text-gray-800",children:s("contextMenu.toolList.noToolsTitle")}),y.jsx("p",{className:"text-sm text-gray-500",children:s("contextMenu.toolList.noToolsDescription")})]}):y.jsx(YH,{sensors:o,collisionDetection:YW,onDragEnd:a,children:y.jsx(uV,{items:t.map((l,u)=>u.toString()),strategy:aV,children:y.jsx("div",{className:"space-y-3",children:t.map((l,u)=>y.jsx(bV,{tool:l,index:u,onToolRemove:e,onToggleEnabled:r,onToggleSupport:i},u))})})})},wm=({title:t,description:e,statusSlot:n,children:r,tint:i="slate",footer:s,className:o=""})=>{const a=i==="sky"?"bg-sky-50":i==="gray"?"bg-gray-50":"bg-slate-50";return y.jsxs("div",{className:`flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm ${o}`,children:[y.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-gray-100 px-5 py-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-base font-semibold text-gray-900",children:t}),e&&y.jsx("p",{className:"mt-0.5 text-sm text-gray-600",children:e})]}),n?y.jsx("div",{className:"shrink-0",children:n}):null]}),y.jsx("div",{className:`flex-1 space-y-4 px-5 py-4 ${a}`,children:r}),s?y.jsx("div",{className:"border-t border-gray-100 bg-white px-5 py-4",children:s}):null]})},kV=()=>{const{t}=_t("settings"),e=Uh(),[n,r]=A.useState("idle"),[i,s]=A.useState(null),[o,a]=A.useState(0),l=async()=>{if(e.settings.items.some(p=>p.type==="AI")&&!e.settings.defaultModel){alert(t("contextMenu.messages.defaultModelRequired"));return}await e.saveSettings()?(r("success"),setTimeout(()=>r("idle"),3e3)):(r("error"),setTimeout(()=>r("idle"),3e3))},u=()=>{const{api:x,key:g}=e.settings;s(!x||!g?{type:"warning",message:t("contextMenu.messages.testInputNeeded"),isTesting:!1}:{type:"success",message:t("contextMenu.actions.testConnectionRunning"),isTesting:!0}),a(p=>p+1)},d=()=>{const x="inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-medium";let g="border-gray-200 bg-gray-50 text-gray-700",p=t("contextMenu.status.notTested");return i!=null&&i.isTesting?(g="border-blue-200 bg-blue-50 text-blue-700",p=t("contextMenu.status.testing")):(i==null?void 0:i.type)==="success"?(g="border-green-200 bg-green-50 text-green-700",p=t("contextMenu.status.ok")):(i==null?void 0:i.type)==="warning"?(g="border-yellow-200 bg-yellow-50 text-yellow-700",p=t("contextMenu.status.needsInput")):(i==null?void 0:i.type)==="error"&&(g="border-red-200 bg-red-50 text-red-700",p=t("contextMenu.status.error")),y.jsxs("div",{className:`${x} ${g}`,children:[i!=null&&i.isTesting?y.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-blue-500"}):y.jsx(y.Fragment,{}),y.jsx("span",{children:p})]})},c=()=>{if(!i)return null;const x=i.isTesting?{bg:"bg-blue-50 border-blue-200 text-blue-700",dot:"bg-blue-500"}:i.type==="success"?{bg:"bg-green-50 border-green-200 text-green-700",dot:"bg-green-500"}:i.type==="warning"?{bg:"bg-yellow-50 border-yellow-200 text-yellow-700",dot:"bg-yellow-500"}:i.type==="error"?{bg:"bg-red-50 border-red-200 text-red-700",dot:"bg-red-500"}:{bg:"bg-gray-50 border-gray-200 text-gray-700",dot:"bg-gray-400"};return y.jsxs("div",{className:`flex items-center gap-2 rounded-md border px-3 py-2 text-xs font-medium ${x.bg}`,children:[y.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${x.dot}`,"aria-hidden":!0}),y.jsx("span",{className:"flex-1 leading-tight",children:i.message}),i.link&&y.jsx("a",{href:i.link,target:"_blank",rel:"noopener noreferrer",className:"text-[11px] font-semibold text-blue-700 underline hover:text-blue-800",children:t("common:help",{defaultValue:t("reader:header.help")})})]})},h=["ml-auto flex h-8 w-8 items-center justify-center rounded-full border border-blue-200 bg-blue-50","text-blue-700 shadow-sm transition hover:border-blue-300 hover:bg-blue-100 hover:text-blue-800","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"].join(" "),f=["rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition","hover:border-blue-300 hover:text-blue-700 disabled:cursor-not-allowed disabled:opacity-60"].join(" "),v=["rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700","disabled:cursor-not-allowed disabled:opacity-60"].join(" ");return y.jsxs("div",{className:"space-y-6 text-black",children:[e.isLoading&&y.jsx("div",{className:"flex items-center justify-center py-8",children:y.jsx("div",{className:"text-gray-500",children:t("contextMenu.loading")})}),e.error&&y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:y.jsx("div",{className:"text-red-700",children:e.error})}),!e.isLoading&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("contextMenu.title")}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("contextMenu.description")})]}),y.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(320px,1fr)_minmax(0,2fr)]",children:[y.jsxs("div",{className:"space-y-6",children:[y.jsx(wm,{title:t("contextMenu.generalTitle"),description:t("contextMenu.generalDescription"),tint:"gray",children:y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t("contextMenu.maxSelectedWords")}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{type:"number",min:"1",className:"block w-full rounded-md border-gray-300 py-2 px-3 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm",value:e.settings.maxSelectedWords??As.DEFAULT_MAX_SELECTED_WORDS,onChange:x=>{const g=parseInt(x.target.value,10);!isNaN(g)&&g>0&&e.updateMaxSelectedWords(g)}})}),y.jsx("p",{className:"mt-1 text-xs text-gray-500",children:t("contextMenu.maxSelectedWordsHint")})]})}),y.jsxs(wm,{title:t("contextMenu.providerTitle"),description:t("contextMenu.providerDescription"),statusSlot:d(),tint:"sky",children:[y.jsx(IW,{providerId:e.settings.providerId,apiEndpoint:e.settings.api||"",apiKey:e.settings.key||"",onProviderChange:e.updateProvider,onApiEndpointChange:e.updateApiEndpoint,onApiKeyChange:e.updateApiKey,onStatusChange:s,testNonce:o}),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t("contextMenu.defaultModelLabel")}),y.jsx("span",{className:"text-xs text-gray-500",children:t("contextMenu.defaultModelHint")})]}),y.jsx(LW,{value:e.settings.defaultModel||"",onChange:e.updateDefaultModel,apiEndpoint:e.settings.api||"",apiKey:e.settings.key||"",placeholder:t("contextMenu.modelPlaceholder")})]}),c()]})]}),y.jsxs(wm,{title:t("contextMenu.customToolsTitle"),description:t("contextMenu.customToolsDescription"),className:"h-full",statusSlot:y.jsx("div",{className:"hidden text-xs text-gray-500 sm:block",children:t("contextMenu.reorderHint")}),children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[y.jsx("p",{className:"text-sm text-gray-600",children:t("contextMenu.customToolsSupport")}),y.jsx(Ch,{to:"/settings/contextmenu/add-tool","aria-label":t("contextMenu.addToolAria"),className:h,children:y.jsx($j,{})})]}),y.jsx(SV,{tools:e.settings.items||[],onToolRemove:e.removeTool,onToolReorder:e.reorderTools,onToggleEnabled:e.toggleToolEnabled,onToggleSupport:e.toggleToolSupport})]})]}),y.jsx("div",{className:"sticky bottom-0 z-20 mt-6 border-t border-gray-200 bg-white/95 px-4 py-4 backdrop-blur",children:y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[y.jsx("button",{type:"button",onClick:u,disabled:e.isSaving,className:f,children:i!=null&&i.isTesting?t("contextMenu.actions.testConnectionRunning"):t("contextMenu.actions.testConnection")}),y.jsx("button",{onClick:l,disabled:e.isSaving,className:v,children:e.isSaving?t("contextMenu.actions.saving"):t("contextMenu.actions.save")})]}),y.jsxs("div",{className:"text-sm",children:[n==="success"&&y.jsx("span",{className:"text-green-600",children:t("contextMenu.messages.settingsSaved")}),n==="error"&&y.jsx("span",{className:"text-red-600",children:t("contextMenu.messages.settingsSaveError")}),e.isSaving&&y.jsx("span",{className:"text-gray-600",children:t("contextMenu.messages.saving")})]})]})})]})]})},RN=({selectedType:t,onTypeChange:e})=>{const{t:n}=_t("settings");return y.jsxs("div",{children:[y.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:n("contextMenu.toolType.label")}),y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("button",{type:"button",onClick:()=>e("AI"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${t==="AI"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:n("contextMenu.toolType.ai")}),y.jsx("button",{type:"button",onClick:()=>e("iframe"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${t==="iframe"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:n("contextMenu.toolType.iframe")})]})]})},IN=({prompt:t,reasoningEnabled:e,supportsSingleWord:n,supportsMultiWord:r,supportsDisabled:i,onPromptChange:s,onReasoningToggle:o,onSupportChange:a})=>{const{t:l}=_t("settings"),u=50,d=t.split(`
`).length,c=Math.min(u,Math.max(5,d));return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:l("contextMenu.aiForm.prompt")}),y.jsx("textarea",{value:t,onChange:h=>s(h.target.value),placeholder:l("contextMenu.aiForm.promptPlaceholder",{words:"{{words}}",context:"{{context}}"}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",rows:c}),y.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[y.jsx("div",{className:"mb-1 font-medium text-gray-700",children:l("contextMenu.aiForm.promptTips")}),y.jsxs("ul",{className:"list-inside list-disc space-y-1",children:[y.jsxs("li",{children:[y.jsx("span",{className:"font-medium",children:"{{words}}"}),":"," ",l("contextMenu.aiForm.tipsWords",{words:"{{words}}"})]}),y.jsxs("li",{children:[y.jsx("span",{className:"font-medium",children:"{{context}}"}),":"," ",l("contextMenu.aiForm.tipsContext",{context:"{{context}}"})]})]})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"reasoningEnabled",checked:e,onChange:h=>o(h.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("label",{htmlFor:"reasoningEnabled",className:"ml-2 block text-sm text-gray-700",children:l("contextMenu.aiForm.reasoning")})]}),y.jsxs("div",{className:"border-t border-gray-100 pt-2",children:[y.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:l("contextMenu.aiForm.selectionSupport")}),y.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4",children:[y.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-gray-700",children:[y.jsx("input",{type:"checkbox",checked:n,disabled:i,onChange:h=>a("single",h.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{children:l("contextMenu.aiForm.singleWord")})]}),y.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-gray-700",children:[y.jsx("input",{type:"checkbox",checked:r,disabled:i,onChange:h=>a("multi",h.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{children:l("contextMenu.aiForm.multiWord")})]})]}),y.jsx("p",{className:"mt-1 text-xs text-gray-500",children:l("contextMenu.aiForm.selectionHint")})]})]})},LN=({url:t,supportsSingleWord:e,supportsMultiWord:n,supportsDisabled:r,onUrlChange:i,onSupportChange:s})=>{const{t:o}=_t("settings");return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:o("contextMenu.iframeForm.url")}),y.jsx("input",{type:"url",value:t,onChange:a=>i(a.target.value),placeholder:o("contextMenu.iframeForm.urlPlaceholder",{words:"{{words}}",context:"{{context}}"}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),y.jsxs("div",{className:"mt-2 text-sm",children:[y.jsx("div",{className:"mb-1 font-medium text-gray-700",children:o("contextMenu.iframeForm.tipsTitle")}),y.jsxs("ul",{className:"list-inside list-disc space-y-1 text-xs text-gray-500",children:[y.jsxs("li",{children:[y.jsx("span",{className:"font-medium",children:"{{words}}"}),":"," ",o("contextMenu.iframeForm.tipsWords",{words:"{{words}}"})]}),y.jsxs("li",{children:[y.jsx("span",{className:"font-medium",children:"{{context}}"}),":"," ",o("contextMenu.iframeForm.tipsContext",{context:"{{context}}"})]})]})]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-2",children:[y.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:o("contextMenu.iframeForm.selectionSupport")}),y.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4",children:[y.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-gray-700",children:[y.jsx("input",{type:"checkbox",checked:e,disabled:r,onChange:a=>s("single",a.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{children:o("contextMenu.iframeForm.singleWord")})]}),y.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-gray-700",children:[y.jsx("input",{type:"checkbox",checked:n,disabled:r,onChange:a=>s("multi",a.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{children:o("contextMenu.iframeForm.multiWord")})]})]}),y.jsx("p",{className:"mt-1 text-xs text-gray-500",children:o("contextMenu.iframeForm.selectionHint")})]})]})},PN=()=>{const[t,e]=A.useState("AI"),[n,r]=A.useState(""),[i,s]=A.useState(""),[o,a]=A.useState(""),[l,u]=A.useState(""),[d,c]=A.useState(!1),[h,f]=A.useState(!0),[v,x]=A.useState(!0),[g,p]=A.useState(!0),m=A.useCallback((b,D)=>{if(!b&&!D){x(!0),p(!1);return}x(b),p(D)},[]),w=A.useCallback(()=>!n.trim()||!v&&!g?!1:t==="AI"?o.trim()!=="":l.trim()!=="",[n,o,l,t,v,g]),_=A.useCallback(()=>{if(!w()||!v&&!g)return null;const b=i.trim()||(n.length>10?n.substring(0,10)+"...":n);return t==="AI"?{type:"AI",name:n.trim(),shortName:b,prompt:o.trim(),reasoningEnabled:d,enabled:h,supportsSingleWord:v,supportsMultiWord:g}:{type:"iframe",name:n.trim(),shortName:b,url:l.trim(),enabled:h,supportsSingleWord:v,supportsMultiWord:g}},[n,i,o,l,d,t,w,v,g,h]),E=A.useCallback(()=>{e("AI"),r(""),s(""),a(""),u(""),c(!1),f(!0),x(!0),p(!0)},[]),S=A.useCallback(b=>{e(b.type),r(b.name),s(b.shortName||""),f(b.enabled??!0);const D=b.supportsSingleWord!==!1,T=b.supportsMultiWord!==!1;m(D,T),b.type==="AI"?(a(b.prompt),c(!!b.reasoningEnabled),u("")):(u(b.url),a(""),c(!1))},[m]);return{toolType:t,toolName:n,toolShortName:i,toolPrompt:o,toolUrl:l,reasoningEnabled:d,enabled:h,supportsSingleWord:v,supportsMultiWord:g,setToolType:e,setToolName:r,setToolShortName:s,setToolPrompt:a,setToolUrl:u,setReasoningEnabled:c,setSupportsSingleWord:b=>m(b,g),setSupportsMultiWord:b=>m(v,b),setEnabled:b=>{f(b)},isValid:w,createTool:_,resetForm:E,loadTool:S}},EV=()=>{const t=ei(),e=Uh(),n=PN(),{resetForm:r}=n,{t:i}=_t("settings");A.useEffect(()=>{r()},[r]);const s=async()=>{const l=n.createTool();l&&await e.addTool(l)&&t("/settings/contextmenu")},o=()=>{t("/settings/contextmenu")},a=l=>{l.key==="Escape"?o():l.key==="Enter"&&(l.ctrlKey||l.metaKey)&&s()};return y.jsx(Vy,{breadcrumbItems:[{label:i("breadcrumbs.home"),path:"/"},{label:i("breadcrumbs.settings"),path:"/settings"},{label:i("breadcrumbs.contextMenu"),path:"/settings/contextmenu"},{label:i("toolForm.addBreadcrumb")}],backTo:"/settings/contextmenu",children:y.jsxs("div",{className:"min-h-screen bg-white p-4 md:p-6",onKeyDown:a,tabIndex:0,children:[y.jsxs("div",{className:"mb-6 md:mb-8",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 md:text-3xl",children:i("toolForm.addTitle")}),y.jsx("p",{className:"mt-2 text-sm text-gray-600 md:text-base",children:i("toolForm.description")})]}),y.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:y.jsx(RN,{selectedType:n.toolType,onTypeChange:n.setToolType})}),y.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[y.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:i("toolForm.toolName")}),y.jsx("input",{type:"text",value:n.toolName,onChange:l=>n.setToolName(l.target.value),placeholder:i("toolForm.toolNamePlaceholder"),className:`w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500
              focus:outline-none focus:ring-blue-500`})]}),y.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[y.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:[i("toolForm.shortName")," ",y.jsx("span",{className:"text-xs text-gray-500",children:i("toolForm.shortNameHint")})]}),y.jsx("input",{type:"text",value:n.toolShortName,onChange:l=>n.setToolShortName(l.target.value),placeholder:i("toolForm.shortNamePlaceholder"),maxLength:15,className:`w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500
              focus:outline-none focus:ring-blue-500`}),y.jsx("p",{className:"mt-2 text-xs text-gray-500",children:i("toolForm.shortNameHelper")})]}),y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:y.jsx("button",{type:"button",onClick:()=>n.setEnabled(!n.enabled),"aria-pressed":n.enabled,className:`relative inline-flex h-4 w-8 items-center rounded-full transition-colors ${n.enabled?"bg-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition ${n.enabled?"translate-x-4":"translate-x-1"}`})})}),y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:n.toolType==="AI"?y.jsx(IN,{prompt:n.toolPrompt,reasoningEnabled:n.reasoningEnabled,supportsSingleWord:n.supportsSingleWord,supportsMultiWord:n.supportsMultiWord,supportsDisabled:!n.enabled,onPromptChange:n.setToolPrompt,onReasoningToggle:n.setReasoningEnabled,onSupportChange:(l,u)=>l==="single"?n.setSupportsSingleWord(u):n.setSupportsMultiWord(u)}):y.jsx(LN,{url:n.toolUrl,supportsSingleWord:n.supportsSingleWord,supportsMultiWord:n.supportsMultiWord,supportsDisabled:!n.enabled,onUrlChange:n.setToolUrl,onSupportChange:(l,u)=>l==="single"?n.setSupportsSingleWord(u):n.setSupportsMultiWord(u)})}),y.jsxs("div",{className:"flex flex-col gap-3 pt-6 sm:flex-row sm:gap-4",children:[y.jsx("button",{type:"button",onClick:o,className:`flex-1 rounded-md border border-gray-300 px-4 py-3 text-base font-medium text-gray-700
              transition-colors hover:bg-gray-100`,children:i("toolForm.cancel")}),y.jsx("button",{type:"button",onClick:s,disabled:!n.isValid()||e.isSaving,className:`flex-1 rounded-md bg-blue-500 px-4 py-3 text-base font-medium text-white transition-colors
              hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50`,children:e.isSaving?i("toolForm.adding"):i("toolForm.addAction")})]}),e.error&&y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:y.jsx("div",{className:"text-red-700",children:e.error})})]})]})})},_V=()=>{const t=ei(),{id:e}=Zv(),{t:n}=_t("settings"),r=Uh(),i=PN(),{loadTool:s}=i,o=A.useMemo(()=>Number(e),[e]),a=Number.isInteger(o)&&o>=0&&o<r.settings.items.length;A.useEffect(()=>{if(r.isLoading||!a)return;const c=r.settings.items[o];c&&s(c)},[r.isLoading,r.settings.items,a,s,o]);const l=async()=>{if(!a)return;const c=i.createTool();if(!c)return;await r.saveTool(o,c)&&t("/settings/contextmenu")},u=()=>{t("/settings/contextmenu")},d=c=>{c.key==="Escape"?u():c.key==="Enter"&&(c.ctrlKey||c.metaKey)&&l()};return y.jsx(Vy,{breadcrumbItems:[{label:n("breadcrumbs.home"),path:"/"},{label:n("breadcrumbs.settings"),path:"/settings"},{label:n("breadcrumbs.contextMenu"),path:"/settings/contextmenu"},{label:n("toolForm.editBreadcrumb")}],backTo:"/settings/contextmenu",children:y.jsxs("div",{className:"min-h-screen bg-white p-4 md:p-6",onKeyDown:d,tabIndex:0,children:[y.jsxs("div",{className:"mb-6 md:mb-8",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 md:text-3xl",children:n("toolForm.editTitle")}),y.jsx("p",{className:"mt-2 text-sm text-gray-600 md:text-base",children:n("toolForm.editDescription")})]}),r.isLoading?y.jsx("div",{className:"flex min-h-[200px] items-center justify-center text-gray-500",children:n("toolForm.loading")}):a?y.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:y.jsx(RN,{selectedType:i.toolType,onTypeChange:i.setToolType})}),y.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[y.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:n("toolForm.toolName")}),y.jsx("input",{type:"text",value:i.toolName,onChange:c=>i.setToolName(c.target.value),placeholder:n("toolForm.toolNamePlaceholder"),className:`w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500
                focus:outline-none focus:ring-blue-500`})]}),y.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[y.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:[n("toolForm.shortName")," ",y.jsx("span",{className:"text-xs text-gray-500",children:n("toolForm.shortNameHint")})]}),y.jsx("input",{type:"text",value:i.toolShortName,onChange:c=>i.setToolShortName(c.target.value),placeholder:n("toolForm.shortNamePlaceholder"),maxLength:15,className:`w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500
                focus:outline-none focus:ring-blue-500`}),y.jsx("p",{className:"mt-2 text-xs text-gray-500",children:n("toolForm.shortNameHelper")})]}),y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:y.jsx("button",{type:"button",onClick:()=>i.setEnabled(!i.enabled),"aria-pressed":i.enabled,className:`relative inline-flex h-4 w-8 items-center rounded-full transition-colors ${i.enabled?"bg-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition ${i.enabled?"translate-x-4":"translate-x-1"}`})})}),y.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:i.toolType==="AI"?y.jsx(IN,{prompt:i.toolPrompt,reasoningEnabled:i.reasoningEnabled,supportsSingleWord:i.supportsSingleWord,supportsMultiWord:i.supportsMultiWord,supportsDisabled:!i.enabled,onPromptChange:i.setToolPrompt,onReasoningToggle:i.setReasoningEnabled,onSupportChange:(c,h)=>c==="single"?i.setSupportsSingleWord(h):i.setSupportsMultiWord(h)}):y.jsx(LN,{url:i.toolUrl,supportsSingleWord:i.supportsSingleWord,supportsMultiWord:i.supportsMultiWord,supportsDisabled:!i.enabled,onUrlChange:i.setToolUrl,onSupportChange:(c,h)=>c==="single"?i.setSupportsSingleWord(h):i.setSupportsMultiWord(h)})}),y.jsxs("div",{className:"flex flex-col gap-3 pt-6 sm:flex-row sm:gap-4",children:[y.jsx("button",{type:"button",onClick:u,className:`flex-1 rounded-md border border-gray-300 px-4 py-3 text-base font-medium text-gray-700
                transition-colors hover:bg-gray-100`,children:n("toolForm.cancel")}),y.jsx("button",{type:"button",onClick:l,disabled:!i.isValid()||r.isSaving,className:`flex-1 rounded-md bg-blue-500 px-4 py-3 text-base font-medium text-white transition-colors
                hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50`,children:r.isSaving?n("toolForm.saving"):n("toolForm.saveChanges")})]}),r.error&&y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:y.jsx("div",{className:"text-red-700",children:r.error})})]}):y.jsxs("div",{className:"mx-auto max-w-2xl rounded-md bg-red-50 p-4 text-red-700",children:[n("toolForm.notFound"),y.jsx("div",{className:"mt-4",children:y.jsx("button",{onClick:u,className:"rounded-md bg-blue-500 px-4 py-2 text-white transition-colors hover:bg-blue-600",children:n("toolForm.backToSettings")})})]})]})})},CV=K5([{path:"/",element:y.jsx(qj,{})},{path:"/reader/:bookId",element:y.jsx(cW,{})},{path:"/settings",element:y.jsx(pW,{}),children:[{index:!0,element:y.jsx(j5,{to:"general",replace:!0})},{path:"general",element:y.jsx(mW,{})},{path:"storage",element:y.jsx(TW,{})},{path:"contextmenu",element:y.jsx(kV,{})},{path:"about",element:y.jsx(kW,{})}]},{path:"/settings/contextmenu/:id/edit",element:y.jsx(_V,{})},{path:"/settings/contextmenu/add-tool",element:y.jsx(EV,{})}]),AV="modulepreload",DV=function(t){return"/"+t},O1={},NV=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=DV(l),l in O1)return;O1[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":AV,u||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),u)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function TV(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const u=async(c=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await NV(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/sw.js",{scope:"/",type:"classic"})).catch(c=>{o==null||o(c)}),!a)return;a.addEventListener("activated",c=>{(c.isUpdate||c.isExternal)&&window.location.reload()}),a.addEventListener("installed",c=>{c.isUpdate||r==null||r()}),a.register({immediate:e}).then(c=>{s?s("/sw.js",c):i==null||i(c)}).catch(c=>{o==null||o(c)})}}return l=d(),u}const{slice:RV,forEach:IV}=[];function LV(t){return IV.call(RV.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function PV(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const M1=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OV=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!M1.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!M1.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},j1={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=OV(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var MV={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return j1.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&j1.create(n,t,r,i,s)}},jV={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(n=o[a].substring(l+1))}}return n}},FV={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const o=s.substring(1);if(e){const a=o.split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===e&&(r=a[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const a=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let Io=null;const F1=()=>{if(Io!==null)return Io;try{if(Io=typeof window<"u"&&window.localStorage!==null,!Io)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Io=!1}return Io};var BV={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&F1())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&F1()&&window.localStorage.setItem(n,t)}};let Lo=null;const B1=()=>{if(Lo!==null)return Lo;try{if(Lo=typeof window<"u"&&window.sessionStorage!==null,!Lo)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Lo=!1}return Lo};var zV={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&B1())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&B1()&&window.sessionStorage.setItem(n,t)}},UV={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},$V={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},WV={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},HV={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let ON=!1;try{document.cookie,ON=!0}catch{}const MN=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];ON||MN.splice(1,1);const VV=()=>({order:MN,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class jN{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=LV(n,this.options||{},VV()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(MV),this.addDetector(jV),this.addDetector(BV),this.addDetector(zV),this.addDetector(UV),this.addDetector($V),this.addDetector(WV),this.addDetector(HV),this.addDetector(FV)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!PV(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}jN.type="languageDetector";const qV="",KV="",XV="",GV="",YV="",ZV="",QV="",JV="...",eq="",tq="",nq="",rq="",iq="",sq="",oq="",aq="",lq="",uq="",cq="",dq="",fq="",hq="...",pq="...",mq="",gq={zhCN:"",en:"English",switchAria:"{{language}}",currentLabel:"{{language}}"},vq={back:qV,cancel:KV,save:XV,delete:"",edit:GV,add:YV,upload:ZV,settings:QV,loading:JV,error:eq,success:tq,confirm:nq,dismiss:rq,read:iq,progress:sq,close:oq,search:aq,help:lq,install:uq,menu:cq,previousPage:dq,nextPage:fq,uploading:hq,selectPlaceholder:pq,noOptions:mq,language:gq},yq="",xq={installApp:"",installTitle:"",testInstall:"",uploadBook:"",settings:""},wq={badge:"",title:"",subtitle:"AI "},bq={deleteConfirm:"",deleteFailed:"{{error}}",uploadFailed:"{{error}}",invalidFile:" EPUB "},Sq={title:"",description:" Chrome 86+Edge 86+  Firefox 102+"},kq="...",Eq={title:"",description:" EPUB ",uploadButton:""},_q={title:" EPUB ",description:""},Cq="",Aq={chapters:"{{count}} ",unknownTitle:"",unknownAuthor:"",unknownSize:"",openBookAria:"{{name}}",downloading:"...",downloadFailed:"",downloadingCount:" {{count}} ...",actions:{openMenu:"",details:"",delete:""},detailsModal:{title:"",name:"",author:"",chapters:"",size:"",createdAt:"",unknown:""},deleteModal:{title:"",message:" {{name}} ",confirm:""}},Dq={title:" EPUB ",description:" EPUB ",chooseFile:"",uploading:"...",maxSize:"{{size}}",button:" EPUB "},Nq={appTitle:yq,header:xq,slogan:wq,alerts:bq,browserWarning:Sq,loadingBookshelf:kq,emptyState:Eq,dragOverlay:_q,errorHeading:Cq,bookshelf:Aq,uploadZone:Dq},Tq={title:"",toc:"",home:"",search:"",help:"",fullscreen:"",settings:""},Rq={previous:"",menu:"",next:""},Iq={title:"",closeAria:"",empty:""},Lq={pageStatus:" {{current}} / {{total}} "},Pq={show:""},Oq="...",Mq={title:" ID",message:"",loadError:""},jq={header:Tq,helpOverlay:Rq,toc:Iq,footer:Lq,menuButton:Pq,loading:Oq,invalidBook:Mq},Fq={general:"",storage:"",contextMenu:"",about:""},Bq={general:"",storage:"",contextMenu:" AI ",about:""},zq={home:"",settings:"",contextMenu:"",addTool:"",editTool:""},Uq={title:"",description:"",comingSoon:"",themeCustomization:"",languageSelection:"",languageDescription:""},$q={title:"",description:" OPFS ",notSupported:" OPFS Chromium ",error:"",cards:{total:"",books:"",config:""},table:{title:"",description:" OPFS ",loading:"...",empty:"",loadingLabel:"...",actions:{detail:"",preview:"",download:""}},tree:{loadingRoot:"",loadingChildren:"",emptyDirectory:"",loadError:"",retry:"",expand:"",collapse:""},usage:{opfsSize:"OPFS {{size}}",calculate:" OPFS ",calculating:"..."},modals:{detail:{title:"",path:"",size:"",type:"",extension:"",lastModified:"",notAvailable:"",close:""},preview:{title:"{{filename}}",unsupported:" (.{{ext}})",loading:"...",error:"{{message}}",tooLarge:" {{size}} MB",copy:"",copied:"",close:""}},danger:{title:"",description:"",action:{default:"",working:"..."},success:"",error:""},resetConfirm:" OPFS "},Wq={title:"",description:" AI ",generalTitle:"",generalDescription:"",maxSelectedWords:"",maxSelectedWordsHint:"",providerTitle:"AI ",providerDescription:" AI ",defaultModelLabel:"",defaultModelHint:"",modelPlaceholder:" gpt-4o-mini",customToolsTitle:" AI ",customToolsDescription:"",customToolsSupport:"/",reorderHint:"",addToolAria:"",loading:"...",error:"",status:{notTested:"",testing:"",ok:"",needsInput:"",error:""},messages:{defaultModelRequired:" AI ",settingsSaved:"",settingsSaveError:"",saving:"",testInputNeeded:" URL  API "},actions:{testConnection:"",testConnectionRunning:"",save:"",saving:"..."},api:{providerLabel:"API ",providerPlaceholder:" AI ...",baseUrl:" URL",baseUrlPlaceholder:"https://api.example.com/v1",apiKey:"API ",apiKeyPlaceholder:" API ",viewDocs:"",customProvider:" OpenAI ",errors:{validUrl:" URL",baseUrlRequired:" URL ",apiKeyRequired:"API ",fixUrlFormat:" URL "},status:{testing:" API ...",connected:"API ",connectedWithCount:"API {{count}} ",failed:"API {{status}}",networkError:"{{message}}",needConfig:" URL  API ",missingBaseUrl:" URL",missingApiKey:" API "}},modelSearch:{loading:"...",usingDefaults:"",noResults:"{{query}}"},toolList:{singleWord:"",multiWord:"",edit:"",remove:"",enable:"",disable:"",drag:"",noToolsTitle:"",noToolsDescription:""},toolType:{label:"",ai:"AI ",iframe:"Iframe "},aiForm:{prompt:"",promptPlaceholder:" {{words}} {{context}}  2  {{words}}",promptTips:"",tipsWords:"{{words}}",tipsContext:"{{context}}",reasoning:"",selectionSupport:"",singleWord:"",multiWord:"",selectionHint:""},iframeForm:{url:"URL",urlPlaceholder:"https://example.com?words={{words}}&context={{context}}",tipsTitle:"",tipsWords:"{{words}}https://example.com?q={{words}}",tipsContext:"{{context}}https://example.com?ctx={{context}}",selectionSupport:"",singleWord:"",multiWord:"",selectionHint:""}},Hq={addBreadcrumb:"",editBreadcrumb:"",addTitle:"",editTitle:"",description:" AI  iframe ",editDescription:"",loading:"...",notFound:"",backToSettings:"",toolName:"",toolNamePlaceholder:"",shortName:"",shortNameHint:" 15 ",shortNamePlaceholder:"",shortNameHelper:"",enabled:"",cancel:"",saveChanges:"",saving:"...",adding:"...",addAction:"",error:""},Vq={title:"",description:" AI ",author:"",contact:"",released:" {{date}}",builtWith:" ReactTypeScript  Tailwind CSS ",changelogHistory:"",expand:"",collapse:"",categories:{feat:"",fix:"",refactor:"",docs:"",chore:"",perf:"",style:""}},qq={nav:Fq,navDescriptions:Bq,breadcrumbs:zq,general:Uq,storage:$q,contextMenu:Wq,toolForm:Hq,about:Vq},Kq="",Xq="",Gq={unknown:Kq,opfsUnsupported:Xq},Yq="Back",Zq="Cancel",Qq="Save",Jq="Edit",eK="Add",tK="Upload",nK="Settings",rK="Loading...",iK="Error",sK="Success",oK="Confirm",aK="Dismiss",lK="Read",uK="Progress",cK="Close",dK="Search",fK="Help",hK="Install",pK="Menu",mK="Previous Page",gK="Next Page",vK="Uploading book...",yK="Select...",xK="No options found",wK={zhCN:"",en:"English",switchAria:"Switch language (current: {{language}})",currentLabel:"Current: {{language}}"},bK={back:Yq,cancel:Zq,save:Qq,delete:"Delete",edit:Jq,add:eK,upload:tK,settings:nK,loading:rK,error:iK,success:sK,confirm:oK,dismiss:aK,read:lK,progress:uK,close:cK,search:dK,help:fK,install:hK,menu:pK,previousPage:mK,nextPage:gK,uploading:vK,selectPlaceholder:yK,noOptions:xK,language:wK},SK="Beginner's English Reader",kK={installApp:"Install App",installTitle:"Install Beginner's English Reader",testInstall:"Test PWA Install (Debug)",uploadBook:"Upload Book",settings:"Settings"},EK={badge:"Tagline",title:"Helping beginners read English with ease",subtitle:"AI guidance, curated tools, and a calm interface so beginners feel confident reading English."},_K={deleteConfirm:"Are you sure you want to delete this book?",deleteFailed:"Failed to delete book: {{error}}",uploadFailed:"Upload failed: {{error}}",invalidFile:"Please drop a valid EPUB file"},CK={title:"Browser Not Supported",description:"This browser lacks required file system features. Please use Chrome 86+, Edge 86+, or Firefox 102+."},AK="Loading your bookshelf...",DK={title:"No books yet",description:"Start building your digital library by dragging an EPUB file here or clicking the Plus icon.",uploadButton:"Upload Your First Book"},NK={title:"Drop EPUB file here",description:"Release to upload your book"},TK="Error",RK={chapters:"{{count}} chapters",unknownTitle:"Untitled Book",unknownAuthor:"Unknown Author",unknownSize:"Unknown size",openBookAria:"Open book: {{name}}",downloading:"Downloading...",downloadFailed:"Download failed",downloadingCount:"Downloading {{count}} book(s)...",actions:{openMenu:"Open book actions",details:"View details",delete:"Delete book"},detailsModal:{title:"Book details",name:"Title",author:"Author",chapters:"Chapters",size:"File size",createdAt:"Created at",unknown:"Not available"},deleteModal:{title:"Delete book",message:'Remove "{{name}}" from your library?',confirm:"Delete"}},IK={title:"Upload EPUB Book",description:"Drag and drop your EPUB file here, or click to browse",chooseFile:"Choose File",uploading:"Uploading book...",maxSize:"Maximum file size: {{size}}",button:"Upload EPUB Book"},LK={appTitle:SK,header:kK,slogan:EK,alerts:_K,browserWarning:CK,loadingBookshelf:AK,emptyState:DK,dragOverlay:NK,errorHeading:TK,bookshelf:RK,uploadZone:IK},PK={title:"Beginner's English Reader",toc:"Table of Contents",home:"Home",search:"Search",help:"Help",fullscreen:"Fullscreen",settings:"Settings"},OK={previous:"Previous Page",menu:"Menu",next:"Next Page"},MK={title:"Table of Contents",closeAria:"Close table of contents",empty:"No table of contents available"},jK={pageStatus:"Page {{current}} of {{total}}"},FK={show:"Show menu"},BK="Loading book...",zK={title:"Invalid Book ID",message:"Please select a valid book to read.",loadError:"Failed to load book. Please try again later."},UK={header:PK,helpOverlay:OK,toc:MK,footer:jK,menuButton:FK,loading:BK,invalidBook:zK},$K={general:"General",storage:"Storage",contextMenu:"Context Menu",about:"About"},WK={general:"General application settings",storage:"Local cache overview and reset",contextMenu:"Configure AI providers and custom tools",about:"App information and version"},HK={home:"Home",settings:"Settings",contextMenu:"Context Menu",addTool:"Add New Tool",editTool:"Edit Tool"},VK={title:"General Settings",description:"Configure general application preferences.",comingSoon:"Coming Soon",themeCustomization:"Theme Customization",languageSelection:"Language Selection",languageDescription:"Choose your display language."},qK={title:"Storage",description:"Review locally cached OPFS files and reset everything when needed.",notSupported:"Your browser does not support OPFS. Switch to a Chromium-based browser to manage cached files.",error:"Failed to load storage details.",cards:{total:"Total cached",books:"Books",config:"Config"},table:{title:"Cached files",description:"Files stored in OPFS with their sizes.",loading:"Loading storage details...",empty:"No cached files found.",loadingLabel:"Loading...",actions:{detail:"View details",preview:"Preview file",download:"Download file"}},tree:{loadingRoot:"Loading storage",loadingChildren:"Loading",emptyDirectory:"Empty directory",loadError:"Failed to load this folder",retry:"Retry",expand:"Expand",collapse:"Collapse"},usage:{opfsSize:"OPFS size: {{size}}",calculate:"Calculate OPFS size",calculating:"Calculating..."},modals:{detail:{title:"File Details",path:"Path",size:"Size",type:"Type",extension:"Extension",lastModified:"Last modified",notAvailable:"Not available",close:"Close"},preview:{title:"Preview: {{filename}}",unsupported:"Preview not available for this file type (.{{ext}})",loading:"Loading file...",error:"Failed to load file: {{message}}",tooLarge:"File is too large to preview (>{{size}} MB)",copy:"Copy content",copied:"Copied!",close:"Close"}},danger:{title:"Danger zone",description:"Resetting removes all local data: every cached book file, cover image, and the config file. This cannot be undone.",action:{default:"Delete all cached data",working:"Resetting..."},success:"Local data cleared successfully.",error:"Failed to reset local data."},resetConfirm:"This will delete all locally cached books and settings in OPFS. The action cannot be undone. Continue?"},KK={title:"Context Menu Configuration",description:"Configure AI providers and custom tools for the reader context menu.",generalTitle:"General",generalDescription:"General configuration for the context menu.",maxSelectedWords:"Max selected words",maxSelectedWordsHint:"Selections over this limit will be blocked.",providerTitle:"AI Provider",providerDescription:"Connect your model provider for AI tools.",defaultModelLabel:"Default Model",defaultModelHint:"Used unless a tool overrides it",modelPlaceholder:"Search or enter model name (e.g. gpt-4o-mini)",customToolsTitle:"Custom AI Tools",customToolsDescription:"Shown in the reader context menu in this order.",customToolsSupport:"Arrange tools and choose which ones handle single-word vs. multi-word selections.",reorderHint:"Drag to reorder",addToolAria:"Add tool",loading:"Loading settings...",error:"Failed to load settings.",status:{notTested:"Not tested",testing:"Testing",ok:"OK",needsInput:"Needs input",error:"Error"},messages:{defaultModelRequired:"Please select a Default Model for your AI tools.",settingsSaved:"Settings saved successfully!",settingsSaveError:"Failed to save settings",saving:"Saving changes",testInputNeeded:"Add Base URL and API key to test connection"},actions:{testConnection:"Test connection",testConnectionRunning:"Testing",save:"Save Settings",saving:"Saving..."},api:{providerLabel:"API Provider",providerPlaceholder:"Select an AI provider...",baseUrl:"Base URL",baseUrlPlaceholder:"https://api.example.com/v1",apiKey:"API Key",apiKeyPlaceholder:"Your API key",viewDocs:"View provider docs",customProvider:"Custom OpenAI-compatible service",errors:{validUrl:"Please enter a valid URL",baseUrlRequired:"Base URL is required",apiKeyRequired:"API key is required",fixUrlFormat:"Please fix Base URL format"},status:{testing:"Testing API connection...",connected:"API connected successfully",connectedWithCount:"API connected successfully ({{count}} models available)",failed:"API connection failed: {{status}}",networkError:"Network error: {{message}}",needConfig:"Please configure provider, Base URL and API key",missingBaseUrl:"Please enter Base URL",missingApiKey:"Please enter API key"}},modelSearch:{loading:"Loading models...",usingDefaults:"Using default models",noResults:'No models found matching "{{query}}"'},toolList:{singleWord:"Single-word",multiWord:"Multi-word",edit:"Edit tool",remove:"Remove tool",enable:"Enable tool",disable:"Disable tool",drag:"Drag to reorder",noToolsTitle:"No tools yet",noToolsDescription:"Add your first tool to show it in the reader menu."},toolType:{label:"Tool Type",ai:"AI Tool",iframe:"Iframe Tool"},aiForm:{prompt:"Prompt",promptPlaceholder:"Use {{words}} for selected text and {{context}} for nearby content. e.g. Summarize {{words}} in 2 sentences.",promptTips:"Prompt tips",tipsWords:"{{words}}: the selected text.",tipsContext:"{{context}}: nearby content for background.",reasoning:"Enable reasoning (for supported models)",selectionSupport:"Selection support",singleWord:"Single-word queries",multiWord:"Multi-word queries",selectionHint:"Pick at least one option so this tool appears for single or multi-word selections."},iframeForm:{url:"URL",urlPlaceholder:"https://example.com?words={{words}}&context={{context}}",tipsTitle:"Tips",tipsWords:"{{words}}: Inserts the text the user selected. Example: https://example.com?q={{words}}",tipsContext:"{{context}}: Adds nearby text or metadata for context. Example: https://example.com?ctx={{context}}",selectionSupport:"Selection support",singleWord:"Single-word queries",multiWord:"Multi-word queries",selectionHint:"Pick at least one option so this tool appears for single or multi-word selections."}},XK={addBreadcrumb:"Add New Tool",editBreadcrumb:"Edit Tool",addTitle:"Add New Tool",editTitle:"Edit Tool",description:"Configure a new AI tool or iframe tool for your context menu",editDescription:"Update the configuration for this context menu tool",loading:"Loading tool...",notFound:"Unable to find the requested tool. Please return to the context menu settings and try again.",backToSettings:"Back to settings",toolName:"Tool Name",toolNamePlaceholder:"e.g., Simple Explanation",shortName:"Short Name",shortNameHint:"(optional, max 15 chars)",shortNamePlaceholder:"e.g., Simple Exp",shortNameHelper:"Leave empty to auto-generate from tool name",enabled:"Enabled",cancel:"Cancel",saveChanges:"Save Changes",saving:"Saving...",adding:"Adding Tool...",addAction:"Add Tool",error:"Failed to save settings"},GK={title:"Beginner's English Reader",description:"An offline-first reader with AI-powered context for English beginners.",author:"Author",contact:"Contact",released:"Released {{date}}",builtWith:"Built with React, TypeScript, and Tailwind CSS.",changelogHistory:"Changelog History",expand:"Show changes",collapse:"Hide changes",categories:{feat:"Features",fix:"Fixes",refactor:"Refactors",docs:"Docs",chore:"Chores",perf:"Performance",style:"Style"}},YK={nav:$K,navDescriptions:WK,breadcrumbs:HK,general:VK,storage:qK,contextMenu:KK,toolForm:XK,about:GK},ZK="An unexpected error occurred.",QK="Your browser does not support the required file system features.",JK={unknown:ZK,opfsUnsupported:QK},eX={"zh-CN":{common:vq,homepage:Nq,reader:jq,settings:qq,errors:Gq},en:{common:bK,homepage:LK,reader:UK,settings:YK,errors:JK}};Xn.use(jN).use(UM).init({resources:eX,fallbackLng:"zh-CN",defaultNS:"common",ns:["common","homepage","reader","settings","errors"],interpolation:{escapeValue:!1},detection:{order:["localStorage"],caches:["localStorage"],lookupLocalStorage:"epub-reader-lang"}});const tX=TV({onNeedRefresh(){confirm("New version available! Reload to update?")&&tX(!0)},onOfflineReady(){console.log("App ready to work offline")}}),nX=async()=>{try{await Bp.dispatch(Ll()).unwrap(),Bp.dispatch(Lg())}catch(t){console.error("Failed to initialize app:",t)}finally{Jk(document.getElementById("root")).render(y.jsx(M3,{store:Bp,children:y.jsx(uW,{children:y.jsx(tM,{router:CV})})}))}};nX();
