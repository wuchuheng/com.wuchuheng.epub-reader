var xA=Object.defineProperty;var bA=(t,e,n)=>e in t?xA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Kd=(t,e,n)=>bA(t,typeof e!="symbol"?e+"":e,n);function X1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G1={exports:{}},Jf={},Y1={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=Symbol.for("react.element"),_A=Symbol.for("react.portal"),EA=Symbol.for("react.fragment"),kA=Symbol.for("react.strict_mode"),SA=Symbol.for("react.profiler"),CA=Symbol.for("react.provider"),AA=Symbol.for("react.context"),DA=Symbol.for("react.forward_ref"),TA=Symbol.for("react.suspense"),NA=Symbol.for("react.memo"),RA=Symbol.for("react.lazy"),F0=Symbol.iterator;function IA(t){return t===null||typeof t!="object"?null:(t=F0&&t[F0]||t["@@iterator"],typeof t=="function"?t:null)}var K1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z1=Object.assign,Q1={};function ao(t,e,n){this.props=t,this.context=e,this.refs=Q1,this.updater=n||K1}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function J1(){}J1.prototype=ao.prototype;function lg(t,e,n){this.props=t,this.context=e,this.refs=Q1,this.updater=n||K1}var ug=lg.prototype=new J1;ug.constructor=lg;Z1(ug,ao.prototype);ug.isPureReactComponent=!0;var M0=Array.isArray,e2=Object.prototype.hasOwnProperty,cg={current:null},t2={key:!0,ref:!0,__self:!0,__source:!0};function n2(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)e2.call(e,r)&&!t2.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Jl,type:t,key:s,ref:a,props:i,_owner:cg.current}}function OA(t,e){return{$$typeof:Jl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jl}function LA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var B0=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LA(""+t.key):e.toString(36)}function oc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Jl:case _A:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Zd(a,0):r,M0(i)?(n="",t!=null&&(n=t.replace(B0,"$&/")+"/"),oc(i,e,n,"",function(u){return u})):i!=null&&(fg(i)&&(i=OA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(B0,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",M0(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Zd(s,o);a+=oc(s,e,n,l,i)}else if(l=IA(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Zd(s,o++),a+=oc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ku(t,e,n){if(t==null)return t;var r=[],i=0;return oc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},lc={transition:null},FA={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:lc,ReactCurrentOwner:cg};function r2(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:ku,forEach:function(t,e,n){ku(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ku(t,function(){e++}),e},toArray:function(t){return ku(t,function(e){return e})||[]},only:function(t){if(!fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=ao;ut.Fragment=EA;ut.Profiler=SA;ut.PureComponent=lg;ut.StrictMode=kA;ut.Suspense=TA;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FA;ut.act=r2;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z1({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=cg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)e2.call(e,l)&&!t2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Jl,type:t.type,key:i,ref:s,props:r,_owner:a}};ut.createContext=function(t){return t={$$typeof:AA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CA,_context:t},t.Consumer=t};ut.createElement=n2;ut.createFactory=function(t){var e=n2.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:DA,render:t}};ut.isValidElement=fg;ut.lazy=function(t){return{$$typeof:RA,_payload:{_status:-1,_result:t},_init:PA}};ut.memo=function(t,e){return{$$typeof:NA,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=lc.transition;lc.transition={};try{t()}finally{lc.transition=e}};ut.unstable_act=r2;ut.useCallback=function(t,e){return $n.current.useCallback(t,e)};ut.useContext=function(t){return $n.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};ut.useEffect=function(t,e){return $n.current.useEffect(t,e)};ut.useId=function(){return $n.current.useId()};ut.useImperativeHandle=function(t,e,n){return $n.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return $n.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return $n.current.useReducer(t,e,n)};ut.useRef=function(t){return $n.current.useRef(t)};ut.useState=function(t){return $n.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return $n.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return $n.current.useTransition()};ut.version="18.3.1";Y1.exports=ut;var O=Y1.exports;const _t=Gr(O),vp=X1({__proto__:null,default:_t},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA=O,BA=Symbol.for("react.element"),jA=Symbol.for("react.fragment"),zA=Object.prototype.hasOwnProperty,UA=MA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$A={key:!0,ref:!0,__self:!0,__source:!0};function i2(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)zA.call(e,r)&&!$A.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BA,type:t,key:s,ref:a,props:i,_owner:UA.current}}Jf.Fragment=jA;Jf.jsx=i2;Jf.jsxs=i2;G1.exports=Jf;var E=G1.exports,s2={exports:{}},yr={},a2={exports:{}},o2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,re){var I=$.length;$.push(re);e:for(;0<I;){var pe=I-1>>>1,oe=$[pe];if(0<i(oe,re))$[pe]=re,$[I]=oe,I=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var re=$[0],I=$.pop();if(I!==re){$[0]=I;e:for(var pe=0,oe=$.length,B=oe>>>1;pe<B;){var be=2*(pe+1)-1,je=$[be],Te=be+1,We=$[Te];if(0>i(je,I))Te<oe&&0>i(We,je)?($[pe]=We,$[Te]=I,pe=Te):($[pe]=je,$[be]=I,pe=be);else if(Te<oe&&0>i(We,I))$[pe]=We,$[Te]=I,pe=Te;else break e}}return re}function i($,re){var I=$.sortIndex-re.sortIndex;return I!==0?I:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,c=null,h=3,d=!1,v=!1,w=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=$)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=n(u)}}function k($){if(w=!1,y($),!v)if(n(l)!==null)v=!0,Q(_);else{var re=n(u);re!==null&&Z(k,re.startTime-$)}}function _($,re){v=!1,w&&(w=!1,p(A),A=-1),d=!0;var I=h;try{for(y(re),c=n(l);c!==null&&(!(c.expirationTime>re)||$&&!F());){var pe=c.callback;if(typeof pe=="function"){c.callback=null,h=c.priorityLevel;var oe=pe(c.expirationTime<=re);re=t.unstable_now(),typeof oe=="function"?c.callback=oe:c===n(l)&&r(l),y(re)}else r(l);c=n(l)}if(c!==null)var B=!0;else{var be=n(u);be!==null&&Z(k,be.startTime-re),B=!1}return B}finally{c=null,h=I,d=!1}}var x=!1,C=null,A=-1,P=5,S=-1;function F(){return!(t.unstable_now()-S<P)}function z(){if(C!==null){var $=t.unstable_now();S=$;var re=!0;try{re=C(!0,$)}finally{re?ie():(x=!1,C=null)}}else x=!1}var ie;if(typeof m=="function")ie=function(){m(z)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,K=te.port2;te.port1.onmessage=z,ie=function(){K.postMessage(null)}}else ie=function(){g(z,0)};function Q($){C=$,x||(x=!0,ie())}function Z($,re){A=g(function(){$(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,Q(_))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var re=3;break;default:re=h}var I=h;h=re;try{return $()}finally{h=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var I=h;h=$;try{return re()}finally{h=I}},t.unstable_scheduleCallback=function($,re,I){var pe=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?pe+I:pe):I=pe,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=I+oe,$={id:f++,callback:re,priorityLevel:$,startTime:I,expirationTime:oe,sortIndex:-1},I>pe?($.sortIndex=I,e(u,$),n(l)===null&&$===n(u)&&(w?(p(A),A=-1):w=!0,Z(k,I-pe))):($.sortIndex=oe,e(l,$),v||d||(v=!0,Q(_))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var re=h;return function(){var I=h;h=re;try{return $.apply(this,arguments)}finally{h=I}}}})(o2);a2.exports=o2;var WA=a2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA=O,mr=WA;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l2=new Set,wl={};function Qs(t,e){Va(t,e),Va(t+"Capture",e)}function Va(t,e){for(wl[t]=e,t=0;t<e.length;t++)l2.add(e[t])}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yp=Object.prototype.hasOwnProperty,VA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j0={},z0={};function qA(t){return yp.call(z0,t)?!0:yp.call(j0,t)?!1:VA.test(t)?z0[t]=!0:(j0[t]=!0,!1)}function XA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GA(t,e,n,r){if(e===null||typeof e>"u"||XA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new Wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new Wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new Wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new Wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new Wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new Wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new Wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new Wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new Wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var dg=/[\-:]([a-z])/g;function hg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dg,hg);Dn[e]=new Wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dg,hg);Dn[e]=new Wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dg,hg);Dn[e]=new Wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function pg(t,e,n,r){var i=Dn.hasOwnProperty(e)?Dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GA(e,n,i,r)&&(n=null),r||i===null?qA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pi=HA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Su=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),wp=Symbol.for("react.profiler"),u2=Symbol.for("react.provider"),c2=Symbol.for("react.context"),gg=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),bp=Symbol.for("react.suspense_list"),vg=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),f2=Symbol.for("react.offscreen"),U0=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=U0&&t[U0]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Qd;function Bo(t){if(Qd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qd=e&&e[1]||""}return`
`+Qd+t}var Jd=!1;function eh(t,e){if(!t||Jd)return"";Jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function YA(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=eh(t.type,!1),t;case 11:return t=eh(t.type.render,!1),t;case 1:return t=eh(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ea:return"Fragment";case _a:return"Portal";case wp:return"Profiler";case mg:return"StrictMode";case xp:return"Suspense";case bp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c2:return(t.displayName||"Context")+".Consumer";case u2:return(t._context.displayName||"Context")+".Provider";case gg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vg:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function KA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZA(t){var e=d2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cu(t){t._valueTracker||(t._valueTracker=ZA(t))}function h2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ep(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function p2(t,e){e=e.checked,e!=null&&pg(t,"checked",e,!1)}function kp(t,e){p2(t,e);var n=fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sp(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function W0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sp(t,e,n){(e!=="number"||zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function Fa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ve(92));if(jo(n)){if(1<n.length)throw Error(ve(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fs(n)}}function m2(t,e){var n=fs(e.value),r=fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function g2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ap(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?g2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Au,v2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Au=Au||document.createElement("div"),Au.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Au.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QA=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){QA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function y2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function w2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var JA=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dp(t,e){if(e){if(JA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function Tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Np=null;function yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rp=null,Ma=null,Ba=null;function q0(t){if(t=nu(t)){if(typeof Rp!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=id(e),Rp(t.stateNode,t.type,e))}}function x2(t){Ma?Ba?Ba.push(t):Ba=[t]:Ma=t}function b2(){if(Ma){var t=Ma,e=Ba;if(Ba=Ma=null,q0(t),e)for(t=0;t<e.length;t++)q0(e[t])}}function _2(t,e){return t(e)}function E2(){}var th=!1;function k2(t,e,n){if(th)return t(e,n);th=!0;try{return _2(t,e,n)}finally{th=!1,(Ma!==null||Ba!==null)&&(E2(),b2())}}function bl(t,e){var n=t.stateNode;if(n===null)return null;var r=id(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ve(231,e,typeof n));return n}var Ip=!1;if(Ci)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Ip=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Ip=!1}function eD(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var el=!1,Uc=null,$c=!1,Op=null,tD={onError:function(t){el=!0,Uc=t}};function nD(t,e,n,r,i,s,a,o,l){el=!1,Uc=null,eD.apply(tD,arguments)}function rD(t,e,n,r,i,s,a,o,l){if(nD.apply(this,arguments),el){if(el){var u=Uc;el=!1,Uc=null}else throw Error(ve(198));$c||($c=!0,Op=u)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function X0(t){if(Js(t)!==t)throw Error(ve(188))}function iD(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return X0(i),t;if(s===r)return X0(i),e;s=s.sibling}throw Error(ve(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?t:e}function C2(t){return t=iD(t),t!==null?A2(t):null}function A2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A2(t);if(e!==null)return e;t=t.sibling}return null}var D2=mr.unstable_scheduleCallback,G0=mr.unstable_cancelCallback,sD=mr.unstable_shouldYield,aD=mr.unstable_requestPaint,Jt=mr.unstable_now,oD=mr.unstable_getCurrentPriorityLevel,wg=mr.unstable_ImmediatePriority,T2=mr.unstable_UserBlockingPriority,Wc=mr.unstable_NormalPriority,lD=mr.unstable_LowPriority,N2=mr.unstable_IdlePriority,ed=null,ii=null;function uD(t){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(ed,t,void 0,(t.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:dD,cD=Math.log,fD=Math.LN2;function dD(t){return t>>>=0,t===0?32:31-(cD(t)/fD|0)|0}var Du=64,Tu=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=zo(o):(s&=a,s!==0&&(r=zo(s)))}else a=n&~i,a!==0?r=zo(a):s!==0&&(r=zo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$r(e),i=1<<n,r|=t[n],e&=~i;return r}function hD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-$r(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=hD(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Lp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R2(){var t=Du;return Du<<=1,!(Du&4194240)&&(Du=64),t}function nh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$r(e),t[e]=n}function mD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$r(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$r(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Dt=0;function I2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O2,bg,L2,P2,F2,Pp=!1,Nu=[],rs=null,is=null,ss=null,_l=new Map,El=new Map,Yi=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y0(t,e){switch(t){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(e.pointerId)}}function bo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nu(e),e!==null&&bg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vD(t,e,n,r,i){switch(e){case"focusin":return rs=bo(rs,t,e,n,r,i),!0;case"dragenter":return is=bo(is,t,e,n,r,i),!0;case"mouseover":return ss=bo(ss,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _l.set(s,bo(_l.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,El.set(s,bo(El.get(s)||null,t,e,n,r,i)),!0}return!1}function M2(t){var e=Os(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=S2(n),e!==null){t.blockedOn=e,F2(t.priority,function(){L2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Np=r,n.target.dispatchEvent(r),Np=null}else return e=nu(n),e!==null&&bg(e),t.blockedOn=n,!1;e.shift()}return!0}function K0(t,e,n){uc(t)&&n.delete(e)}function yD(){Pp=!1,rs!==null&&uc(rs)&&(rs=null),is!==null&&uc(is)&&(is=null),ss!==null&&uc(ss)&&(ss=null),_l.forEach(K0),El.forEach(K0)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Pp||(Pp=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,yD)))}function kl(t){function e(i){return _o(i,t)}if(0<Nu.length){_o(Nu[0],t);for(var n=1;n<Nu.length;n++){var r=Nu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(rs!==null&&_o(rs,t),is!==null&&_o(is,t),ss!==null&&_o(ss,t),_l.forEach(e),El.forEach(e),n=0;n<Yi.length;n++)r=Yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)M2(n),n.blockedOn===null&&Yi.shift()}var ja=Pi.ReactCurrentBatchConfig,Vc=!0;function wD(t,e,n,r){var i=Dt,s=ja.transition;ja.transition=null;try{Dt=1,_g(t,e,n,r)}finally{Dt=i,ja.transition=s}}function xD(t,e,n,r){var i=Dt,s=ja.transition;ja.transition=null;try{Dt=4,_g(t,e,n,r)}finally{Dt=i,ja.transition=s}}function _g(t,e,n,r){if(Vc){var i=Fp(t,e,n,r);if(i===null)dh(t,e,r,qc,n),Y0(t,r);else if(vD(i,t,e,n,r))r.stopPropagation();else if(Y0(t,r),e&4&&-1<gD.indexOf(t)){for(;i!==null;){var s=nu(i);if(s!==null&&O2(s),s=Fp(t,e,n,r),s===null&&dh(t,e,r,qc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dh(t,e,r,null,n)}}var qc=null;function Fp(t,e,n,r){if(qc=null,t=yg(r),t=Os(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qc=t,null}function B2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oD()){case wg:return 1;case T2:return 4;case Wc:case lD:return 16;case N2:return 536870912;default:return 16}default:return 16}}var Zi=null,Eg=null,cc=null;function j2(){if(cc)return cc;var t,e=Eg,n=e.length,r,i="value"in Zi?Zi.value:Zi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return cc=i.slice(t,1<r?1-r:void 0)}function fc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ru(){return!0}function Z0(){return!1}function wr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ru:Z0,this.isPropagationStopped=Z0,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=wr(oo),tu=Xt({},oo,{view:0,detail:0}),bD=wr(tu),rh,ih,Eo,td=Xt({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(rh=t.screenX-Eo.screenX,ih=t.screenY-Eo.screenY):ih=rh=0,Eo=t),rh)},movementY:function(t){return"movementY"in t?t.movementY:ih}}),Q0=wr(td),_D=Xt({},td,{dataTransfer:0}),ED=wr(_D),kD=Xt({},tu,{relatedTarget:0}),sh=wr(kD),SD=Xt({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),CD=wr(SD),AD=Xt({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DD=wr(AD),TD=Xt({},oo,{data:0}),J0=wr(TD),ND={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ID={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ID[t])?!!e[t]:!1}function Sg(){return OD}var LD=Xt({},tu,{key:function(t){if(t.key){var e=ND[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sg,charCode:function(t){return t.type==="keypress"?fc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PD=wr(LD),FD=Xt({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ey=wr(FD),MD=Xt({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sg}),BD=wr(MD),jD=Xt({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),zD=wr(jD),UD=Xt({},td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$D=wr(UD),WD=[9,13,27,32],Cg=Ci&&"CompositionEvent"in window,tl=null;Ci&&"documentMode"in document&&(tl=document.documentMode);var HD=Ci&&"TextEvent"in window&&!tl,z2=Ci&&(!Cg||tl&&8<tl&&11>=tl),ty=" ",ny=!1;function U2(t,e){switch(t){case"keyup":return WD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function VD(t,e){switch(t){case"compositionend":return $2(e);case"keypress":return e.which!==32?null:(ny=!0,ty);case"textInput":return t=e.data,t===ty&&ny?null:t;default:return null}}function qD(t,e){if(ka)return t==="compositionend"||!Cg&&U2(t,e)?(t=j2(),cc=Eg=Zi=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return z2&&e.locale!=="ko"?null:e.data;default:return null}}var XD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XD[t.type]:e==="textarea"}function W2(t,e,n,r){x2(r),e=Xc(e,"onChange"),0<e.length&&(n=new kg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,Sl=null;function GD(t){eb(t,0)}function nd(t){var e=Aa(t);if(h2(e))return t}function YD(t,e){if(t==="change")return e}var H2=!1;if(Ci){var ah;if(Ci){var oh="oninput"in document;if(!oh){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),oh=typeof iy.oninput=="function"}ah=oh}else ah=!1;H2=ah&&(!document.documentMode||9<document.documentMode)}function sy(){nl&&(nl.detachEvent("onpropertychange",V2),Sl=nl=null)}function V2(t){if(t.propertyName==="value"&&nd(Sl)){var e=[];W2(e,Sl,t,yg(t)),k2(GD,e)}}function KD(t,e,n){t==="focusin"?(sy(),nl=e,Sl=n,nl.attachEvent("onpropertychange",V2)):t==="focusout"&&sy()}function ZD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nd(Sl)}function QD(t,e){if(t==="click")return nd(e)}function JD(t,e){if(t==="input"||t==="change")return nd(e)}function eT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qr=typeof Object.is=="function"?Object.is:eT;function Cl(t,e){if(qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yp.call(e,i)||!qr(t[i],e[i]))return!1}return!0}function ay(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oy(t,e){var n=ay(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ay(n)}}function q2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X2(){for(var t=window,e=zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zc(t.document)}return e}function Ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tT(t){var e=X2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q2(n.ownerDocument.documentElement,n)){if(r!==null&&Ag(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=oy(n,s);var a=oy(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nT=Ci&&"documentMode"in document&&11>=document.documentMode,Sa=null,Mp=null,rl=null,Bp=!1;function ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bp||Sa==null||Sa!==zc(r)||(r=Sa,"selectionStart"in r&&Ag(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Cl(rl,r)||(rl=r,r=Xc(Mp,"onSelect"),0<r.length&&(e=new kg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sa)))}function Iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},lh={},G2={};Ci&&(G2=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function rd(t){if(lh[t])return lh[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G2)return lh[t]=e[n];return t}var Y2=rd("animationend"),K2=rd("animationiteration"),Z2=rd("animationstart"),Q2=rd("transitionend"),J2=new Map,uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){J2.set(t,e),Qs(e,[t])}for(var uh=0;uh<uy.length;uh++){var ch=uy[uh],rT=ch.toLowerCase(),iT=ch[0].toUpperCase()+ch.slice(1);ps(rT,"on"+iT)}ps(Y2,"onAnimationEnd");ps(K2,"onAnimationIteration");ps(Z2,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Q2,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rD(r,e,void 0,t),t.currentTarget=null}function eb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;cy(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;cy(i,o,u),s=l}}}if($c)throw t=Op,$c=!1,Op=null,t}function zt(t,e){var n=e[Wp];n===void 0&&(n=e[Wp]=new Set);var r=t+"__bubble";n.has(r)||(tb(e,t,2,!1),n.add(r))}function fh(t,e,n){var r=0;e&&(r|=4),tb(n,t,r,e)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Al(t){if(!t[Ou]){t[Ou]=!0,l2.forEach(function(n){n!=="selectionchange"&&(sT.has(n)||fh(n,!1,t),fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ou]||(e[Ou]=!0,fh("selectionchange",!1,e))}}function tb(t,e,n,r){switch(B2(e)){case 1:var i=wD;break;case 4:i=xD;break;default:i=_g}n=i.bind(null,e,n,t),i=void 0,!Ip||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function dh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Os(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}k2(function(){var u=s,f=yg(n),c=[];e:{var h=J2.get(t);if(h!==void 0){var d=kg,v=t;switch(t){case"keypress":if(fc(n)===0)break e;case"keydown":case"keyup":d=PD;break;case"focusin":v="focus",d=sh;break;case"focusout":v="blur",d=sh;break;case"beforeblur":case"afterblur":d=sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ED;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=BD;break;case Y2:case K2:case Z2:d=CD;break;case Q2:d=zD;break;case"scroll":d=bD;break;case"wheel":d=$D;break;case"copy":case"cut":case"paste":d=DD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ey}var w=(e&4)!==0,g=!w&&t==="scroll",p=w?h!==null?h+"Capture":null:h;w=[];for(var m=u,y;m!==null;){y=m;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,p!==null&&(k=bl(m,p),k!=null&&w.push(Dl(m,k,y)))),g)break;m=m.return}0<w.length&&(h=new d(h,v,null,n,f),c.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Np&&(v=n.relatedTarget||n.fromElement)&&(Os(v)||v[Ai]))break e;if((d||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=u,v=v?Os(v):null,v!==null&&(g=Js(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(w=Q0,k="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=ey,k="onPointerLeave",p="onPointerEnter",m="pointer"),g=d==null?h:Aa(d),y=v==null?h:Aa(v),h=new w(k,m+"leave",d,n,f),h.target=g,h.relatedTarget=y,k=null,Os(f)===u&&(w=new w(p,m+"enter",v,n,f),w.target=y,w.relatedTarget=g,k=w),g=k,d&&v)t:{for(w=d,p=v,m=0,y=w;y;y=ia(y))m++;for(y=0,k=p;k;k=ia(k))y++;for(;0<m-y;)w=ia(w),m--;for(;0<y-m;)p=ia(p),y--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=ia(w),p=ia(p)}w=null}else w=null;d!==null&&fy(c,h,d,w,!1),v!==null&&g!==null&&fy(c,g,v,w,!0)}}e:{if(h=u?Aa(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=YD;else if(ry(h))if(H2)_=JD;else{_=ZD;var x=KD}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=QD);if(_&&(_=_(t,u))){W2(c,_,n,f);break e}x&&x(t,h,u),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Sp(h,"number",h.value)}switch(x=u?Aa(u):window,t){case"focusin":(ry(x)||x.contentEditable==="true")&&(Sa=x,Mp=u,rl=null);break;case"focusout":rl=Mp=Sa=null;break;case"mousedown":Bp=!0;break;case"contextmenu":case"mouseup":case"dragend":Bp=!1,ly(c,n,f);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":ly(c,n,f)}var C;if(Cg)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ka?U2(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(z2&&n.locale!=="ko"&&(ka||A!=="onCompositionStart"?A==="onCompositionEnd"&&ka&&(C=j2()):(Zi=f,Eg="value"in Zi?Zi.value:Zi.textContent,ka=!0)),x=Xc(u,A),0<x.length&&(A=new J0(A,t,null,n,f),c.push({event:A,listeners:x}),C?A.data=C:(C=$2(n),C!==null&&(A.data=C)))),(C=HD?VD(t,n):qD(t,n))&&(u=Xc(u,"onBeforeInput"),0<u.length&&(f=new J0("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=C))}eb(c,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bl(t,n),s!=null&&r.unshift(Dl(t,s,i)),s=bl(t,e),s!=null&&r.push(Dl(t,s,i))),t=t.return}return r}function ia(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fy(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=bl(n,s),l!=null&&a.unshift(Dl(n,l,o))):i||(l=bl(n,s),l!=null&&a.push(Dl(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var aT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function dy(t){return(typeof t=="string"?t:""+t).replace(aT,`
`).replace(oT,"")}function Lu(t,e,n){if(e=dy(e),dy(t)!==e&&n)throw Error(ve(425))}function Gc(){}var jp=null,zp=null;function Up(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $p=typeof setTimeout=="function"?setTimeout:void 0,lT=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,uT=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(t){return hy.resolve(null).then(t).catch(cT)}:$p;function cT(t){setTimeout(function(){throw t})}function hh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);kl(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),ni="__reactFiber$"+lo,Tl="__reactProps$"+lo,Ai="__reactContainer$"+lo,Wp="__reactEvents$"+lo,fT="__reactListeners$"+lo,dT="__reactHandles$"+lo;function Os(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=py(t);t!==null;){if(n=t[ni])return n;t=py(t)}return e}t=n,n=t.parentNode}return null}function nu(t){return t=t[ni]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function id(t){return t[Tl]||null}var Hp=[],Da=-1;function ms(t){return{current:t}}function Ut(t){0>Da||(t.current=Hp[Da],Hp[Da]=null,Da--)}function Bt(t,e){Da++,Hp[Da]=t.current,t.current=e}var ds={},Pn=ms(ds),Zn=ms(!1),Us=ds;function qa(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function Yc(){Ut(Zn),Ut(Pn)}function my(t,e,n){if(Pn.current!==ds)throw Error(ve(168));Bt(Pn,e),Bt(Zn,n)}function nb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ve(108,KA(t)||"Unknown",i));return Xt({},n,r)}function Kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Us=Pn.current,Bt(Pn,t),Bt(Zn,Zn.current),!0}function gy(t,e,n){var r=t.stateNode;if(!r)throw Error(ve(169));n?(t=nb(t,e,Us),r.__reactInternalMemoizedMergedChildContext=t,Ut(Zn),Ut(Pn),Bt(Pn,t)):Ut(Zn),Bt(Zn,n)}var wi=null,sd=!1,ph=!1;function rb(t){wi===null?wi=[t]:wi.push(t)}function hT(t){sd=!0,rb(t)}function gs(){if(!ph&&wi!==null){ph=!0;var t=0,e=Dt;try{var n=wi;for(Dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wi=null,sd=!1}catch(i){throw wi!==null&&(wi=wi.slice(t+1)),D2(wg,gs),i}finally{Dt=e,ph=!1}}return null}var Ta=[],Na=0,Zc=null,Qc=0,Er=[],kr=0,$s=null,xi=1,bi="";function ks(t,e){Ta[Na++]=Qc,Ta[Na++]=Zc,Zc=t,Qc=e}function ib(t,e,n){Er[kr++]=xi,Er[kr++]=bi,Er[kr++]=$s,$s=t;var r=xi;t=bi;var i=32-$r(r)-1;r&=~(1<<i),n+=1;var s=32-$r(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xi=1<<32-$r(e)+i|n<<i|r,bi=s+t}else xi=1<<s|n<<i|r,bi=t}function Dg(t){t.return!==null&&(ks(t,1),ib(t,1,0))}function Tg(t){for(;t===Zc;)Zc=Ta[--Na],Ta[Na]=null,Qc=Ta[--Na],Ta[Na]=null;for(;t===$s;)$s=Er[--kr],Er[kr]=null,bi=Er[--kr],Er[kr]=null,xi=Er[--kr],Er[kr]=null}var hr=null,fr=null,Ht=!1,zr=null;function sb(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,fr=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$s!==null?{id:xi,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,fr=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qp(t){if(Ht){var e=fr;if(e){var n=e;if(!vy(t,e)){if(Vp(t))throw Error(ve(418));e=as(n.nextSibling);var r=hr;e&&vy(t,e)?sb(r,n):(t.flags=t.flags&-4097|2,Ht=!1,hr=t)}}else{if(Vp(t))throw Error(ve(418));t.flags=t.flags&-4097|2,Ht=!1,hr=t}}}function yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Pu(t){if(t!==hr)return!1;if(!Ht)return yy(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Up(t.type,t.memoizedProps)),e&&(e=fr)){if(Vp(t))throw ab(),Error(ve(418));for(;e;)sb(t,e),e=as(e.nextSibling)}if(yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=hr?as(t.stateNode.nextSibling):null;return!0}function ab(){for(var t=fr;t;)t=as(t.nextSibling)}function Xa(){fr=hr=null,Ht=!1}function Ng(t){zr===null?zr=[t]:zr.push(t)}var pT=Pi.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,t))}return t}function Fu(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wy(t){var e=t._init;return e(t._payload)}function ob(t){function e(p,m){if(t){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=cs(p,m),p.index=0,p.sibling=null,p}function s(p,m,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,y,k){return m===null||m.tag!==6?(m=bh(y,p.mode,k),m.return=p,m):(m=i(m,y),m.return=p,m)}function l(p,m,y,k){var _=y.type;return _===Ea?f(p,m,y.props.children,k,y.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===qi&&wy(_)===m.type)?(k=i(m,y.props),k.ref=ko(p,m,y),k.return=p,k):(k=yc(y.type,y.key,y.props,null,p.mode,k),k.ref=ko(p,m,y),k.return=p,k)}function u(p,m,y,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=_h(y,p.mode,k),m.return=p,m):(m=i(m,y.children||[]),m.return=p,m)}function f(p,m,y,k,_){return m===null||m.tag!==7?(m=zs(y,p.mode,k,_),m.return=p,m):(m=i(m,y),m.return=p,m)}function c(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=bh(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Su:return y=yc(m.type,m.key,m.props,null,p.mode,y),y.ref=ko(p,null,m),y.return=p,y;case _a:return m=_h(m,p.mode,y),m.return=p,m;case qi:var k=m._init;return c(p,k(m._payload),y)}if(jo(m)||wo(m))return m=zs(m,p.mode,y,null),m.return=p,m;Fu(p,m)}return null}function h(p,m,y,k){var _=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:o(p,m,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Su:return y.key===_?l(p,m,y,k):null;case _a:return y.key===_?u(p,m,y,k):null;case qi:return _=y._init,h(p,m,_(y._payload),k)}if(jo(y)||wo(y))return _!==null?null:f(p,m,y,k,null);Fu(p,y)}return null}function d(p,m,y,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(y)||null,o(m,p,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Su:return p=p.get(k.key===null?y:k.key)||null,l(m,p,k,_);case _a:return p=p.get(k.key===null?y:k.key)||null,u(m,p,k,_);case qi:var x=k._init;return d(p,m,y,x(k._payload),_)}if(jo(k)||wo(k))return p=p.get(y)||null,f(m,p,k,_,null);Fu(m,k)}return null}function v(p,m,y,k){for(var _=null,x=null,C=m,A=m=0,P=null;C!==null&&A<y.length;A++){C.index>A?(P=C,C=null):P=C.sibling;var S=h(p,C,y[A],k);if(S===null){C===null&&(C=P);break}t&&C&&S.alternate===null&&e(p,C),m=s(S,m,A),x===null?_=S:x.sibling=S,x=S,C=P}if(A===y.length)return n(p,C),Ht&&ks(p,A),_;if(C===null){for(;A<y.length;A++)C=c(p,y[A],k),C!==null&&(m=s(C,m,A),x===null?_=C:x.sibling=C,x=C);return Ht&&ks(p,A),_}for(C=r(p,C);A<y.length;A++)P=d(C,p,A,y[A],k),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?A:P.key),m=s(P,m,A),x===null?_=P:x.sibling=P,x=P);return t&&C.forEach(function(F){return e(p,F)}),Ht&&ks(p,A),_}function w(p,m,y,k){var _=wo(y);if(typeof _!="function")throw Error(ve(150));if(y=_.call(y),y==null)throw Error(ve(151));for(var x=_=null,C=m,A=m=0,P=null,S=y.next();C!==null&&!S.done;A++,S=y.next()){C.index>A?(P=C,C=null):P=C.sibling;var F=h(p,C,S.value,k);if(F===null){C===null&&(C=P);break}t&&C&&F.alternate===null&&e(p,C),m=s(F,m,A),x===null?_=F:x.sibling=F,x=F,C=P}if(S.done)return n(p,C),Ht&&ks(p,A),_;if(C===null){for(;!S.done;A++,S=y.next())S=c(p,S.value,k),S!==null&&(m=s(S,m,A),x===null?_=S:x.sibling=S,x=S);return Ht&&ks(p,A),_}for(C=r(p,C);!S.done;A++,S=y.next())S=d(C,p,A,S.value,k),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?A:S.key),m=s(S,m,A),x===null?_=S:x.sibling=S,x=S);return t&&C.forEach(function(z){return e(p,z)}),Ht&&ks(p,A),_}function g(p,m,y,k){if(typeof y=="object"&&y!==null&&y.type===Ea&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Su:e:{for(var _=y.key,x=m;x!==null;){if(x.key===_){if(_=y.type,_===Ea){if(x.tag===7){n(p,x.sibling),m=i(x,y.props.children),m.return=p,p=m;break e}}else if(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===qi&&wy(_)===x.type){n(p,x.sibling),m=i(x,y.props),m.ref=ko(p,x,y),m.return=p,p=m;break e}n(p,x);break}else e(p,x);x=x.sibling}y.type===Ea?(m=zs(y.props.children,p.mode,k,y.key),m.return=p,p=m):(k=yc(y.type,y.key,y.props,null,p.mode,k),k.ref=ko(p,m,y),k.return=p,p=k)}return a(p);case _a:e:{for(x=y.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=i(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=_h(y,p.mode,k),m.return=p,p=m}return a(p);case qi:return x=y._init,g(p,m,x(y._payload),k)}if(jo(y))return v(p,m,y,k);if(wo(y))return w(p,m,y,k);Fu(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,y),m.return=p,p=m):(n(p,m),m=bh(y,p.mode,k),m.return=p,p=m),a(p)):n(p,m)}return g}var Ga=ob(!0),lb=ob(!1),Jc=ms(null),ef=null,Ra=null,Rg=null;function Ig(){Rg=Ra=ef=null}function Og(t){var e=Jc.current;Ut(Jc),t._currentValue=e}function Xp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function za(t,e){ef=t,Rg=Ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function Tr(t){var e=t._currentValue;if(Rg!==t)if(t={context:t,memoizedValue:e,next:null},Ra===null){if(ef===null)throw Error(ve(308));Ra=t,ef.dependencies={lanes:0,firstContext:t}}else Ra=Ra.next=t;return e}var Ls=null;function Lg(t){Ls===null?Ls=[t]:Ls.push(t)}function ub(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Lg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Di(t,r)}function Di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function Pg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Di(t,n)}return i=r.interleaved,i===null?(e.next=e,Lg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Di(t,n)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xg(t,n)}}function xy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tf(t,e,n,r){var i=t.updateQueue;Xi=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;a=0,f=u=l=null,o=s;do{var h=o.lane,d=o.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,w=o;switch(h=e,d=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){c=v.call(d,c,h);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,h=typeof v=="function"?v.call(d,c,h):v,h==null)break e;c=Xt({},c,h);break e;case 2:Xi=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=d,l=c):f=f.next=d,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hs|=a,t.lanes=a,t.memoizedState=c}}function by(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ve(191,i));i.call(r)}}}var ru={},si=ms(ru),Nl=ms(ru),Rl=ms(ru);function Ps(t){if(t===ru)throw Error(ve(174));return t}function Fg(t,e){switch(Bt(Rl,e),Bt(Nl,t),Bt(si,ru),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ap(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ap(e,t)}Ut(si),Bt(si,e)}function Ya(){Ut(si),Ut(Nl),Ut(Rl)}function fb(t){Ps(Rl.current);var e=Ps(si.current),n=Ap(e,t.type);e!==n&&(Bt(Nl,t),Bt(si,n))}function Mg(t){Nl.current===t&&(Ut(si),Ut(Nl))}var Vt=ms(0);function nf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mh=[];function Bg(){for(var t=0;t<mh.length;t++)mh[t]._workInProgressVersionPrimary=null;mh.length=0}var hc=Pi.ReactCurrentDispatcher,gh=Pi.ReactCurrentBatchConfig,Ws=0,qt=null,dn=null,gn=null,rf=!1,il=!1,Il=0,mT=0;function Rn(){throw Error(ve(321))}function jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qr(t[n],e[n]))return!1;return!0}function zg(t,e,n,r,i,s){if(Ws=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hc.current=t===null||t.memoizedState===null?wT:xT,t=n(r,i),il){s=0;do{if(il=!1,Il=0,25<=s)throw Error(ve(301));s+=1,gn=dn=null,e.updateQueue=null,hc.current=bT,t=n(r,i)}while(il)}if(hc.current=sf,e=dn!==null&&dn.next!==null,Ws=0,gn=dn=qt=null,rf=!1,e)throw Error(ve(300));return t}function Ug(){var t=Il!==0;return Il=0,t}function Jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?qt.memoizedState=gn=t:gn=gn.next=t,gn}function Nr(){if(dn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=dn.next;var e=gn===null?qt.memoizedState:gn.next;if(e!==null)gn=e,dn=t;else{if(t===null)throw Error(ve(310));dn=t,t={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},gn===null?qt.memoizedState=gn=t:gn=gn.next=t}return gn}function Ol(t,e){return typeof e=="function"?e(t):e}function vh(t){var e=Nr(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=dn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var f=u.lane;if((Ws&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=c,a=r):l=l.next=c,qt.lanes|=f,Hs|=f}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,qr(r,e.memoizedState)||(Kn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qt.lanes|=s,Hs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yh(t){var e=Nr(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);qr(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function db(){}function hb(t,e){var n=qt,r=Nr(),i=e(),s=!qr(r.memoizedState,i);if(s&&(r.memoizedState=i,Kn=!0),r=r.queue,$g(gb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gn!==null&&gn.memoizedState.tag&1){if(n.flags|=2048,Ll(9,mb.bind(null,n,r,i,e),void 0,null),yn===null)throw Error(ve(349));Ws&30||pb(n,e,i)}return i}function pb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mb(t,e,n,r){e.value=n,e.getSnapshot=r,vb(e)&&yb(t)}function gb(t,e,n){return n(function(){vb(e)&&yb(t)})}function vb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qr(t,n)}catch{return!0}}function yb(t){var e=Di(t,1);e!==null&&Wr(e,t,1,-1)}function _y(t){var e=Jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:t},e.queue=t,t=t.dispatch=yT.bind(null,qt,t),[e.memoizedState,t]}function Ll(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wb(){return Nr().memoizedState}function pc(t,e,n,r){var i=Jr();qt.flags|=t,i.memoizedState=Ll(1|e,n,void 0,r===void 0?null:r)}function ad(t,e,n,r){var i=Nr();r=r===void 0?null:r;var s=void 0;if(dn!==null){var a=dn.memoizedState;if(s=a.destroy,r!==null&&jg(r,a.deps)){i.memoizedState=Ll(e,n,s,r);return}}qt.flags|=t,i.memoizedState=Ll(1|e,n,s,r)}function Ey(t,e){return pc(8390656,8,t,e)}function $g(t,e){return ad(2048,8,t,e)}function xb(t,e){return ad(4,2,t,e)}function bb(t,e){return ad(4,4,t,e)}function _b(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eb(t,e,n){return n=n!=null?n.concat([t]):null,ad(4,4,_b.bind(null,e,t),n)}function Wg(){}function kb(t,e){var n=Nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sb(t,e){var n=Nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cb(t,e,n){return Ws&21?(qr(n,e)||(n=R2(),qt.lanes|=n,Hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=n)}function gT(t,e){var n=Dt;Dt=n!==0&&4>n?n:4,t(!0);var r=gh.transition;gh.transition={};try{t(!1),e()}finally{Dt=n,gh.transition=r}}function Ab(){return Nr().memoizedState}function vT(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Db(t))Tb(e,n);else if(n=ub(t,e,n,r),n!==null){var i=Un();Wr(n,t,r,i),Nb(n,e,r)}}function yT(t,e,n){var r=us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Db(t))Tb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,qr(o,a)){var l=e.interleaved;l===null?(i.next=i,Lg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ub(t,e,i,r),n!==null&&(i=Un(),Wr(n,t,r,i),Nb(n,e,r))}}function Db(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function Tb(t,e){il=rf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xg(t,n)}}var sf={readContext:Tr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},wT={readContext:Tr,useCallback:function(t,e){return Jr().memoizedState=[t,e===void 0?null:e],t},useContext:Tr,useEffect:Ey,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pc(4194308,4,_b.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return pc(4,2,t,e)},useMemo:function(t,e){var n=Jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vT.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=Jr();return t={current:t},e.memoizedState=t},useState:_y,useDebugValue:Wg,useDeferredValue:function(t){return Jr().memoizedState=t},useTransition:function(){var t=_y(!1),e=t[0];return t=gT.bind(null,t[1]),Jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,i=Jr();if(Ht){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=e(),yn===null)throw Error(ve(349));Ws&30||pb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ey(gb.bind(null,r,s,t),[t]),r.flags|=2048,Ll(9,mb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jr(),e=yn.identifierPrefix;if(Ht){var n=bi,r=xi;n=(r&~(1<<32-$r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xT={readContext:Tr,useCallback:kb,useContext:Tr,useEffect:$g,useImperativeHandle:Eb,useInsertionEffect:xb,useLayoutEffect:bb,useMemo:Sb,useReducer:vh,useRef:wb,useState:function(){return vh(Ol)},useDebugValue:Wg,useDeferredValue:function(t){var e=Nr();return Cb(e,dn.memoizedState,t)},useTransition:function(){var t=vh(Ol)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:Ab,unstable_isNewReconciler:!1},bT={readContext:Tr,useCallback:kb,useContext:Tr,useEffect:$g,useImperativeHandle:Eb,useInsertionEffect:xb,useLayoutEffect:bb,useMemo:Sb,useReducer:yh,useRef:wb,useState:function(){return yh(Ol)},useDebugValue:Wg,useDeferredValue:function(t){var e=Nr();return dn===null?e.memoizedState=t:Cb(e,dn.memoizedState,t)},useTransition:function(){var t=yh(Ol)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:Ab,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var od={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Un(),i=us(t),s=Ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(Wr(e,t,i,r),dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Un(),i=us(t),s=Ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(Wr(e,t,i,r),dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),r=us(t),i=Ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=os(t,i,r),e!==null&&(Wr(e,t,r,n),dc(e,t,r))}};function ky(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Cl(n,r)||!Cl(i,s):!0}function Rb(t,e,n){var r=!1,i=ds,s=e.contextType;return typeof s=="object"&&s!==null?s=Tr(s):(i=Qn(e)?Us:Pn.current,r=e.contextTypes,s=(r=r!=null)?qa(t,i):ds),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function Yp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tr(s):(s=Qn(e)?Us:Pn.current,i.context=qa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&od.enqueueReplaceState(i,i.state,null),tf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ka(t,e){try{var n="",r=e;do n+=YA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function Ib(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){of||(of=!0,am=r),Kp(t,e)},n}function Ob(t,e,n){n=Ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kp(t,e),typeof r!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _T;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FT.bind(null,t,e,n),e.then(t,t))}function Ay(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var ET=Pi.ReactCurrentOwner,Kn=!1;function jn(t,e,n,r){e.child=t===null?lb(e,null,n,r):Ga(e,t.child,n,r)}function Ty(t,e,n,r,i){n=n.render;var s=e.ref;return za(e,i),r=zg(t,e,n,r,s,i),n=Ug(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(Ht&&n&&Dg(e),e.flags|=1,jn(t,e,r,i),e.child)}function Ny(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Zg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Lb(t,e,s,r,i)):(t=yc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cl,n(a,r)&&t.ref===e.ref)return Ti(t,e,i)}return e.flags|=1,t=cs(s,r),t.ref=e.ref,t.return=e,e.child=t}function Lb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cl(s,r)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,Ti(t,e,i)}return Zp(t,e,n,r,i)}function Pb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Oa,ur),ur|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bt(Oa,ur),ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Bt(Oa,ur),ur|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Bt(Oa,ur),ur|=r;return jn(t,e,i,n),e.child}function Fb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zp(t,e,n,r,i){var s=Qn(n)?Us:Pn.current;return s=qa(e,s),za(e,i),n=zg(t,e,n,r,s,i),r=Ug(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(Ht&&r&&Dg(e),e.flags|=1,jn(t,e,n,i),e.child)}function Ry(t,e,n,r,i){if(Qn(n)){var s=!0;Kc(e)}else s=!1;if(za(e,i),e.stateNode===null)mc(t,e),Rb(e,n,r),Yp(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tr(u):(u=Qn(n)?Us:Pn.current,u=qa(e,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Sy(e,a,r,u),Xi=!1;var h=e.memoizedState;a.state=h,tf(e,r,a,i),l=e.memoizedState,o!==r||h!==l||Zn.current||Xi?(typeof f=="function"&&(Gp(e,n,f,r),l=e.memoizedState),(o=Xi||ky(e,n,o,r,h,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,cb(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Lr(e.type,o),a.props=u,c=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Tr(l):(l=Qn(n)?Us:Pn.current,l=qa(e,l));var d=n.getDerivedStateFromProps;(f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||h!==l)&&Sy(e,a,r,l),Xi=!1,h=e.memoizedState,a.state=h,tf(e,r,a,i);var v=e.memoizedState;o!==c||h!==v||Zn.current||Xi?(typeof d=="function"&&(Gp(e,n,d,r),v=e.memoizedState),(u=Xi||ky(e,n,u,r,h,v,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Qp(t,e,n,r,s,i)}function Qp(t,e,n,r,i,s){Fb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&gy(e,n,!1),Ti(t,e,s);r=e.stateNode,ET.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ga(e,t.child,null,s),e.child=Ga(e,null,o,s)):jn(t,e,o,s),e.memoizedState=r.state,i&&gy(e,n,!0),e.child}function Mb(t){var e=t.stateNode;e.pendingContext?my(t,e.pendingContext,e.pendingContext!==e.context):e.context&&my(t,e.context,!1),Fg(t,e.containerInfo)}function Iy(t,e,n,r,i){return Xa(),Ng(i),e.flags|=256,jn(t,e,n,r),e.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function em(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bb(t,e,n){var r=e.pendingProps,i=Vt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Bt(Vt,i&1),t===null)return qp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=cd(a,r,0,null),t=zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=em(n),e.memoizedState=Jp,t):Hg(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return kT(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=cs(o,s):(s=zs(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?em(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Jp,r}return s=t.child,t=s.sibling,r=cs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hg(t,e){return e=cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mu(t,e,n,r){return r!==null&&Ng(r),Ga(e,t.child,null,n),t=Hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kT(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=wh(Error(ve(422))),Mu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cd({mode:"visible",children:r.children},i,0,null),s=zs(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ga(e,t.child,null,a),e.child.memoizedState=em(a),e.memoizedState=Jp,s);if(!(e.mode&1))return Mu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ve(419)),r=wh(s,r,void 0),Mu(t,e,a,r)}if(o=(a&t.childLanes)!==0,Kn||o){if(r=yn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Di(t,i),Wr(r,t,i,-1))}return Kg(),r=wh(Error(ve(421))),Mu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=MT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fr=as(i.nextSibling),hr=e,Ht=!0,zr=null,t!==null&&(Er[kr++]=xi,Er[kr++]=bi,Er[kr++]=$s,xi=t.id,bi=t.overflow,$s=e),e=Hg(e,r.children),e.flags|=4096,e)}function Oy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xp(t.return,e,n)}function xh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jn(t,e,r.children,n),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,n,e);else if(t.tag===19)Oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Bt(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xh(e,!0,n,null,s);break;case"together":xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,n=cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ST(t,e,n){switch(e.tag){case 3:Mb(e),Xa();break;case 5:fb(e);break;case 1:Qn(e.type)&&Kc(e);break;case 4:Fg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Bt(Jc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Bt(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?Bb(t,e,n):(Bt(Vt,Vt.current&1),t=Ti(t,e,n),t!==null?t.sibling:null);Bt(Vt,Vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,Pb(t,e,n)}return Ti(t,e,n)}var zb,tm,Ub,$b;zb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tm=function(){};Ub=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ps(si.current);var s=null;switch(n){case"input":i=Ep(t,i),r=Ep(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=Cp(t,i),r=Cp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gc)}Dp(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&zt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$b=function(t,e,n,r){n!==r&&(e.flags|=4)};function So(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function In(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CT(t,e,n){var r=e.pendingProps;switch(Tg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(e),null;case 1:return Qn(e.type)&&Yc(),In(e),null;case 3:return r=e.stateNode,Ya(),Ut(Zn),Ut(Pn),Bg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zr!==null&&(um(zr),zr=null))),tm(t,e),In(e),null;case 5:Mg(e);var i=Ps(Rl.current);if(n=e.type,t!==null&&e.stateNode!=null)Ub(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ve(166));return In(e),null}if(t=Ps(si.current),Pu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ni]=e,r[Tl]=s,t=(e.mode&1)!==0,n){case"dialog":zt("cancel",r),zt("close",r);break;case"iframe":case"object":case"embed":zt("load",r);break;case"video":case"audio":for(i=0;i<Uo.length;i++)zt(Uo[i],r);break;case"source":zt("error",r);break;case"img":case"image":case"link":zt("error",r),zt("load",r);break;case"details":zt("toggle",r);break;case"input":$0(r,s),zt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zt("invalid",r);break;case"textarea":H0(r,s),zt("invalid",r)}Dp(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,o,t),i=["children",""+o]):wl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&zt("scroll",r)}switch(n){case"input":Cu(r),W0(r,s,!0);break;case"textarea":Cu(r),V0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=g2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ni]=e,t[Tl]=r,zb(t,e,!1,!1),e.stateNode=t;e:{switch(a=Tp(n,r),n){case"dialog":zt("cancel",t),zt("close",t),i=r;break;case"iframe":case"object":case"embed":zt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uo.length;i++)zt(Uo[i],t);i=r;break;case"source":zt("error",t),i=r;break;case"img":case"image":case"link":zt("error",t),zt("load",t),i=r;break;case"details":zt("toggle",t),i=r;break;case"input":$0(t,r),i=Ep(t,r),zt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),zt("invalid",t);break;case"textarea":H0(t,r),i=Cp(t,r),zt("invalid",t);break;default:i=r}Dp(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?w2(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&v2(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xl(t,l):typeof l=="number"&&xl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&zt("scroll",t):l!=null&&pg(t,s,l,a))}switch(n){case"input":Cu(t),W0(t,r,!1);break;case"textarea":Cu(t),V0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return In(e),null;case 6:if(t&&e.stateNode!=null)$b(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ve(166));if(n=Ps(Rl.current),Ps(si.current),Pu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ni]=e,(s=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:Lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ni]=e,e.stateNode=r}return In(e),null;case 13:if(Ut(Vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&fr!==null&&e.mode&1&&!(e.flags&128))ab(),Xa(),e.flags|=98560,s=!1;else if(s=Pu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ve(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ve(317));s[ni]=e}else Xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;In(e),s=!1}else zr!==null&&(um(zr),zr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?pn===0&&(pn=3):Kg())),e.updateQueue!==null&&(e.flags|=4),In(e),null);case 4:return Ya(),tm(t,e),t===null&&Al(e.stateNode.containerInfo),In(e),null;case 10:return Og(e.type._context),In(e),null;case 17:return Qn(e.type)&&Yc(),In(e),null;case 19:if(Ut(Vt),s=e.memoizedState,s===null)return In(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)So(s,!1);else{if(pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=nf(t),a!==null){for(e.flags|=128,So(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Jt()>Za&&(e.flags|=128,r=!0,So(s,!1),e.lanes=4194304)}else{if(!r)if(t=nf(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ht)return In(e),null}else 2*Jt()-s.renderingStartTime>Za&&n!==1073741824&&(e.flags|=128,r=!0,So(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,n=Vt.current,Bt(Vt,r?n&1|2:n&1),e):(In(e),null);case 22:case 23:return Yg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ur&1073741824&&(In(e),e.subtreeFlags&6&&(e.flags|=8192)):In(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function AT(t,e){switch(Tg(e),e.tag){case 1:return Qn(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ya(),Ut(Zn),Ut(Pn),Bg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mg(e),null;case 13:if(Ut(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));Xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Vt),null;case 4:return Ya(),null;case 10:return Og(e.type._context),null;case 22:case 23:return Yg(),null;case 24:return null;default:return null}}var Bu=!1,On=!1,DT=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Ia(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yt(t,e,r)}else n.current=null}function nm(t,e,n){try{n()}catch(r){Yt(t,e,r)}}var Ly=!1;function TT(t,e){if(jp=Vc,t=X2(),Ag(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,f=0,c=t,h=null;t:for(;;){for(var d;c!==n||i!==0&&c.nodeType!==3||(o=a+i),c!==s||r!==0&&c.nodeType!==3||(l=a+r),c.nodeType===3&&(a+=c.nodeValue.length),(d=c.firstChild)!==null;)h=c,c=d;for(;;){if(c===t)break t;if(h===n&&++u===i&&(o=a),h===s&&++f===r&&(l=a),(d=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=d}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zp={focusedElem:t,selectionRange:n},Vc=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,g=v.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:Lr(e.type,w),g);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(k){Yt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return v=Ly,Ly=!1,v}function sl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nm(e,n,s)}i=i.next}while(i!==r)}}function ld(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wb(t){var e=t.alternate;e!==null&&(t.alternate=null,Wb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[Tl],delete e[Wp],delete e[fT],delete e[dT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hb(t){return t.tag===5||t.tag===3||t.tag===4}function Py(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gc));else if(r!==4&&(t=t.child,t!==null))for(im(t,e,n),t=t.sibling;t!==null;)im(t,e,n),t=t.sibling}function sm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sm(t,e,n),t=t.sibling;t!==null;)sm(t,e,n),t=t.sibling}var _n=null,Mr=!1;function zi(t,e,n){for(n=n.child;n!==null;)Vb(t,e,n),n=n.sibling}function Vb(t,e,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(ed,n)}catch{}switch(n.tag){case 5:On||Ia(n,e);case 6:var r=_n,i=Mr;_n=null,zi(t,e,n),_n=r,Mr=i,_n!==null&&(Mr?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Mr?(t=_n,n=n.stateNode,t.nodeType===8?hh(t.parentNode,n):t.nodeType===1&&hh(t,n),kl(t)):hh(_n,n.stateNode));break;case 4:r=_n,i=Mr,_n=n.stateNode.containerInfo,Mr=!0,zi(t,e,n),_n=r,Mr=i;break;case 0:case 11:case 14:case 15:if(!On&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&nm(n,e,a),i=i.next}while(i!==r)}zi(t,e,n);break;case 1:if(!On&&(Ia(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Yt(n,e,o)}zi(t,e,n);break;case 21:zi(t,e,n);break;case 22:n.mode&1?(On=(r=On)||n.memoizedState!==null,zi(t,e,n),On=r):zi(t,e,n);break;default:zi(t,e,n)}}function Fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DT),e.forEach(function(r){var i=BT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:_n=o.stateNode,Mr=!1;break e;case 3:_n=o.stateNode.containerInfo,Mr=!0;break e;case 4:_n=o.stateNode.containerInfo,Mr=!0;break e}o=o.return}if(_n===null)throw Error(ve(160));Vb(s,a,i),_n=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Yt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qb(e,t),e=e.sibling}function qb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),Kr(t),r&4){try{sl(3,t,t.return),ld(3,t)}catch(w){Yt(t,t.return,w)}try{sl(5,t,t.return)}catch(w){Yt(t,t.return,w)}}break;case 1:Ir(e,t),Kr(t),r&512&&n!==null&&Ia(n,n.return);break;case 5:if(Ir(e,t),Kr(t),r&512&&n!==null&&Ia(n,n.return),t.flags&32){var i=t.stateNode;try{xl(i,"")}catch(w){Yt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&p2(i,s),Tp(o,a);var u=Tp(o,s);for(a=0;a<l.length;a+=2){var f=l[a],c=l[a+1];f==="style"?w2(i,c):f==="dangerouslySetInnerHTML"?v2(i,c):f==="children"?xl(i,c):pg(i,f,c,u)}switch(o){case"input":kp(i,s);break;case"textarea":m2(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Fa(i,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Fa(i,!!s.multiple,s.defaultValue,!0):Fa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Tl]=s}catch(w){Yt(t,t.return,w)}}break;case 6:if(Ir(e,t),Kr(t),r&4){if(t.stateNode===null)throw Error(ve(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Yt(t,t.return,w)}}break;case 3:if(Ir(e,t),Kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kl(e.containerInfo)}catch(w){Yt(t,t.return,w)}break;case 4:Ir(e,t),Kr(t);break;case 13:Ir(e,t),Kr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Xg=Jt())),r&4&&Fy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(On=(u=On)||f,Ir(e,t),On=u):Ir(e,t),Kr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(Fe=t,f=t.child;f!==null;){for(c=Fe=f;Fe!==null;){switch(h=Fe,d=h.child,h.tag){case 0:case 11:case 14:case 15:sl(4,h,h.return);break;case 1:Ia(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Yt(r,n,w)}}break;case 5:Ia(h,h.return);break;case 22:if(h.memoizedState!==null){By(c);continue}}d!==null?(d.return=h,Fe=d):By(c)}f=f.sibling}e:for(f=null,c=t;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=y2("display",a))}catch(w){Yt(t,t.return,w)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(w){Yt(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ir(e,t),Kr(t),r&4&&Fy(t);break;case 21:break;default:Ir(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hb(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xl(i,""),r.flags&=-33);var s=Py(t);sm(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Py(t);im(t,o,a);break;default:throw Error(ve(161))}}catch(l){Yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NT(t,e,n){Fe=t,Xb(t)}function Xb(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var i=Fe,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Bu;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||On;o=Bu;var u=On;if(Bu=a,(On=l)&&!u)for(Fe=i;Fe!==null;)a=Fe,l=a.child,a.tag===22&&a.memoizedState!==null?jy(i):l!==null?(l.return=a,Fe=l):jy(i);for(;s!==null;)Fe=s,Xb(s),s=s.sibling;Fe=i,Bu=o,On=u}My(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Fe=s):My(t)}}function My(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||ld(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!On)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&by(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}by(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&kl(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}On||e.flags&512&&rm(e)}catch(h){Yt(e,e.return,h)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function By(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function jy(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ld(4,e)}catch(l){Yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yt(e,i,l)}}var s=e.return;try{rm(e)}catch(l){Yt(e,s,l)}break;case 5:var a=e.return;try{rm(e)}catch(l){Yt(e,a,l)}}}catch(l){Yt(e,e.return,l)}if(e===t){Fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Fe=o;break}Fe=e.return}}var RT=Math.ceil,af=Pi.ReactCurrentDispatcher,Vg=Pi.ReactCurrentOwner,Dr=Pi.ReactCurrentBatchConfig,wt=0,yn=null,on=null,Cn=0,ur=0,Oa=ms(0),pn=0,Pl=null,Hs=0,ud=0,qg=0,al=null,Gn=null,Xg=0,Za=1/0,yi=null,of=!1,am=null,ls=null,ju=!1,Qi=null,lf=0,ol=0,om=null,gc=-1,vc=0;function Un(){return wt&6?Jt():gc!==-1?gc:gc=Jt()}function us(t){return t.mode&1?wt&2&&Cn!==0?Cn&-Cn:pT.transition!==null?(vc===0&&(vc=R2()),vc):(t=Dt,t!==0||(t=window.event,t=t===void 0?16:B2(t.type)),t):1}function Wr(t,e,n,r){if(50<ol)throw ol=0,om=null,Error(ve(185));eu(t,n,r),(!(wt&2)||t!==yn)&&(t===yn&&(!(wt&2)&&(ud|=n),pn===4&&Ki(t,Cn)),Jn(t,r),n===1&&wt===0&&!(e.mode&1)&&(Za=Jt()+500,sd&&gs()))}function Jn(t,e){var n=t.callbackNode;pD(t,e);var r=Hc(t,t===yn?Cn:0);if(r===0)n!==null&&G0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G0(n),e===1)t.tag===0?hT(zy.bind(null,t)):rb(zy.bind(null,t)),uT(function(){!(wt&6)&&gs()}),n=null;else{switch(I2(r)){case 1:n=wg;break;case 4:n=T2;break;case 16:n=Wc;break;case 536870912:n=N2;break;default:n=Wc}n=t_(n,Gb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gb(t,e){if(gc=-1,vc=0,wt&6)throw Error(ve(327));var n=t.callbackNode;if(Ua()&&t.callbackNode!==n)return null;var r=Hc(t,t===yn?Cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uf(t,r);else{e=r;var i=wt;wt|=2;var s=Kb();(yn!==t||Cn!==e)&&(yi=null,Za=Jt()+500,js(t,e));do try{LT();break}catch(o){Yb(t,o)}while(!0);Ig(),af.current=s,wt=i,on!==null?e=0:(yn=null,Cn=0,e=pn)}if(e!==0){if(e===2&&(i=Lp(t),i!==0&&(r=i,e=lm(t,i))),e===1)throw n=Pl,js(t,0),Ki(t,r),Jn(t,Jt()),n;if(e===6)Ki(t,r);else{if(i=t.current.alternate,!(r&30)&&!IT(i)&&(e=uf(t,r),e===2&&(s=Lp(t),s!==0&&(r=s,e=lm(t,s))),e===1))throw n=Pl,js(t,0),Ki(t,r),Jn(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ve(345));case 2:Ss(t,Gn,yi);break;case 3:if(Ki(t,r),(r&130023424)===r&&(e=Xg+500-Jt(),10<e)){if(Hc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$p(Ss.bind(null,t,Gn,yi),e);break}Ss(t,Gn,yi);break;case 4:if(Ki(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-$r(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RT(r/1960))-r,10<r){t.timeoutHandle=$p(Ss.bind(null,t,Gn,yi),r);break}Ss(t,Gn,yi);break;case 5:Ss(t,Gn,yi);break;default:throw Error(ve(329))}}}return Jn(t,Jt()),t.callbackNode===n?Gb.bind(null,t):null}function lm(t,e){var n=al;return t.current.memoizedState.isDehydrated&&(js(t,e).flags|=256),t=uf(t,e),t!==2&&(e=Gn,Gn=n,e!==null&&um(e)),t}function um(t){Gn===null?Gn=t:Gn.push.apply(Gn,t)}function IT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~qg,e&=~ud,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$r(e),r=1<<n;t[n]=-1,e&=~r}}function zy(t){if(wt&6)throw Error(ve(327));Ua();var e=Hc(t,0);if(!(e&1))return Jn(t,Jt()),null;var n=uf(t,e);if(t.tag!==0&&n===2){var r=Lp(t);r!==0&&(e=r,n=lm(t,r))}if(n===1)throw n=Pl,js(t,0),Ki(t,e),Jn(t,Jt()),n;if(n===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ss(t,Gn,yi),Jn(t,Jt()),null}function Gg(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(Za=Jt()+500,sd&&gs())}}function Vs(t){Qi!==null&&Qi.tag===0&&!(wt&6)&&Ua();var e=wt;wt|=1;var n=Dr.transition,r=Dt;try{if(Dr.transition=null,Dt=1,t)return t()}finally{Dt=r,Dr.transition=n,wt=e,!(wt&6)&&gs()}}function Yg(){ur=Oa.current,Ut(Oa)}function js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lT(n)),on!==null)for(n=on.return;n!==null;){var r=n;switch(Tg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yc();break;case 3:Ya(),Ut(Zn),Ut(Pn),Bg();break;case 5:Mg(r);break;case 4:Ya();break;case 13:Ut(Vt);break;case 19:Ut(Vt);break;case 10:Og(r.type._context);break;case 22:case 23:Yg()}n=n.return}if(yn=t,on=t=cs(t.current,null),Cn=ur=e,pn=0,Pl=null,qg=ud=Hs=0,Gn=al=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ls=null}return t}function Yb(t,e){do{var n=on;try{if(Ig(),hc.current=sf,rf){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rf=!1}if(Ws=0,gn=dn=qt=null,il=!1,Il=0,Vg.current=null,n===null||n.return===null){pn=1,Pl=e,on=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Cn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=o,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=Ay(a);if(d!==null){d.flags&=-257,Dy(d,a,o,s,e),d.mode&1&&Cy(s,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){Cy(s,u,e),Kg();break e}l=Error(ve(426))}}else if(Ht&&o.mode&1){var g=Ay(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Dy(g,a,o,s,e),Ng(Ka(l,o));break e}}s=l=Ka(l,o),pn!==4&&(pn=2),al===null?al=[s]:al.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Ib(s,l,e);xy(s,p);break e;case 1:o=l;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ls===null||!ls.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Ob(s,o,e);xy(s,k);break e}}s=s.return}while(s!==null)}Qb(n)}catch(_){e=_,on===n&&n!==null&&(on=n=n.return);continue}break}while(!0)}function Kb(){var t=af.current;return af.current=sf,t===null?sf:t}function Kg(){(pn===0||pn===3||pn===2)&&(pn=4),yn===null||!(Hs&268435455)&&!(ud&268435455)||Ki(yn,Cn)}function uf(t,e){var n=wt;wt|=2;var r=Kb();(yn!==t||Cn!==e)&&(yi=null,js(t,e));do try{OT();break}catch(i){Yb(t,i)}while(!0);if(Ig(),wt=n,af.current=r,on!==null)throw Error(ve(261));return yn=null,Cn=0,pn}function OT(){for(;on!==null;)Zb(on)}function LT(){for(;on!==null&&!sD();)Zb(on)}function Zb(t){var e=e_(t.alternate,t,ur);t.memoizedProps=t.pendingProps,e===null?Qb(t):on=e,Vg.current=null}function Qb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AT(n,e),n!==null){n.flags&=32767,on=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pn=6,on=null;return}}else if(n=CT(n,e,ur),n!==null){on=n;return}if(e=e.sibling,e!==null){on=e;return}on=e=t}while(e!==null);pn===0&&(pn=5)}function Ss(t,e,n){var r=Dt,i=Dr.transition;try{Dr.transition=null,Dt=1,PT(t,e,n,r)}finally{Dr.transition=i,Dt=r}return null}function PT(t,e,n,r){do Ua();while(Qi!==null);if(wt&6)throw Error(ve(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mD(t,s),t===yn&&(on=yn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ju||(ju=!0,t_(Wc,function(){return Ua(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var a=Dt;Dt=1;var o=wt;wt|=4,Vg.current=null,TT(t,n),qb(n,t),tT(zp),Vc=!!jp,zp=jp=null,t.current=n,NT(n),aD(),wt=o,Dt=a,Dr.transition=s}else t.current=n;if(ju&&(ju=!1,Qi=t,lf=i),s=t.pendingLanes,s===0&&(ls=null),uD(n.stateNode),Jn(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(of)throw of=!1,t=am,am=null,t;return lf&1&&t.tag!==0&&Ua(),s=t.pendingLanes,s&1?t===om?ol++:(ol=0,om=t):ol=0,gs(),null}function Ua(){if(Qi!==null){var t=I2(lf),e=Dr.transition,n=Dt;try{if(Dr.transition=null,Dt=16>t?16:t,Qi===null)var r=!1;else{if(t=Qi,Qi=null,lf=0,wt&6)throw Error(ve(331));var i=wt;for(wt|=4,Fe=t.current;Fe!==null;){var s=Fe,a=s.child;if(Fe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Fe=u;Fe!==null;){var f=Fe;switch(f.tag){case 0:case 11:case 15:sl(8,f,s)}var c=f.child;if(c!==null)c.return=f,Fe=c;else for(;Fe!==null;){f=Fe;var h=f.sibling,d=f.return;if(Wb(f),f===u){Fe=null;break}if(h!==null){h.return=d,Fe=h;break}Fe=d}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var g=w.sibling;w.sibling=null,w=g}while(w!==null)}}Fe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Fe=a;else e:for(;Fe!==null;){if(s=Fe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Fe=p;break e}Fe=s.return}}var m=t.current;for(Fe=m;Fe!==null;){a=Fe;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Fe=y;else e:for(a=m;Fe!==null;){if(o=Fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ld(9,o)}}catch(_){Yt(o,o.return,_)}if(o===a){Fe=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,Fe=k;break e}Fe=o.return}}if(wt=i,gs(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(ed,t)}catch{}r=!0}return r}finally{Dt=n,Dr.transition=e}}return!1}function Uy(t,e,n){e=Ka(n,e),e=Ib(t,e,1),t=os(t,e,1),e=Un(),t!==null&&(eu(t,1,e),Jn(t,e))}function Yt(t,e,n){if(t.tag===3)Uy(t,t,n);else for(;e!==null;){if(e.tag===3){Uy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ls===null||!ls.has(r))){t=Ka(n,t),t=Ob(e,t,1),e=os(e,t,1),t=Un(),e!==null&&(eu(e,1,t),Jn(e,t));break}}e=e.return}}function FT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Un(),t.pingedLanes|=t.suspendedLanes&n,yn===t&&(Cn&n)===n&&(pn===4||pn===3&&(Cn&130023424)===Cn&&500>Jt()-Xg?js(t,0):qg|=n),Jn(t,e)}function Jb(t,e){e===0&&(t.mode&1?(e=Tu,Tu<<=1,!(Tu&130023424)&&(Tu=4194304)):e=1);var n=Un();t=Di(t,e),t!==null&&(eu(t,e,n),Jn(t,n))}function MT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jb(t,n)}function BT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(e),Jb(t,n)}var e_;e_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)Kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kn=!1,ST(t,e,n);Kn=!!(t.flags&131072)}else Kn=!1,Ht&&e.flags&1048576&&ib(e,Qc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var i=qa(e,Pn.current);za(e,n),i=zg(null,e,r,t,i,n);var s=Ug();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(r)?(s=!0,Kc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pg(e),i.updater=od,e.stateNode=i,i._reactInternals=e,Yp(e,r,t,n),e=Qp(null,e,r,!0,s,n)):(e.tag=0,Ht&&s&&Dg(e),jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zT(r),t=Lr(r,t),i){case 0:e=Zp(null,e,r,t,n);break e;case 1:e=Ry(null,e,r,t,n);break e;case 11:e=Ty(null,e,r,t,n);break e;case 14:e=Ny(null,e,r,Lr(r.type,t),n);break e}throw Error(ve(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Zp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Ry(t,e,r,i,n);case 3:e:{if(Mb(e),t===null)throw Error(ve(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cb(t,e),tf(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ka(Error(ve(423)),e),e=Iy(t,e,r,n,i);break e}else if(r!==i){i=Ka(Error(ve(424)),e),e=Iy(t,e,r,n,i);break e}else for(fr=as(e.stateNode.containerInfo.firstChild),hr=e,Ht=!0,zr=null,n=lb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xa(),r===i){e=Ti(t,e,n);break e}jn(t,e,r,n)}e=e.child}return e;case 5:return fb(e),t===null&&qp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Up(r,i)?a=null:s!==null&&Up(r,s)&&(e.flags|=32),Fb(t,e),jn(t,e,a,n),e.child;case 6:return t===null&&qp(e),null;case 13:return Bb(t,e,n);case 4:return Fg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ga(e,null,r,n):jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Ty(t,e,r,i,n);case 7:return jn(t,e,e.pendingProps,n),e.child;case 8:return jn(t,e,e.pendingProps.children,n),e.child;case 12:return jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Bt(Jc,r._currentValue),r._currentValue=a,s!==null)if(qr(s.value,a)){if(s.children===i.children&&!Zn.current){e=Ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ei(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xp(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ve(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Xp(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,za(e,n),i=Tr(i),r=r(i),e.flags|=1,jn(t,e,r,n),e.child;case 14:return r=e.type,i=Lr(r,e.pendingProps),i=Lr(r.type,i),Ny(t,e,r,i,n);case 15:return Lb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),mc(t,e),e.tag=1,Qn(r)?(t=!0,Kc(e)):t=!1,za(e,n),Rb(e,r,i),Yp(e,r,i,n),Qp(null,e,r,!0,t,n);case 19:return jb(t,e,n);case 22:return Pb(t,e,n)}throw Error(ve(156,e.tag))};function t_(t,e){return D2(t,e)}function jT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new jT(t,e,n,r)}function Zg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zT(t){if(typeof t=="function")return Zg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gg)return 11;if(t===vg)return 14}return 2}function cs(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yc(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Zg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ea:return zs(n.children,i,s,e);case mg:a=8,i|=8;break;case wp:return t=Cr(12,n,e,i|2),t.elementType=wp,t.lanes=s,t;case xp:return t=Cr(13,n,e,i),t.elementType=xp,t.lanes=s,t;case bp:return t=Cr(19,n,e,i),t.elementType=bp,t.lanes=s,t;case f2:return cd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u2:a=10;break e;case c2:a=9;break e;case gg:a=11;break e;case vg:a=14;break e;case qi:a=16,r=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=Cr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zs(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function cd(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=f2,t.lanes=n,t.stateNode={isHidden:!1},t}function bh(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function _h(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nh(0),this.expirationTimes=nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qg(t,e,n,r,i,s,a,o,l){return t=new UT(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pg(s),t}function $T(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function n_(t){if(!t)return ds;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var n=t.type;if(Qn(n))return nb(t,n,e)}return e}function r_(t,e,n,r,i,s,a,o,l){return t=Qg(n,r,!0,t,i,s,a,o,l),t.context=n_(null),n=t.current,r=Un(),i=us(n),s=Ei(r,i),s.callback=e??null,os(n,s,i),t.current.lanes=i,eu(t,i,r),Jn(t,r),t}function fd(t,e,n,r){var i=e.current,s=Un(),a=us(i);return n=n_(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(i,e,a),t!==null&&(Wr(t,i,a,s),dc(t,i,a)),a}function cf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $y(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jg(t,e){$y(t,e),(t=t.alternate)&&$y(t,e)}function WT(){return null}var i_=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}dd.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));fd(t,e,null,null)};dd.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){fd(null,t,null,null)}),e[Ai]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=P2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&M2(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function HT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=cf(a);s.call(u)}}var a=r_(e,r,t,0,null,!1,!1,"",Wy);return t._reactRootContainer=a,t[Ai]=a.current,Al(t.nodeType===8?t.parentNode:t),Vs(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=cf(l);o.call(u)}}var l=Qg(t,0,!1,null,null,!1,!1,"",Wy);return t._reactRootContainer=l,t[Ai]=l.current,Al(t.nodeType===8?t.parentNode:t),Vs(function(){fd(e,l,n,r)}),l}function pd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=cf(a);o.call(l)}}fd(e,a,t,i)}else a=HT(n,e,t,i,r);return cf(a)}O2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zo(e.pendingLanes);n!==0&&(xg(e,n|1),Jn(e,Jt()),!(wt&6)&&(Za=Jt()+500,gs()))}break;case 13:Vs(function(){var r=Di(t,1);if(r!==null){var i=Un();Wr(r,t,1,i)}}),Jg(t,1)}};bg=function(t){if(t.tag===13){var e=Di(t,134217728);if(e!==null){var n=Un();Wr(e,t,134217728,n)}Jg(t,134217728)}};L2=function(t){if(t.tag===13){var e=us(t),n=Di(t,e);if(n!==null){var r=Un();Wr(n,t,e,r)}Jg(t,e)}};P2=function(){return Dt};F2=function(t,e){var n=Dt;try{return Dt=t,e()}finally{Dt=n}};Rp=function(t,e,n){switch(e){case"input":if(kp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=id(r);if(!i)throw Error(ve(90));h2(r),kp(r,i)}}}break;case"textarea":m2(t,n);break;case"select":e=n.value,e!=null&&Fa(t,!!n.multiple,e,!1)}};_2=Gg;E2=Vs;var VT={usingClientEntryPoint:!1,Events:[nu,Aa,id,x2,b2,Gg]},Co={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qT={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C2(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{ed=zu.inject(qT),ii=zu}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VT;yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(ve(200));return $T(t,e,null,n)};yr.createRoot=function(t,e){if(!tv(t))throw Error(ve(299));var n=!1,r="",i=i_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qg(t,1,!1,null,null,n,!1,r,i),t[Ai]=e.current,Al(t.nodeType===8?t.parentNode:t),new ev(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=C2(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return Vs(t)};yr.hydrate=function(t,e,n){if(!hd(e))throw Error(ve(200));return pd(null,t,e,!0,n)};yr.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=i_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=r_(e,null,t,1,n??null,i,!1,s,a),t[Ai]=e.current,Al(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dd(e)};yr.render=function(t,e,n){if(!hd(e))throw Error(ve(200));return pd(null,t,e,!1,n)};yr.unmountComponentAtNode=function(t){if(!hd(t))throw Error(ve(40));return t._reactRootContainer?(Vs(function(){pd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};yr.unstable_batchedUpdates=Gg;yr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hd(n))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return pd(t,e,n,!1,r)};yr.version="18.3.1-next-f1338f8080-20240426";function s_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s_)}catch(t){console.error(t)}}s_(),s2.exports=yr;var Ji=s2.exports;const XT=Gr(Ji),GT=X1({__proto__:null,default:XT},[Ji]);var a_,Hy=Ji;a_=Hy.createRoot,Hy.hydrateRoot;var o_={exports:{}},l_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=O;function YT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var KT=typeof Object.is=="function"?Object.is:YT,ZT=iu.useSyncExternalStore,QT=iu.useRef,JT=iu.useEffect,eN=iu.useMemo,tN=iu.useDebugValue;l_.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=QT(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=eN(function(){function l(d){if(!u){if(u=!0,f=d,d=r(d),i!==void 0&&a.hasValue){var v=a.value;if(i(v,d))return c=v}return c=d}if(v=c,KT(f,d))return v;var w=r(d);return i!==void 0&&i(v,w)?v:(f=d,c=w)}var u=!1,f,c,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var o=ZT(t,s[0],s[1]);return JT(function(){a.hasValue=!0,a.value=o},[o]),tN(o),o};o_.exports=l_;var nN=o_.exports,dr="default"in vp?_t:vp,Vy=Symbol.for("react-redux-context"),qy=typeof globalThis<"u"?globalThis:{};function rN(){if(!dr.createContext)return{};const t=qy[Vy]??(qy[Vy]=new Map);let e=t.get(dr.createContext);return e||(e=dr.createContext(null),t.set(dr.createContext,e)),e}var hs=rN(),iN=()=>{throw new Error("uSES not initialized!")};function nv(t=hs){return function(){return dr.useContext(t)}}var u_=nv(),c_=iN,sN=t=>{c_=t},aN=(t,e)=>t===e;function oN(t=hs){const e=t===hs?u_:nv(t),n=(r,i={})=>{const{equalityFn:s=aN,devModeChecks:a={}}=typeof i=="function"?{equalityFn:i}:i,{store:o,subscription:l,getServerState:u,stabilityCheck:f,identityFunctionCheck:c}=e();dr.useRef(!0);const h=dr.useCallback({[r.name](v){return r(v)}}[r.name],[r,f,a.stabilityCheck]),d=c_(l.addNestedSub,o.getState,u||o.getState,h,s);return dr.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var lN=oN();function uN(t){t()}function cN(){let t=null,e=null;return{clear(){t=null,e=null},notify(){uN(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Xy={notify(){},get:()=>[]};function fN(t,e){let n,r=Xy,i=0,s=!1;function a(w){f();const g=r.subscribe(w);let p=!1;return()=>{p||(p=!0,g(),c())}}function o(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function u(){return s}function f(){i++,n||(n=t.subscribe(l),r=cN())}function c(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Xy)}function h(){s||(s=!0,f())}function d(){s&&(s=!1,c())}const v={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>r};return v}var dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hN=typeof navigator<"u"&&navigator.product==="ReactNative",pN=dN||hN?dr.useLayoutEffect:dr.useEffect;function mN({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const a=dr.useMemo(()=>{const u=fN(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),o=dr.useMemo(()=>t.getState(),[t]);pN(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=e||hs;return dr.createElement(l.Provider,{value:a},n)}var gN=mN;function f_(t=hs){const e=t===hs?u_:nv(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var vN=f_();function yN(t=hs){const e=t===hs?vN:f_(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var wN=yN();sN(nN.useSyncExternalStoreWithSelector);function bn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xN=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gy=xN,Eh=()=>Math.random().toString(36).substring(7).split("").join("."),bN={INIT:`@@redux/INIT${Eh()}`,REPLACE:`@@redux/REPLACE${Eh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Eh()}`},ff=bN;function rv(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function d_(t,e,n){if(typeof t!="function")throw new Error(bn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bn(1));return n(d_)(t,e)}let r=t,i=e,s=new Map,a=s,o=0,l=!1;function u(){a===s&&(a=new Map,s.forEach((g,p)=>{a.set(p,g)}))}function f(){if(l)throw new Error(bn(3));return i}function c(g){if(typeof g!="function")throw new Error(bn(4));if(l)throw new Error(bn(5));let p=!0;u();const m=o++;return a.set(m,g),function(){if(p){if(l)throw new Error(bn(6));p=!1,u(),a.delete(m),s=null}}}function h(g){if(!rv(g))throw new Error(bn(7));if(typeof g.type>"u")throw new Error(bn(8));if(typeof g.type!="string")throw new Error(bn(17));if(l)throw new Error(bn(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=a).forEach(m=>{m()}),g}function d(g){if(typeof g!="function")throw new Error(bn(10));r=g,h({type:ff.REPLACE})}function v(){const g=c;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(bn(11));function m(){const k=p;k.next&&k.next(f())}return m(),{unsubscribe:g(m)}},[Gy](){return this}}}return h({type:ff.INIT}),{dispatch:h,subscribe:c,getState:f,replaceReducer:d,[Gy]:v}}function _N(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:ff.INIT})>"u")throw new Error(bn(12));if(typeof n(void 0,{type:ff.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bn(13))})}function EN(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{_N(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const u={};for(let f=0;f<r.length;f++){const c=r[f],h=n[c],d=a[c],v=h(d,o);if(typeof v>"u")throw o&&o.type,new Error(bn(14));u[c]=v,l=l||v!==d}return l=l||r.length!==Object.keys(a).length,l?u:a}}function df(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function kN(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(bn(15))};const a={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},o=t.map(l=>l(a));return s=df(...o)(i.dispatch),{...i,dispatch:s}}}function SN(t){return rv(t)&&"type"in t&&typeof t.type=="string"}var h_=Symbol.for("immer-nothing"),Yy=Symbol.for("immer-draftable"),gr=Symbol.for("immer-state");function Ur(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Qa=Object.getPrototypeOf;function qs(t){return!!t&&!!t[gr]}function Ni(t){var e;return t?p_(t)||Array.isArray(t)||!!t[Yy]||!!((e=t.constructor)!=null&&e[Yy])||gd(t)||vd(t):!1}var CN=Object.prototype.constructor.toString();function p_(t){if(!t||typeof t!="object")return!1;const e=Qa(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===CN}function hf(t,e){md(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function md(t){const e=t[gr];return e?e.type_:Array.isArray(t)?1:gd(t)?2:vd(t)?3:0}function cm(t,e){return md(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function m_(t,e,n){const r=md(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function AN(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function gd(t){return t instanceof Map}function vd(t){return t instanceof Set}function Cs(t){return t.copy_||t.base_}function fm(t,e){if(gd(t))return new Map(t);if(vd(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=p_(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[gr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Qa(t),r)}else{const r=Qa(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function iv(t,e=!1){return yd(t)||qs(t)||!Ni(t)||(md(t)>1&&(t.set=t.add=t.clear=t.delete=DN),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>iv(r,!0))),t}function DN(){Ur(2)}function yd(t){return Object.isFrozen(t)}var TN={};function Xs(t){const e=TN[t];return e||Ur(0,t),e}var Fl;function g_(){return Fl}function NN(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ky(t,e){e&&(Xs("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dm(t){hm(t),t.drafts_.forEach(RN),t.drafts_=null}function hm(t){t===Fl&&(Fl=t.parent_)}function Zy(t){return Fl=NN(Fl,t)}function RN(t){const e=t[gr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Qy(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[gr].modified_&&(dm(e),Ur(4)),Ni(t)&&(t=pf(e,t),e.parent_||mf(e,t)),e.patches_&&Xs("Patches").generateReplacementPatches_(n[gr].base_,t,e.patches_,e.inversePatches_)):t=pf(e,n,[]),dm(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==h_?t:void 0}function pf(t,e,n){if(yd(e))return e;const r=e[gr];if(!r)return hf(e,(i,s)=>Jy(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return mf(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),hf(s,(o,l)=>Jy(t,r,i,o,l,n,a)),mf(t,i,!1),n&&t.patches_&&Xs("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Jy(t,e,n,r,i,s,a){if(qs(i)){const o=s&&e&&e.type_!==3&&!cm(e.assigned_,r)?s.concat(r):void 0,l=pf(t,i,o);if(m_(n,r,l),qs(l))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(Ni(i)&&!yd(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;pf(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&mf(t,i)}}function mf(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iv(e,n)}function IN(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:g_(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=sv;n&&(i=[r],s=Ml);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var sv={get(t,e){if(e===gr)return t;const n=Cs(t);if(!cm(n,e))return ON(t,n,e);const r=n[e];return t.finalized_||!Ni(r)?r:r===kh(t.base_,e)?(Sh(t),t.copy_[e]=mm(r,t)):r},has(t,e){return e in Cs(t)},ownKeys(t){return Reflect.ownKeys(Cs(t))},set(t,e,n){const r=v_(Cs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=kh(Cs(t),e),s=i==null?void 0:i[gr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(AN(n,i)&&(n!==void 0||cm(t.base_,e)))return!0;Sh(t),pm(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return kh(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Sh(t),pm(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Cs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ur(11)},getPrototypeOf(t){return Qa(t.base_)},setPrototypeOf(){Ur(12)}},Ml={};hf(sv,(t,e)=>{Ml[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ml.deleteProperty=function(t,e){return Ml.set.call(this,t,e,void 0)};Ml.set=function(t,e,n){return sv.set.call(this,t[0],e,n,t[0])};function kh(t,e){const n=t[gr];return(n?Cs(n):t)[e]}function ON(t,e,n){var i;const r=v_(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function v_(t,e){if(!(e in t))return;let n=Qa(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Qa(n)}}function pm(t){t.modified_||(t.modified_=!0,t.parent_&&pm(t.parent_))}function Sh(t){t.copy_||(t.copy_=fm(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var LN=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(l=s,...u){return a.produce(l,f=>n.call(this,f,...u))}}typeof n!="function"&&Ur(6),r!==void 0&&typeof r!="function"&&Ur(7);let i;if(Ni(e)){const s=Zy(this),a=mm(e,void 0);let o=!0;try{i=n(a),o=!1}finally{o?dm(s):hm(s)}return Ky(s,r),Qy(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===h_&&(i=void 0),this.autoFreeze_&&iv(i,!0),r){const s=[],a=[];Xs("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Ur(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,n,(a,o)=>{r=a,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ni(t)||Ur(8),qs(t)&&(t=PN(t));const e=Zy(this),n=mm(t,void 0);return n[gr].isManual_=!0,hm(e),n}finishDraft(t,e){const n=t&&t[gr];(!n||!n.isManual_)&&Ur(9);const{scope_:r}=n;return Ky(r,e),Qy(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Xs("Patches").applyPatches_;return qs(t)?r(t,e):this.produce(t,i=>r(i,e))}};function mm(t,e){const n=gd(t)?Xs("MapSet").proxyMap_(t,e):vd(t)?Xs("MapSet").proxySet_(t,e):IN(t,e);return(e?e.scope_:g_()).drafts_.push(n),n}function PN(t){return qs(t)||Ur(10,t),y_(t)}function y_(t){if(!Ni(t)||yd(t))return t;const e=t[gr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=fm(t,e.scope_.immer_.useStrictShallowCopy_)}else n=fm(t,!0);return hf(n,(r,i)=>{m_(n,r,y_(i))}),e&&(e.finalized_=!1),n}var vr=new LN,w_=vr.produce;vr.produceWithPatches.bind(vr);vr.setAutoFreeze.bind(vr);vr.setUseStrictShallowCopy.bind(vr);vr.applyPatches.bind(vr);vr.createDraft.bind(vr);vr.finishDraft.bind(vr);function x_(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var FN=x_(),MN=x_,BN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?df:df.apply(null,arguments)},jN=t=>t&&typeof t.match=="function";function ll(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ai(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>SN(r)&&r.type===t,n}var b_=class $o extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$o.prototype)}static get[Symbol.species](){return $o}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $o(...e[0].concat(this)):new $o(...e.concat(this))}};function ew(t){return Ni(t)?w_(t,()=>{}):t}function tw(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(ai(10));const r=n.insert(e,t);return t.set(e,r),r}function zN(t){return typeof t=="boolean"}var UN=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new b_;return n&&(zN(n)?a.push(FN):a.push(MN(n.extraArgument))),a},$N="RTK_autoBatch",__=t=>e=>{setTimeout(e,t)},WN=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:__(10),HN=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?WN:t.type==="callback"?t.queueNotification:__(t.timeout),u=()=>{a=!1,s&&(s=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const c=()=>i&&f(),h=r.subscribe(c);return o.add(f),()=>{h(),o.delete(f)}},dispatch(f){var c;try{return i=!((c=f==null?void 0:f.meta)!=null&&c[$N]),s=!i,s&&(a||(a=!0,l(u))),r.dispatch(f)}finally{i=!0}}})},VN=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new b_(t);return r&&i.push(HN(typeof r=="object"?r:void 0)),i};function qN(t){const e=UN(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(rv(n))o=EN(n);else throw new Error(ai(1));let l;typeof r=="function"?l=r(e):l=e();let u=df;i&&(u=BN({trace:!1,...typeof i=="object"&&i}));const f=kN(...l),c=VN(f);let h=typeof a=="function"?a(c):c();const d=u(...h);return d_(o,s,d)}function E_(t){const e={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(ai(28));if(o in e)throw new Error(ai(29));return e[o]=a,i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function XN(t){return typeof t=="function"}function GN(t,e){let[n,r,i]=E_(e),s;if(XN(t))s=()=>ew(t());else{const o=ew(t);s=()=>o}function a(o=s(),l){let u=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,c)=>{if(c)if(qs(f)){const d=c(f,l);return d===void 0?f:d}else{if(Ni(f))return w_(f,h=>c(h,l));{const h=c(f,l);if(h===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return f},o)}return a.getInitialState=s,a}var YN=(t,e)=>jN(t)?t.match(e):t(e);function KN(...t){return e=>t.some(n=>YN(n,e))}var ZN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",QN=(t=21)=>{let e="",n=t;for(;n--;)e+=ZN[Math.random()*64|0];return e},JN=["name","message","stack","code"],Ch=class{constructor(t,e){Kd(this,"_type");this.payload=t,this.meta=e}},nw=class{constructor(t,e){Kd(this,"_type");this.payload=t,this.meta=e}},eR=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of JN)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},wd=(()=>{function t(e,n,r){const i=ll(e+"/fulfilled",(l,u,f,c)=>({payload:l,meta:{...c||{},arg:f,requestId:u,requestStatus:"fulfilled"}})),s=ll(e+"/pending",(l,u,f)=>({payload:void 0,meta:{...f||{},arg:u,requestId:l,requestStatus:"pending"}})),a=ll(e+"/rejected",(l,u,f,c,h)=>({payload:c,error:(r&&r.serializeError||eR)(l||"Rejected"),meta:{...h||{},arg:f,requestId:u,rejectedWithValue:!!c,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function o(l){return(u,f,c)=>{const h=r!=null&&r.idGenerator?r.idGenerator(l):QN(),d=new AbortController;let v,w;function g(m){w=m,d.abort()}const p=async function(){var k,_;let m;try{let x=(k=r==null?void 0:r.condition)==null?void 0:k.call(r,l,{getState:f,extra:c});if(nR(x)&&(x=await x),x===!1||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((A,P)=>{v=()=>{P({name:"AbortError",message:w||"Aborted"})},d.signal.addEventListener("abort",v)});u(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:c}))),m=await Promise.race([C,Promise.resolve(n(l,{dispatch:u,getState:f,extra:c,requestId:h,signal:d.signal,abort:g,rejectWithValue:(A,P)=>new Ch(A,P),fulfillWithValue:(A,P)=>new nw(A,P)})).then(A=>{if(A instanceof Ch)throw A;return A instanceof nw?i(A.payload,h,l,A.meta):i(A,h,l)})])}catch(x){m=x instanceof Ch?a(null,h,l,x.payload,x.meta):a(x,h,l)}finally{v&&d.signal.removeEventListener("abort",v)}return r&&!r.dispatchConditionRejection&&a.match(m)&&m.meta.condition||u(m),m}();return Object.assign(p,{abort:g,requestId:h,arg:l,unwrap(){return p.then(tR)}})}}return Object.assign(o,{pending:s,rejected:a,fulfilled:i,settled:KN(a,i),typePrefix:e})}return t.withTypes=()=>t,t})();function tR(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function nR(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var rR=Symbol.for("rtk-slice-createasyncthunk");function iR(t,e){return`${t}/${e}`}function sR({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[rR];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(ai(11));typeof process<"u";const o=(typeof i.reducers=="function"?i.reducers(lR()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(y,k){const _=typeof y=="string"?y:y.type;if(!_)throw new Error(ai(12));if(_ in u.sliceCaseReducersByType)throw new Error(ai(13));return u.sliceCaseReducersByType[_]=k,f},addMatcher(y,k){return u.sliceMatchers.push({matcher:y,reducer:k}),f},exposeAction(y,k){return u.actionCreators[y]=k,f},exposeCaseReducer(y,k){return u.sliceCaseReducersByName[y]=k,f}};l.forEach(y=>{const k=o[y],_={reducerName:y,type:iR(s,y),createNotation:typeof i.reducers=="function"};cR(k)?dR(_,k,f,e):uR(_,k,f)});function c(){const[y={},k=[],_=void 0]=typeof i.extraReducers=="function"?E_(i.extraReducers):[i.extraReducers],x={...y,...u.sliceCaseReducersByType};return GN(i.initialState,C=>{for(let A in x)C.addCase(A,x[A]);for(let A of u.sliceMatchers)C.addMatcher(A.matcher,A.reducer);for(let A of k)C.addMatcher(A.matcher,A.reducer);_&&C.addDefaultCase(_)})}const h=y=>y,d=new Map;let v;function w(y,k){return v||(v=c()),v(y,k)}function g(){return v||(v=c()),v.getInitialState()}function p(y,k=!1){function _(C){let A=C[y];return typeof A>"u"&&k&&(A=g()),A}function x(C=h){const A=tw(d,k,{insert:()=>new WeakMap});return tw(A,C,{insert:()=>{const P={};for(const[S,F]of Object.entries(i.selectors??{}))P[S]=aR(F,C,g,k);return P}})}return{reducerPath:y,getSelectors:x,get selectors(){return x(_)},selectSlice:_}}const m={name:s,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...p(a),injectInto(y,{reducerPath:k,..._}={}){const x=k??a;return y.inject({reducerPath:x,reducer:w},_),{...m,...p(x,!0)}}};return m}}function aR(t,e,n,r){function i(s,...a){let o=e(s);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return i.unwrapped=t,i}var oR=sR();function lR(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function uR({type:t,reducerName:e,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!fR(r))throw new Error(ai(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?ll(t,a):ll(t))}function cR(t){return t._reducerDefinitionType==="asyncThunk"}function fR(t){return t._reducerDefinitionType==="reducerWithPrepare"}function dR({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ai(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:u,options:f}=n,c=i(t,s,f);r.exposeAction(e,c),a&&r.addCase(c.fulfilled,a),o&&r.addCase(c.pending,o),l&&r.addCase(c.rejected,l),u&&r.addMatcher(c.settled,u),r.exposeCaseReducer(e,{fulfilled:a||Uu,pending:o||Uu,rejected:l||Uu,settled:u||Uu})}function Uu(){}function ai(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const xn=[];for(let t=0;t<256;++t)xn.push((t+256).toString(16).slice(1));function hR(t,e=0){return(xn[t[e+0]]+xn[t[e+1]]+xn[t[e+2]]+xn[t[e+3]]+"-"+xn[t[e+4]]+xn[t[e+5]]+"-"+xn[t[e+6]]+xn[t[e+7]]+"-"+xn[t[e+8]]+xn[t[e+9]]+"-"+xn[t[e+10]]+xn[t[e+11]]+xn[t[e+12]]+xn[t[e+13]]+xn[t[e+14]]+xn[t[e+15]]).toLowerCase()}let Ah;const pR=new Uint8Array(16);function mR(){if(!Ah){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ah=crypto.getRandomValues.bind(crypto)}return Ah(pR)}const gR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rw={randomUUID:gR};function vR(t,e,n){var i;if(rw.randomUUID&&!e&&!t)return rw.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??mR();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hR(r)}var gm={exports:{}},k_={exports:{}},yR=void 0,S_=function(t){return t!==yR&&t!==null},wR=S_,xR={object:!0,function:!0,undefined:!0},bR=function(t){return wR(t)?hasOwnProperty.call(xR,typeof t):!1},_R=bR,ER=function(t){if(!_R(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},kR=ER,SR=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!kR(t)},CR=SR,AR=/^\s*class[\s{/}]/,DR=Function.prototype.toString,TR=function(t){return!(!CR(t)||AR.test(DR.call(t)))},NR=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Dh,iw;function RR(){return iw||(iw=1,Dh=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Dh}var IR=function(){},OR=IR(),av=function(t){return t!==OR&&t!==null},Th,sw;function LR(){if(sw)return Th;sw=1;var t=av,e=Object.keys;return Th=function(n){return e(t(n)?Object(n):n)},Th}var Nh,aw;function PR(){return aw||(aw=1,Nh=RR()()?Object.keys:LR()),Nh}var Rh,ow;function FR(){if(ow)return Rh;ow=1;var t=av;return Rh=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},Rh}var Ih,lw;function MR(){if(lw)return Ih;lw=1;var t=PR(),e=FR(),n=Math.max;return Ih=function(r,i){var s,a,o=n(arguments.length,2),l;for(r=Object(e(r)),l=function(u){try{r[u]=i[u]}catch(f){s||(s=f)}},a=1;a<o;++a)i=arguments[a],t(i).forEach(l);if(s!==void 0)throw s;return r},Ih}var BR=NR()?Object.assign:MR(),jR=av,zR=Array.prototype.forEach,UR=Object.create,$R=function(t,e){var n;for(n in t)e[n]=t[n]},WR=function(t){var e=UR(null);return zR.call(arguments,function(n){jR(n)&&$R(Object(n),e)}),e},Oh="razdwatrzy",HR=function(){return typeof Oh.contains!="function"?!1:Oh.contains("dwa")===!0&&Oh.contains("foo")===!1},Lh,uw;function VR(){if(uw)return Lh;uw=1;var t=String.prototype.indexOf;return Lh=function(e){return t.call(this,e,arguments[1])>-1},Lh}var qR=HR()?String.prototype.contains:VR(),wc=S_,cw=TR,C_=BR,A_=WR,ul=qR,XR=k_.exports=function(t,e){var n,r,i,s,a;return arguments.length<2||typeof t!="string"?(s=e,e=t,t=null):s=arguments[2],wc(t)?(n=ul.call(t,"c"),r=ul.call(t,"e"),i=ul.call(t,"w")):(n=i=!0,r=!1),a={value:e,configurable:n,enumerable:r,writable:i},s?C_(A_(s),a):a};XR.gs=function(t,e,n){var r,i,s,a;return typeof t!="string"?(s=n,n=e,e=t,t=null):s=arguments[3],wc(e)?cw(e)?wc(n)?cw(n)||(s=n,n=void 0):n=void 0:(s=e,e=n=void 0):e=void 0,wc(t)?(r=ul.call(t,"c"),i=ul.call(t,"e")):(r=!0,i=!1),a={get:e,set:n,configurable:r,enumerable:i},s?C_(A_(s),a):a};var GR=k_.exports,YR=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=GR,r=YR,i=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,l=Object.defineProperties,u=Object.prototype.hasOwnProperty,f={configurable:!0,enumerable:!1,writable:!0},c,h,d,v,w,g,p;c=function(m,y){var k;return r(y),u.call(this,"__ee__")?k=this.__ee__:(k=f.value=a(null),o(this,"__ee__",f),f.value=null),k[m]?typeof k[m]=="object"?k[m].push(y):k[m]=[k[m],y]:k[m]=y,this},h=function(m,y){var k,_;return r(y),_=this,c.call(this,m,k=function(){d.call(_,m,k),i.call(y,this,arguments)}),k.__eeOnceListener__=y,this},d=function(m,y){var k,_,x,C;if(r(y),!u.call(this,"__ee__"))return this;if(k=this.__ee__,!k[m])return this;if(_=k[m],typeof _=="object")for(C=0;x=_[C];++C)(x===y||x.__eeOnceListener__===y)&&(_.length===2?k[m]=_[C?0:1]:_.splice(C,1));else(_===y||_.__eeOnceListener__===y)&&delete k[m];return this},v=function(m){var y,k,_,x,C;if(u.call(this,"__ee__")&&(x=this.__ee__[m],!!x))if(typeof x=="object"){for(k=arguments.length,C=new Array(k-1),y=1;y<k;++y)C[y-1]=arguments[y];for(x=x.slice(),y=0;_=x[y];++y)i.call(_,this,C)}else switch(arguments.length){case 1:s.call(x,this);break;case 2:s.call(x,this,arguments[1]);break;case 3:s.call(x,this,arguments[1],arguments[2]);break;default:for(k=arguments.length,C=new Array(k-1),y=1;y<k;++y)C[y-1]=arguments[y];i.call(x,this,C)}},w={on:c,once:h,off:d,emit:v},g={on:n(c),once:n(h),off:n(d),emit:n(v)},p=l({},g),t.exports=e=function(m){return m==null?a(p):l(Object(m),g)},e.methods=w})(gm,gm.exports);var KR=gm.exports;const fi=Gr(KR);var vs={},ys={};function ZR(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var r=0;r<t.length;r++)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];if(e.call(void 0,i,r,t))return i}}function ov(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var D_=ov({HTML:"text/html",isHTML:function(t){return t===D_.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),T_=ov({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===T_.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ys.find=ZR;ys.freeze=ov;ys.MIME_TYPE=D_;ys.NAMESPACE=T_;var N_=ys,oi=N_.find,Bl=N_.NAMESPACE;function QR(t){return t!==""}function JR(t){return t?t.split(/[\t\n\f\r ]+/).filter(QR):[]}function eI(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function fw(t){if(!t)return[];var e=JR(t);return Object.keys(e.reduce(eI,{}))}function tI(t){return function(e){return t&&t.indexOf(e)!==-1}}function su(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function er(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};var r=i;i.prototype=e.prototype,i=new i,su(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var tr={},Hr=tr.ELEMENT_NODE=1,Ja=tr.ATTRIBUTE_NODE=2,gf=tr.TEXT_NODE=3,R_=tr.CDATA_SECTION_NODE=4,I_=tr.ENTITY_REFERENCE_NODE=5,nI=tr.ENTITY_NODE=6,O_=tr.PROCESSING_INSTRUCTION_NODE=7,L_=tr.COMMENT_NODE=8,P_=tr.DOCUMENT_NODE=9,F_=tr.DOCUMENT_TYPE_NODE=10,Ri=tr.DOCUMENT_FRAGMENT_NODE=11,rI=tr.NOTATION_NODE=12,Fn={},wn={};Fn.INDEX_SIZE_ERR=(wn[1]="Index size error",1);Fn.DOMSTRING_SIZE_ERR=(wn[2]="DOMString size error",2);var Yn=Fn.HIERARCHY_REQUEST_ERR=(wn[3]="Hierarchy request error",3);Fn.WRONG_DOCUMENT_ERR=(wn[4]="Wrong document",4);Fn.INVALID_CHARACTER_ERR=(wn[5]="Invalid character",5);Fn.NO_DATA_ALLOWED_ERR=(wn[6]="No data allowed",6);Fn.NO_MODIFICATION_ALLOWED_ERR=(wn[7]="No modification allowed",7);var M_=Fn.NOT_FOUND_ERR=(wn[8]="Not found",8);Fn.NOT_SUPPORTED_ERR=(wn[9]="Not supported",9);var dw=Fn.INUSE_ATTRIBUTE_ERR=(wn[10]="Attribute in use",10);Fn.INVALID_STATE_ERR=(wn[11]="Invalid state",11);Fn.SYNTAX_ERR=(wn[12]="Syntax error",12);Fn.INVALID_MODIFICATION_ERR=(wn[13]="Invalid modification",13);Fn.NAMESPACE_ERR=(wn[14]="Invalid namespace",14);Fn.INVALID_ACCESS_ERR=(wn[15]="Invalid access",15);function en(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,wn[t]),this.message=wn[t],Error.captureStackTrace&&Error.captureStackTrace(this,en);return n.code=t,e&&(this.message=this.message+": "+e),n}en.prototype=Error.prototype;su(Fn,en);function ki(){}ki.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)La(this[r],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function eo(t,e){this._node=t,this._refresh=e,lv(this)}function lv(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(Y_(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var r=n.length;r in t;r++)Object.prototype.hasOwnProperty.call(t,r)&&delete t[r];su(n,t),t._inc=e}}eo.prototype.item=function(t){return lv(this),this[t]||null};er(eo,ki);function vf(){}function B_(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function hw(t,e,n,r){if(r?e[B_(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&U_(i,t,r),iI(i,t,n))}}function pw(t,e,n){var r=B_(e,n);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var s=t.ownerDocument;s&&(U_(s,t,n),n.ownerElement=null)}}else throw new en(M_,new Error(t.tagName+"@"+n))}vf.prototype={length:0,item:ki.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new en(dw);var n=this.getNamedItem(t.nodeName);return hw(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new en(dw);return n=this.getNamedItemNS(t.namespaceURI,t.localName),hw(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return pw(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return pw(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function j_(){}j_.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var r=new au;if(r.implementation=this,r.childNodes=new ki,r.doctype=n||null,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new xd;return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=n||"",r}};function Tt(){}Tt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return yf(this,t,e)},replaceChild:function(t,e){yf(this,t,e,W_),e&&this.removeChild(e)},removeChild:function(t){return $_(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return vm(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==gf&&t.nodeType==gf?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===t)return r}e=e.nodeType==Ja?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==Ja?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function z_(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}su(tr,Tt);su(tr,Tt.prototype);function jl(t,e){if(e(t))return!0;if(t=t.firstChild)do if(jl(t,e))return!0;while(t=t.nextSibling)}function au(){this.ownerDocument=this}function iI(t,e,n){t&&t._inc++;var r=n.namespaceURI;r===Bl.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function U_(t,e,n,r){t&&t._inc++;var i=n.namespaceURI;i===Bl.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function uv(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s,delete r[r.length]}}}function $_(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,uv(t.ownerDocument,t),e}function sI(t){return t&&(t.nodeType===Tt.DOCUMENT_NODE||t.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||t.nodeType===Tt.ELEMENT_NODE)}function aI(t){return t&&(li(t)||cv(t)||Ii(t)||t.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||t.nodeType===Tt.COMMENT_NODE||t.nodeType===Tt.PROCESSING_INSTRUCTION_NODE)}function Ii(t){return t&&t.nodeType===Tt.DOCUMENT_TYPE_NODE}function li(t){return t&&t.nodeType===Tt.ELEMENT_NODE}function cv(t){return t&&t.nodeType===Tt.TEXT_NODE}function mw(t,e){var n=t.childNodes||[];if(oi(n,li)||Ii(e))return!1;var r=oi(n,Ii);return!(e&&r&&n.indexOf(r)>n.indexOf(e))}function gw(t,e){var n=t.childNodes||[];function r(s){return li(s)&&s!==e}if(oi(n,r))return!1;var i=oi(n,Ii);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function oI(t,e,n){if(!sI(t))throw new en(Yn,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new en(M_,"child not in parent");if(!aI(e)||Ii(e)&&t.nodeType!==Tt.DOCUMENT_NODE)throw new en(Yn,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function lI(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(li);if(s.length>1||oi(i,cv))throw new en(Yn,"More than one element or text in fragment");if(s.length===1&&!mw(t,n))throw new en(Yn,"Element in fragment can not be inserted before doctype")}if(li(e)&&!mw(t,n))throw new en(Yn,"Only one element can be added and only after doctype");if(Ii(e)){if(oi(r,Ii))throw new en(Yn,"Only one doctype is allowed");var a=oi(r,li);if(n&&r.indexOf(a)<r.indexOf(n))throw new en(Yn,"Doctype can only be inserted before an element");if(!n&&a)throw new en(Yn,"Doctype can not be appended since element is present")}}function W_(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(li);if(s.length>1||oi(i,cv))throw new en(Yn,"More than one element or text in fragment");if(s.length===1&&!gw(t,n))throw new en(Yn,"Element in fragment can not be inserted before doctype")}if(li(e)&&!gw(t,n))throw new en(Yn,"Only one element can be added and only after doctype");if(Ii(e)){let l=function(u){return Ii(u)&&u!==n};var o=l;if(oi(r,l))throw new en(Yn,"Only one doctype is allowed");var a=oi(r,li);if(n&&r.indexOf(a)<r.indexOf(n))throw new en(Yn,"Doctype can only be inserted before an element")}}function yf(t,e,n,r){oI(t,e,n),t.nodeType===Tt.DOCUMENT_NODE&&(r||lI)(t,e,n);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Ri){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=n?n.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=n,o?o.nextSibling=s:t.firstChild=s,n==null?t.lastChild=a:n.previousSibling=a;do s.parentNode=t;while(s!==a&&(s=s.nextSibling));return uv(t.ownerDocument||t,t),e.nodeType==Ri&&(e.firstChild=e.lastChild=null),e}function uI(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,uv(t.ownerDocument,t,e),e}au.prototype={nodeName:"#document",nodeType:P_,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Ri){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return yf(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Hr&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),$_(this,t)},replaceChild:function(t,e){yf(this,t,e,W_),t.ownerDocument=this,e&&this.removeChild(e),li(t)&&(this.documentElement=t)},importNode:function(t,e){return G_(this,t,e)},getElementById:function(t){var e=null;return jl(this.documentElement,function(n){if(n.nodeType==Hr&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=fw(t);return new eo(this,function(n){var r=[];return e.length>0&&jl(n.documentElement,function(i){if(i!==n&&i.nodeType===Hr){var s=i.getAttribute("class");if(s){var a=t===s;if(!a){var o=fw(s);a=e.every(tI(o))}a&&r.push(i)}}}),r})},createElement:function(t){var e=new Gs;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new ki;var n=e.attributes=new vf;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new bd;return t.ownerDocument=this,t.childNodes=new ki,t},createTextNode:function(t){var e=new fv;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new dv;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new hv;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new mv;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new wf;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new pv;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new Gs,r=e.split(":"),i=n.attributes=new vf;return n.childNodes=new ki,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new wf,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}};er(au,Tt);function Gs(){this._nsMap={}}Gs.prototype={nodeType:Hr,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Ri?this.insertBefore(t,null):uI(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new eo(this,function(e){var n=[];return jl(e,function(r){r!==e&&r.nodeType==Hr&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new eo(this,function(n){var r=[];return jl(n,function(i){i!==n&&i.nodeType===Hr&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};au.prototype.getElementsByTagName=Gs.prototype.getElementsByTagName;au.prototype.getElementsByTagNameNS=Gs.prototype.getElementsByTagNameNS;er(Gs,Tt);function wf(){}wf.prototype.nodeType=Ja;er(wf,Tt);function ou(){}ou.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(wn[Yn])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),i=this.data.substring(t+e);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}};er(ou,Tt);function fv(){}fv.prototype={nodeName:"#text",nodeType:gf,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};er(fv,ou);function dv(){}dv.prototype={nodeName:"#comment",nodeType:L_};er(dv,ou);function hv(){}hv.prototype={nodeName:"#cdata-section",nodeType:R_};er(hv,ou);function xd(){}xd.prototype.nodeType=F_;er(xd,Tt);function H_(){}H_.prototype.nodeType=rI;er(H_,Tt);function V_(){}V_.prototype.nodeType=nI;er(V_,Tt);function pv(){}pv.prototype.nodeType=I_;er(pv,Tt);function bd(){}bd.prototype.nodeName="#document-fragment";bd.prototype.nodeType=Ri;er(bd,Tt);function mv(){}mv.prototype.nodeType=O_;er(mv,Tt);function q_(){}q_.prototype.serializeToString=function(t,e,n){return X_.call(t,e,n)};Tt.prototype.toString=X_;function X_(t,e){var n=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,s=r.namespaceURI;if(s&&i==null){var i=r.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return La(this,n,t,e,a),n.join("")}function vw(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!i||r==="xml"&&i===Bl.XML||i===Bl.XMLNS)return!1;for(var s=n.length;s--;){var a=n[s];if(a.prefix===r)return a.namespace!==i}return!0}function Ph(t,e,n){t.push(" ",e,'="',n.replace(/[<&"]/g,z_),'"')}function La(t,e,n,r,i){if(i||(i=[]),r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Hr:var s=t.attributes,a=s.length,p=t.firstChild,o=t.tagName;n=Bl.isHTML(t.namespaceURI)||n;var l=o;if(!n&&!t.prefix&&t.namespaceURI){for(var u,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){u=s.item(f).value;break}if(!u)for(var c=i.length-1;c>=0;c--){var h=i[c];if(h.prefix===""&&h.namespace===t.namespaceURI){u=h.namespace;break}}if(u!==t.namespaceURI)for(var c=i.length-1;c>=0;c--){var h=i[c];if(h.namespace===t.namespaceURI){h.prefix&&(l=h.prefix+":"+o);break}}}e.push("<",l);for(var d=0;d<a;d++){var v=s.item(d);v.prefix=="xmlns"?i.push({prefix:v.localName,namespace:v.value}):v.nodeName=="xmlns"&&i.push({prefix:"",namespace:v.value})}for(var d=0;d<a;d++){var v=s.item(d);if(vw(v,n,i)){var w=v.prefix||"",g=v.namespaceURI;Ph(e,w?"xmlns:"+w:"xmlns",g),i.push({prefix:w,namespace:g})}La(v,e,n,r,i)}if(o===l&&vw(t,n,i)){var w=t.prefix||"",g=t.namespaceURI;Ph(e,w?"xmlns:"+w:"xmlns",g),i.push({prefix:w,namespace:g})}if(p||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),n&&/^script$/i.test(o))for(;p;)p.data?e.push(p.data):La(p,e,n,r,i.slice()),p=p.nextSibling;else for(;p;)La(p,e,n,r,i.slice()),p=p.nextSibling;e.push("</",l,">")}else e.push("/>");return;case P_:case Ri:for(var p=t.firstChild;p;)La(p,e,n,r,i.slice()),p=p.nextSibling;return;case Ja:return Ph(e,t.name,t.value);case gf:return e.push(t.data.replace(/[<&]/g,z_).replace(/]]>/g,"]]&gt;"));case R_:return e.push("<![CDATA[",t.data,"]]>");case L_:return e.push("<!--",t.data,"-->");case F_:var m=t.publicId,y=t.systemId;if(e.push("<!DOCTYPE ",t.name),m)e.push(" PUBLIC ",m),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var k=t.internalSubset;k&&e.push(" [",k,"]"),e.push(">")}return;case O_:return e.push("<?",t.target," ",t.data,"?>");case I_:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function G_(t,e,n){var r;switch(e.nodeType){case Hr:r=e.cloneNode(!1),r.ownerDocument=t;case Ri:break;case Ja:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(G_(t,i,n)),i=i.nextSibling;return r}function vm(t,e,n){var r=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new ki),r.ownerDocument=t,r.nodeType){case Hr:var a=e.attributes,o=r.attributes=new vf,l=a.length;o._ownerElement=r;for(var u=0;u<l;u++)r.setAttributeNode(vm(t,a.item(u),!0));break;case Ja:n=!0}if(n)for(var f=e.firstChild;f;)r.appendChild(vm(t,f,n)),f=f.nextSibling;return r}function Y_(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Hr:case Ri:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var qU=t;Object.defineProperty(eo.prototype,"length",{get:function(){return lv(this),this.$$length}}),Object.defineProperty(Tt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Hr:case Ri:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Y_=function(e,n,r){e["$$"+n]=r}}}catch{}vs.DocumentType=xd;vs.DOMException=en;vs.DOMImplementation=j_;vs.Element=Gs;vs.Node=Tt;vs.NodeList=ki;vs.XMLSerializer=q_;var lu={},K_={};(function(t){var e=ys.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES})(K_);var gv={},zl=ys.NAMESPACE,ym=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,yw=new RegExp("[\\-\\.0-9"+ym.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ww=new RegExp("^"+ym.source+yw.source+"*(?::"+ym.source+yw.source+"*)?$"),Ao=0,Ui=1,sa=2,Do=3,aa=4,oa=5,To=6,$u=7;function to(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,to)}to.prototype=new Error;to.prototype.name=to.name;function Z_(){}Z_.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),Q_(e,e={}),cI(t,e,n,r,this.errorHandler),r.endDocument()}};function cI(t,e,n,r,i){function s(Q){if(Q>65535){Q-=65536;var Z=55296+(Q>>10),$=56320+(Q&1023);return String.fromCharCode(Z,$)}else return String.fromCharCode(Q)}function a(Q){var Z=Q.slice(1,-1);return Z in n?n[Z]:Z.charAt(0)==="#"?s(parseInt(Z.substr(1).replace("x","0x"))):(i.error("entity not found:"+Q),Q)}function o(Q){if(Q>w){var Z=t.substring(w,Q).replace(/&#?\w+;/g,a);h&&l(w),r.characters(Z,0,Q-w),w=Q}}function l(Q,Z){for(;Q>=f&&(Z=c.exec(t));)u=Z.index,f=u+Z[0].length,h.lineNumber++;h.columnNumber=Q-u+1}for(var u=0,f=0,c=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,d=[{currentNSMap:e}],v={},w=0;;){try{var g=t.indexOf("<",w);if(g<0){if(!t.substr(w).match(/^\s*$/)){var p=r.doc,m=p.createTextNode(t.substr(w));p.appendChild(m),r.currentElement=m}return}switch(g>w&&o(g),t.charAt(g+1)){case"/":var F=t.indexOf(">",g+3),y=t.substring(g+2,F).replace(/[ \t\n\r]+$/g,""),k=d.pop();F<0?(y=t.substring(g+2).replace(/[\s<].*/,""),i.error("end tag name: "+y+" is not complete:"+k.tagName),F=g+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),i.error("end tag name: "+y+" maybe not complete"),F=g+1+y.length);var _=k.localNSMap,x=k.tagName==y,C=x||k.tagName&&k.tagName.toLowerCase()==y.toLowerCase();if(C){if(r.endElement(k.uri,k.localName,y),_)for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&r.endPrefixMapping(A);x||i.fatalError("end tag name: "+y+" is not match the current start tagName:"+k.tagName)}else d.push(k);F++;break;case"?":h&&l(g),F=mI(t,g,r);break;case"!":h&&l(g),F=pI(t,g,r,i);break;default:h&&l(g);var P=new J_,S=d[d.length-1].currentNSMap,F=fI(t,g,P,S,a,i),z=P.length;if(!P.closed&&hI(t,F,P.tagName,v)&&(P.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),h&&z){for(var ie=xw(h,{}),te=0;te<z;te++){var K=P[te];l(K.offset),K.locator=xw(h,{})}r.locator=ie,bw(P,r,S)&&d.push(P),r.locator=h}else bw(P,r,S)&&d.push(P);zl.isHTML(P.uri)&&!P.closed?F=dI(t,F,P.tagName,a,r):F++}}catch(Q){if(Q instanceof to)throw Q;i.error("element parse error: "+Q),F=-1}F>w?w=F:o(Math.max(g,w)+1)}}function xw(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function fI(t,e,n,r,i,s){function a(h,d,v){n.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),n.addValue(h,d,v)}for(var o,l,u=++e,f=Ao;;){var c=t.charAt(u);switch(c){case"=":if(f===Ui)o=t.slice(e,u),f=Do;else if(f===sa)f=Do;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===Do||f===Ui)if(f===Ui&&(s.warning('attribute value must after "="'),o=t.slice(e,u)),e=u+1,u=t.indexOf(c,e),u>0)l=t.slice(e,u).replace(/&#?\w+;/g,i),a(o,l,e-1),f=oa;else throw new Error("attribute value no end '"+c+"' match");else if(f==aa)l=t.slice(e,u).replace(/&#?\w+;/g,i),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+c+")!!"),e=u+1,f=oa;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Ao:n.setTagName(t.slice(e,u));case oa:case To:case $u:f=$u,n.closed=!0;case aa:case Ui:break;case sa:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==Ao&&n.setTagName(t.slice(e,u)),u;case">":switch(f){case Ao:n.setTagName(t.slice(e,u));case oa:case To:case $u:break;case aa:case Ui:l=t.slice(e,u),l.slice(-1)==="/"&&(n.closed=!0,l=l.slice(0,-1));case sa:f===sa&&(l=o),f==aa?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l.replace(/&#?\w+;/g,i),e)):((!zl.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case Do:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(f){case Ao:n.setTagName(t.slice(e,u)),f=To;break;case Ui:o=t.slice(e,u),f=sa;break;case aa:var l=t.slice(e,u).replace(/&#?\w+;/g,i);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case oa:f=To;break}else switch(f){case sa:n.tagName,(!zl.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,f=Ui;break;case oa:s.warning('attribute space is required"'+o+'"!!');case To:f=Ui,e=u;break;case Do:f=aa,e=u;break;case $u:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function bw(t,e,n){for(var r=t.tagName,i=null,c=t.length;c--;){var s=t[c],a=s.qName,o=s.value,h=a.indexOf(":");if(h>0)var l=s.prefix=a.slice(0,h),u=a.slice(h+1),f=l==="xmlns"&&u;else u=a,l=null,f=a==="xmlns"&&"";s.localName=u,f!==!1&&(i==null&&(i={},Q_(n,n={})),n[f]=i[f]=o,s.uri=zl.XMLNS,e.startPrefixMapping(f,o))}for(var c=t.length;c--;){s=t[c];var l=s.prefix;l&&(l==="xml"&&(s.uri=zl.XML),l!=="xmlns"&&(s.uri=n[l||""]))}var h=r.indexOf(":");h>0?(l=t.prefix=r.slice(0,h),u=t.localName=r.slice(h+1)):(l=null,u=t.localName=r);var d=t.uri=n[l||""];if(e.startElement(d,u,r,t),t.closed){if(e.endElement(d,u,r),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=n,t.localNSMap=i,!0}function dI(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),s)}return e+1}function hI(t,e,n,r){var i=r[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function Q_(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function pI(t,e,n,r){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var a=gI(t,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,f=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],f=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var c=a[o-1];return n.startDTD(l,u,f),n.endDTD(),c.index+c[0].length}}return-1}function mI(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function J_(){this.attributeNames={}}J_.prototype={setTagName:function(t){if(!ww.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!ww.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function gI(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}gv.XMLReader=Z_;gv.ParseError=to;var vI=ys,vv=vs,_w=K_,eE=gv,yI=vv.DOMImplementation,Ew=vI.NAMESPACE,wI=eE.ParseError,xI=eE.XMLReader;function tE(t){this.options=t||{locator:{}}}tE.prototype.parseFromString=function(t,e){var n=this.options,r=new xI,i=n.domBuilder||new uu,s=n.errorHandler,a=n.locator,o=n.xmlns||{},l=/\/x?html?$/.test(e),u=l?_w.HTML_ENTITIES:_w.XML_ENTITIES;return a&&i.setDocumentLocator(a),r.errorHandler=bI(s,i,a),r.domBuilder=n.domBuilder||i,l&&(o[""]=Ew.HTML),o.xml=o.xml||Ew.XML,t&&typeof t=="string"?r.parse(t,o,u):r.errorHandler.error("invalid doc source"),i.doc};function bI(t,e,n){if(!t){if(e instanceof uu)return e;t=e}var r={},i=t instanceof Function;n=n||{};function s(a){var o=t[a];!o&&i&&(o=t.length==2?function(l){t(a,l)}:t),r[a]=o&&function(l){o("[xmldom "+a+"]	"+l+wm(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function uu(){this.cdata=!1}function la(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}uu.prototype={startDocument:function(){this.doc=new yI().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),a=r.length;Wu(this,s),this.currentElement=s,this.locator&&la(this.locator,s);for(var o=0;o<a;o++){var t=r.getURI(o),l=r.getValue(o),n=r.getQName(o),u=i.createAttributeNS(t,n);this.locator&&la(r.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&la(this.locator,n),Wu(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=kw.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&la(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=kw.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&la(this.locator,r),Wu(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&la(this.locator,i),Wu(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,wm(this.locator))},error:function(t){console.error("[xmldom error]	"+t,wm(this.locator))},fatalError:function(t){throw new wI(t,this.locator)}};function wm(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function kw(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){uu.prototype[t]=function(){return null}});function Wu(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}lu.__DOMHandler=uu;lu.DOMParser=tE;lu.DOMImplementation=vv.DOMImplementation;lu.XMLSerializer=vv.XMLSerializer;var nE=lu.DOMParser;const yv=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,_I=1,EI=3,rE=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function _d(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?r:r&7|8).toString(16)});return e}function kI(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function iE(t){return!!(t&&t.nodeType==1)}function Kt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function sE(t){let e=parseFloat(t);return Kt(t)===!1?!1:typeof t=="string"&&t.indexOf(".")>-1?!0:Math.floor(e)!==e}function ma(t){var e=["Webkit","webkit","Moz","O","ms"],n=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=t.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return t;for(var s=0;s<i;s++)if(typeof document.body.style[n[s]+r]<"u")return n[s]+r;return t}function aE(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)t[i]===void 0&&(t[i]=r[i])}return t}function An(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){n&&Object.getOwnPropertyNames(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}),t}function SI(t,e,n){var r=no(t,e,n);return e.splice(r,0,t),r}function no(t,e,n,r,i){var s=r||0,a=i||e.length,o=parseInt(s+(a-s)/2),l;return n||(n=function(u,f){if(u>f)return 1;if(u<f)return-1;if(u==f)return 0}),a-s<=0?o:(l=n(e[o],t),a-s===1?l>=0?o:o+1:l===0?o:l===-1?no(t,e,n,o,a):no(t,e,n,s,o))}function xf(t,e,n,r,i){var s=r||0,a=i||e.length,o=parseInt(s+(a-s)/2),l;return n||(n=function(u,f){if(u>f)return 1;if(u<f)return-1;if(u==f)return 0}),a-s<=0?-1:(l=n(e[o],t),a-s===1?l===0?o:-1:l===0?o:l===-1?xf(t,e,n,o,a):xf(t,e,n,s,o))}function xc(t){var e=window.getComputedStyle(t),n=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(a){i+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function bf(t){var e=window.getComputedStyle(t),n=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(a){i+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function xm(t){let e,n=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){let r=n.createRange();r.selectNodeContents(t),e=r.getBoundingClientRect()}else e=t.getBoundingClientRect();return e}function _f(){var t=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function wv(t,e){for(var n=t.parentNode,r=n.childNodes,i,s=-1,a=0;a<r.length&&(i=r[a],i.nodeType===e&&s++,i!=t);a++);return s}function CI(t){return wv(t,EI)}function oE(t){return wv(t,_I)}function Ul(t){return["xml","opf","ncx"].indexOf(t)>-1}function lE(t,e){return new Blob([t],{type:e})}function Ef(t,e){var n,r=lE(t,e);return n=rE.createObjectURL(r),n}function uE(t){return rE.revokeObjectURL(t)}function bm(t,e){var n,r;if(typeof t=="string")return n=btoa(t),r="data:"+e+";base64,"+n,r}function cE(t){return Object.prototype.toString.call(t).slice(8,-1)}function ui(t,e,n){var r,i;return typeof DOMParser>"u"||n?i=nE:i=DOMParser,t.charCodeAt(0)===65279&&(t=t.slice(1)),r=new i().parseFromString(t,e),r}function It(t,e){var n;if(!t)throw new Error("No Element Provided");if(typeof t.querySelector<"u")return t.querySelector(e);if(n=t.getElementsByTagName(e),n.length)return n[0]}function Oi(t,e){return typeof t.querySelector<"u"?t.querySelectorAll(e):t.getElementsByTagName(e)}function ga(t,e,n){var r,i;if(typeof t.querySelector<"u"){e+="[";for(var s in n)e+=s+"~='"+n[s]+"'";return e+="]",t.querySelector(e)}else if(r=t.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(a){for(var o in n)if(a.getAttribute(o)===n[o])return!0;return!1}),i)return i[0]}function kf(t,e){var n=t.ownerDocument||t;typeof n.createTreeWalker<"u"?fE(t,e,NodeFilter.SHOW_TEXT):xv(t,function(r){r&&r.nodeType===3&&e(r)})}function fE(t,e,n){var r=document.createTreeWalker(t,n,null,!1);let i;for(;i=r.nextNode();)e(i)}function xv(t,e){if(e(t))return!0;if(t=t.firstChild,t)do{if(xv(t,e))return!0;t=t.nextSibling}while(t)}function dE(t){return new Promise(function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onloadend=function(){e(r.result)}})}function pt(){this.resolve=null,this.reject=null,this.id=_d(),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),Object.freeze(this)}function Sf(t,e,n){var r;if(typeof t.querySelector<"u"&&(r=t.querySelector(`${e}[*|type="${n}"]`)),!r||r.length===0){r=Oi(t,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===n||r[i].getAttribute("epub:type")===n)return r[i]}else return r}function _m(t){for(var e=[],n=t.childNodes,r=0;r<n.length;r++){let i=n[r];i.nodeType===1&&e.push(i)}return e}function Em(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}function va(t,e,n){for(var r=[],i=t.childNodes,s=0;s<i.length;s++){let a=i[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(n)return a;r.push(a)}}if(!n)return r}function AI(t,e){let n;if(!(t===null||e===""))for(n=t.parentNode;n.nodeType===1;){if(n.tagName.toLowerCase()===e)return n;n=n.parentNode}}class hE{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,n){this.startContainer=e,this.startOffset=n,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,n){this.endContainer=e,this.endOffset=n,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let n=e.parentNode,r=Array.prototype.indexOf.call(n.childNodes,e);this.setStart(n,r),this.setEnd(n,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let n=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,n)}_commonAncestorContainer(e,n){var r=Em(e||this.startContainer),i=Em(n||this.endContainer);if(r[0]==i[0]){for(var s=0;s<r.length;s++)if(r[s]!=i[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const DI=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:hE,blob2base64:dE,borders:bf,bounds:xc,createBase64Url:bm,createBlob:lE,createBlobUrl:Ef,defaults:aE,defer:pt,documentHeight:kI,extend:An,filterChildren:va,findChildren:_m,getParentByTagName:AI,indexOfElementNode:oE,indexOfNode:wv,indexOfSorted:xf,indexOfTextNode:CI,insert:SI,isElement:iE,isFloat:sE,isNumber:Kt,isXml:Ul,locationOf:no,nodeBounds:xm,parents:Em,parse:ui,prefixed:ma,qs:It,qsa:Oi,qsp:ga,querySelectorByType:Sf,requestAnimationFrame:yv,revokeBlobUrl:uE,sprint:kf,treeWalker:fE,type:cE,uuid:_d,walk:xv,windowBounds:_f},Symbol.toStringTag,{value:"Module"}));if(!pE)var pE={cwd:function(){return"/"}};function Zr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+t)}function Sw(t,e){for(var n="",r=-1,i=0,s,a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(r===a-1||i===1))if(r!==a-1&&i===2){if(n.length<2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){for(var o=n.length-1,l=o;l>=0&&n.charCodeAt(l)!==47;--l);if(l!==o){l===-1?n="":n=n.slice(0,l),r=a,i=0;continue}}else if(n.length===2||n.length===1){n="",r=a,i=0;continue}}e&&(n.length>0?n+="/..":n="..")}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a);r=a,i=0}else s===46&&i!==-1?++i:i=-1}return n}function TI(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var bc={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=pE.cwd()),s=r),Zr(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=Sw(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Zr(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Sw(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Zr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Zr(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":bc.normalize(e)},relative:function(e,n){if(Zr(e),Zr(n),e===n||(e=bc.resolve(e),n=bc.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var o=n.length,l=o-a,u=s<l?s:l,f=-1,c=0;c<=u;++c){if(c===u){if(l>u){if(n.charCodeAt(a+c)===47)return n.slice(a+c+1);if(c===0)return n.slice(a+c)}else s>u&&(e.charCodeAt(r+c)===47?f=c:c===0&&(f=0));break}var h=e.charCodeAt(r+c),d=n.charCodeAt(a+c);if(h!==d)break;h===47&&(f=c)}var v="";for(c=r+f+1;c<=i;++c)(c===i||e.charCodeAt(c)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+n.slice(a+f):(a+=f,n.charCodeAt(a)===47&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(Zr(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!s){i=a;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Zr(e);var r=0,i=-1,s=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,l=-1;for(a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!s){r=a+1;break}}else l===-1&&(s=!1,l=a+1),o>=0&&(u===n.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Zr(e);for(var n=-1,r=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return TI("/",e)},parse:function(e){Zr(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var a=-1,o=0,l=-1,u=!0,f=e.length-1,c=0;f>=s;--f){if(r=e.charCodeAt(f),r===47){if(!u){o=f+1;break}continue}l===-1&&(u=!1,l=f+1),r===46?a===-1?a=f:c!==1&&(c=1):a!==-1&&(c=-1)}return a===-1||l===-1||c===0||c===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(o===0&&i?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(o,a),n.base=e.slice(o,l)),n.ext=e.slice(a,l)),o>0?n.dir=e.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",posix:null},NI=bc;const es=Gr(NI);class Li{constructor(e){var n,r;n=e.indexOf("://"),n>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return es.parse(e)}isAbsolute(e){return es.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return es.resolve(this.directory,e)}relative(e){var n=e&&e.indexOf("://")>-1;return n?e:es.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Pr{constructor(e,n){var r=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=n,!r&&n!==!1&&typeof n!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new Li(this.base),i=s.resolve(i))}this.Path=new Li(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var n=e.indexOf("://")>-1,r;return n?e:(r=es.resolve(this.directory,e),this.origin+r)}relative(e){return es.relative(e,this.directory)}toString(){return this.href}}const ua=1,br=3,RI=9;class mt{constructor(e,n,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof mt))return new mt(e,n,r);if(typeof n=="string"?this.base=this.parseComponent(n):typeof n=="object"&&n.steps&&(this.base=n),i=this.checkType(e),i==="string")return this.str=e,An(this,this.parse(e));if(i==="range")return An(this,this.fromRange(e,this.base,r));if(i==="node")return An(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(cE(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof mt?"EpubCFI":!1}parse(e){var n={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(n.base=this.parseComponent(r),i=this.getPathComponent(e),n.path=this.parseComponent(i),s=this.getRange(e),s&&(n.range=!0,n.start=this.parseComponent(s[0]),n.end=this.parseComponent(s[1])),n.spinePos=n.base.steps[1].index,n):{spinePos:-1})}parseComponent(e){var n={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),s;return r.length>1&&(s=r[1],n.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),n.steps=i.map((function(a){return this.parseStep(a)}).bind(this)),n}parseStep(e){var n,r,i,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),r=parseInt(e),!isNaN(r))return r%2===0?(n="element",i=r/2-1):(n="text",i=(r-1)/2),{type:n,index:i,id:a||null}}parseTerminal(e){var n,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(n=parseInt(e.split("[")[0]),r=i[1]):n=parseInt(e),Kt(n)||(n=null),{offset:n,assertion:r}}getChapterComponent(e){var n=e.split("!");return n[0]}getPathComponent(e){var n=e.split("!");if(n[1])return n[1].split(",")[0]}getRange(e){var n=e.split(",");return n.length===3?[n[1],n[2]]:!1}getCharecterOffsetComponent(e){var n=e.split(":");return n[1]||""}joinSteps(e){return e?e.map(function(n){var r="";return n.type==="element"&&(r+=(n.index+1)*2),n.type==="text"&&(r+=1+2*n.index),n.id&&(r+="["+n.id+"]"),r}).join("/"):""}segmentString(e){var n="/";return n+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(n+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(n+="["+e.terminal.assertion+"]"),n}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,n){var r,i,s,a;if(typeof e=="string"&&(e=new mt(e)),typeof n=="string"&&(n=new mt(n)),e.spinePos>n.spinePos)return 1;if(e.spinePos<n.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),n.range?(i=n.path.steps.concat(n.start.steps),a=n.start.terminal):(i=n.path.steps,a=n.path.terminal);for(var o=0;o<r.length;o++){if(!r[o])return-1;if(!i[o]||r[o].index>i[o].index)return 1;if(r[o].index<i[o].index)return-1}return r.length<i.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var n=e.nodeType===br?"text":"element";return{id:e.id,tagName:e.tagName,type:n,index:this.position(e)}}filteredStep(e,n){var r=this.filter(e,n),i;if(r)return i=r.nodeType===br?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,n)}}pathTo(e,n,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=RI;)r?a=this.filteredStep(s,r):a=this.step(s),a&&i.steps.unshift(a),s=s.parentNode;return n!=null&&n>=0&&(i.terminal.offset=n,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,n){return!e||!n?!1:e.index===n.index&&e.id===n.id&&e.type===n.type}fromRange(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,l=e.endOffset,u=!1;if(r&&(u=s.ownerDocument.querySelector("."+r)!=null),typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),e.collapsed)u&&(o=this.patchOffset(s,o,r)),i.path=this.pathTo(s,o,r);else{i.range=!0,u&&(o=this.patchOffset(s,o,r)),i.start=this.pathTo(s,o,r),u&&(l=this.patchOffset(a,l,r)),i.end=this.pathTo(a,l,r),i.path={steps:[],terminal:null};var f=i.start.steps.length,c;for(c=0;c<f&&this.equalStep(i.start.steps[c],i.end.steps[c]);c++)c===f-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[c]),i.range=!1):i.path.steps.push(i.start.steps[c]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),i.path=this.pathTo(e,null,r),i}filter(e,n){var r,i,s,a,o,l=!1;return e.nodeType===br?(l=!0,s=e.parentNode,r=e.parentNode.classList.contains(n)):(l=!1,r=e.classList.contains(n)),r&&l?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===br?i=a:o&&o.nodeType===br&&(i=o),i||e):r&&!l?!1:e}patchOffset(e,n,r){if(e.nodeType!=br)throw new Error("Anchor must be a text node");var i=e,s=n;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===ua)if(i.previousSibling.classList.contains(r))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,n,r){var i={},s=-1,a,o=e.length,l,u;for(a=0;a<o;a++)l=e[a].nodeType,l===ua&&e[a].classList.contains(r)&&(l=br),a>0&&l===br&&u===br?i[a]=s:n===l&&(s=s+1,i[a]=s),u=l;return i}position(e){var n,r;return e.nodeType===ua?(n=e.parentNode.children,n||(n=_m(e.parentNode)),r=Array.prototype.indexOf.call(n,e)):(n=this.textNodes(e.parentNode),r=n.indexOf(e)),r}filteredPosition(e,n){var r,i,s;return e.nodeType===ua?(r=e.parentNode.children,s=this.normalizedMap(r,ua,n)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(n)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,br,n)),i=Array.prototype.indexOf.call(r,e),s[i]}stepsToXpath(e){var n=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?n.push("text()["+i+"]"):n.push("*["+i+"]")}),n.join("/")}stepsToQuerySelector(e){var n=["html"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("#"+r.id):r.type==="text"||n.push("*:nth-child("+i+")")}),n.join(">")}textNodes(e,n){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===br?!0:!!(n&&r.classList.contains(n))})}walkToNode(e,n,r){var i=n||document,s=i.documentElement,a,o,l=e.length,u;for(u=0;u<l&&(o=e[u],o.type==="element"?o.id?s=i.getElementById(o.id):(a=s.children||_m(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,r)[o.index]),!!s);u++);return s}findNode(e,n,r){var i=n||document,s,a;return!r&&typeof i.evaluate<"u"?(a=this.stepsToXpath(e),s=i.evaluate(a,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,i,r):s=this.walkToNode(e,i),s}fixMiss(e,n,r,i){var s=this.findNode(e.slice(0,-1),r,i),a=s.childNodes,o=this.normalizedMap(a,br,i),l,u,f=e[e.length-1].index;for(let c in o){if(!o.hasOwnProperty(c))return;if(o[c]===f)if(l=a[c],u=l.textContent.length,n>u)n=n-u;else{l.nodeType===ua?s=l.childNodes[0]:s=l;break}}return{container:s,offset:n}}toRange(e,n){var r=e||document,i,s,a,o,l,u=this,f,c,h=n?r.querySelector("."+n)!=null:!1,d;if(typeof r.createRange<"u"?i=r.createRange():i=new hE,u.range?(s=u.start,f=u.path.steps.concat(s.steps),o=this.findNode(f,r,h?n:null),a=u.end,c=u.path.steps.concat(a.steps),l=this.findNode(c,r,h?n:null)):(s=u.path,f=u.path.steps,o=this.findNode(u.path.steps,r,h?n:null)),o)try{s.terminal.offset!=null?i.setStart(o,s.terminal.offset):i.setStart(o,0)}catch{d=this.fixMiss(f,s.terminal.offset,r,h?n:null),i.setStart(d.container,d.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{a.terminal.offset!=null?i.setEnd(l,a.terminal.offset):i.setEnd(l,0)}catch{d=this.fixMiss(c,u.end.terminal.offset,r,h?n:null),i.setEnd(d.container,d.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,n,r){var i=parseInt(n),s=(e+1)*2,a="/"+s+"/";return a+=(i+1)*2,r&&(a+="["+r+"]"),a}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Br{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var n=0;n<arguments[e].length;++n)this.hooks.push(arguments[e][n])}deregister(e){let n;for(let r=0;r<this.hooks.length;r++)if(n=this.hooks[r],n===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,n=this.context,r=[];return this.hooks.forEach(function(i){try{var s=i.apply(n,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function mE(t,e){var n,r,i=e.url,s=i.indexOf("://")>-1;t&&(r=It(t,"head"),n=It(r,"base"),n||(n=t.createElement("base"),r.insertBefore(n,r.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),n.setAttribute("href",i))}function II(t,e){var n,r,i=e.canonical;t&&(n=It(t,"head"),r=It(n,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=t.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),n.appendChild(r)))}function OI(t,e){var n,r,i=e.idref;t&&(n=It(t,"head"),r=It(n,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=t.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),n.appendChild(r)))}function LI(t,e){var n=t.querySelectorAll("a[href]");if(n.length)for(var r=It(t.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,s=(function(o){var l=o.getAttribute("href");if(l.indexOf("mailto:")!==0){var u=l.indexOf("://")>-1;if(u)o.setAttribute("target","_blank");else{var f;try{f=new Pr(l,i)}catch{}o.onclick=function(){return f&&f.hash?e(f.Path.path+f.hash):e(f?f.Path.path:l),!1}}}}).bind(this),a=0;a<n.length;a++)s(n[a])}function Cw(t,e,n){return e.forEach(function(r,i){r&&n[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(r,"g"),n[i]))}),t}function $l(t,e,n,r){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",a=new pt,o=new XMLHttpRequest,l=XMLHttpRequest.prototype,u;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),n&&(o.withCredentials=!0),o.onreadystatechange=c,o.onerror=f,o.open("GET",t,!0);for(u in r)o.setRequestHeader(u,r[u]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new Li(t).extension),e=="blob"&&(o.responseType=s),Ul(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function f(h){a.reject(h)}function c(){if(this.readyState===XMLHttpRequest.DONE){var h=!1;if((this.responseType===""||this.responseType==="document")&&(h=this.responseXML),this.status===200||this.status===0||h){var d;if(!this.response&&!h)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;h?d=this.responseXML:Ul(e)?d=ui(this.response,"text/xml"):e=="xhtml"?d=ui(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?d=ui(this.response,"text/html"):e=="json"?d=JSON.parse(this.response):e=="blob"?i?d=this.response:d=new Blob([this.response]):d=this.response,a.resolve(d)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}class PI{constructor(e,n){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,n?this.hooks=n:(this.hooks={},this.hooks.serialize=new Br(this),this.hooks.content=new Br(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var n=e||this.request||$l,r=new pt,i=r.promise;return this.contents?r.resolve(this.contents):n(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){r.resolve(this.contents)}).bind(this)).catch(function(s){r.reject(s)}),i}base(){return mE(this.document,this)}render(e){var n=new pt,r=n.promise;return this.output,this.load(e).then((function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer>"u"||a?o=nE:o=XMLSerializer;var l=new o;return this.output=l.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){n.resolve(this.output)}).bind(this)).catch(function(i){n.reject(i)}),r}find(e){var n=this,r=[],i=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),l=n.document.createRange(),u,f,c=-1,h,d=150;f!=-1;)f=o.indexOf(i,c+1),f!=-1&&(l=n.document.createRange(),l.setStart(a,f),l.setEnd(a,f+i.length),u=n.cfiFromRange(l),a.textContent.length<d?h=a.textContent:(h=a.textContent.substring(f-d/2,f+d/2),h="..."+h+"..."),r.push({cfi:u,excerpt:h})),c=f};return kf(n.document,function(a){s(a)}),r}search(e,n=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,s=this,a=e.toLowerCase(),o=function(c){const v=c.reduce((w,g)=>w+g.textContent,"").toLowerCase().indexOf(a);if(v!=-1){const g=v+a.length;let p=0,m=0;if(v<c[0].length){let y;for(;p<c.length-1&&(m+=c[p].length,!(g<=m));)p+=1;let k=c[0],_=c[p],x=s.document.createRange();x.setStart(k,v);let C=c.slice(0,p).reduce((P,S)=>P+S.textContent.length,0);x.setEnd(_,C>g?g:g-C),y=s.cfiFromRange(x);let A=c.slice(0,p+1).reduce((P,S)=>P+S.textContent,"");A.length>i&&(A=A.substring(v-i/2,v+i/2),A="..."+A+"..."),r.push({cfi:y,excerpt:A})}}},l=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let u,f=[];for(;u=l.nextNode();)f.push(u),f.length==n&&(o(f.slice(0,n)),f=f.slice(1,n));return f.length>0&&o(f),r}reconcileLayoutSettings(e){var n={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),s=i.indexOf("-"),a,o;s!=-1&&(a=i.slice(0,s),o=i.slice(s+1),n[a]=o)}),n}cfiFromRange(e){return new mt(e,this.cfiBase).toString()}cfiFromElement(e){return new mt(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class FI{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Br,this.hooks.content=new Br,this.hooks.content.register(mE),this.hooks.content.register(II),this.hooks.content.register(OI),this.epubcfi=new mt,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,n,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var a=this.manifest[i.idref],o;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=n(i.href,!0),i.canonical=r(i.href)),a&&(i.href=a.href,i.url=n(i.href,!0),i.canonical=r(i.href),a.properties.length&&i.properties.push.apply(i.properties,a.properties)),i.linear==="yes"?(i.prev=(function(){let l=i.index;for(;l>0;){let u=this.get(l-1);if(u&&u.linear)return u;l-=1}}).bind(this),i.next=(function(){let l=i.index;for(;l<this.spineItems.length-1;){let u=this.get(l+1);if(u&&u.linear)return u;l+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),o=new PI(i,this.hooks),this.append(o)}),this.loaded=!0}get(e){var n=0;if(typeof e>"u")for(;n<this.spineItems.length;){let r=this.spineItems[n];if(r&&r.linear)break;n+=1}else this.epubcfi.isCfiString(e)?n=new mt(e).spinePos:typeof e=="number"||isNaN(e)===!1?n=e:typeof e=="string"&&e.indexOf("#")===0?n=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],n=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[n]||null}append(e){var n=this.spineItems.length;return e.index=n,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=n,this.spineByHref[encodeURI(e.href)]=n,this.spineByHref[e.href]=n,this.spineById[e.idref]=n,n}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(n,r){n.index=r}),0}remove(e){var n=this.spineItems.indexOf(e);if(n>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(n,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let n=this.get(e);if(n&&n.linear)return n;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let n=this.get(e);if(n&&n.linear)return n;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class bv{constructor(e){this._q=[],this.context=e,this.tick=yv,this.running=!1,this.paused=!1}enqueue(){var e,n,r,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new pt,n=e.promise,r={task:i,args:s,deferred:e,promise:n}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,n,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),n=e.task,n)return r=n.apply(this.context,e.args),r&&typeof r.then=="function"?r.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new pt,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new pt),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Ed="0.3",_c=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],De={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class gE{constructor(e,n,r){this.spine=e,this.request=n,this.pause=r||100,this.q=new bv(this),this.epubcfi=new mt,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(n){n.linear&&this.q.enqueue(this.process.bind(this),n)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(n){var r=new pt,i=this.parse(n,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}).bind(this))}parse(e,n,r){var i=[],s,a=e.ownerDocument,o=It(a,"body"),l=0,u,f=r||this.break,c=function(h){var d=h.length,v,w=0;if(h.textContent.trim().length===0)return!1;for(l==0&&(s=this.createRange(),s.startContainer=h,s.startOffset=0),v=f-l,v>d&&(l+=d,w=d);w<d;)if(v=f-l,l===0&&(w+=1,s=this.createRange(),s.startContainer=h,s.startOffset=w),w+v>=d)l+=d-w,w=d;else{w+=v,s.endContainer=h,s.endOffset=w;let g=new mt(s,n).toString();i.push(g),l=0}u=h};if(kf(o,c.bind(this)),s&&s.startContainer&&u){s.endContainer=u,s.endOffset=u.length;let h=new mt(s,n).toString();i.push(h),l=0}return i}generateFromWords(e,n,r){var i=e?new mt(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,n,i,r):this.q.enqueue(this.processWords.bind(this),s,n,i,r))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,n,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(s){var a=new pt,o=this.parseWords(s,e,n,r),l=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=i?o.slice(0,l):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,n,r,i){var s=n.cfiBase,a=[],o=e.ownerDocument,l=It(o,"body"),u=r,f=i?i.spinePos!==n.index:!0,c;i&&n.index===i.spinePos&&(c=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var h=function(d){if(!f)if(d===c)f=!0;else return!1;if(d.textContent.length<10&&d.textContent.trim().length===0)return!1;var v=this.countWords(d.textContent),w,g=0;if(v===0)return!1;for(w=u-this._wordCounter,w>v&&(this._wordCounter+=v,g=v);g<v;)if(w=u-this._wordCounter,g+w>=v)this._wordCounter+=v-g,g=v;else{g+=w;let p=new mt(d,s);a.push({cfi:p.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return kf(l,h.bind(this)),a}locationFromCfi(e){let n;return mt.prototype.isCfiString(e)&&(e=new mt(e)),this._locations.length===0?-1:(n=no(e,this._locations,this.epubcfi.compare),n>this.total?this.total:n)}percentageFromCfi(e){if(this._locations.length===0)return null;var n=this.locationFromCfi(e);return this.percentageFromLocation(n)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var n=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(n=this._locations[e]),n}cfiFromPercentage(e){let n;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new mt(this._locations[this.total]);return r.collapse(),r.toString()}return n=Math.ceil(this.total*e),this.cfiFromLocation(n)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var n;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(n=this.locationFromCfi(e),this._current=n):n=e,this.emit(De.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(n)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}fi(gE.prototype);let MI=class{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var n;if(!e)throw new Error("Container File Not Found");if(n=It(e,"rootfile"),!n)throw new Error("No RootFile Found");this.packagePath=n.getAttribute("full-path"),this.directory=es.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}};class Aw{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var n,r,i;if(!e)throw new Error("Package File Not Found");if(n=It(e,"metadata"),!n)throw new Error("No Metadata Found");if(r=It(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=It(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=oE(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(n),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var n={};return n.title=this.getElementText(e,"title"),n.creator=this.getElementText(e,"creator"),n.description=this.getElementText(e,"description"),n.pubdate=this.getElementText(e,"date"),n.publisher=this.getElementText(e,"publisher"),n.identifier=this.getElementText(e,"identifier"),n.language=this.getElementText(e,"language"),n.rights=this.getElementText(e,"rights"),n.modified_date=this.getPropertyText(e,"dcterms:modified"),n.layout=this.getPropertyText(e,"rendition:layout"),n.orientation=this.getPropertyText(e,"rendition:orientation"),n.flow=this.getPropertyText(e,"rendition:flow"),n.viewport=this.getPropertyText(e,"rendition:viewport"),n.media_active_class=this.getPropertyText(e,"media:active-class"),n.spread=this.getPropertyText(e,"rendition:spread"),n}parseManifest(e){var n={},r=Oi(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",l=s.getAttribute("media-type")||"",u=s.getAttribute("media-overlay")||"",f=s.getAttribute("properties")||"";n[a]={href:o,type:l,overlay:u,properties:f.length?f.split(" "):[]}}),n}parseSpine(e,n){var r=[],i=Oi(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(a,o){var l=a.getAttribute("idref"),u=a.getAttribute("properties")||"",f=u.length?u.split(" "):[],c={id:a.getAttribute("id"),idref:l,linear:a.getAttribute("linear")||"yes",properties:f,index:o};r.push(c)}),r}findUniqueIdentifier(e){var n=e.documentElement.getAttribute("unique-identifier");if(!n)return"";var r=e.getElementById(n);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var n=ga(e,"item",{properties:"nav"});return n?n.getAttribute("href"):!1}findNcxPath(e,n){var r=ga(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=n.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var n=It(e,"package");n.getAttribute("version");var r=ga(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=ga(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,n){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",n),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,n){var r=ga(e,"meta",{property:n});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let n=e.readingOrder||e.spine;return this.spine=n.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Fh{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let n=e.nodeType,r,i;n&&(r=It(e,"html"),i=It(e,"ncx")),n?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var n,r=0;r<e.length;r++)n=e[r],n.href&&(this.tocByHref[n.href]=r),n.id&&(this.tocById[n.id]=r),this.length++,n.subitems.length&&this.unpack(n.subitems)}get(e){var n;return e?(e.indexOf("#")===0?n=this.tocById[e.substring(1)]:e in this.tocByHref&&(n=this.tocByHref[e]),this.getByIndex(e,n,this.toc)):this.toc}getByIndex(e,n,r){if(r.length===0)return;const i=r[n];if(i&&(e===i.id||e===i.href))return i;{let s;for(let a=0;a<r.length&&(s=this.getByIndex(e,n,r[a].subitems),!s);++a);return s}}landmark(e){var n;return e?(n=this.landmarksByType[e],this.landmarks[n]):this.landmarks}parseNav(e){var n=Sf(e,"nav","toc"),r=[];if(!n)return r;let i=va(n,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,n){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],n);s&&r.push(s)}return r}navItem(e,n){let r=e.getAttribute("id")||void 0,i=va(e,"a",!0)||va(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";r||(r=s);let a=i.textContent||"",o=[],l=va(e,"ol",!0);return l&&(o=this.parseNavList(l,r)),{id:r,href:s,label:a,subitems:o,parent:n}}parseLandmarks(e){var n=Sf(e,"nav","landmarks"),r=n?Oi(n,"li"):[],i=r.length,s,a=[],o;if(!r||i===0)return a;for(s=0;s<i;++s)o=this.landmarkItem(r[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let n=va(e,"a",!0);if(!n)return;let r=n.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=n.getAttribute("href")||"",s=n.textContent||"";return{href:i,label:s,type:r}}parseNcx(e){var n=Oi(e,"navPoint"),r=n.length,i,s={},a=[],o,l;if(!n||r===0)return a;for(i=0;i<r;++i)o=this.ncxItem(n[i]),s[o.id]=o,o.parent?(l=s[o.parent],l.subitems.push(o)):a.push(o);return a}ncxItem(e){var n=e.getAttribute("id")||!1,r=It(e,"content"),i=r.getAttribute("src"),s=It(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],l=e.parentNode,u;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(u=l.getAttribute("id")),{id:n,href:i,label:a,subitems:o,parent:u}}load(e){return e.map(n=>(n.label=n.title,n.subitems=n.children?this.load(n.children):[],n))}forEach(e){return this.toc.forEach(e)}}var No={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},BI=function(){var t,e,n,r,i={};for(t in No)if(No.hasOwnProperty(t)){for(e in No[t])if(No[t].hasOwnProperty(e))if(n=No[t][e],typeof n=="string")i[n]=t+"/"+e;else for(r=0;r<n.length;r++)i[n[r]]=t+"/"+e}return i}(),jI="text/plain";function zI(t){return t&&BI[t.split(".").pop().toLowerCase()]||jI}const $a={lookup:zI};class UI{constructor(e,n){this.settings={replacements:n&&n.replacements||"base64",archive:n&&n.archive,resolver:n&&n.resolver,request:n&&n.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(n){return e[n]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var n=new Pr(e),r=$a.lookup(n.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>dE(i)).then(i=>bm(i,r)):this.settings.request(e,"blob").then(i=>Ef(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise((function(n){n(this.urls)}).bind(this));var e=this.urls.map(n=>{var r=this.settings.resolver(n);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(n=>(this.replacementUrls=n.filter(r=>typeof r=="string"),n))}replaceCss(e,n){var r=[];return e=e||this.settings.archive,n=n||this.settings.resolver,this.cssUrls.forEach((function(i){var s=this.createCssFile(i,e,n).then((function(a){var o=this.urls.indexOf(i);o>-1&&(this.replacementUrls[o]=a)}).bind(this));r.push(s)}).bind(this)),Promise.all(r)}createCssFile(e){var n;if(es.isAbsolute(e))return new Promise(function(a){a()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),l=new Li(r).relative(o);return l});return i?i.then(a=>(a=Cw(a,s,this.replacementUrls),this.settings.replacements==="base64"?n=bm(a,"text/css"):n=Ef(a,"text/css"),n),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,n){return n=n||this.settings.resolver,this.urls.map((function(r){var i=n(r),s=new Li(e).relative(i);return s}).bind(this))}get(e){var n=this.urls.indexOf(e);if(n!==-1)return this.replacementUrls.length?new Promise((function(r,i){r(this.replacementUrls[n])}).bind(this)):this.createUrl(e)}substitute(e,n){var r;return n?r=this.relativeTo(n):r=this.urls,Cw(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class Mh{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new mt,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var n=It(e,"html"),r=It(e,"ncx");if(n)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var n=Sf(e,"nav","page-list"),r=n?Oi(n,"li"):[],i=r.length,s,a=[],o;if(!r||i===0)return a;for(s=0;s<i;++s)o=this.item(r[s]),a.push(o);return a}parseNcx(e){var n=[],r=0,i,s,a,o=0;if(s=It(e,"pageList"),!s||(a=Oi(s,"pageTarget"),o=a.length,!a||a.length===0))return n;for(r=0;r<o;++r)i=this.ncxItem(a[r]),n.push(i);return n}ncxItem(e){var n=It(e,"navLabel"),r=It(n,"text"),i=r.textContent,s=It(e,"content"),a=s.getAttribute("src"),o=parseInt(i,10);return{href:a,page:o}}item(e){var n=It(e,"a"),r=n.getAttribute("href")||"",i=n.textContent||"",s=parseInt(i),a=r.indexOf("epubcfi"),o,l,u;return a!=-1?(o=r.split("#"),l=o[0],u=o.length>1?o[1]:!1,{cfi:u,href:r,packageUrl:l,page:s}):{href:r,page:s}}process(e){e.forEach(function(n){this.pages.push(n.page),n.cfi&&this.locations.push(n.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var n=-1;if(this.locations.length===0)return-1;var r=xf(e,this.locations,this.epubcfi.compare);return r!=-1?n=this.pages[r]:(r=no(e,this.locations,this.epubcfi.compare),n=r-1>=0?this.pages[r-1]:this.pages[0],n!==void 0||(n=-1)),n}cfiFromPage(e){var n=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(n=this.locations[r]),n}pageFromPercentage(e){var n=Math.round(this.totalPages*e);return n}percentageFromPage(e){var n=(e-this.firstPage)/this.totalPages;return Math.round(n*1e3)/1e3}percentageFromCfi(e){var n=this.pageFromCfi(e),r=this.percentageFromPage(n);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class vE{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,n){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),n>=0&&(this._minSpreadWidth=n),this._spread}calculate(e,n,r){var i=1,s=r||0,a=e,o=n,l=Math.floor(a/12),u,f,c,h;this._spread&&a>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=l%2===0?l:l-1),this.name==="pre-paginated"&&(s=0),i>1?(u=a/i-s,c=u+s):(u=a,c=a),this.name==="pre-paginated"&&i>1&&(a=u),f=u*i+s,h=a,this.width=a,this.height=o,this.spreadWidth=f,this.pageWidth=c,this.delta=h,this.columnWidth=u,this.gap=s,this.divisor=i,this.update({width:a,height:o,spreadWidth:f,pageWidth:c,delta:h,columnWidth:u,gap:s,divisor:i})}format(e,n,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,n):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,n){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(n=n||this.delta,r=Math.ceil(e/n),i=r*this.divisor):(n=n||this.height,r=Math.ceil(e/n),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(n=>{this.props[n]===e[n]&&delete e[n]}),Object.keys(e).length>0){let n=An(this.props,e);this.emit(De.LAYOUT.UPDATED,n,e)}}}fi(vE.prototype);class $I{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var n in e)e.hasOwnProperty(n)&&(typeof e[n]=="string"?this.registerUrl(n,e[n]):this.registerRules(n,e[n]))}registerCss(e,n){this._themes[e]={serialized:n},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,n){var r=new Pr(n);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,n){this._themes[e]={rules:n},(this._injected[e]||e=="default")&&this.update(e)}select(e){var n=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(n),i.addClass(e)})}update(e){var n=this.rendition.getContents();n.forEach(r=>{this.add(e,r)})}inject(e){var n=[],r=this._themes,i;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=r[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&n.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,n){var r=this._themes[e];!r||!n||(r.url?n.addStylesheet(r.url):r.serialized?(n.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(n.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,n,r){var i=this.rendition.getContents();this._overrides[e]={value:n,priority:r===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var n=this.rendition.getContents();delete this._overrides[e],n.forEach(r=>{r.css(e)})}overrides(e){var n=this._overrides;for(var r in n)n.hasOwnProperty(r)&&e.css(r,n[r].value,n[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Cf{constructor(e,n,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=n||"ltr",this._dev=i}section(e){var n=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,n);return r}page(e,n,r,i){var s=e&&e.document?e.document.body:!1,a;if(s){if(a=this.rangePairToCfiPair(n,{start:this.findStart(s,r,i),end:this.findEnd(s,r,i)}),this._dev===!0){let o=e.document,l=new mt(a.start).toRange(o),u=new mt(a.end).toRange(o),f=o.defaultView.getSelection(),c=o.createRange();f.removeAllRanges(),c.setStart(l.startContainer,l.startOffset),c.setEnd(u.endContainer,u.endOffset),f.addRange(c)}return a}}walk(e,n){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),a,o;(a=s.nextNode())&&(o=n(a),!o););return o}}findRanges(e){for(var n=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),s=i*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,l,u,f=0;f<s.pages;f++)l=(a+o)*f,u=a*(f+1)+o*f,n.push({start:this.findStart(e.document.body,l,u),end:this.findEnd(e.document.body,l,u)});return n}findStart(e,n,r){for(var i=[e],s,a,o=e;i.length;)if(s=i.shift(),a=this.walk(s,l=>{var u,f,c,h,d;if(d=xm(l),this.horizontal&&this.direction==="ltr"){if(u=this.horizontal?d.left:d.top,f=this.horizontal?d.right:d.bottom,u>=n&&u<=r)return l;if(f>n)return l;o=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=d.left,f=d.right,f<=r&&f>=n)return l;if(u<r)return l;o=l,i.push(l)}else{if(c=d.top,h=d.bottom,c>=n&&c<=r)return l;if(h>n)return l;o=l,i.push(l)}}),a)return this.findTextStartRange(a,n,r);return this.findTextStartRange(o,n,r)}findEnd(e,n,r){for(var i=[e],s,a=e,o;i.length;)if(s=i.shift(),o=this.walk(s,l=>{var u,f,c,h,d;if(d=xm(l),this.horizontal&&this.direction==="ltr"){if(u=Math.round(d.left),f=Math.round(d.right),u>r&&a)return a;if(f>r)return l;a=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=Math.round(this.horizontal?d.left:d.top),f=Math.round(this.horizontal?d.right:d.bottom),f<n&&a)return a;if(u<n)return l;a=l,i.push(l)}else{if(c=Math.round(d.top),h=Math.round(d.bottom),c>r&&a)return a;if(h>r)return l;a=l,i.push(l)}}),o)return this.findTextEndRange(o,n,r);return this.findTextEndRange(a,n,r)}findTextStartRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,l,u,f=0;f<i.length;f++)if(s=i[f],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=n)return s}else if(this.horizontal&&this.direction==="rtl"){if(u=a.right,u<=r)return s}else if(l=a.top,l>=n)return s;return i[0]}findTextEndRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,l,u,f,c,h=0;h<i.length;h++){if(a=i[h],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=o.left,u=o.right,l>r&&s)return s;if(u>r)return a}else if(this.horizontal&&this.direction==="rtl"){if(l=o.left,u=o.right,u<n&&s)return s;if(l<n)return a}else{if(f=o.top,c=o.bottom,f>r&&s)return s;if(c>r)return a}s=a}return i[i.length-1]}splitTextNodeIntoRanges(e,n){var r=[],i=e.textContent||"",s=i.trim(),a,o=e.ownerDocument,l=n||" ",u=s.indexOf(l);if(u===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,u),r.push(a),a=!1;u!=-1;)u=s.indexOf(l,u+1),u>0&&(a&&(a.setEnd(e,u),r.push(a)),a=o.createRange(),a.setStart(e,u+1));return a&&(a.setEnd(e,s.length),r.push(a)),r}rangePairToCfiPair(e,n){var r=n.start,i=n.end;r.collapse(!0),i.collapse(!1);let s=new mt(r,e).toString(),a=new mt(i,e).toString();return{start:s,end:a}}rangeListToCfiList(e,n){for(var r=[],i,s=0;s<n.length;s++)i=this.rangePairToCfiPair(e,n[s]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const yE=typeof navigator<"u",WI=yE&&/Chrome/.test(navigator.userAgent),Dw=yE&&!WI&&/AppleWebKit/.test(navigator.userAgent),HI=1;class _v{constructor(e,n,r,i){this.epubcfi=new mt,this.document=e,this.documentElement=this.document.documentElement,this.content=n||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",Ed),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return _c}width(e){var n=this.content;return e&&Kt(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}height(e){var n=this.content;return e&&Kt(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}contentWidth(e){var n=this.content||this.document.body;return e&&Kt(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}contentHeight(e){var n=this.content||this.document.body;return e&&Kt(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}textWidth(){let e,n,r=this.document.createRange(),i=this.content||this.document.body,s=bf(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.width,s&&s.width&&(n+=s.width),Math.round(n)}textHeight(){let e,n,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.bottom,Math.round(n)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,n,r){var i=this.content||this.document.body;return n?i.style.setProperty(e,n,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var n=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(n&&n.hasAttribute("content")){let a=n.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),l=a.match(/height\s*=\s*([^,]*)/),u=a.match(/initial-scale\s*=\s*([^,]*)/),f=a.match(/minimum-scale\s*=\s*([^,]*)/),c=a.match(/maximum-scale\s*=\s*([^,]*)/),h=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]<"u"&&(r.width=o[1]),l&&l.length&&typeof l[1]<"u"&&(r.height=l[1]),u&&u.length&&typeof u[1]<"u"&&(r.scale=u[1]),f&&f.length&&typeof f[1]<"u"&&(r.minimum=f[1]),c&&c.length&&typeof c[1]<"u"&&(r.maximum=c[1]),h&&h.length&&typeof h[1]<"u"&&(r.scalable=h[1])}return s=aE(e||{},r),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),n||(n=this.document.createElement("meta"),n.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(n)),n.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(De.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),n=this.textHeight();(e!=this._size.width||n!=this._size.height)&&(this._size={width:e,height:n},this.onResize&&this.onResize(this._size),this.emit(De.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,n=(function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var a=this.window.matchMedia(i[s].media.mediaText);a.addListener(n)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),n,r=0;r<e.length;r++)n=e[r],typeof n.naturalWidth<"u"&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,n){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new mt(e).toRange(this.document,n);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(Dw){let a=s.startContainer,o=new Range;try{a.nodeType===HI?r=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),r=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),r=o.getBoundingClientRect()):r=a.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Dw){let o=new Range;o.selectNode(a),r=o.getBoundingClientRect()}else r=a.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){n(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var n;return e="epubjs-inserted-css-"+(e||""),this.document?(n=this.document.getElementById(e),n||(n=this.document.createElement("style"),n.id=e,this.document.head.appendChild(n)),n):!1}addStylesheetCss(e,n){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(n),r.innerHTML=e,!0}addStylesheetRules(e,n){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(n).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var a=1,o=e[i],l=e[i][0],u="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var f=o.length;a<f;a++){var c=o[a];u+=c[0]+":"+c[1]+(c[2]?" !important":"")+`;
`}r.insertRule(l+"{"+u+"}",r.cssRules.length)}else Object.keys(e).forEach(d=>{const v=e[d];if(Array.isArray(v))v.forEach(w=>{const p=Object.keys(w).map(m=>`${m}:${w[m]}`).join(";");r.insertRule(`${d}{${p}}`,r.cssRules.length)});else{const g=Object.keys(v).map(p=>`${p}:${v[p]}`).join(";");r.insertRule(`${d}{${g}}`,r.cssRules.length)}})}addScript(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.add(e))}removeClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),_c.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(_c.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var n=this.window.getSelection();this.triggerSelectedEvent(n)}).bind(this),250)}triggerSelectedEvent(e){var n,r;e&&e.rangeCount>0&&(n=e.getRangeAt(0),n.collapsed||(r=new mt(n,this.cfiBase).toString(),this.emit(De.CONTENTS.SELECTED,r),this.emit(De.CONTENTS.SELECTED_RANGE,n)))}range(e,n){var r=new mt(e);return r.toRange(this.document,n)}cfiFromRange(e,n){return new mt(e,this.cfiBase,n).toString()}cfiFromNode(e,n){return new mt(e,this.cfiBase,n).toString()}map(e){var n=new Cf(e);return n.section()}size(e,n){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),n>=0&&(this.height(n),r.height=n),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,n,r,i,s){let a=ma("column-axis"),o=ma("column-gap"),l=ma("column-width"),u=ma("column-fill"),c=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&c==="horizontal"&&this.direction(s),this.width(e),this.height(n),this.viewport({width:e,height:n,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),c==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(u,"auto"),this.css(o,i+"px"),this.css(l,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,n,r){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(n>=0||r>=0)&&(s=" translate("+(n||0)+"px, "+(r||0)+"px )"),this.css("transform",i+s)}fit(e,n,r){var i=this.viewport(),s=parseInt(i.width),a=parseInt(i.height),o=e/s,l=n/a,u=o<l?o:l;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(u,0,0),this.css("background-size",s*u+"px "+a*u+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var f=e-s*u;this.css("margin-left",f+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,n,r,i,s){var a=new Cf(n,s);return a.page(this,e,r,i)}linksHandler(){LI(this.content,e=>{this.emit(De.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let n=ma("writing-mode");return e&&this.documentElement&&(this.documentElement.style[n]=e),this.window.getComputedStyle(this.documentElement)[n]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,n){return navigator.epubReadingSystem={name:e,version:n,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}fi(_v.prototype);class VI{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,n,r,i,s,a){let o=encodeURI(n+e),u=new mt(n).spinePos,f=new wE({type:e,cfiRange:n,data:r,sectionIndex:u,cb:i,className:s,styles:a});return this._annotations[o]=f,u in this._annotationsBySectionIndex?this._annotationsBySectionIndex[u].push(o):this._annotationsBySectionIndex[u]=[o],this.rendition.views().forEach(h=>{f.sectionIndex===h.index&&f.attach(h)}),f}remove(e,n){let r=encodeURI(e+n);if(r in this._annotations){let i=this._annotations[r];if(n&&i.type!==n)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===a.index&&i.detach(a)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,n){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==n)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,n,r,i,s){return this.add("highlight",e,n,r,i,s)}underline(e,n,r,i,s){return this.add("underline",e,n,r,i,s)}mark(e,n,r){return this.add("mark",e,n,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class wE{constructor({type:e,cfiRange:n,data:r,sectionIndex:i,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=n,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:n,data:r,type:i,mark:s,cb:a,className:o,styles:l}=this,u;return i==="highlight"?u=e.highlight(n,r,a,o,l):i==="underline"?u=e.underline(n,r,a,o,l):i==="mark"&&(u=e.mark(n,r,a)),this.mark=u,this.emit(De.ANNOTATION.ATTACH,u),u}detach(e){let{cfiRange:n,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(n):r==="underline"?i=e.ununderline(n):r==="mark"&&(i=e.unmark(n))),this.mark=void 0,this.emit(De.ANNOTATION.DETACH,i),i}text(){}}fi(wE.prototype);var _i={},kd={};Object.defineProperty(kd,"__esModule",{value:!0});kd.createElement=xE;function xE(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}kd.default={createElement:xE};var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.proxyMouse=bE;cu.clone=_E;cu.default={proxyMouse:bE};function bE(t,e){function n(a){for(var o=e.length-1;o>=0;o--){var l=e[o],u=a.clientX,f=a.clientY;if(a.touches&&a.touches.length&&(u=a.touches[0].clientX,f=a.touches[0].clientY),!!qI(l,t,u,f)){l.dispatchEvent(_E(a));break}}}if(t.nodeName==="iframe"||t.nodeName==="IFRAME")try{this.target=t.contentDocument}catch{this.target=t}else this.target=t;for(var r=["mouseup","mousedown","click","touchstart"],i=0;i<r.length;i++){var s=r[i];this.target.addEventListener(s,function(a){return n(a)},!1)}}function _E(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch{var n=document.createEvent("MouseEvents");return n.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n}}function qI(t,e,n,r){var i=e.getBoundingClientRect();function s(f,c,h){var d=f.top-i.top,v=f.left-i.left,w=d+f.height,g=v+f.width;return d<=h&&v<=c&&w>h&&g>c}var a=t.getBoundingClientRect();if(!s(a,n,r))return!1;for(var o=t.getClientRects(),l=0,u=o.length;l<u;l++)if(s(o[l],n,r))return!0;return!1}var Af,Ev;Object.defineProperty(_i,"__esModule",{value:!0});var EE=_i.Underline=Ev=_i.Highlight=_i.Mark=Af=_i.Pane=void 0,XI=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,n,r)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(r)}},Sd=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),GI=kd,Wl=kE(GI),YI=cu,KI=kE(YI);function kE(t){return t&&t.__esModule?t:{default:t}}function SE(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function CE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Cd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Af=_i.Pane=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;Cd(this,t),this.target=e,this.element=Wl.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),KI.default.proxyMouse(this.target,this.marks),this.container=n,this.container.appendChild(this.element),this.render()}return Sd(t,[{key:"addMark",value:function(n){var r=Wl.default.createElement("g");return this.element.appendChild(r),n.bind(r,this.container),this.marks.push(n),n.render(),n}},{key:"removeMark",value:function(n){var r=this.marks.indexOf(n);if(r!==-1){var i=n.unbind();this.element.removeChild(i),this.marks.splice(r,1)}}},{key:"render",value:function(){e3(this.element,JI(this.target,this.container));var n=!0,r=!1,i=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(n=(a=s.next()).done);n=!0){var o=a.value;o.render()}}catch(l){r=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}}]),t}();var ZI=_i.Mark=function(){function t(){Cd(this,t),this.element=null}return Sd(t,[{key:"bind",value:function(n,r){this.element=n,this.container=r}},{key:"unbind",value:function(){var n=this.element;return this.element=null,n}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(n){this.element&&this.element.dispatchEvent(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var n=[],r=this.element.firstChild;r;)n.push(r.getBoundingClientRect()),r=r.nextSibling;return n}},{key:"filteredRanges",value:function(){var n=Array.from(this.range.getClientRects());return n.filter(function(r){for(var i=0;i<n.length;i++){if(n[i]===r)return!0;var s=t3(n[i],r);if(s)return!1}return!0})}}]),t}(),QI=Ev=_i.Highlight=function(t){CE(e,t);function e(n,r,i,s){Cd(this,e);var a=SE(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=n,a.className=r,a.data=i||{},a.attributes=s||{},a}return Sd(e,[{key:"bind",value:function(r,i){XI(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,i);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=i.length;o<l;o++){var u=i[o],f=Wl.default.createElement("rect");f.setAttribute("x",u.left-s.left+a.left),f.setAttribute("y",u.top-s.top+a.top),f.setAttribute("height",u.height),f.setAttribute("width",u.width),r.appendChild(f)}this.element.appendChild(r)}}]),e}(ZI);EE=_i.Underline=function(t){CE(e,t);function e(n,r,i,s){return Cd(this,e),SE(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,i,s))}return Sd(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=i.length;o<l;o++){var u=i[o],f=Wl.default.createElement("rect");f.setAttribute("x",u.left-s.left+a.left),f.setAttribute("y",u.top-s.top+a.top),f.setAttribute("height",u.height),f.setAttribute("width",u.width),f.setAttribute("fill","none");var c=Wl.default.createElement("line");c.setAttribute("x1",u.left-s.left+a.left),c.setAttribute("x2",u.left-s.left+a.left+u.width),c.setAttribute("y1",u.top-s.top+a.top+u.height-1),c.setAttribute("y2",u.top-s.top+a.top+u.height-1),c.setAttribute("stroke-width",1),c.setAttribute("stroke","black"),c.setAttribute("stroke-linecap","square"),r.appendChild(f),r.appendChild(c)}this.element.appendChild(r)}}]),e}(QI);function JI(t,e){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left,height:t.scrollHeight,width:t.scrollWidth}}function e3(t,e){t.style.setProperty("top",e.top+"px","important"),t.style.setProperty("left",e.left+"px","important"),t.style.setProperty("height",e.height+"px","important"),t.style.setProperty("width",e.width+"px","important")}function t3(t,e){return e.right<=t.right&&e.left>=t.left&&e.top>=t.top&&e.bottom<=t.bottom}class AE{constructor(e,n){this.settings=An({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},n||{}),this.id="epubjs-view-"+_d(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new mt,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var n=document.createElement("div");return n.classList.add("epub-view"),n.style.height="0px",n.style.width="0px",n.style.overflow="hidden",n.style.position="relative",n.style.display="block",e&&e=="horizontal"?n.style.flex="none":n.style.flex="initial",n}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=xc(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,n){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(r){return this.load(r)}).bind(this)).then((function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(De.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(De.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(r){return this.emit(De.VIEWS.LOAD_ERROR,r),new Promise((i,s)=>{s(r)})}).bind(this)).then((function(){this.emit(De.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,n){var r=e||this.settings.width,i=n||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,n,r){var i=bf(this.element),s;this.iframe?s=bf(this.iframe):s={width:0,height:0},e=="width"&&Kt(n)&&(this.lockedWidth=n-i.width-s.width),e=="height"&&Kt(r)&&(this.lockedHeight=r-i.height-s.height),e==="both"&&Kt(n)&&Kt(r)&&(this.lockedWidth=n-i.width-s.width,this.lockedHeight=r-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var n=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(n=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(n=this.contents.textWidth(),n%this.layout.pageWidth>0&&(n=Math.ceil(n/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=n/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(n+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||n!=this._width||r!=this._height)&&this.reframe(n,r),this._expanding=!1)}reframe(e,n){var r;Kt(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),Kt(n)&&(this.element.style.height=n+"px",this.iframe.style.height=n+"px",this._height=n);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?n-this.prevBounds.height:n;r={width:e,height:n,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,r),this.emit(De.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=xc(this.element)}load(e){var n=new pt,r=n.promise;if(!this.iframe)return n.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=(function(s){this.onLoad(s,n)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=Ef(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return n.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,n){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new _v(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(De.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(De.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),n.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var n=new pt;return this.displayed?n.resolve(this):this.render(e).then((function(){this.emit(De.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,n.resolve(this)}).bind(this),function(r){n.reject(r,this)}),n.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(De.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(De.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var n=this.contents.locationOf(e,this.settings.ignoreClass);return{left:n.left,top:n.top}}onDisplayed(e){}onResize(e,n){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=xc(this.element)),this.elementBounds}highlight(e,n={},r,i="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(De.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new Af(this.iframe,this.element));let u=new Ev(o,i,n,a),f=this.pane.addMark(u);return this.highlights[e]={mark:f,element:f.element,listeners:[l,r]},f.element.setAttribute("ref",i),f.element.addEventListener("click",l),f.element.addEventListener("touchstart",l),r&&(f.element.addEventListener("click",r),f.element.addEventListener("touchstart",r)),f}underline(e,n={},r,i="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(De.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new Af(this.iframe,this.element));let u=new EE(o,i,n,a),f=this.pane.addMark(u);return this.underlines[e]={mark:f,element:f.element,listeners:[l,r]},f.element.setAttribute("ref",i),f.element.addEventListener("click",l),f.element.addEventListener("touchstart",l),r&&(f.element.addEventListener("click",r),f.element.addEventListener("touchstart",r)),f}mark(e,n={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=u=>{this.emit(De.VIEWS.MARK_CLICKED,e,n)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(a));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,n&&Object.keys(n).forEach(u=>{l.dataset[u]=n[u]}),r&&(l.addEventListener("click",r),l.addEventListener("touchstart",r)),l.addEventListener("click",o),l.addEventListener("touchstart",o),this.placeMark(l,i),this.element.appendChild(l),this.marks[e]={element:l,range:i,listeners:[o,r]},a}placeMark(e,n){let r,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=n.getBoundingClientRect();r=o.top,i=o.right}else{let o=n.getClientRects(),l;for(var a=0;a!=o.length;a++)l=o[a],(!s||l.left<s)&&(s=l.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=l.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let n;e in this.highlights&&(n=this.highlights[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let n;e in this.underlines&&(n=this.underlines[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let n;e in this.marks&&(n=this.marks[e],this.element.removeChild(n.element),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&uE(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}fi(AE.prototype);function n3(){var t="reverse",e=r3();return document.body.appendChild(e),e.scrollLeft>0?t="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(t="negative")),document.body.removeChild(e),t}function r3(){var t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var n=document.createElement("span");n.style.width="1px",n.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(n),e.appendChild(r),t.appendChild(e),t}function i3(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var kv=i3,s3=typeof Sn=="object"&&Sn&&Sn.Object===Object&&Sn,a3=s3,o3=a3,l3=typeof self=="object"&&self&&self.Object===Object&&self,u3=o3||l3||Function("return this")(),DE=u3,c3=DE,f3=function(){return c3.Date.now()},d3=f3,h3=/\s/;function p3(t){for(var e=t.length;e--&&h3.test(t.charAt(e)););return e}var m3=p3,g3=m3,v3=/^\s+/;function y3(t){return t&&t.slice(0,g3(t)+1).replace(v3,"")}var w3=y3,x3=DE,b3=x3.Symbol,TE=b3,Tw=TE,NE=Object.prototype,_3=NE.hasOwnProperty,E3=NE.toString,Ro=Tw?Tw.toStringTag:void 0;function k3(t){var e=_3.call(t,Ro),n=t[Ro];try{t[Ro]=void 0;var r=!0}catch{}var i=E3.call(t);return r&&(e?t[Ro]=n:delete t[Ro]),i}var S3=k3,C3=Object.prototype,A3=C3.toString;function D3(t){return A3.call(t)}var T3=D3,Nw=TE,N3=S3,R3=T3,I3="[object Null]",O3="[object Undefined]",Rw=Nw?Nw.toStringTag:void 0;function L3(t){return t==null?t===void 0?O3:I3:Rw&&Rw in Object(t)?N3(t):R3(t)}var P3=L3;function F3(t){return t!=null&&typeof t=="object"}var M3=F3,B3=P3,j3=M3,z3="[object Symbol]";function U3(t){return typeof t=="symbol"||j3(t)&&B3(t)==z3}var $3=U3,W3=w3,Iw=kv,H3=$3,Ow=NaN,V3=/^[-+]0x[0-9a-f]+$/i,q3=/^0b[01]+$/i,X3=/^0o[0-7]+$/i,G3=parseInt;function Y3(t){if(typeof t=="number")return t;if(H3(t))return Ow;if(Iw(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Iw(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=W3(t);var n=q3.test(t);return n||X3.test(t)?G3(t.slice(2),n?2:8):V3.test(t)?Ow:+t}var K3=Y3,Z3=kv,Bh=d3,Lw=K3,Q3="Expected a function",J3=Math.max,eO=Math.min;function tO(t,e,n){var r,i,s,a,o,l,u=0,f=!1,c=!1,h=!0;if(typeof t!="function")throw new TypeError(Q3);e=Lw(e)||0,Z3(n)&&(f=!!n.leading,c="maxWait"in n,s=c?J3(Lw(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function d(x){var C=r,A=i;return r=i=void 0,u=x,a=t.apply(A,C),a}function v(x){return u=x,o=setTimeout(p,e),f?d(x):a}function w(x){var C=x-l,A=x-u,P=e-C;return c?eO(P,s-A):P}function g(x){var C=x-l,A=x-u;return l===void 0||C>=e||C<0||c&&A>=s}function p(){var x=Bh();if(g(x))return m(x);o=setTimeout(p,w(x))}function m(x){return o=void 0,h&&r?d(x):(r=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function k(){return o===void 0?a:m(Bh())}function _(){var x=Bh(),C=g(x);if(r=arguments,i=this,l=x,C){if(o===void 0)return v(l);if(c)return clearTimeout(o),o=setTimeout(p,e),d(l)}return o===void 0&&(o=setTimeout(p,e)),a}return _.cancel=y,_.flush=k,_}var RE=tO;const nO=Gr(RE);var rO=RE,iO=kv,sO="Expected a function";function aO(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(sO);return iO(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),rO(t,e,{leading:r,maxWait:e,trailing:i})}var oO=aO;const lO=Gr(oO);class uO{constructor(e){this.settings=e||{},this.id="epubjs-container-"+_d(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let n=e.height,r=e.width,i=e.overflow||!1,s=e.axis||"vertical",a=e.direction;An(this.settings,e),e.height&&Kt(e.height)&&(n=e.height+"px"),e.width&&Kt(e.width)&&(r=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),r&&(o.style.width=r),n&&(o.style.height=n),i&&(i==="scroll"&&s==="vertical"?(o.style["overflow-y"]=i,o.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=i):o.style.overflow=i),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var n=document.createElement("div");return n.style.visibility="hidden",n.style.overflow="hidden",n.style.width="0",n.style.height="0",n.appendChild(e),n}getElement(e){var n;if(iE(e)?n=e:typeof e=="string"&&(n=document.getElementById(e)),!n)throw new Error("Not an Element");return n}attachTo(e){var n=this.getElement(e),r;if(n)return this.settings.hidden?r=this.wrapper:r=this.container,n.appendChild(r),this.element=n,n}getContainer(){return this.container}onResize(e){(!Kt(this.settings.width)||!Kt(this.settings.height))&&(this.resizeFunc=lO(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,n){var r;let i=e||this.settings.width,s=n||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):Kt(e)?this.container.style.width=e+"px":this.container.style.width=e,n===null?(r=r||this.element.getBoundingClientRect(),r.height&&(n=r.height,this.container.style.height=n+"px")):Kt(n)?this.container.style.height=n+"px":this.container.style.height=n,Kt(e)||(e=this.container.clientWidth),Kt(n)||(n=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=_f(),o=window.getComputedStyle(document.body),l={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return i||(e=a.width-l.left-l.right),(this.settings.fullsize&&!s||!s)&&(n=a.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:n-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?_f():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,n){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),n.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(i+=a+":"+s[a]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class cO{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,n){return this._views.splice(n,0,e),this.container&&(n<this.container.children.length?this.container.insertBefore(e.element,this.container.children[n]):this.container.appendChild(e.element)),this.length++,e}remove(e){var n=this._views.indexOf(e);n>-1&&this._views.splice(n,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,n=this.length;if(this.length){for(var r=0;r<n;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var n,r=this.length,i=0;i<r;i++)if(n=this._views[i],n.displayed&&n.section.index==e.index)return n}displayed(){for(var e=[],n,r=this.length,i=0;i<r;i++)n=this._views[i],n.displayed&&e.push(n);return e}show(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class Df{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new bv(this),this.settings=An(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),An(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,n){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=n,this.settings.rtlScrollType=n3(),this.stage=new uO({width:n.width,height:n.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new cO(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(n){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:n}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(De.MANAGERS.ORIENTATION_CHANGE,n)}).bind(this),500)}onResized(e){this.resize()}resize(e,n,r){let i=this.stage.size(e,n);if(this.winBounds=_f(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(De.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,n){return new this.View(e,An(this.viewSettings,{forceRight:n}))}handleNextPrePaginated(e,n,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||n.index===0)return;if(i=n.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,n){var r=new pt,i=r.promise;(n===e.href||Kt(n))&&(n=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let l=s.width();this.scrollTo(o.left+l,o.top,!0)}if(n){let l=s.locationOf(n),u=s.width();this.moveTo(l,u)}return r.resolve(),i}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then((function(o){if(n){let l=o.locationOf(n),u=o.width();this.moveTo(l,u)}}).bind(this),o=>{r.reject(o)}).then((function(){return this.handleNextPrePaginated(a,e,this.add)}).bind(this)).then((function(){this.views.show(),r.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(De.MANAGERS.ADDED,e)}afterResized(e){this.emit(De.MANAGERS.RESIZE,e.section)}moveTo(e,n){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-n),this.scrollTo(r,i,!0)}add(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(De.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(De.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(De.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(De.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,n){var r=this.createView(e,n);return r.on(De.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(De.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(De.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft,n>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(n=this.container.scrollLeft+this.layout.delta*-1,n>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,n>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft+this.container.offsetWidth,n<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(n=this.container.scrollLeft,n<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=n.height<window.innerHeight?n.height:window.innerHeight,i=n.width<window.innerWidth?n.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(u=>{let{index:f,href:c}=u.section,h=u.position(),d=u.width(),v=u.height(),w,g,p,m;s?(w=a+n.top-h.top+o,g=w+r-o,m=this.layout.count(v,r).pages,p=r):(w=a+n.left-h.left+o,g=w+i-o,m=this.layout.count(d,i).pages,p=i);let y=Math.ceil(w/p),k=[],_=Math.ceil(g/p);if(this.settings.direction==="rtl"&&!s){let A=y;y=m-_,_=m-A}k=[];for(var x=y;x<=_;x++){let A=x+1;k.push(A)}let C=this.mapping.page(u.contents,u.section.cfiBase,w,g);return{index:f,href:c,pages:k,totalPages:m,mapping:C}})}paginatedLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(a=>{let{index:o,href:l}=a.section,u,f=a.position(),c=a.width(),h,d,v;this.settings.direction==="rtl"?(u=n.right-r,v=Math.min(Math.abs(u-f.left),this.layout.width)-i,d=f.width-(f.right-u)-i,h=d-v):(u=n.left+r,v=Math.min(f.right-u,this.layout.width)-i,h=u-f.left+i,d=h+v),i+=v;let w=this.mapping.page(a.contents,a.section.cfiBase,h,d),g=this.layout.count(c).pages,p=Math.floor(h/this.layout.pageWidth),m=[],y=Math.floor(d/this.layout.pageWidth);if(p<0&&(p=0,y=y+1),this.settings.direction==="rtl"){let _=p;p=g-y,y=g-_}for(var k=p+1;k<=y;k++){let _=k;m.push(_)}return{index:o,href:l,pages:m,totalPages:g,mapping:w}})}isVisible(e,n,r,i){var s=e.position(),a=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-n&&s.left<a.right+r?!0:this.settings.axis==="vertical"&&s.bottom>a.top-n&&s.top<a.bottom+r}visible(){for(var e=this.bounds(),n=this.views.displayed(),r=n.length,i=[],s,a,o=0;o<r;o++)a=n[o],s=this.isVisible(a,0,0,e),s===!0&&i.push(a);return i}scrollBy(e,n,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,n*i):(e&&(this.container.scrollLeft+=e*i),n&&(this.container.scrollTop+=n)),this.scrolled=!0}scrollTo(e,n,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,n):(this.container.scrollLeft=e,this.container.scrollTop=n),this.scrolled=!0}onScroll(){let e,n;this.settings.fullsize?(e=window.scrollY,n=window.scrollX):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:(this.emit(De.MANAGERS.SCROLL,{top:e,left:n}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(De.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Cf(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(n){n&&n.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,n){!n&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Cf(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,n="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":n,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(n){const r=n&&n.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}fi(Df.prototype);const fO=Math.PI/2,dO={easeOutSine:function(t){return Math.sin(t*fO)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInCubic:function(t){return Math.pow(t,3)}};class km{constructor(e,n){this.settings=An({duration:80,minVelocity:.2,minDistance:10,easing:dO.easeInCubic},n||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(De.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(De.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let n=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{n.on(r,i=>this.triggerViewEvent(i,n))})}triggerViewEvent(e,n){this.emit(e.type,e,n)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:n,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=n,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:n,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=n-this.endTouchX),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let n=this.wasSwiped();n!==0?this.snap(n):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,n=this.endTouchX-this.startTouchX,r=Math.abs(n),i=this.endTime-this.startTime,s=n/i,a=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor;return e%n!==0}snap(e=0){let n=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(n/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const n=new pt,r=this.scrollLeft,i=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const l=this.now(),u=Math.min(1,(l-i)/s);if(a(u),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,n.resolve();return}u<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(r+(e-r)*u,0)):(this.scrollTo(e,0),this.snapping=!1,n.resolve())}return o.call(this),n.promise}scrollTo(e=0,n=0){this.fullsize?window.scroll(e,n):(this.scroller.scrollLeft=e,this.scroller.scrollTop=n)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}fi(km.prototype);class hO extends Df{constructor(e){super(e),this.name="continuous",this.settings=An(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),An(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,n){return Df.prototype.display.call(this,e,n).then((function(){return this.fill()}).bind(this))}fill(e){var n=e||new pt;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(n):n.resolve()}),n.promise}moveTo(e){var n=0,r=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(n>0||r>0)&&this.scrollBy(n,r,!0)}afterResized(e){this.emit(De.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var n=this.createView(e);return this.views.append(n),n.on(De.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(De.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(De.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.display(this.request)}append(e){var n=this.createView(e);return n.on(De.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(De.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(De.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n}prepend(e){var n=this.createView(e);return n.on(De.VIEWS.RESIZED,r=>{this.counter(r),n.expanded=!0}),n.on(De.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(De.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var n=this.bounds(),r=this.views.all(),i=r.length,s=typeof e<"u"?e:this.settings.offset||0,a,o,l=new pt,u=[],f=0;f<i;f++)if(o=r[f],a=this.isVisible(o,s,s,n),a===!0)if(o.displayed)o.show();else{let c=o.display(this.request).then(function(h){h.show()},h=>{o.hide()});u.push(c)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return u.length?Promise.all(u).catch(c=>{l.reject(c)}):(l.resolve(),l.promise)}check(e,n){var r=new pt,i=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),n&&!s&&(a=n);var o=this._bounds;let l=s?this.scrollLeft:this.scrollTop,u=s?Math.floor(o.width):o.height,f=s?this.container.scrollWidth:this.container.scrollHeight,c=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",h=this.settings.rtlScrollType,d=this.settings.direction==="rtl";this.settings.fullsize?(s&&d&&h==="negative"||!s&&d&&h==="default")&&(l=l*-1):(d&&h==="default"&&c==="horizontal"&&(l=f-u-l),d&&h==="negative"&&c==="horizontal"&&(l=l*-1));let v=()=>{let y=this.views.first(),k=y&&y.section.prev();k&&i.push(this.prepend(k))},w=()=>{let y=this.views.last(),k=y&&y.section.next();k&&i.push(this.append(k))},g=l+u+a,p=l-a;g>=f&&w(),p<0&&v();let m=i.map(y=>y.display(this.request));return i.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(a),y=>y):(this.q.enqueue((function(){this.update()}).bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new pt,n=this.views.displayed(),r=n[0],i=n[n.length-1],s=this.views.indexOf(r),a=this.views.indexOf(i),o=this.views.slice(0,s),l=this.views.slice(a+1),u=0;u<o.length-1;u++)this.erase(o[u],o);for(var f=1;f<l.length;f++)this.erase(l[f]);return e.resolve(),e.promise}erase(e,n){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),n&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(n){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new km(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=yv;let n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*n,this.scrollLeft=window.scrollX*n):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=nO(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,n,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,n=window.scrollX*r):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(n-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=n,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(De.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(De.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new km(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Sv{constructor(e,n){this.settings=An(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),An(this.settings,n),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Br(this),this.hooks.serialize=new Br(this),this.hooks.content=new Br(this),this.hooks.unloaded=new Br(this),this.hooks.layout=new Br(this),this.hooks.render=new Br(this),this.hooks.show=new Br(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new $I(this),this.annotations=new VI(this),this.epubcfi=new mt,this.q=new bv(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new pt,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var n;return typeof e=="string"&&e==="default"?n=Df:typeof e=="string"&&e==="continuous"?n=hO:n=e,n}requireView(e){var n;return typeof e=="string"&&e==="iframe"?n=AE:n=e,n}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(De.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(De.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(De.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(De.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(De.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(De.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(De.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var n=new pt,r=n.promise,i;return this.displaying=n,this.book.locations.length()&&sE(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{n.resolve(i),this.displaying=void 0,this.emit(De.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(De.RENDITION.DISPLAY_ERROR,s)}),r):(n.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(De.VIEWS.MARK_CLICKED,(n,r)=>this.triggerMarkEvent(n,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(De.RENDITION.RENDERED,e.section,e)}):this.emit(De.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(De.RENDITION.REMOVED,e.section,e)})}onResized(e,n){this.emit(De.RENDITION.RESIZED,{width:e.width,height:e.height},n),this.location&&this.location.start&&this.display(n||this.location.start.cfi)}onOrientationChange(e){this.emit(De.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,n,r){e&&(this.settings.width=e),n&&(this.settings.height=n),this.manager.resize(e,n,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var n,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,u=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),n={layout:r,spread:i,orientation:s,flow:a,viewport:o,minSpreadWidth:l,direction:u},n}flow(e){var n=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(n="scrolled"),(e==="auto"||e==="paginated")&&(n="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(n),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(n),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new vE(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(De.LAYOUT.UPDATED,(n,r)=>{this.emit(De.RENDITION.LAYOUT,n,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,n){this.settings.spread=e,n&&(this.settings.minSpreadWidth=n),this._layout&&this._layout.spread(e,n),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then((function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(De.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(De.RENDITION.RELOCATED,this.location))}).bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(De.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(De.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(n){return this.located(n)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let n=e[0],r=e[e.length-1],i={start:{index:n.index,href:n.href,cfi:n.mapping.start,displayed:{page:n.pages[0]||1,total:n.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(n.mapping.start),a=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(i.end.location=a,i.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(n.mapping.start),l=this.book.pageList.pageFromCfi(r.mapping.end);return o!=-1&&(i.start.page=o),l!=-1&&(i.end.page=l),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),n.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){_c.forEach(n=>{e.on(n,r=>this.triggerViewEvent(r,e))}),e.on(De.CONTENTS.SELECTED,n=>this.triggerSelectedEvent(n,e))}triggerViewEvent(e,n){this.emit(e.type,e,n)}triggerSelectedEvent(e,n){this.emit(De.RENDITION.SELECTED,e,n)}triggerMarkEvent(e,n,r){this.emit(De.RENDITION.MARK_CLICKED,e,n,r)}getRange(e,n){var r=new mt(e),i=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(r,n)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let n=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)))*.95,i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(De.CONTENTS.LINK_CLICKED,n=>{let r=this.book.path.relative(n);this.display(r)})}injectStylesheet(e,n){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,n){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,n){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}fi(Sv.prototype);function ts(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var IE={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function a(u,f){if(!i[u]){if(!r[u]){var c=typeof ts=="function"&&ts;if(!f&&c)return c(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[u]={exports:{}};r[u][0].call(d.exports,function(v){var w=r[u][1][v];return a(w||v)},d,d.exports,n,r,i,s)}return i[u].exports}for(var o=typeof ts=="function"&&ts,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u=[],f,c,h,d,v,w,g,p=0,m=l.length,y=m,k=s.getTypeOf(l)!=="string";p<l.length;)y=m-p,k?(f=l[p++],c=p<m?l[p++]:0,h=p<m?l[p++]:0):(f=l.charCodeAt(p++),c=p<m?l.charCodeAt(p++):0,h=p<m?l.charCodeAt(p++):0),d=f>>2,v=(f&3)<<4|c>>4,w=y>1?(c&15)<<2|h>>6:64,g=y>2?h&63:64,u.push(o.charAt(d)+o.charAt(v)+o.charAt(w)+o.charAt(g));return u.join("")},i.decode=function(l){var u,f,c,h,d,v,w,g=0,p=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var y=l.length*3/4;if(l.charAt(l.length-1)===o.charAt(64)&&y--,l.charAt(l.length-2)===o.charAt(64)&&y--,y%1!==0)throw new Error("Invalid base64 input, bad content length.");var k;for(a.uint8array?k=new Uint8Array(y|0):k=new Array(y|0);g<l.length;)h=o.indexOf(l.charAt(g++)),d=o.indexOf(l.charAt(g++)),v=o.indexOf(l.charAt(g++)),w=o.indexOf(l.charAt(g++)),u=h<<2|d>>4,f=(d&15)<<4|v>>2,c=(v&3)<<6|w,k[p++]=u,v!==64&&(k[p++]=f),w!==64&&(k[p++]=c);return k}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(f,c,h,d,v){this.compressedSize=f,this.uncompressedSize=c,this.crc32=h,this.compression=d,this.compressedContent=v}u.prototype={getContentWorker:function(){var f=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,c,h){return f.pipe(new o).pipe(new l("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils");function a(){for(var f,c=[],h=0;h<256;h++){f=h;for(var d=0;d<8;d++)f=f&1?3988292384^f>>>1:f>>>1;c[h]=f}return c}var o=a();function l(f,c,h,d){var v=o,w=d+h;f=f^-1;for(var g=d;g<w;g++)f=f>>>8^v[(f^c[g])&255];return f^-1}function u(f,c,h,d){var v=o,w=d+h;f=f^-1;for(var g=d;g<w;g++)f=f>>>8^v[(f^c.charCodeAt(g))&255];return f^-1}r.exports=function(c,h){if(typeof c>"u"||!c.length)return 0;var d=s.getTypeOf(c)!=="string";return d?l(h|0,c,c.length,0):u(h|0,c,c.length,0)}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;typeof Promise<"u"?s=Promise:s=n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";i.magic="\b\0";function f(c,h){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}o.inherits(f,l),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,c.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},i.compressWorker=function(c){return new f("Deflate",c)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker"),o=n("../utf8"),l=n("../crc32"),u=n("../signature"),f=function(p,m){var y="",k;for(k=0;k<m;k++)y+=String.fromCharCode(p&255),p=p>>>8;return y},c=function(p,m){var y=p;return p||(y=m?16893:33204),(y&65535)<<16},h=function(p){return(p||0)&63},d=function(p,m,y,k,_,x){var C=p.file,A=p.compression,P=x!==o.utf8encode,S=s.transformTo("string",x(C.name)),F=s.transformTo("string",o.utf8encode(C.name)),z=C.comment,ie=s.transformTo("string",x(z)),te=s.transformTo("string",o.utf8encode(z)),K=F.length!==C.name.length,Q=te.length!==z.length,Z,$,re="",I="",pe="",oe=C.dir,B=C.date,be={crc32:0,compressedSize:0,uncompressedSize:0};(!m||y)&&(be.crc32=p.crc32,be.compressedSize=p.compressedSize,be.uncompressedSize=p.uncompressedSize);var je=0;m&&(je|=8),!P&&(K||Q)&&(je|=2048);var Te=0,We=0;oe&&(Te|=16),_==="UNIX"?(We=798,Te|=c(C.unixPermissions,oe)):(We=20,Te|=h(C.dosPermissions)),Z=B.getUTCHours(),Z=Z<<6,Z=Z|B.getUTCMinutes(),Z=Z<<5,Z=Z|B.getUTCSeconds()/2,$=B.getUTCFullYear()-1980,$=$<<4,$=$|B.getUTCMonth()+1,$=$<<5,$=$|B.getUTCDate(),K&&(I=f(1,1)+f(l(S),4)+F,re+="up"+f(I.length,2)+I),Q&&(pe=f(1,1)+f(l(ie),4)+te,re+="uc"+f(pe.length,2)+pe);var Me="";Me+=`
\0`,Me+=f(je,2),Me+=A.magic,Me+=f(Z,2),Me+=f($,2),Me+=f(be.crc32,4),Me+=f(be.compressedSize,4),Me+=f(be.uncompressedSize,4),Me+=f(S.length,2),Me+=f(re.length,2);var Qe=u.LOCAL_FILE_HEADER+Me+S+re,Ae=u.CENTRAL_FILE_HEADER+f(We,2)+Me+f(ie.length,2)+"\0\0\0\0"+f(Te,4)+f(k,4)+S+re+ie;return{fileRecord:Qe,dirRecord:Ae}},v=function(p,m,y,k,_){var x="",C=s.transformTo("string",_(k));return x=u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(p,2)+f(p,2)+f(m,4)+f(y,4)+f(C.length,2)+C,x},w=function(p){var m="";return m=u.DATA_DESCRIPTOR+f(p.crc32,4)+f(p.compressedSize,4)+f(p.uncompressedSize,4),m};function g(p,m,y,k){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=k,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(g,a),g.prototype.push=function(p){var m=p.meta.percent||0,y=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,a.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-k-1))/y:100}}))},g.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var y=d(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,y=d(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),m)this.push({data:w(p),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y=this.bytesWritten-p,k=v(this.dirRecords.length,y,p,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(y){m.processChunk(y)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(y){m.error(y)}),this},g.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},g.prototype.error=function(p){var m=this._sources;if(!a.prototype.error.call(this,p))return!1;for(var y=0;y<m.length;y++)try{m[y].error(p)}catch{}return!0},g.prototype.lock=function(){a.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker"),o=function(l,u){var f=l||u,c=s[f];if(!c)throw new Error(f+" is not a valid compression method !");return c};i.generateWorker=function(l,u,f){var c=new a(u.streamFiles,f,u.platform,u.encodeFileName),h=0;try{l.forEach(function(d,v){h++;var w=o(v.options.compression,u.compression),g=v.options.compressionOptions||u.compressionOptions||{},p=v.dir,m=v.date;v._compressWorker(w,g).withStreamInfo("file",{name:d,dir:p,date:m,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(c)}),c.entriesCount=h}catch(d){c.error(d)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=n("./object"),s.prototype.loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function c(h){return new a.Promise(function(d,v){var w=h.decompressed.getContentWorker().pipe(new u);w.on("error",function(g){v(g)}).on("end",function(){w.streamInfo.crc32!==h.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}r.exports=function(h,d){var v=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(w){var g=new l(d);return g.load(w),g}).then(function(g){var p=[a.Promise.resolve(g)],m=g.files;if(d.checkCRC32)for(var y=0;y<m.length;y++)p.push(c(m[y]));return a.Promise.all(p)}).then(function(g){for(var p=g.shift(),m=p.files,y=0;y<m.length;y++){var k=m[y],_=k.fileNameStr,x=s.resolve(k.fileNameStr);v.file(x,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:d.createFolders}),k.dir||(v.file(x).unsafeOriginalName=_)}return p.zipComment.length&&(v.comment=p.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(l,u){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(l){var u=this;this._stream=l,l.pause(),l.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable,a=n("../utils");a.inherits(o,s);function o(l,u,f){s.call(this,u),this._helper=l;var c=this;l.on("data",function(h,d){c.push(h)||c._helper.pause(),f&&f(d)}).on("error",function(h){c.emit("error",h)}).on("end",function(){c.push(null)})}o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){var s=n("./utf8"),a=n("./utils"),o=n("./stream/GenericWorker"),l=n("./stream/StreamHelper"),u=n("./defaults"),f=n("./compressedObject"),c=n("./zipObject"),h=n("./generate"),d=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),w=function(_,x,C){var A=a.getTypeOf(x),P,S=a.extend(C||{},u);S.date=S.date||new Date,S.compression!==null&&(S.compression=S.compression.toUpperCase()),typeof S.unixPermissions=="string"&&(S.unixPermissions=parseInt(S.unixPermissions,8)),S.unixPermissions&&S.unixPermissions&16384&&(S.dir=!0),S.dosPermissions&&S.dosPermissions&16&&(S.dir=!0),S.dir&&(_=p(_)),S.createFolders&&(P=g(_))&&m.call(this,P,!0);var F=A==="string"&&S.binary===!1&&S.base64===!1;(!C||typeof C.binary>"u")&&(S.binary=!F);var z=x instanceof f&&x.uncompressedSize===0;(z||S.dir||!x||x.length===0)&&(S.base64=!1,S.binary=!0,x="",S.compression="STORE",A="string");var ie=null;x instanceof f||x instanceof o?ie=x:d.isNode&&d.isStream(x)?ie=new v(_,x):ie=a.prepareContent(_,x,S.binary,S.optimizedBinaryString,S.base64);var te=new c(_,ie,S);this.files[_]=te},g=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var x=_.lastIndexOf("/");return x>0?_.substring(0,x):""},p=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},m=function(_,x){return x=typeof x<"u"?x:u.createFolders,_=p(_),this.files[_]||w.call(this,_,null,{dir:!0,createFolders:x}),this.files[_]};function y(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var x,C,A;for(x in this.files)A=this.files[x],C=x.slice(this.root.length,x.length),C&&x.slice(0,this.root.length)===this.root&&_(C,A)},filter:function(_){var x=[];return this.forEach(function(C,A){_(C,A)&&x.push(A)}),x},file:function(_,x,C){if(arguments.length===1)if(y(_)){var A=_;return this.filter(function(S,F){return!F.dir&&A.test(S)})}else{var P=this.files[this.root+_];return P&&!P.dir?P:null}else _=this.root+_,w.call(this,_,x,C);return this},folder:function(_){if(!_)return this;if(y(_))return this.filter(function(P,S){return S.dir&&_.test(P)});var x=this.root+_,C=m.call(this,x),A=this.clone();return A.root=C.name,A},remove:function(_){_=this.root+_;var x=this.files[_];if(x||(_.slice(-1)!=="/"&&(_+="/"),x=this.files[_]),x&&!x.dir)delete this.files[_];else for(var C=this.filter(function(P,S){return S.name.slice(0,_.length)===_}),A=0;A<C.length;A++)delete this.files[C[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var x,C={};try{if(C=a.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),C.type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),(C.platform==="darwin"||C.platform==="freebsd"||C.platform==="linux"||C.platform==="sunos")&&(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var A=C.comment||this.comment||"";x=h.generateWorker(this,C,A)}catch(P){x=new o("error"),x.error(P)}return new l(x,C.type||"string",C.mimeType)},generateAsync:function(_,x){return this.generateInternalStream(_).accumulate(x)},generateNodeStream:function(_,x){return _=_||{},_.type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(x)}};r.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader"),a=n("../utils");function o(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=l[u]&255}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),f=l.charCodeAt(1),c=l.charCodeAt(2),h=l.charCodeAt(3),d=this.length-4;d>=0;--d)if(this.data[d]===u&&this.data[d+1]===f&&this.data[d+2]===c&&this.data[d+3]===h)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),f=l.charCodeAt(1),c=l.charCodeAt(2),h=l.charCodeAt(3),d=this.readData(4);return u===d[0]&&f===d[1]&&c===d[2]&&h===d[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l=0,u;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader"),a=n("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader"),a=n("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){var u=this.readData(4);return l===u},o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader"),a=n("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(c){var h=s.getTypeOf(c);return s.checkSupport(h),h==="string"&&!a.uint8array?new l(c):h==="nodebuffer"?new u(c):a.uint8array?new f(s.transformTo("uint8array",c)):new o(s.transformTo("array",c))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32"),o=n("../utils");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker"),o=16*1024;function l(u){a.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){f.dataIsReady=!0,f.data=c,f.max=c&&c.length||0,f.type=s.getTypeOf(c),f.isPaused||f._tickAndRepeat()},function(c){f.error(c)})}s.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=o,f=null,c=Math.min(this.max,this.index+u);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,c);break;case"uint8array":f=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":f=this.data.slice(this.index,c);break}return this.index=c,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),f=n("../external"),c=null;if(u.nodestream)try{c=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,p,m){switch(g){case"blob":return s.newBlob(s.transformTo("arraybuffer",p),m);case"base64":return l.encode(p);default:return s.transformTo(g,p)}}function d(g,p){var m,y=0,k=null,_=0;for(m=0;m<p.length;m++)_+=p[m].length;switch(g){case"string":return p.join("");case"array":return Array.prototype.concat.apply([],p);case"uint8array":for(k=new Uint8Array(_),m=0;m<p.length;m++)k.set(p[m],y),y+=p[m].length;return k;case"nodebuffer":return Buffer.concat(p);default:throw new Error("concat : unsupported type '"+g+"'")}}function v(g,p){return new f.Promise(function(m,y){var k=[],_=g._internalType,x=g._outputType,C=g._mimeType;g.on("data",function(A,P){k.push(A),p&&p(P)}).on("error",function(A){k=[],y(A)}).on("end",function(){try{var A=h(x,d(_,k),C);m(A)}catch(P){y(P)}k=[]}).resume()})}function w(g,p,m){var y=p;switch(p){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string";break}try{this._internalType=y,this._outputType=p,this._mimeType=m,s.checkSupport(y),this._worker=g.pipe(new a(y)),g.lock()}catch(k){this._worker=new o("error"),this._worker.error(k)}}w.prototype={accumulate:function(g){return v(this,g)},on:function(g,p){var m=this;return g==="data"?this._worker.on(g,function(y){p.call(m,y.data,y.meta)}):this._worker.on(g,function(){s.delay(p,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;u[254]=u[254]=1;var c=function(g){var p,m,y,k,_,x=g.length,C=0;for(k=0;k<x;k++)m=g.charCodeAt(k),(m&64512)===55296&&k+1<x&&(y=g.charCodeAt(k+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),k++)),C+=m<128?1:m<2048?2:m<65536?3:4;for(a.uint8array?p=new Uint8Array(C):p=new Array(C),_=0,k=0;_<C;k++)m=g.charCodeAt(k),(m&64512)===55296&&k+1<x&&(y=g.charCodeAt(k+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),k++)),m<128?p[_++]=m:m<2048?(p[_++]=192|m>>>6,p[_++]=128|m&63):m<65536?(p[_++]=224|m>>>12,p[_++]=128|m>>>6&63,p[_++]=128|m&63):(p[_++]=240|m>>>18,p[_++]=128|m>>>12&63,p[_++]=128|m>>>6&63,p[_++]=128|m&63);return p},h=function(g,p){var m;for(p=p||g.length,p>g.length&&(p=g.length),m=p-1;m>=0&&(g[m]&192)===128;)m--;return m<0||m===0?p:m+u[g[m]]>p?m:p},d=function(g){var p,m,y,k,_=g.length,x=new Array(_*2);for(m=0,p=0;p<_;){if(y=g[p++],y<128){x[m++]=y;continue}if(k=u[y],k>4){x[m++]=65533,p+=k-1;continue}for(y&=k===2?31:k===3?15:7;k>1&&p<_;)y=y<<6|g[p++]&63,k--;if(k>1){x[m++]=65533;continue}y<65536?x[m++]=y:(y-=65536,x[m++]=55296|y>>10&1023,x[m++]=56320|y&1023)}return x.length!==m&&(x.subarray?x=x.subarray(0,m):x.length=m),s.applyFromCharCode(x)};i.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):c(p)},i.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):(p=s.transformTo(a.uint8array?"uint8array":"array",p),d(p))};function v(){l.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(v,l),v.prototype.processChunk=function(g){var p=s.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=p;p=new Uint8Array(m.length+this.leftOver.length),p.set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var y=h(p),k=p;y!==p.length&&(a.uint8array?(k=p.subarray(0,y),this.leftOver=p.subarray(y,p.length)):(k=p.slice(0,y),this.leftOver=p.slice(y,p.length))),this.push({data:i.utf8decode(k),meta:g.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=v;function w(){l.call(this,"utf-8 encode")}s.inherits(w,l),w.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),l=n("./external");n("setimmediate");function u(g){var p=null;return s.uint8array?p=new Uint8Array(g.length):p=new Array(g.length),c(g,p)}i.newBlob=function(g,p){i.checkSupport("blob");try{return new Blob([g],{type:p})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,y=new m;return y.append(g),y.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};function f(g){return g}function c(g,p){for(var m=0;m<g.length;++m)p[m]=g.charCodeAt(m)&255;return p}var h={stringifyByChunk:function(g,p,m){var y=[],k=0,_=g.length;if(_<=m)return String.fromCharCode.apply(null,g);for(;k<_;)p==="array"||p==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(k,Math.min(k+m,_)))):y.push(String.fromCharCode.apply(null,g.subarray(k,Math.min(k+m,_)))),k+=m;return y.join("")},stringifyByChar:function(g){for(var p="",m=0;m<g.length;m++)p+=String.fromCharCode(g[m]);return p},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(g){var p=65536,m=i.getTypeOf(g),y=!0;if(m==="uint8array"?y=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=h.applyCanBeUsed.nodebuffer),y)for(;p>1;)try{return h.stringifyByChunk(g,m,p)}catch{p=Math.floor(p/2)}return h.stringifyByChar(g)}i.applyFromCharCode=d;function v(g,p){for(var m=0;m<g.length;m++)p[m]=g[m];return p}var w={};w.string={string:f,array:function(g){return c(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return c(g,new Uint8Array(g.length))},nodebuffer:function(g){return c(g,o.allocBuffer(g.length))}},w.array={string:d,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},w.arraybuffer={string:function(g){return d(new Uint8Array(g))},array:function(g){return v(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:d,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return o.newBufferFrom(g)}},w.nodebuffer={string:d,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return v(g,new Uint8Array(g.length))},nodebuffer:f},i.transformTo=function(g,p){if(p||(p=""),!g)return p;i.checkSupport(g);var m=i.getTypeOf(p),y=w[m][g](p);return y},i.resolve=function(g){for(var p=g.split("/"),m=[],y=0;y<p.length;y++){var k=p[y];k==="."||k===""&&y!==0&&y!==p.length-1||(k===".."?m.pop():m.push(k))}return m.join("/")},i.getTypeOf=function(g){if(typeof g=="string")return"string";if(Object.prototype.toString.call(g)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(g))return"nodebuffer";if(s.uint8array&&g instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&g instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(g){var p=s[g.toLowerCase()];if(!p)throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var p="",m,y;for(y=0;y<(g||"").length;y++)m=g.charCodeAt(y),p+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return p},i.delay=function(g,p,m){setImmediate(function(){g.apply(m||null,p||[])})},i.inherits=function(g,p){var m=function(){};m.prototype=p.prototype,g.prototype=new m},i.extend=function(){var g={},p,m;for(p=0;p<arguments.length;p++)for(m in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],m)&&typeof g[m]>"u"&&(g[m]=arguments[p][m]);return g},i.prepareContent=function(g,p,m,y,k){var _=l.Promise.resolve(p).then(function(x){var C=s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1);return C&&typeof FileReader<"u"?new l.Promise(function(A,P){var S=new FileReader;S.onload=function(F){A(F.target.result)},S.onerror=function(F){P(F.target.error)},S.readAsArrayBuffer(x)}):x});return _.then(function(x){var C=i.getTypeOf(x);return C?(C==="arraybuffer"?x=i.transformTo("uint8array",x):C==="string"&&(k?x=a.decode(x):m&&y!==!0&&(x=u(x))),x):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(c)+")")}},isSignature:function(c,h){var d=this.reader.index;this.reader.setIndex(c);var v=this.reader.readString(4),w=v===h;return this.reader.setIndex(d),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",d=a.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c=this.zip64EndOfCentralSize-44,h=0,d,v,w;h<c;)d=this.reader.readInt(2),v=this.reader.readInt(4),w=this.reader.readData(v),this.zip64ExtensibleData[d]={id:d,length:v,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)c=new l({zip64:this.zip64},this.loadOptions),c.readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0){var h=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw h?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(c);var d=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),c<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var w=d-v;if(w>0)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),f=n("./compressions"),c=n("./support"),h=0,d=3,v=function(g){for(var p in f)if(Object.prototype.hasOwnProperty.call(f,p)&&f[p].magic===g)return f[p];return null};function w(g,p){this.options=g,this.loadOptions=p}w.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(g){var p,m;if(g.skip(22),this.fileNameLength=g.readInt(2),m=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(p=v(this.compressionMethod),p===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var p=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(p),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),g===h&&(this.dosPermissions=this.externalFileAttributes&63),g===d&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var p=g.index+this.extraFieldsLength,m,y,k;for(this.extraFields||(this.extraFields={});g.index+4<p;)m=g.readInt(2),y=g.readInt(2),k=g.readData(y),this.extraFields[m]={id:m,length:y,value:k};g.setIndex(p)},handleUTF8:function(){var g=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var k=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var p=s(g.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:u.utf8decode(p.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var p=s(g.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:u.utf8decode(p.readData(g.length-5))}return null}},r.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),o=n("./utf8"),l=n("./compressedObject"),u=n("./stream/GenericWorker"),f=function(v,w,g){this.name=v,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=w,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}};f.prototype={internalStream:function(v){var w=null,g="string";try{if(!v)throw new Error("No output type specified.");g=v.toLowerCase();var p=g==="string"||g==="text";(g==="binarystring"||g==="text")&&(g="string"),w=this._decompressWorker();var m=!this._dataBinary;m&&!p&&(w=w.pipe(new o.Utf8EncodeWorker)),!m&&p&&(w=w.pipe(new o.Utf8DecodeWorker))}catch(y){w=new u("error"),w.error(y)}return new s(w,g,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof l&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new o.Utf8EncodeWorker)),l.createWorkerFrom(g,v,w)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)f.prototype[c[d]]=h;r.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,u=new a(v),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=v,o=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:o=function(){setTimeout(v,0)};var h,d=[];function v(){h=!0;for(var g,p,m=d.length;m;){for(p=d,d=[],g=-1;++g<m;)p[g]();m=d.length}h=!1}r.exports=w;function w(g){d.push(g)===1&&!h&&o()}}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];r.exports=c;function c(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==a&&w(this,_)}c.prototype.finally=function(_){if(typeof _!="function")return this;var x=this.constructor;return this.then(C,A);function C(P){function S(){return P}return x.resolve(_()).then(S)}function A(P){function S(){throw P}return x.resolve(_()).then(S)}},c.prototype.catch=function(_){return this.then(null,_)},c.prototype.then=function(_,x){if(typeof _!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var C=new this.constructor(a);if(this.state!==f){var A=this.state===u?_:x;d(C,A,this.outcome)}else this.queue.push(new h(C,_,x));return C};function h(_,x,C){this.promise=_,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(_){o.resolve(this.promise,_)},h.prototype.otherCallFulfilled=function(_){d(this.promise,this.onFulfilled,_)},h.prototype.callRejected=function(_){o.reject(this.promise,_)},h.prototype.otherCallRejected=function(_){d(this.promise,this.onRejected,_)};function d(_,x,C){s(function(){var A;try{A=x(C)}catch(P){return o.reject(_,P)}A===_?o.reject(_,new TypeError("Cannot resolve promise with itself")):o.resolve(_,A)})}o.resolve=function(_,x){var C=g(v,x);if(C.status==="error")return o.reject(_,C.value);var A=C.value;if(A)w(_,A);else{_.state=u,_.outcome=x;for(var P=-1,S=_.queue.length;++P<S;)_.queue[P].callFulfilled(x)}return _},o.reject=function(_,x){_.state=l,_.outcome=x;for(var C=-1,A=_.queue.length;++C<A;)_.queue[C].callRejected(x);return _};function v(_){var x=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof x=="function")return function(){x.apply(_,arguments)}}function w(_,x){var C=!1;function A(z){C||(C=!0,o.reject(_,z))}function P(z){C||(C=!0,o.resolve(_,z))}function S(){x(P,A)}var F=g(S);F.status==="error"&&A(F.value)}function g(_,x){var C={};try{C.value=_(x),C.status="success"}catch(A){C.status="error",C.value=A}return C}c.resolve=p;function p(_){return _ instanceof this?_:o.resolve(new this(a),_)}c.reject=m;function m(_){var x=new this(a);return o.reject(x,_)}c.all=y;function y(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,A=!1;if(!C)return this.resolve([]);for(var P=new Array(C),S=0,F=-1,z=new this(a);++F<C;)ie(_[F],F);return z;function ie(te,K){x.resolve(te).then(Q,function(Z){A||(A=!0,o.reject(z,Z))});function Q(Z){P[K]=Z,++S===C&&!A&&(A=!0,o.resolve(z,P))}}}c.race=k;function k(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,A=!1;if(!C)return this.resolve([]);for(var P=-1,S=new this(a);++P<C;)F(_[P]);return S;function F(z){x.resolve(z).then(function(ie){A||(A=!0,o.resolve(S,ie))},function(ie){A||(A=!0,o.reject(S,ie))})}}},{immediate:36}],38:[function(n,r,i){var s=n("./lib/utils/common").assign,a=n("./lib/deflate"),o=n("./lib/inflate"),l=n("./lib/zlib/constants"),u={};s(u,a,o,l),r.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),f=Object.prototype.toString,c=0,h=4,d=0,v=1,w=2,g=-1,p=0,m=8;function y(C){if(!(this instanceof y))return new y(C);this.options=a.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},C||{});var A=this.options;A.raw&&A.windowBits>0?A.windowBits=-A.windowBits:A.gzip&&A.windowBits>0&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var P=s.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(P!==d)throw new Error(l[P]);if(A.header&&s.deflateSetHeader(this.strm,A.header),A.dictionary){var S;if(typeof A.dictionary=="string"?S=o.string2buf(A.dictionary):f.call(A.dictionary)==="[object ArrayBuffer]"?S=new Uint8Array(A.dictionary):S=A.dictionary,P=s.deflateSetDictionary(this.strm,S),P!==d)throw new Error(l[P]);this._dict_set=!0}}y.prototype.push=function(C,A){var P=this.strm,S=this.options.chunkSize,F,z;if(this.ended)return!1;z=A===~~A?A:A===!0?h:c,typeof C=="string"?P.input=o.string2buf(C):f.call(C)==="[object ArrayBuffer]"?P.input=new Uint8Array(C):P.input=C,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(S),P.next_out=0,P.avail_out=S),F=s.deflate(P,z),F!==v&&F!==d)return this.onEnd(F),this.ended=!0,!1;(P.avail_out===0||P.avail_in===0&&(z===h||z===w))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(P.output,P.next_out))):this.onData(a.shrinkBuf(P.output,P.next_out)))}while((P.avail_in>0||P.avail_out===0)&&F!==v);return z===h?(F=s.deflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===d):(z===w&&(this.onEnd(d),P.avail_out=0),!0)},y.prototype.onData=function(C){this.chunks.push(C)},y.prototype.onEnd=function(C){C===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function k(C,A){var P=new y(A);if(P.push(C,!0),P.err)throw P.msg||l[P.err];return P.result}function _(C,A){return A=A||{},A.raw=!0,k(C,A)}function x(C,A){return A=A||{},A.gzip=!0,k(C,A)}i.Deflate=y,i.deflate=k,i.deflateRaw=_,i.gzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),f=n("./zlib/zstream"),c=n("./zlib/gzheader"),h=Object.prototype.toString;function d(g){if(!(this instanceof d))return new d(g);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},g||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(g&&g.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15||(p.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,p.windowBits);if(m!==l.Z_OK)throw new Error(u[m]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}d.prototype.push=function(g,p){var m=this.strm,y=this.options.chunkSize,k=this.options.dictionary,_,x,C,A,P,S,F=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?m.input=o.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?m.input=new Uint8Array(g):m.input=g,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new a.Buf8(y),m.next_out=0,m.avail_out=y),_=s.inflate(m,l.Z_NO_FLUSH),_===l.Z_NEED_DICT&&k&&(typeof k=="string"?S=o.string2buf(k):h.call(k)==="[object ArrayBuffer]"?S=new Uint8Array(k):S=k,_=s.inflateSetDictionary(this.strm,S)),_===l.Z_BUF_ERROR&&F===!0&&(_=l.Z_OK,F=!1),_!==l.Z_STREAM_END&&_!==l.Z_OK)return this.onEnd(_),this.ended=!0,!1;m.next_out&&(m.avail_out===0||_===l.Z_STREAM_END||m.avail_in===0&&(x===l.Z_FINISH||x===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(C=o.utf8border(m.output,m.next_out),A=m.next_out-C,P=o.buf2string(m.output,C),m.next_out=A,m.avail_out=y-A,A&&a.arraySet(m.output,m.output,C,A,0),this.onData(P)):this.onData(a.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(F=!0)}while((m.avail_in>0||m.avail_out===0)&&_!==l.Z_STREAM_END);return _===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(_=s.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===l.Z_OK):(x===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),m.avail_out=0),!0)},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};function v(g,p){var m=new d(p);if(m.push(g,!0),m.err)throw m.msg||u[m.err];return m.result}function w(g,p){return p=p||{},p.raw=!0,v(g,p)}i.Inflate=d,i.inflate=v,i.inflateRaw=w,i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(l[c]=f[c])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,f,c,h){if(u.subarray&&l.subarray){l.set(u.subarray(f,f+c),h);return}for(var d=0;d<c;d++)l[h+d]=u[f+d]},flattenChunks:function(l){var u,f,c,h,d,v;for(c=0,u=0,f=l.length;u<f;u++)c+=l[u].length;for(v=new Uint8Array(c),h=0,u=0,f=l.length;u<f;u++)d=l[u],v.set(d,h),h+=d.length;return v}},o={arraySet:function(l,u,f,c,h){for(var d=0;d<c;d++)l[h+d]=u[f+d]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,i.string2buf=function(c){var h,d,v,w,g,p=c.length,m=0;for(w=0;w<p;w++)d=c.charCodeAt(w),(d&64512)===55296&&w+1<p&&(v=c.charCodeAt(w+1),(v&64512)===56320&&(d=65536+(d-55296<<10)+(v-56320),w++)),m+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(m),g=0,w=0;g<m;w++)d=c.charCodeAt(w),(d&64512)===55296&&w+1<p&&(v=c.charCodeAt(w+1),(v&64512)===56320&&(d=65536+(d-55296<<10)+(v-56320),w++)),d<128?h[g++]=d:d<2048?(h[g++]=192|d>>>6,h[g++]=128|d&63):d<65536?(h[g++]=224|d>>>12,h[g++]=128|d>>>6&63,h[g++]=128|d&63):(h[g++]=240|d>>>18,h[g++]=128|d>>>12&63,h[g++]=128|d>>>6&63,h[g++]=128|d&63);return h};function f(c,h){if(h<65537&&(c.subarray&&o||!c.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(c,h));for(var d="",v=0;v<h;v++)d+=String.fromCharCode(c[v]);return d}i.buf2binstring=function(c){return f(c,c.length)},i.binstring2buf=function(c){for(var h=new s.Buf8(c.length),d=0,v=h.length;d<v;d++)h[d]=c.charCodeAt(d);return h},i.buf2string=function(c,h){var d,v,w,g,p=h||c.length,m=new Array(p*2);for(v=0,d=0;d<p;){if(w=c[d++],w<128){m[v++]=w;continue}if(g=l[w],g>4){m[v++]=65533,d+=g-1;continue}for(w&=g===2?31:g===3?15:7;g>1&&d<p;)w=w<<6|c[d++]&63,g--;if(g>1){m[v++]=65533;continue}w<65536?m[v++]=w:(w-=65536,m[v++]=55296|w>>10&1023,m[v++]=56320|w&1023)}return f(m,v)},i.utf8border=function(c,h){var d;for(h=h||c.length,h>c.length&&(h=c.length),d=h-1;d>=0&&(c[d]&192)===128;)d--;return d<0||d===0?h:d+l[c[d]]>h?d:h}},{"./common":41}],43:[function(n,r,i){function s(a,o,l,u){for(var f=a&65535|0,c=a>>>16&65535|0,h=0;l!==0;){h=l>2e3?2e3:l,l-=h;do f=f+o[u++]|0,c=c+f|0;while(--h);f%=65521,c%=65521}return f|c<<16|0}r.exports=s},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){function s(){for(var l,u=[],f=0;f<256;f++){l=f;for(var c=0;c<8;c++)l=l&1?3988292384^l>>>1:l>>>1;u[f]=l}return u}var a=s();function o(l,u,f,c){var h=a,d=c+f;l^=-1;for(var v=c;v<d;v++)l=l>>>8^h[(l^u[v])&255];return l^-1}r.exports=o},{}],46:[function(n,r,i){var s=n("../utils/common"),a=n("./trees"),o=n("./adler32"),l=n("./crc32"),u=n("./messages"),f=0,c=1,h=3,d=4,v=5,w=0,g=1,p=-2,m=-3,y=-5,k=-1,_=1,x=2,C=3,A=4,P=0,S=2,F=8,z=9,ie=15,te=8,K=29,Q=256,Z=Q+1+K,$=30,re=19,I=2*Z+1,pe=15,oe=3,B=258,be=B+oe+1,je=32,Te=42,We=69,Me=73,Qe=91,Ae=103,Pe=113,qe=666,Ge=1,xt=2,it=3,Lt=4,st=3;function Rt(b,J){return b.msg=u[J],J}function tn(b){return(b<<1)-(b>4?9:0)}function St(b){for(var J=b.length;--J>=0;)b[J]=0}function Pt(b){var J=b.state,ee=J.pending;ee>b.avail_out&&(ee=b.avail_out),ee!==0&&(s.arraySet(b.output,J.pending_buf,J.pending_out,ee,b.next_out),b.next_out+=ee,J.pending_out+=ee,b.total_out+=ee,b.avail_out-=ee,J.pending-=ee,J.pending===0&&(J.pending_out=0))}function dt(b,J){a._tr_flush_block(b,b.block_start>=0?b.block_start:-1,b.strstart-b.block_start,J),b.block_start=b.strstart,Pt(b.strm)}function $e(b,J){b.pending_buf[b.pending++]=J}function Ft(b,J){b.pending_buf[b.pending++]=J>>>8&255,b.pending_buf[b.pending++]=J&255}function Nn(b,J,ee,N){var W=b.avail_in;return W>N&&(W=N),W===0?0:(b.avail_in-=W,s.arraySet(J,b.input,b.next_in,W,ee),b.state.wrap===1?b.adler=o(b.adler,J,W,ee):b.state.wrap===2&&(b.adler=l(b.adler,J,W,ee)),b.next_in+=W,b.total_in+=W,W)}function se(b,J){var ee=b.max_chain_length,N=b.strstart,W,T,j=b.prev_length,U=b.nice_match,G=b.strstart>b.w_size-be?b.strstart-(b.w_size-be):0,he=b.window,Re=b.w_mask,Ce=b.prev,me=b.strstart+B,_e=he[N+j-1],Ee=he[N+j];b.prev_length>=b.good_match&&(ee>>=2),U>b.lookahead&&(U=b.lookahead);do if(W=J,!(he[W+j]!==Ee||he[W+j-1]!==_e||he[W]!==he[N]||he[++W]!==he[N+1])){N+=2,W++;do;while(he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&he[++N]===he[++W]&&N<me);if(T=B-(me-N),N=me-B,T>j){if(b.match_start=J,j=T,T>=U)break;_e=he[N+j-1],Ee=he[N+j]}}while((J=Ce[J&Re])>G&&--ee!==0);return j<=b.lookahead?j:b.lookahead}function fe(b){var J=b.w_size,ee,N,W,T,j;do{if(T=b.window_size-b.lookahead-b.strstart,b.strstart>=J+(J-be)){s.arraySet(b.window,b.window,J,J,0),b.match_start-=J,b.strstart-=J,b.block_start-=J,N=b.hash_size,ee=N;do W=b.head[--ee],b.head[ee]=W>=J?W-J:0;while(--N);N=J,ee=N;do W=b.prev[--ee],b.prev[ee]=W>=J?W-J:0;while(--N);T+=J}if(b.strm.avail_in===0)break;if(N=Nn(b.strm,b.window,b.strstart+b.lookahead,T),b.lookahead+=N,b.lookahead+b.insert>=oe)for(j=b.strstart-b.insert,b.ins_h=b.window[j],b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+oe-1])&b.hash_mask,b.prev[j&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=j,j++,b.insert--,!(b.lookahead+b.insert<oe)););}while(b.lookahead<be&&b.strm.avail_in!==0)}function Oe(b,J){var ee=65535;for(ee>b.pending_buf_size-5&&(ee=b.pending_buf_size-5);;){if(b.lookahead<=1){if(fe(b),b.lookahead===0&&J===f)return Ge;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var N=b.block_start+ee;if((b.strstart===0||b.strstart>=N)&&(b.lookahead=b.strstart-N,b.strstart=N,dt(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-be&&(dt(b,!1),b.strm.avail_out===0))return Ge}return b.insert=0,J===d?(dt(b,!0),b.strm.avail_out===0?it:Lt):(b.strstart>b.block_start&&(dt(b,!1),b.strm.avail_out===0),Ge)}function ze(b,J){for(var ee,N;;){if(b.lookahead<be){if(fe(b),b.lookahead<be&&J===f)return Ge;if(b.lookahead===0)break}if(ee=0,b.lookahead>=oe&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+oe-1])&b.hash_mask,ee=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),ee!==0&&b.strstart-ee<=b.w_size-be&&(b.match_length=se(b,ee)),b.match_length>=oe)if(N=a._tr_tally(b,b.strstart-b.match_start,b.match_length-oe),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=oe){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+oe-1])&b.hash_mask,ee=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(--b.match_length!==0);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else N=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(N&&(dt(b,!1),b.strm.avail_out===0))return Ge}return b.insert=b.strstart<oe-1?b.strstart:oe-1,J===d?(dt(b,!0),b.strm.avail_out===0?it:Lt):b.last_lit&&(dt(b,!1),b.strm.avail_out===0)?Ge:xt}function Xe(b,J){for(var ee,N,W;;){if(b.lookahead<be){if(fe(b),b.lookahead<be&&J===f)return Ge;if(b.lookahead===0)break}if(ee=0,b.lookahead>=oe&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+oe-1])&b.hash_mask,ee=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=oe-1,ee!==0&&b.prev_length<b.max_lazy_match&&b.strstart-ee<=b.w_size-be&&(b.match_length=se(b,ee),b.match_length<=5&&(b.strategy===_||b.match_length===oe&&b.strstart-b.match_start>4096)&&(b.match_length=oe-1)),b.prev_length>=oe&&b.match_length<=b.prev_length){W=b.strstart+b.lookahead-oe,N=a._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-oe),b.lookahead-=b.prev_length-1,b.prev_length-=2;do++b.strstart<=W&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+oe-1])&b.hash_mask,ee=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(--b.prev_length!==0);if(b.match_available=0,b.match_length=oe-1,b.strstart++,N&&(dt(b,!1),b.strm.avail_out===0))return Ge}else if(b.match_available){if(N=a._tr_tally(b,0,b.window[b.strstart-1]),N&&dt(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return Ge}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(N=a._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<oe-1?b.strstart:oe-1,J===d?(dt(b,!0),b.strm.avail_out===0?it:Lt):b.last_lit&&(dt(b,!1),b.strm.avail_out===0)?Ge:xt}function bt(b,J){for(var ee,N,W,T,j=b.window;;){if(b.lookahead<=B){if(fe(b),b.lookahead<=B&&J===f)return Ge;if(b.lookahead===0)break}if(b.match_length=0,b.lookahead>=oe&&b.strstart>0&&(W=b.strstart-1,N=j[W],N===j[++W]&&N===j[++W]&&N===j[++W])){T=b.strstart+B;do;while(N===j[++W]&&N===j[++W]&&N===j[++W]&&N===j[++W]&&N===j[++W]&&N===j[++W]&&N===j[++W]&&N===j[++W]&&W<T);b.match_length=B-(T-W),b.match_length>b.lookahead&&(b.match_length=b.lookahead)}if(b.match_length>=oe?(ee=a._tr_tally(b,1,b.match_length-oe),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(ee=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++),ee&&(dt(b,!1),b.strm.avail_out===0))return Ge}return b.insert=0,J===d?(dt(b,!0),b.strm.avail_out===0?it:Lt):b.last_lit&&(dt(b,!1),b.strm.avail_out===0)?Ge:xt}function Et(b,J){for(var ee;;){if(b.lookahead===0&&(fe(b),b.lookahead===0)){if(J===f)return Ge;break}if(b.match_length=0,ee=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++,ee&&(dt(b,!1),b.strm.avail_out===0))return Ge}return b.insert=0,J===d?(dt(b,!0),b.strm.avail_out===0?it:Lt):b.last_lit&&(dt(b,!1),b.strm.avail_out===0)?Ge:xt}function gt(b,J,ee,N,W){this.good_length=b,this.max_lazy=J,this.nice_length=ee,this.max_chain=N,this.func=W}var jt;jt=[new gt(0,0,0,0,Oe),new gt(4,4,8,4,ze),new gt(4,5,16,8,ze),new gt(4,6,32,32,ze),new gt(4,4,16,16,Xe),new gt(8,16,32,32,Xe),new gt(8,16,128,128,Xe),new gt(8,32,128,256,Xe),new gt(32,128,258,1024,Xe),new gt(32,258,258,4096,Xe)];function Zt(b){b.window_size=2*b.w_size,St(b.head),b.max_lazy_match=jt[b.level].max_lazy,b.good_match=jt[b.level].good_length,b.nice_match=jt[b.level].nice_length,b.max_chain_length=jt[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=oe-1,b.match_available=0,b.ins_h=0}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(I*2),this.dyn_dtree=new s.Buf16((2*$+1)*2),this.bl_tree=new s.Buf16((2*re+1)*2),St(this.dyn_ltree),St(this.dyn_dtree),St(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(pe+1),this.heap=new s.Buf16(2*Z+1),St(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*Z+1),St(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(b){var J;return!b||!b.state?Rt(b,p):(b.total_in=b.total_out=0,b.data_type=S,J=b.state,J.pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?Te:Pe,b.adler=J.wrap===2?0:1,J.last_flush=f,a._tr_init(J),w)}function de(b){var J=ue(b);return J===w&&Zt(b.state),J}function Ne(b,J){return!b||!b.state||b.state.wrap!==2?p:(b.state.gzhead=J,w)}function V(b,J,ee,N,W,T){if(!b)return p;var j=1;if(J===k&&(J=6),N<0?(j=0,N=-N):N>15&&(j=2,N-=16),W<1||W>z||ee!==F||N<8||N>15||J<0||J>9||T<0||T>A)return Rt(b,p);N===8&&(N=9);var U=new L;return b.state=U,U.strm=b,U.wrap=j,U.gzhead=null,U.w_bits=N,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=W+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+oe-1)/oe),U.window=new s.Buf8(U.w_size*2),U.head=new s.Buf16(U.hash_size),U.prev=new s.Buf16(U.w_size),U.lit_bufsize=1<<W+6,U.pending_buf_size=U.lit_bufsize*4,U.pending_buf=new s.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=J,U.strategy=T,U.method=ee,de(b)}function ae(b,J){return V(b,J,F,ie,te,P)}function D(b,J){var ee,N,W,T;if(!b||!b.state||J>v||J<0)return b?Rt(b,p):p;if(N=b.state,!b.output||!b.input&&b.avail_in!==0||N.status===qe&&J!==d)return Rt(b,b.avail_out===0?y:p);if(N.strm=b,ee=N.last_flush,N.last_flush=J,N.status===Te)if(N.wrap===2)b.adler=0,$e(N,31),$e(N,139),$e(N,8),N.gzhead?($e(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),$e(N,N.gzhead.time&255),$e(N,N.gzhead.time>>8&255),$e(N,N.gzhead.time>>16&255),$e(N,N.gzhead.time>>24&255),$e(N,N.level===9?2:N.strategy>=x||N.level<2?4:0),$e(N,N.gzhead.os&255),N.gzhead.extra&&N.gzhead.extra.length&&($e(N,N.gzhead.extra.length&255),$e(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(b.adler=l(b.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=We):($e(N,0),$e(N,0),$e(N,0),$e(N,0),$e(N,0),$e(N,N.level===9?2:N.strategy>=x||N.level<2?4:0),$e(N,st),N.status=Pe);else{var j=F+(N.w_bits-8<<4)<<8,U=-1;N.strategy>=x||N.level<2?U=0:N.level<6?U=1:N.level===6?U=2:U=3,j|=U<<6,N.strstart!==0&&(j|=je),j+=31-j%31,N.status=Pe,Ft(N,j),N.strstart!==0&&(Ft(N,b.adler>>>16),Ft(N,b.adler&65535)),b.adler=1}if(N.status===We)if(N.gzhead.extra){for(W=N.pending;N.gzindex<(N.gzhead.extra.length&65535)&&!(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),Pt(b),W=N.pending,N.pending===N.pending_buf_size));)$e(N,N.gzhead.extra[N.gzindex]&255),N.gzindex++;N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=Me)}else N.status=Me;if(N.status===Me)if(N.gzhead.name){W=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),Pt(b),W=N.pending,N.pending===N.pending_buf_size)){T=1;break}N.gzindex<N.gzhead.name.length?T=N.gzhead.name.charCodeAt(N.gzindex++)&255:T=0,$e(N,T)}while(T!==0);N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),T===0&&(N.gzindex=0,N.status=Qe)}else N.status=Qe;if(N.status===Qe)if(N.gzhead.comment){W=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),Pt(b),W=N.pending,N.pending===N.pending_buf_size)){T=1;break}N.gzindex<N.gzhead.comment.length?T=N.gzhead.comment.charCodeAt(N.gzindex++)&255:T=0,$e(N,T)}while(T!==0);N.gzhead.hcrc&&N.pending>W&&(b.adler=l(b.adler,N.pending_buf,N.pending-W,W)),T===0&&(N.status=Ae)}else N.status=Ae;if(N.status===Ae&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&Pt(b),N.pending+2<=N.pending_buf_size&&($e(N,b.adler&255),$e(N,b.adler>>8&255),b.adler=0,N.status=Pe)):N.status=Pe),N.pending!==0){if(Pt(b),b.avail_out===0)return N.last_flush=-1,w}else if(b.avail_in===0&&tn(J)<=tn(ee)&&J!==d)return Rt(b,y);if(N.status===qe&&b.avail_in!==0)return Rt(b,y);if(b.avail_in!==0||N.lookahead!==0||J!==f&&N.status!==qe){var G=N.strategy===x?Et(N,J):N.strategy===C?bt(N,J):jt[N.level].func(N,J);if((G===it||G===Lt)&&(N.status=qe),G===Ge||G===it)return b.avail_out===0&&(N.last_flush=-1),w;if(G===xt&&(J===c?a._tr_align(N):J!==v&&(a._tr_stored_block(N,0,0,!1),J===h&&(St(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),Pt(b),b.avail_out===0))return N.last_flush=-1,w}return J!==d?w:N.wrap<=0?g:(N.wrap===2?($e(N,b.adler&255),$e(N,b.adler>>8&255),$e(N,b.adler>>16&255),$e(N,b.adler>>24&255),$e(N,b.total_in&255),$e(N,b.total_in>>8&255),$e(N,b.total_in>>16&255),$e(N,b.total_in>>24&255)):(Ft(N,b.adler>>>16),Ft(N,b.adler&65535)),Pt(b),N.wrap>0&&(N.wrap=-N.wrap),N.pending!==0?w:g)}function le(b){var J;return!b||!b.state?p:(J=b.state.status,J!==Te&&J!==We&&J!==Me&&J!==Qe&&J!==Ae&&J!==Pe&&J!==qe?Rt(b,p):(b.state=null,J===Pe?Rt(b,m):w))}function Le(b,J){var ee=J.length,N,W,T,j,U,G,he,Re;if(!b||!b.state||(N=b.state,j=N.wrap,j===2||j===1&&N.status!==Te||N.lookahead))return p;for(j===1&&(b.adler=o(b.adler,J,ee,0)),N.wrap=0,ee>=N.w_size&&(j===0&&(St(N.head),N.strstart=0,N.block_start=0,N.insert=0),Re=new s.Buf8(N.w_size),s.arraySet(Re,J,ee-N.w_size,N.w_size,0),J=Re,ee=N.w_size),U=b.avail_in,G=b.next_in,he=b.input,b.avail_in=ee,b.next_in=0,b.input=J,fe(N);N.lookahead>=oe;){W=N.strstart,T=N.lookahead-(oe-1);do N.ins_h=(N.ins_h<<N.hash_shift^N.window[W+oe-1])&N.hash_mask,N.prev[W&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=W,W++;while(--T);N.strstart=W,N.lookahead=oe-1,fe(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=oe-1,N.match_available=0,b.next_in=G,b.input=he,b.avail_in=U,N.wrap=j,w}i.deflateInit=ae,i.deflateInit2=V,i.deflateReset=de,i.deflateResetKeep=ue,i.deflateSetHeader=Ne,i.deflate=D,i.deflateEnd=le,i.deflateSetDictionary=Le,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=s},{}],48:[function(n,r,i){var s=30,a=12;r.exports=function(l,u){var f,c,h,d,v,w,g,p,m,y,k,_,x,C,A,P,S,F,z,ie,te,K,Q,Z,$;f=l.state,c=l.next_in,Z=l.input,h=c+(l.avail_in-5),d=l.next_out,$=l.output,v=d-(u-l.avail_out),w=d+(l.avail_out-257),g=f.dmax,p=f.wsize,m=f.whave,y=f.wnext,k=f.window,_=f.hold,x=f.bits,C=f.lencode,A=f.distcode,P=(1<<f.lenbits)-1,S=(1<<f.distbits)-1;e:do{x<15&&(_+=Z[c++]<<x,x+=8,_+=Z[c++]<<x,x+=8),F=C[_&P];t:for(;;){if(z=F>>>24,_>>>=z,x-=z,z=F>>>16&255,z===0)$[d++]=F&65535;else if(z&16){ie=F&65535,z&=15,z&&(x<z&&(_+=Z[c++]<<x,x+=8),ie+=_&(1<<z)-1,_>>>=z,x-=z),x<15&&(_+=Z[c++]<<x,x+=8,_+=Z[c++]<<x,x+=8),F=A[_&S];n:for(;;){if(z=F>>>24,_>>>=z,x-=z,z=F>>>16&255,z&16){if(te=F&65535,z&=15,x<z&&(_+=Z[c++]<<x,x+=8,x<z&&(_+=Z[c++]<<x,x+=8)),te+=_&(1<<z)-1,te>g){l.msg="invalid distance too far back",f.mode=s;break e}if(_>>>=z,x-=z,z=d-v,te>z){if(z=te-z,z>m&&f.sane){l.msg="invalid distance too far back",f.mode=s;break e}if(K=0,Q=k,y===0){if(K+=p-z,z<ie){ie-=z;do $[d++]=k[K++];while(--z);K=d-te,Q=$}}else if(y<z){if(K+=p+y-z,z-=y,z<ie){ie-=z;do $[d++]=k[K++];while(--z);if(K=0,y<ie){z=y,ie-=z;do $[d++]=k[K++];while(--z);K=d-te,Q=$}}}else if(K+=y-z,z<ie){ie-=z;do $[d++]=k[K++];while(--z);K=d-te,Q=$}for(;ie>2;)$[d++]=Q[K++],$[d++]=Q[K++],$[d++]=Q[K++],ie-=3;ie&&($[d++]=Q[K++],ie>1&&($[d++]=Q[K++]))}else{K=d-te;do $[d++]=$[K++],$[d++]=$[K++],$[d++]=$[K++],ie-=3;while(ie>2);ie&&($[d++]=$[K++],ie>1&&($[d++]=$[K++]))}}else if(z&64){l.msg="invalid distance code",f.mode=s;break e}else{F=A[(F&65535)+(_&(1<<z)-1)];continue n}break}}else if(z&64)if(z&32){f.mode=a;break e}else{l.msg="invalid literal/length code",f.mode=s;break e}else{F=C[(F&65535)+(_&(1<<z)-1)];continue t}break}}while(c<h&&d<w);ie=x>>3,c-=ie,x-=ie<<3,_&=(1<<x)-1,l.next_in=c,l.next_out=d,l.avail_in=c<h?5+(h-c):5-(c-h),l.avail_out=d<w?257+(w-d):257-(d-w),f.hold=_,f.bits=x}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),f=0,c=1,h=2,d=4,v=5,w=6,g=0,p=1,m=2,y=-2,k=-3,_=-4,x=-5,C=8,A=1,P=2,S=3,F=4,z=5,ie=6,te=7,K=8,Q=9,Z=10,$=11,re=12,I=13,pe=14,oe=15,B=16,be=17,je=18,Te=19,We=20,Me=21,Qe=22,Ae=23,Pe=24,qe=25,Ge=26,xt=27,it=28,Lt=29,st=30,Rt=31,tn=32,St=852,Pt=592,dt=15,$e=dt;function Ft(V){return(V>>>24&255)+(V>>>8&65280)+((V&65280)<<8)+((V&255)<<24)}function Nn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function se(V){var ae;return!V||!V.state?y:(ae=V.state,V.total_in=V.total_out=ae.total=0,V.msg="",ae.wrap&&(V.adler=ae.wrap&1),ae.mode=A,ae.last=0,ae.havedict=0,ae.dmax=32768,ae.head=null,ae.hold=0,ae.bits=0,ae.lencode=ae.lendyn=new s.Buf32(St),ae.distcode=ae.distdyn=new s.Buf32(Pt),ae.sane=1,ae.back=-1,g)}function fe(V){var ae;return!V||!V.state?y:(ae=V.state,ae.wsize=0,ae.whave=0,ae.wnext=0,se(V))}function Oe(V,ae){var D,le;return!V||!V.state||(le=V.state,ae<0?(D=0,ae=-ae):(D=(ae>>4)+1,ae<48&&(ae&=15)),ae&&(ae<8||ae>15))?y:(le.window!==null&&le.wbits!==ae&&(le.window=null),le.wrap=D,le.wbits=ae,fe(V))}function ze(V,ae){var D,le;return V?(le=new Nn,V.state=le,le.window=null,D=Oe(V,ae),D!==g&&(V.state=null),D):y}function Xe(V){return ze(V,$e)}var bt=!0,Et,gt;function jt(V){if(bt){var ae;for(Et=new s.Buf32(512),gt=new s.Buf32(32),ae=0;ae<144;)V.lens[ae++]=8;for(;ae<256;)V.lens[ae++]=9;for(;ae<280;)V.lens[ae++]=7;for(;ae<288;)V.lens[ae++]=8;for(u(c,V.lens,0,288,Et,0,V.work,{bits:9}),ae=0;ae<32;)V.lens[ae++]=5;u(h,V.lens,0,32,gt,0,V.work,{bits:5}),bt=!1}V.lencode=Et,V.lenbits=9,V.distcode=gt,V.distbits=5}function Zt(V,ae,D,le){var Le,b=V.state;return b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new s.Buf8(b.wsize)),le>=b.wsize?(s.arraySet(b.window,ae,D-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(Le=b.wsize-b.wnext,Le>le&&(Le=le),s.arraySet(b.window,ae,D-le,Le,b.wnext),le-=Le,le?(s.arraySet(b.window,ae,D-le,le,0),b.wnext=le,b.whave=b.wsize):(b.wnext+=Le,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=Le))),0}function L(V,ae){var D,le,Le,b,J,ee,N,W,T,j,U,G,he,Re,Ce=0,me,_e,Ee,Ie,Je,nt,rt,et,Ve=new s.Buf8(4),vt,un,Yr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return y;D=V.state,D.mode===re&&(D.mode=I),J=V.next_out,Le=V.output,N=V.avail_out,b=V.next_in,le=V.input,ee=V.avail_in,W=D.hold,T=D.bits,j=ee,U=N,et=g;e:for(;;)switch(D.mode){case A:if(D.wrap===0){D.mode=I;break}for(;T<16;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(D.wrap&2&&W===35615){D.check=0,Ve[0]=W&255,Ve[1]=W>>>8&255,D.check=o(D.check,Ve,2,0),W=0,T=0,D.mode=P;break}if(D.flags=0,D.head&&(D.head.done=!1),!(D.wrap&1)||(((W&255)<<8)+(W>>8))%31){V.msg="incorrect header check",D.mode=st;break}if((W&15)!==C){V.msg="unknown compression method",D.mode=st;break}if(W>>>=4,T-=4,rt=(W&15)+8,D.wbits===0)D.wbits=rt;else if(rt>D.wbits){V.msg="invalid window size",D.mode=st;break}D.dmax=1<<rt,V.adler=D.check=1,D.mode=W&512?Z:re,W=0,T=0;break;case P:for(;T<16;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(D.flags=W,(D.flags&255)!==C){V.msg="unknown compression method",D.mode=st;break}if(D.flags&57344){V.msg="unknown header flags set",D.mode=st;break}D.head&&(D.head.text=W>>8&1),D.flags&512&&(Ve[0]=W&255,Ve[1]=W>>>8&255,D.check=o(D.check,Ve,2,0)),W=0,T=0,D.mode=S;case S:for(;T<32;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.head&&(D.head.time=W),D.flags&512&&(Ve[0]=W&255,Ve[1]=W>>>8&255,Ve[2]=W>>>16&255,Ve[3]=W>>>24&255,D.check=o(D.check,Ve,4,0)),W=0,T=0,D.mode=F;case F:for(;T<16;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.head&&(D.head.xflags=W&255,D.head.os=W>>8),D.flags&512&&(Ve[0]=W&255,Ve[1]=W>>>8&255,D.check=o(D.check,Ve,2,0)),W=0,T=0,D.mode=z;case z:if(D.flags&1024){for(;T<16;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.length=W,D.head&&(D.head.extra_len=W),D.flags&512&&(Ve[0]=W&255,Ve[1]=W>>>8&255,D.check=o(D.check,Ve,2,0)),W=0,T=0}else D.head&&(D.head.extra=null);D.mode=ie;case ie:if(D.flags&1024&&(G=D.length,G>ee&&(G=ee),G&&(D.head&&(rt=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),s.arraySet(D.head.extra,le,b,G,rt)),D.flags&512&&(D.check=o(D.check,le,G,b)),ee-=G,b+=G,D.length-=G),D.length))break e;D.length=0,D.mode=te;case te:if(D.flags&2048){if(ee===0)break e;G=0;do rt=le[b+G++],D.head&&rt&&D.length<65536&&(D.head.name+=String.fromCharCode(rt));while(rt&&G<ee);if(D.flags&512&&(D.check=o(D.check,le,G,b)),ee-=G,b+=G,rt)break e}else D.head&&(D.head.name=null);D.length=0,D.mode=K;case K:if(D.flags&4096){if(ee===0)break e;G=0;do rt=le[b+G++],D.head&&rt&&D.length<65536&&(D.head.comment+=String.fromCharCode(rt));while(rt&&G<ee);if(D.flags&512&&(D.check=o(D.check,le,G,b)),ee-=G,b+=G,rt)break e}else D.head&&(D.head.comment=null);D.mode=Q;case Q:if(D.flags&512){for(;T<16;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(W!==(D.check&65535)){V.msg="header crc mismatch",D.mode=st;break}W=0,T=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),V.adler=D.check=0,D.mode=re;break;case Z:for(;T<32;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}V.adler=D.check=Ft(W),W=0,T=0,D.mode=$;case $:if(D.havedict===0)return V.next_out=J,V.avail_out=N,V.next_in=b,V.avail_in=ee,D.hold=W,D.bits=T,m;V.adler=D.check=1,D.mode=re;case re:if(ae===v||ae===w)break e;case I:if(D.last){W>>>=T&7,T-=T&7,D.mode=xt;break}for(;T<3;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}switch(D.last=W&1,W>>>=1,T-=1,W&3){case 0:D.mode=pe;break;case 1:if(jt(D),D.mode=We,ae===w){W>>>=2,T-=2;break e}break;case 2:D.mode=be;break;case 3:V.msg="invalid block type",D.mode=st}W>>>=2,T-=2;break;case pe:for(W>>>=T&7,T-=T&7;T<32;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if((W&65535)!==(W>>>16^65535)){V.msg="invalid stored block lengths",D.mode=st;break}if(D.length=W&65535,W=0,T=0,D.mode=oe,ae===w)break e;case oe:D.mode=B;case B:if(G=D.length,G){if(G>ee&&(G=ee),G>N&&(G=N),G===0)break e;s.arraySet(Le,le,b,G,J),ee-=G,b+=G,N-=G,J+=G,D.length-=G;break}D.mode=re;break;case be:for(;T<14;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(D.nlen=(W&31)+257,W>>>=5,T-=5,D.ndist=(W&31)+1,W>>>=5,T-=5,D.ncode=(W&15)+4,W>>>=4,T-=4,D.nlen>286||D.ndist>30){V.msg="too many length or distance symbols",D.mode=st;break}D.have=0,D.mode=je;case je:for(;D.have<D.ncode;){for(;T<3;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.lens[Yr[D.have++]]=W&7,W>>>=3,T-=3}for(;D.have<19;)D.lens[Yr[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,vt={bits:D.lenbits},et=u(f,D.lens,0,19,D.lencode,0,D.work,vt),D.lenbits=vt.bits,et){V.msg="invalid code lengths set",D.mode=st;break}D.have=0,D.mode=Te;case Te:for(;D.have<D.nlen+D.ndist;){for(;Ce=D.lencode[W&(1<<D.lenbits)-1],me=Ce>>>24,_e=Ce>>>16&255,Ee=Ce&65535,!(me<=T);){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(Ee<16)W>>>=me,T-=me,D.lens[D.have++]=Ee;else{if(Ee===16){for(un=me+2;T<un;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(W>>>=me,T-=me,D.have===0){V.msg="invalid bit length repeat",D.mode=st;break}rt=D.lens[D.have-1],G=3+(W&3),W>>>=2,T-=2}else if(Ee===17){for(un=me+3;T<un;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}W>>>=me,T-=me,rt=0,G=3+(W&7),W>>>=3,T-=3}else{for(un=me+7;T<un;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}W>>>=me,T-=me,rt=0,G=11+(W&127),W>>>=7,T-=7}if(D.have+G>D.nlen+D.ndist){V.msg="invalid bit length repeat",D.mode=st;break}for(;G--;)D.lens[D.have++]=rt}}if(D.mode===st)break;if(D.lens[256]===0){V.msg="invalid code -- missing end-of-block",D.mode=st;break}if(D.lenbits=9,vt={bits:D.lenbits},et=u(c,D.lens,0,D.nlen,D.lencode,0,D.work,vt),D.lenbits=vt.bits,et){V.msg="invalid literal/lengths set",D.mode=st;break}if(D.distbits=6,D.distcode=D.distdyn,vt={bits:D.distbits},et=u(h,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,vt),D.distbits=vt.bits,et){V.msg="invalid distances set",D.mode=st;break}if(D.mode=We,ae===w)break e;case We:D.mode=Me;case Me:if(ee>=6&&N>=258){V.next_out=J,V.avail_out=N,V.next_in=b,V.avail_in=ee,D.hold=W,D.bits=T,l(V,U),J=V.next_out,Le=V.output,N=V.avail_out,b=V.next_in,le=V.input,ee=V.avail_in,W=D.hold,T=D.bits,D.mode===re&&(D.back=-1);break}for(D.back=0;Ce=D.lencode[W&(1<<D.lenbits)-1],me=Ce>>>24,_e=Ce>>>16&255,Ee=Ce&65535,!(me<=T);){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(_e&&!(_e&240)){for(Ie=me,Je=_e,nt=Ee;Ce=D.lencode[nt+((W&(1<<Ie+Je)-1)>>Ie)],me=Ce>>>24,_e=Ce>>>16&255,Ee=Ce&65535,!(Ie+me<=T);){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}W>>>=Ie,T-=Ie,D.back+=Ie}if(W>>>=me,T-=me,D.back+=me,D.length=Ee,_e===0){D.mode=Ge;break}if(_e&32){D.back=-1,D.mode=re;break}if(_e&64){V.msg="invalid literal/length code",D.mode=st;break}D.extra=_e&15,D.mode=Qe;case Qe:if(D.extra){for(un=D.extra;T<un;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.length+=W&(1<<D.extra)-1,W>>>=D.extra,T-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=Ae;case Ae:for(;Ce=D.distcode[W&(1<<D.distbits)-1],me=Ce>>>24,_e=Ce>>>16&255,Ee=Ce&65535,!(me<=T);){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(!(_e&240)){for(Ie=me,Je=_e,nt=Ee;Ce=D.distcode[nt+((W&(1<<Ie+Je)-1)>>Ie)],me=Ce>>>24,_e=Ce>>>16&255,Ee=Ce&65535,!(Ie+me<=T);){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}W>>>=Ie,T-=Ie,D.back+=Ie}if(W>>>=me,T-=me,D.back+=me,_e&64){V.msg="invalid distance code",D.mode=st;break}D.offset=Ee,D.extra=_e&15,D.mode=Pe;case Pe:if(D.extra){for(un=D.extra;T<un;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}D.offset+=W&(1<<D.extra)-1,W>>>=D.extra,T-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){V.msg="invalid distance too far back",D.mode=st;break}D.mode=qe;case qe:if(N===0)break e;if(G=U-N,D.offset>G){if(G=D.offset-G,G>D.whave&&D.sane){V.msg="invalid distance too far back",D.mode=st;break}G>D.wnext?(G-=D.wnext,he=D.wsize-G):he=D.wnext-G,G>D.length&&(G=D.length),Re=D.window}else Re=Le,he=J-D.offset,G=D.length;G>N&&(G=N),N-=G,D.length-=G;do Le[J++]=Re[he++];while(--G);D.length===0&&(D.mode=Me);break;case Ge:if(N===0)break e;Le[J++]=D.length,N--,D.mode=Me;break;case xt:if(D.wrap){for(;T<32;){if(ee===0)break e;ee--,W|=le[b++]<<T,T+=8}if(U-=N,V.total_out+=U,D.total+=U,U&&(V.adler=D.check=D.flags?o(D.check,Le,U,J-U):a(D.check,Le,U,J-U)),U=N,(D.flags?W:Ft(W))!==D.check){V.msg="incorrect data check",D.mode=st;break}W=0,T=0}D.mode=it;case it:if(D.wrap&&D.flags){for(;T<32;){if(ee===0)break e;ee--,W+=le[b++]<<T,T+=8}if(W!==(D.total&4294967295)){V.msg="incorrect length check",D.mode=st;break}W=0,T=0}D.mode=Lt;case Lt:et=p;break e;case st:et=k;break e;case Rt:return _;case tn:default:return y}return V.next_out=J,V.avail_out=N,V.next_in=b,V.avail_in=ee,D.hold=W,D.bits=T,(D.wsize||U!==V.avail_out&&D.mode<st&&(D.mode<xt||ae!==d))&&Zt(V,V.output,V.next_out,U-V.avail_out),j-=V.avail_in,U-=V.avail_out,V.total_in+=j,V.total_out+=U,D.total+=U,D.wrap&&U&&(V.adler=D.check=D.flags?o(D.check,Le,U,V.next_out-U):a(D.check,Le,U,V.next_out-U)),V.data_type=D.bits+(D.last?64:0)+(D.mode===re?128:0)+(D.mode===We||D.mode===oe?256:0),(j===0&&U===0||ae===d)&&et===g&&(et=x),et}function ue(V){if(!V||!V.state)return y;var ae=V.state;return ae.window&&(ae.window=null),V.state=null,g}function de(V,ae){var D;return!V||!V.state||(D=V.state,!(D.wrap&2))?y:(D.head=ae,ae.done=!1,g)}function Ne(V,ae){var D=ae.length,le,Le,b;return!V||!V.state||(le=V.state,le.wrap!==0&&le.mode!==$)?y:le.mode===$&&(Le=1,Le=a(Le,ae,D,0),Le!==le.check)?k:(b=Zt(V,ae,D,D),b?(le.mode=Rt,_):(le.havedict=1,g))}i.inflateReset=fe,i.inflateReset2=Oe,i.inflateResetKeep=se,i.inflateInit=Xe,i.inflateInit2=ze,i.inflate=L,i.inflateEnd=ue,i.inflateGetHeader=de,i.inflateSetDictionary=Ne,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=15,o=852,l=592,u=0,f=1,c=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,m,y,k,_,x,C,A){var P=A.bits,S=0,F=0,z=0,ie=0,te=0,K=0,Q=0,Z=0,$=0,re=0,I,pe,oe,B,be,je=null,Te=0,We,Me=new s.Buf16(a+1),Qe=new s.Buf16(a+1),Ae=null,Pe=0,qe,Ge,xt;for(S=0;S<=a;S++)Me[S]=0;for(F=0;F<k;F++)Me[m[y+F]]++;for(te=P,ie=a;ie>=1&&Me[ie]===0;ie--);if(te>ie&&(te=ie),ie===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,A.bits=1,0;for(z=1;z<ie&&Me[z]===0;z++);for(te<z&&(te=z),Z=1,S=1;S<=a;S++)if(Z<<=1,Z-=Me[S],Z<0)return-1;if(Z>0&&(p===u||ie!==1))return-1;for(Qe[1]=0,S=1;S<a;S++)Qe[S+1]=Qe[S]+Me[S];for(F=0;F<k;F++)m[y+F]!==0&&(C[Qe[m[y+F]]++]=F);if(p===u?(je=Ae=C,We=19):p===f?(je=h,Te-=257,Ae=d,Pe-=257,We=256):(je=v,Ae=w,We=-1),re=0,F=0,S=z,be=x,K=te,Q=0,oe=-1,$=1<<te,B=$-1,p===f&&$>o||p===c&&$>l)return 1;for(;;){qe=S-Q,C[F]<We?(Ge=0,xt=C[F]):C[F]>We?(Ge=Ae[Pe+C[F]],xt=je[Te+C[F]]):(Ge=96,xt=0),I=1<<S-Q,pe=1<<K,z=pe;do pe-=I,_[be+(re>>Q)+pe]=qe<<24|Ge<<16|xt|0;while(pe!==0);for(I=1<<S-1;re&I;)I>>=1;if(I!==0?(re&=I-1,re+=I):re=0,F++,--Me[S]===0){if(S===ie)break;S=m[y+C[F]]}if(S>te&&(re&B)!==oe){for(Q===0&&(Q=te),be+=z,K=S-Q,Z=1<<K;K+Q<ie&&(Z-=Me[K+Q],!(Z<=0));)K++,Z<<=1;if($+=1<<K,p===f&&$>o||p===c&&$>l)return 1;oe=re&B,_[oe]=te<<24|K<<16|be-x|0}}return re!==0&&(_[be+re]=S-Q<<24|64<<16|0),A.bits=te,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=4,o=0,l=1,u=2;function f(L){for(var ue=L.length;--ue>=0;)L[ue]=0}var c=0,h=1,d=2,v=3,w=258,g=29,p=256,m=p+1+g,y=30,k=19,_=2*m+1,x=15,C=16,A=7,P=256,S=16,F=17,z=18,ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=512,$=new Array((m+2)*2);f($);var re=new Array(y*2);f(re);var I=new Array(Z);f(I);var pe=new Array(w-v+1);f(pe);var oe=new Array(g);f(oe);var B=new Array(y);f(B);function be(L,ue,de,Ne,V){this.static_tree=L,this.extra_bits=ue,this.extra_base=de,this.elems=Ne,this.max_length=V,this.has_stree=L&&L.length}var je,Te,We;function Me(L,ue){this.dyn_tree=L,this.max_code=0,this.stat_desc=ue}function Qe(L){return L<256?I[L]:I[256+(L>>>7)]}function Ae(L,ue){L.pending_buf[L.pending++]=ue&255,L.pending_buf[L.pending++]=ue>>>8&255}function Pe(L,ue,de){L.bi_valid>C-de?(L.bi_buf|=ue<<L.bi_valid&65535,Ae(L,L.bi_buf),L.bi_buf=ue>>C-L.bi_valid,L.bi_valid+=de-C):(L.bi_buf|=ue<<L.bi_valid&65535,L.bi_valid+=de)}function qe(L,ue,de){Pe(L,de[ue*2],de[ue*2+1])}function Ge(L,ue){var de=0;do de|=L&1,L>>>=1,de<<=1;while(--ue>0);return de>>>1}function xt(L){L.bi_valid===16?(Ae(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):L.bi_valid>=8&&(L.pending_buf[L.pending++]=L.bi_buf&255,L.bi_buf>>=8,L.bi_valid-=8)}function it(L,ue){var de=ue.dyn_tree,Ne=ue.max_code,V=ue.stat_desc.static_tree,ae=ue.stat_desc.has_stree,D=ue.stat_desc.extra_bits,le=ue.stat_desc.extra_base,Le=ue.stat_desc.max_length,b,J,ee,N,W,T,j=0;for(N=0;N<=x;N++)L.bl_count[N]=0;for(de[L.heap[L.heap_max]*2+1]=0,b=L.heap_max+1;b<_;b++)J=L.heap[b],N=de[de[J*2+1]*2+1]+1,N>Le&&(N=Le,j++),de[J*2+1]=N,!(J>Ne)&&(L.bl_count[N]++,W=0,J>=le&&(W=D[J-le]),T=de[J*2],L.opt_len+=T*(N+W),ae&&(L.static_len+=T*(V[J*2+1]+W)));if(j!==0){do{for(N=Le-1;L.bl_count[N]===0;)N--;L.bl_count[N]--,L.bl_count[N+1]+=2,L.bl_count[Le]--,j-=2}while(j>0);for(N=Le;N!==0;N--)for(J=L.bl_count[N];J!==0;)ee=L.heap[--b],!(ee>Ne)&&(de[ee*2+1]!==N&&(L.opt_len+=(N-de[ee*2+1])*de[ee*2],de[ee*2+1]=N),J--)}}function Lt(L,ue,de){var Ne=new Array(x+1),V=0,ae,D;for(ae=1;ae<=x;ae++)Ne[ae]=V=V+de[ae-1]<<1;for(D=0;D<=ue;D++){var le=L[D*2+1];le!==0&&(L[D*2]=Ge(Ne[le]++,le))}}function st(){var L,ue,de,Ne,V,ae=new Array(x+1);for(de=0,Ne=0;Ne<g-1;Ne++)for(oe[Ne]=de,L=0;L<1<<ie[Ne];L++)pe[de++]=Ne;for(pe[de-1]=Ne,V=0,Ne=0;Ne<16;Ne++)for(B[Ne]=V,L=0;L<1<<te[Ne];L++)I[V++]=Ne;for(V>>=7;Ne<y;Ne++)for(B[Ne]=V<<7,L=0;L<1<<te[Ne]-7;L++)I[256+V++]=Ne;for(ue=0;ue<=x;ue++)ae[ue]=0;for(L=0;L<=143;)$[L*2+1]=8,L++,ae[8]++;for(;L<=255;)$[L*2+1]=9,L++,ae[9]++;for(;L<=279;)$[L*2+1]=7,L++,ae[7]++;for(;L<=287;)$[L*2+1]=8,L++,ae[8]++;for(Lt($,m+1,ae),L=0;L<y;L++)re[L*2+1]=5,re[L*2]=Ge(L,5);je=new be($,ie,p+1,m,x),Te=new be(re,te,0,y,x),We=new be(new Array(0),K,0,k,A)}function Rt(L){var ue;for(ue=0;ue<m;ue++)L.dyn_ltree[ue*2]=0;for(ue=0;ue<y;ue++)L.dyn_dtree[ue*2]=0;for(ue=0;ue<k;ue++)L.bl_tree[ue*2]=0;L.dyn_ltree[P*2]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function tn(L){L.bi_valid>8?Ae(L,L.bi_buf):L.bi_valid>0&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function St(L,ue,de,Ne){tn(L),Ae(L,de),Ae(L,~de),s.arraySet(L.pending_buf,L.window,ue,de,L.pending),L.pending+=de}function Pt(L,ue,de,Ne){var V=ue*2,ae=de*2;return L[V]<L[ae]||L[V]===L[ae]&&Ne[ue]<=Ne[de]}function dt(L,ue,de){for(var Ne=L.heap[de],V=de<<1;V<=L.heap_len&&(V<L.heap_len&&Pt(ue,L.heap[V+1],L.heap[V],L.depth)&&V++,!Pt(ue,Ne,L.heap[V],L.depth));)L.heap[de]=L.heap[V],de=V,V<<=1;L.heap[de]=Ne}function $e(L,ue,de){var Ne,V,ae=0,D,le;if(L.last_lit!==0)do Ne=L.pending_buf[L.d_buf+ae*2]<<8|L.pending_buf[L.d_buf+ae*2+1],V=L.pending_buf[L.l_buf+ae],ae++,Ne===0?qe(L,V,ue):(D=pe[V],qe(L,D+p+1,ue),le=ie[D],le!==0&&(V-=oe[D],Pe(L,V,le)),Ne--,D=Qe(Ne),qe(L,D,de),le=te[D],le!==0&&(Ne-=B[D],Pe(L,Ne,le)));while(ae<L.last_lit);qe(L,P,ue)}function Ft(L,ue){var de=ue.dyn_tree,Ne=ue.stat_desc.static_tree,V=ue.stat_desc.has_stree,ae=ue.stat_desc.elems,D,le,Le=-1,b;for(L.heap_len=0,L.heap_max=_,D=0;D<ae;D++)de[D*2]!==0?(L.heap[++L.heap_len]=Le=D,L.depth[D]=0):de[D*2+1]=0;for(;L.heap_len<2;)b=L.heap[++L.heap_len]=Le<2?++Le:0,de[b*2]=1,L.depth[b]=0,L.opt_len--,V&&(L.static_len-=Ne[b*2+1]);for(ue.max_code=Le,D=L.heap_len>>1;D>=1;D--)dt(L,de,D);b=ae;do D=L.heap[1],L.heap[1]=L.heap[L.heap_len--],dt(L,de,1),le=L.heap[1],L.heap[--L.heap_max]=D,L.heap[--L.heap_max]=le,de[b*2]=de[D*2]+de[le*2],L.depth[b]=(L.depth[D]>=L.depth[le]?L.depth[D]:L.depth[le])+1,de[D*2+1]=de[le*2+1]=b,L.heap[1]=b++,dt(L,de,1);while(L.heap_len>=2);L.heap[--L.heap_max]=L.heap[1],it(L,ue),Lt(de,Le,L.bl_count)}function Nn(L,ue,de){var Ne,V=-1,ae,D=ue[0*2+1],le=0,Le=7,b=4;for(D===0&&(Le=138,b=3),ue[(de+1)*2+1]=65535,Ne=0;Ne<=de;Ne++)ae=D,D=ue[(Ne+1)*2+1],!(++le<Le&&ae===D)&&(le<b?L.bl_tree[ae*2]+=le:ae!==0?(ae!==V&&L.bl_tree[ae*2]++,L.bl_tree[S*2]++):le<=10?L.bl_tree[F*2]++:L.bl_tree[z*2]++,le=0,V=ae,D===0?(Le=138,b=3):ae===D?(Le=6,b=3):(Le=7,b=4))}function se(L,ue,de){var Ne,V=-1,ae,D=ue[0*2+1],le=0,Le=7,b=4;for(D===0&&(Le=138,b=3),Ne=0;Ne<=de;Ne++)if(ae=D,D=ue[(Ne+1)*2+1],!(++le<Le&&ae===D)){if(le<b)do qe(L,ae,L.bl_tree);while(--le!==0);else ae!==0?(ae!==V&&(qe(L,ae,L.bl_tree),le--),qe(L,S,L.bl_tree),Pe(L,le-3,2)):le<=10?(qe(L,F,L.bl_tree),Pe(L,le-3,3)):(qe(L,z,L.bl_tree),Pe(L,le-11,7));le=0,V=ae,D===0?(Le=138,b=3):ae===D?(Le=6,b=3):(Le=7,b=4)}}function fe(L){var ue;for(Nn(L,L.dyn_ltree,L.l_desc.max_code),Nn(L,L.dyn_dtree,L.d_desc.max_code),Ft(L,L.bl_desc),ue=k-1;ue>=3&&L.bl_tree[Q[ue]*2+1]===0;ue--);return L.opt_len+=3*(ue+1)+5+5+4,ue}function Oe(L,ue,de,Ne){var V;for(Pe(L,ue-257,5),Pe(L,de-1,5),Pe(L,Ne-4,4),V=0;V<Ne;V++)Pe(L,L.bl_tree[Q[V]*2+1],3);se(L,L.dyn_ltree,ue-1),se(L,L.dyn_dtree,de-1)}function ze(L){var ue=4093624447,de;for(de=0;de<=31;de++,ue>>>=1)if(ue&1&&L.dyn_ltree[de*2]!==0)return o;if(L.dyn_ltree[9*2]!==0||L.dyn_ltree[10*2]!==0||L.dyn_ltree[13*2]!==0)return l;for(de=32;de<p;de++)if(L.dyn_ltree[de*2]!==0)return l;return o}var Xe=!1;function bt(L){Xe||(st(),Xe=!0),L.l_desc=new Me(L.dyn_ltree,je),L.d_desc=new Me(L.dyn_dtree,Te),L.bl_desc=new Me(L.bl_tree,We),L.bi_buf=0,L.bi_valid=0,Rt(L)}function Et(L,ue,de,Ne){Pe(L,(c<<1)+(Ne?1:0),3),St(L,ue,de)}function gt(L){Pe(L,h<<1,3),qe(L,P,$),xt(L)}function jt(L,ue,de,Ne){var V,ae,D=0;L.level>0?(L.strm.data_type===u&&(L.strm.data_type=ze(L)),Ft(L,L.l_desc),Ft(L,L.d_desc),D=fe(L),V=L.opt_len+3+7>>>3,ae=L.static_len+3+7>>>3,ae<=V&&(V=ae)):V=ae=de+5,de+4<=V&&ue!==-1?Et(L,ue,de,Ne):L.strategy===a||ae===V?(Pe(L,(h<<1)+(Ne?1:0),3),$e(L,$,re)):(Pe(L,(d<<1)+(Ne?1:0),3),Oe(L,L.l_desc.max_code+1,L.d_desc.max_code+1,D+1),$e(L,L.dyn_ltree,L.dyn_dtree)),Rt(L),Ne&&tn(L)}function Zt(L,ue,de){return L.pending_buf[L.d_buf+L.last_lit*2]=ue>>>8&255,L.pending_buf[L.d_buf+L.last_lit*2+1]=ue&255,L.pending_buf[L.l_buf+L.last_lit]=de&255,L.last_lit++,ue===0?L.dyn_ltree[de*2]++:(L.matches++,ue--,L.dyn_ltree[(pe[de]+p+1)*2]++,L.dyn_dtree[Qe(ue)*2]++),L.last_lit===L.lit_bufsize-1}i._tr_init=bt,i._tr_stored_block=Et,i._tr_flush_block=jt,i._tr_tally=Zt,i._tr_align=gt},{"../utils/common":41}],53:[function(n,r,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=s},{}],54:[function(n,r,i){(function(s){(function(a,o){if(a.setImmediate)return;var l=1,u={},f=!1,c=a.document,h;function d(A){typeof A!="function"&&(A=new Function(""+A));for(var P=new Array(arguments.length-1),S=0;S<P.length;S++)P[S]=arguments[S+1];var F={callback:A,args:P};return u[l]=F,h(l),l++}function v(A){delete u[A]}function w(A){var P=A.callback,S=A.args;switch(S.length){case 0:P();break;case 1:P(S[0]);break;case 2:P(S[0],S[1]);break;case 3:P(S[0],S[1],S[2]);break;default:P.apply(o,S);break}}function g(A){if(f)setTimeout(g,0,A);else{var P=u[A];if(P){f=!0;try{w(P)}finally{v(A),f=!1}}}}function p(){h=function(A){process.nextTick(function(){g(A)})}}function m(){if(a.postMessage&&!a.importScripts){var A=!0,P=a.onmessage;return a.onmessage=function(){A=!1},a.postMessage("","*"),a.onmessage=P,A}}function y(){var A="setImmediate$"+Math.random()+"$",P=function(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(A)===0&&g(+S.data.slice(A.length))};a.addEventListener?a.addEventListener("message",P,!1):a.attachEvent("onmessage",P),h=function(S){a.postMessage(A+S,"*")}}function k(){var A=new MessageChannel;A.port1.onmessage=function(P){var S=P.data;g(S)},h=function(P){A.port2.postMessage(P)}}function _(){var A=c.documentElement;h=function(P){var S=c.createElement("script");S.onreadystatechange=function(){g(P),S.onreadystatechange=null,A.removeChild(S),S=null},A.appendChild(S)}}function x(){h=function(A){setTimeout(g,0,A)}}var C=Object.getPrototypeOf&&Object.getPrototypeOf(a);C=C&&C.setTimeout?C:a,{}.toString.call(a.process)==="[object process]"?p():m()?y():a.MessageChannel?k():c&&"onreadystatechange"in c.createElement("script")?_():x(),C.setImmediate=d,C.clearImmediate=v})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(IE);var pO=IE.exports;const mO=Gr(pO);class gO{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new mO}catch{throw new Error("JSZip lib not loaded")}}open(e,n){return this.zip.loadAsync(e,{base64:n})}openUrl(e,n){return $l(e,"binary").then((function(r){return this.zip.loadAsync(r,{base64:n})}).bind(this))}request(e,n){var r=new pt,i,s=new Li(e);return n||(n=s.extension),n=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(a){let o=this.handleResponse(a,n);r.resolve(o)}).bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):Ul(n)?r=ui(e,"text/xml"):n=="xhtml"?r=ui(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=ui(e,"text/html"):r=e,r}getBlob(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||$a.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:n})})}getText(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(s){return s})}getBase64(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||$a.lookup(i.name),i.async("base64").then(function(s){return"data:"+n+";base64,"+s})}createUrl(e,n){var r=new pt,i=window.URL||window.webkitURL||window.mozURL,s,a,o=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,r.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}).bind(this))),a||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.zip=void 0,this.urlCache={}}}var OE={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function a(u,f){if(!i[u]){if(!r[u]){var c=typeof ts=="function"&&ts;if(!f&&c)return c(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[u]={exports:{}};r[u][0].call(d.exports,function(v){var w=r[u][1][v];return a(w||v)},d,d.exports,n,r,i,s)}return i[u].exports}for(var o=typeof ts=="function"&&ts,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(n,r,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,u=new a(v),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var c=new s.MessageChannel;c.port1.onmessage=v,o=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:o=function(){setTimeout(v,0)};var h,d=[];function v(){h=!0;for(var g,p,m=d.length;m;){for(p=d,d=[],g=-1;++g<m;)p[g]();m=d.length}h=!1}r.exports=w;function w(g){d.push(g)===1&&!h&&o()}}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];r.exports=c;function c(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==a&&w(this,_)}c.prototype.catch=function(_){return this.then(null,_)},c.prototype.then=function(_,x){if(typeof _!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var C=new this.constructor(a);if(this.state!==f){var A=this.state===u?_:x;d(C,A,this.outcome)}else this.queue.push(new h(C,_,x));return C};function h(_,x,C){this.promise=_,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(_){o.resolve(this.promise,_)},h.prototype.otherCallFulfilled=function(_){d(this.promise,this.onFulfilled,_)},h.prototype.callRejected=function(_){o.reject(this.promise,_)},h.prototype.otherCallRejected=function(_){d(this.promise,this.onRejected,_)};function d(_,x,C){s(function(){var A;try{A=x(C)}catch(P){return o.reject(_,P)}A===_?o.reject(_,new TypeError("Cannot resolve promise with itself")):o.resolve(_,A)})}o.resolve=function(_,x){var C=g(v,x);if(C.status==="error")return o.reject(_,C.value);var A=C.value;if(A)w(_,A);else{_.state=u,_.outcome=x;for(var P=-1,S=_.queue.length;++P<S;)_.queue[P].callFulfilled(x)}return _},o.reject=function(_,x){_.state=l,_.outcome=x;for(var C=-1,A=_.queue.length;++C<A;)_.queue[C].callRejected(x);return _};function v(_){var x=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof x=="function")return function(){x.apply(_,arguments)}}function w(_,x){var C=!1;function A(z){C||(C=!0,o.reject(_,z))}function P(z){C||(C=!0,o.resolve(_,z))}function S(){x(P,A)}var F=g(S);F.status==="error"&&A(F.value)}function g(_,x){var C={};try{C.value=_(x),C.status="success"}catch(A){C.status="error",C.value=A}return C}c.resolve=p;function p(_){return _ instanceof this?_:o.resolve(new this(a),_)}c.reject=m;function m(_){var x=new this(a);return o.reject(x,_)}c.all=y;function y(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,A=!1;if(!C)return this.resolve([]);for(var P=new Array(C),S=0,F=-1,z=new this(a);++F<C;)ie(_[F],F);return z;function ie(te,K){x.resolve(te).then(Q,function(Z){A||(A=!0,o.reject(z,Z))});function Q(Z){P[K]=Z,++S===C&&!A&&(A=!0,o.resolve(z,P))}}}c.race=k;function k(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,A=!1;if(!C)return this.resolve([]);for(var P=-1,S=new this(a);++P<C;)F(_[P]);return S;function F(z){x.resolve(z).then(function(ie){A||(A=!0,o.resolve(S,ie))},function(ie){A||(A=!0,o.reject(S,ie))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R};function a(R,H){if(!(R instanceof H))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=o();function u(){try{if(!l||!l.open)return!1;var R=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),H=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!R||H)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(R,H){R=R||[],H=H||{};try{return new Blob(R,H)}catch(q){if(q.name!=="TypeError")throw q;for(var M=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,X=new M,Y=0;Y<R.length;Y+=1)X.append(R[Y]);return X.getBlob(H.type)}}typeof Promise>"u"&&n(3);var c=Promise;function h(R,H){H&&R.then(function(M){H(null,M)},function(M){H(M)})}function d(R,H,M){typeof H=="function"&&R.then(H),typeof M=="function"&&R.catch(M)}function v(R){return typeof R!="string"&&(console.warn(R+" used as a key, but it is not a string."),R=String(R)),R}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",p=void 0,m={},y=Object.prototype.toString,k="readonly",_="readwrite";function x(R){for(var H=R.length,M=new ArrayBuffer(H),X=new Uint8Array(M),Y=0;Y<H;Y++)X[Y]=R.charCodeAt(Y);return M}function C(R){return new c(function(H){var M=R.transaction(g,_),X=f([""]);M.objectStore(g).put(X,"key"),M.onabort=function(Y){Y.preventDefault(),Y.stopPropagation(),H(!1)},M.oncomplete=function(){var Y=navigator.userAgent.match(/Chrome\/(\d+)/),q=navigator.userAgent.match(/Edge\//);H(q||!Y||parseInt(Y[1],10)>=43)}}).catch(function(){return!1})}function A(R){return typeof p=="boolean"?c.resolve(p):C(R).then(function(H){return p=H,p})}function P(R){var H=m[R.name],M={};M.promise=new c(function(X,Y){M.resolve=X,M.reject=Y}),H.deferredOperations.push(M),H.dbReady?H.dbReady=H.dbReady.then(function(){return M.promise}):H.dbReady=M.promise}function S(R){var H=m[R.name],M=H.deferredOperations.pop();if(M)return M.resolve(),M.promise}function F(R,H){var M=m[R.name],X=M.deferredOperations.pop();if(X)return X.reject(H),X.promise}function z(R,H){return new c(function(M,X){if(m[R.name]=m[R.name]||oe(),R.db)if(H)P(R),R.db.close();else return M(R.db);var Y=[R.name];H&&Y.push(R.version);var q=l.open.apply(l,Y);H&&(q.onupgradeneeded=function(ce){var ge=q.result;try{ge.createObjectStore(R.storeName),ce.oldVersion<=1&&ge.createObjectStore(g)}catch(we){if(we.name==="ConstraintError")console.warn('The database "'+R.name+'" has been upgraded from version '+ce.oldVersion+" to version "+ce.newVersion+', but the storage "'+R.storeName+'" already exists.');else throw we}}),q.onerror=function(ce){ce.preventDefault(),X(q.error)},q.onsuccess=function(){var ce=q.result;ce.onversionchange=function(ge){ge.target.close()},M(ce),S(R)}})}function ie(R){return z(R,!1)}function te(R){return z(R,!0)}function K(R,H){if(!R.db)return!0;var M=!R.db.objectStoreNames.contains(R.storeName),X=R.version<R.db.version,Y=R.version>R.db.version;if(X&&(R.version!==H&&console.warn('The database "'+R.name+`" can't be downgraded from version `+R.db.version+" to version "+R.version+"."),R.version=R.db.version),Y||M){if(M){var q=R.db.version+1;q>R.version&&(R.version=q)}return!0}return!1}function Q(R){return new c(function(H,M){var X=new FileReader;X.onerror=M,X.onloadend=function(Y){var q=btoa(Y.target.result||"");H({__local_forage_encoded_blob:!0,data:q,type:R.type})},X.readAsBinaryString(R)})}function Z(R){var H=x(atob(R.data));return f([H],{type:R.type})}function $(R){return R&&R.__local_forage_encoded_blob}function re(R){var H=this,M=H._initReady().then(function(){var X=m[H._dbInfo.name];if(X&&X.dbReady)return X.dbReady});return d(M,R,R),M}function I(R){P(R);for(var H=m[R.name],M=H.forages,X=0;X<M.length;X++){var Y=M[X];Y._dbInfo.db&&(Y._dbInfo.db.close(),Y._dbInfo.db=null)}return R.db=null,ie(R).then(function(q){return R.db=q,K(R)?te(R):q}).then(function(q){R.db=H.db=q;for(var ce=0;ce<M.length;ce++)M[ce]._dbInfo.db=q}).catch(function(q){throw F(R,q),q})}function pe(R,H,M,X){X===void 0&&(X=1);try{var Y=R.db.transaction(R.storeName,H);M(null,Y)}catch(q){if(X>0&&(!R.db||q.name==="InvalidStateError"||q.name==="NotFoundError"))return c.resolve().then(function(){if(!R.db||q.name==="NotFoundError"&&!R.db.objectStoreNames.contains(R.storeName)&&R.version<=R.db.version)return R.db&&(R.version=R.db.version+1),te(R)}).then(function(){return I(R).then(function(){pe(R,H,M,X-1)})}).catch(M);M(q)}}function oe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(R){var H=this,M={db:null};if(R)for(var X in R)M[X]=R[X];var Y=m[M.name];Y||(Y=oe(),m[M.name]=Y),Y.forages.push(H),H._initReady||(H._initReady=H.ready,H.ready=re);var q=[];function ce(){return c.resolve()}for(var ge=0;ge<Y.forages.length;ge++){var we=Y.forages[ge];we!==H&&q.push(we._initReady().catch(ce))}var xe=Y.forages.slice(0);return c.all(q).then(function(){return M.db=Y.db,ie(M)}).then(function(Se){return M.db=Se,K(M,H._defaultConfig.version)?te(M):Se}).then(function(Se){M.db=Y.db=Se,H._dbInfo=M;for(var Be=0;Be<xe.length;Be++){var at=xe[Be];at!==H&&(at._dbInfo.db=M.db,at._dbInfo.version=M.version)}})}function be(R,H){var M=this;R=v(R);var X=new c(function(Y,q){M.ready().then(function(){pe(M._dbInfo,k,function(ce,ge){if(ce)return q(ce);try{var we=ge.objectStore(M._dbInfo.storeName),xe=we.get(R);xe.onsuccess=function(){var Se=xe.result;Se===void 0&&(Se=null),$(Se)&&(Se=Z(Se)),Y(Se)},xe.onerror=function(){q(xe.error)}}catch(Se){q(Se)}})}).catch(q)});return h(X,H),X}function je(R,H){var M=this,X=new c(function(Y,q){M.ready().then(function(){pe(M._dbInfo,k,function(ce,ge){if(ce)return q(ce);try{var we=ge.objectStore(M._dbInfo.storeName),xe=we.openCursor(),Se=1;xe.onsuccess=function(){var Be=xe.result;if(Be){var at=Be.value;$(at)&&(at=Z(at));var Ct=R(at,Be.key,Se++);Ct!==void 0?Y(Ct):Be.continue()}else Y()},xe.onerror=function(){q(xe.error)}}catch(Be){q(Be)}})}).catch(q)});return h(X,H),X}function Te(R,H,M){var X=this;R=v(R);var Y=new c(function(q,ce){var ge;X.ready().then(function(){return ge=X._dbInfo,y.call(H)==="[object Blob]"?A(ge.db).then(function(we){return we?H:Q(H)}):H}).then(function(we){pe(X._dbInfo,_,function(xe,Se){if(xe)return ce(xe);try{var Be=Se.objectStore(X._dbInfo.storeName);we===null&&(we=void 0);var at=Be.put(we,R);Se.oncomplete=function(){we===void 0&&(we=null),q(we)},Se.onabort=Se.onerror=function(){var Ct=at.error?at.error:at.transaction.error;ce(Ct)}}catch(Ct){ce(Ct)}})}).catch(ce)});return h(Y,M),Y}function We(R,H){var M=this;R=v(R);var X=new c(function(Y,q){M.ready().then(function(){pe(M._dbInfo,_,function(ce,ge){if(ce)return q(ce);try{var we=ge.objectStore(M._dbInfo.storeName),xe=we.delete(R);ge.oncomplete=function(){Y()},ge.onerror=function(){q(xe.error)},ge.onabort=function(){var Se=xe.error?xe.error:xe.transaction.error;q(Se)}}catch(Se){q(Se)}})}).catch(q)});return h(X,H),X}function Me(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){pe(H._dbInfo,_,function(q,ce){if(q)return Y(q);try{var ge=ce.objectStore(H._dbInfo.storeName),we=ge.clear();ce.oncomplete=function(){X()},ce.onabort=ce.onerror=function(){var xe=we.error?we.error:we.transaction.error;Y(xe)}}catch(xe){Y(xe)}})}).catch(Y)});return h(M,R),M}function Qe(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){pe(H._dbInfo,k,function(q,ce){if(q)return Y(q);try{var ge=ce.objectStore(H._dbInfo.storeName),we=ge.count();we.onsuccess=function(){X(we.result)},we.onerror=function(){Y(we.error)}}catch(xe){Y(xe)}})}).catch(Y)});return h(M,R),M}function Ae(R,H){var M=this,X=new c(function(Y,q){if(R<0){Y(null);return}M.ready().then(function(){pe(M._dbInfo,k,function(ce,ge){if(ce)return q(ce);try{var we=ge.objectStore(M._dbInfo.storeName),xe=!1,Se=we.openKeyCursor();Se.onsuccess=function(){var Be=Se.result;if(!Be){Y(null);return}R===0||xe?Y(Be.key):(xe=!0,Be.advance(R))},Se.onerror=function(){q(Se.error)}}catch(Be){q(Be)}})}).catch(q)});return h(X,H),X}function Pe(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){pe(H._dbInfo,k,function(q,ce){if(q)return Y(q);try{var ge=ce.objectStore(H._dbInfo.storeName),we=ge.openKeyCursor(),xe=[];we.onsuccess=function(){var Se=we.result;if(!Se){X(xe);return}xe.push(Se.key),Se.continue()},we.onerror=function(){Y(we.error)}}catch(Se){Y(Se)}})}).catch(Y)});return h(M,R),M}function qe(R,H){H=w.apply(this,arguments);var M=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||M.name,R.storeName=R.storeName||M.storeName);var X=this,Y;if(!R.name)Y=c.reject("Invalid arguments");else{var q=R.name===M.name&&X._dbInfo.db,ce=q?c.resolve(X._dbInfo.db):ie(R).then(function(ge){var we=m[R.name],xe=we.forages;we.db=ge;for(var Se=0;Se<xe.length;Se++)xe[Se]._dbInfo.db=ge;return ge});R.storeName?Y=ce.then(function(ge){if(ge.objectStoreNames.contains(R.storeName)){var we=ge.version+1;P(R);var xe=m[R.name],Se=xe.forages;ge.close();for(var Be=0;Be<Se.length;Be++){var at=Se[Be];at._dbInfo.db=null,at._dbInfo.version=we}var Ct=new c(function(At,nn){var Qt=l.open(R.name,we);Qt.onerror=function(xr){var yo=Qt.result;yo.close(),nn(xr)},Qt.onupgradeneeded=function(){var xr=Qt.result;xr.deleteObjectStore(R.storeName)},Qt.onsuccess=function(){var xr=Qt.result;xr.close(),At(xr)}});return Ct.then(function(At){xe.db=At;for(var nn=0;nn<Se.length;nn++){var Qt=Se[nn];Qt._dbInfo.db=At,S(Qt._dbInfo)}}).catch(function(At){throw(F(R,At)||c.resolve()).catch(function(){}),At})}}):Y=ce.then(function(ge){P(R);var we=m[R.name],xe=we.forages;ge.close();for(var Se=0;Se<xe.length;Se++){var Be=xe[Se];Be._dbInfo.db=null}var at=new c(function(Ct,At){var nn=l.deleteDatabase(R.name);nn.onerror=function(){var Qt=nn.result;Qt&&Qt.close(),At(nn.error)},nn.onblocked=function(){console.warn('dropInstance blocked for database "'+R.name+'" until all open connections are closed')},nn.onsuccess=function(){var Qt=nn.result;Qt&&Qt.close(),Ct(Qt)}});return at.then(function(Ct){we.db=Ct;for(var At=0;At<xe.length;At++){var nn=xe[At];S(nn._dbInfo)}}).catch(function(Ct){throw(F(R,Ct)||c.resolve()).catch(function(){}),Ct})})}return h(Y,H),Y}var Ge={_driver:"asyncStorage",_initStorage:B,_support:u(),iterate:je,getItem:be,setItem:Te,removeItem:We,clear:Me,length:Qe,key:Ae,keys:Pe,dropInstance:qe};function xt(){return typeof openDatabase=="function"}var it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt="~~local_forage_type~",st=/^~~local_forage_type~([^~]+)~/,Rt="__lfsc__:",tn=Rt.length,St="arbf",Pt="blob",dt="si08",$e="ui08",Ft="uic8",Nn="si16",se="si32",fe="ur16",Oe="ui32",ze="fl32",Xe="fl64",bt=tn+St.length,Et=Object.prototype.toString;function gt(R){var H=R.length*.75,M=R.length,X,Y=0,q,ce,ge,we;R[R.length-1]==="="&&(H--,R[R.length-2]==="="&&H--);var xe=new ArrayBuffer(H),Se=new Uint8Array(xe);for(X=0;X<M;X+=4)q=it.indexOf(R[X]),ce=it.indexOf(R[X+1]),ge=it.indexOf(R[X+2]),we=it.indexOf(R[X+3]),Se[Y++]=q<<2|ce>>4,Se[Y++]=(ce&15)<<4|ge>>2,Se[Y++]=(ge&3)<<6|we&63;return xe}function jt(R){var H=new Uint8Array(R),M="",X;for(X=0;X<H.length;X+=3)M+=it[H[X]>>2],M+=it[(H[X]&3)<<4|H[X+1]>>4],M+=it[(H[X+1]&15)<<2|H[X+2]>>6],M+=it[H[X+2]&63];return H.length%3===2?M=M.substring(0,M.length-1)+"=":H.length%3===1&&(M=M.substring(0,M.length-2)+"=="),M}function Zt(R,H){var M="";if(R&&(M=Et.call(R)),R&&(M==="[object ArrayBuffer]"||R.buffer&&Et.call(R.buffer)==="[object ArrayBuffer]")){var X,Y=Rt;R instanceof ArrayBuffer?(X=R,Y+=St):(X=R.buffer,M==="[object Int8Array]"?Y+=dt:M==="[object Uint8Array]"?Y+=$e:M==="[object Uint8ClampedArray]"?Y+=Ft:M==="[object Int16Array]"?Y+=Nn:M==="[object Uint16Array]"?Y+=fe:M==="[object Int32Array]"?Y+=se:M==="[object Uint32Array]"?Y+=Oe:M==="[object Float32Array]"?Y+=ze:M==="[object Float64Array]"?Y+=Xe:H(new Error("Failed to get type for BinaryArray"))),H(Y+jt(X))}else if(M==="[object Blob]"){var q=new FileReader;q.onload=function(){var ce=Lt+R.type+"~"+jt(this.result);H(Rt+Pt+ce)},q.readAsArrayBuffer(R)}else try{H(JSON.stringify(R))}catch(ce){console.error("Couldn't convert value into a JSON string: ",R),H(null,ce)}}function L(R){if(R.substring(0,tn)!==Rt)return JSON.parse(R);var H=R.substring(bt),M=R.substring(tn,bt),X;if(M===Pt&&st.test(H)){var Y=H.match(st);X=Y[1],H=H.substring(Y[0].length)}var q=gt(H);switch(M){case St:return q;case Pt:return f([q],{type:X});case dt:return new Int8Array(q);case $e:return new Uint8Array(q);case Ft:return new Uint8ClampedArray(q);case Nn:return new Int16Array(q);case fe:return new Uint16Array(q);case se:return new Int32Array(q);case Oe:return new Uint32Array(q);case ze:return new Float32Array(q);case Xe:return new Float64Array(q);default:throw new Error("Unkown type: "+M)}}var ue={serialize:Zt,deserialize:L,stringToBuffer:gt,bufferToString:jt};function de(R,H,M,X){R.executeSql("CREATE TABLE IF NOT EXISTS "+H.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],M,X)}function Ne(R){var H=this,M={db:null};if(R)for(var X in R)M[X]=typeof R[X]!="string"?R[X].toString():R[X];var Y=new c(function(q,ce){try{M.db=openDatabase(M.name,String(M.version),M.description,M.size)}catch(ge){return ce(ge)}M.db.transaction(function(ge){de(ge,M,function(){H._dbInfo=M,q()},function(we,xe){ce(xe)})},ce)});return M.serializer=ue,Y}function V(R,H,M,X,Y,q){R.executeSql(M,X,Y,function(ce,ge){ge.code===ge.SYNTAX_ERR?ce.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[H.storeName],function(we,xe){xe.rows.length?q(we,ge):de(we,H,function(){we.executeSql(M,X,Y,q)},q)},q):q(ce,ge)},q)}function ae(R,H){var M=this;R=v(R);var X=new c(function(Y,q){M.ready().then(function(){var ce=M._dbInfo;ce.db.transaction(function(ge){V(ge,ce,"SELECT * FROM "+ce.storeName+" WHERE key = ? LIMIT 1",[R],function(we,xe){var Se=xe.rows.length?xe.rows.item(0).value:null;Se&&(Se=ce.serializer.deserialize(Se)),Y(Se)},function(we,xe){q(xe)})})}).catch(q)});return h(X,H),X}function D(R,H){var M=this,X=new c(function(Y,q){M.ready().then(function(){var ce=M._dbInfo;ce.db.transaction(function(ge){V(ge,ce,"SELECT * FROM "+ce.storeName,[],function(we,xe){for(var Se=xe.rows,Be=Se.length,at=0;at<Be;at++){var Ct=Se.item(at),At=Ct.value;if(At&&(At=ce.serializer.deserialize(At)),At=R(At,Ct.key,at+1),At!==void 0){Y(At);return}}Y()},function(we,xe){q(xe)})})}).catch(q)});return h(X,H),X}function le(R,H,M,X){var Y=this;R=v(R);var q=new c(function(ce,ge){Y.ready().then(function(){H===void 0&&(H=null);var we=H,xe=Y._dbInfo;xe.serializer.serialize(H,function(Se,Be){Be?ge(Be):xe.db.transaction(function(at){V(at,xe,"INSERT OR REPLACE INTO "+xe.storeName+" (key, value) VALUES (?, ?)",[R,Se],function(){ce(we)},function(Ct,At){ge(At)})},function(at){if(at.code===at.QUOTA_ERR){if(X>0){ce(le.apply(Y,[R,we,M,X-1]));return}ge(at)}})})}).catch(ge)});return h(q,M),q}function Le(R,H,M){return le.apply(this,[R,H,M,1])}function b(R,H){var M=this;R=v(R);var X=new c(function(Y,q){M.ready().then(function(){var ce=M._dbInfo;ce.db.transaction(function(ge){V(ge,ce,"DELETE FROM "+ce.storeName+" WHERE key = ?",[R],function(){Y()},function(we,xe){q(xe)})})}).catch(q)});return h(X,H),X}function J(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(ce){V(ce,q,"DELETE FROM "+q.storeName,[],function(){X()},function(ge,we){Y(we)})})}).catch(Y)});return h(M,R),M}function ee(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(ce){V(ce,q,"SELECT COUNT(key) as c FROM "+q.storeName,[],function(ge,we){var xe=we.rows.item(0).c;X(xe)},function(ge,we){Y(we)})})}).catch(Y)});return h(M,R),M}function N(R,H){var M=this,X=new c(function(Y,q){M.ready().then(function(){var ce=M._dbInfo;ce.db.transaction(function(ge){V(ge,ce,"SELECT key FROM "+ce.storeName+" WHERE id = ? LIMIT 1",[R+1],function(we,xe){var Se=xe.rows.length?xe.rows.item(0).key:null;Y(Se)},function(we,xe){q(xe)})})}).catch(q)});return h(X,H),X}function W(R){var H=this,M=new c(function(X,Y){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(ce){V(ce,q,"SELECT key FROM "+q.storeName,[],function(ge,we){for(var xe=[],Se=0;Se<we.rows.length;Se++)xe.push(we.rows.item(Se).key);X(xe)},function(ge,we){Y(we)})})}).catch(Y)});return h(M,R),M}function T(R){return new c(function(H,M){R.transaction(function(X){X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Y,q){for(var ce=[],ge=0;ge<q.rows.length;ge++)ce.push(q.rows.item(ge).name);H({db:R,storeNames:ce})},function(Y,q){M(q)})},function(X){M(X)})})}function j(R,H){H=w.apply(this,arguments);var M=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||M.name,R.storeName=R.storeName||M.storeName);var X=this,Y;return R.name?Y=new c(function(q){var ce;R.name===M.name?ce=X._dbInfo.db:ce=openDatabase(R.name,"","",0),R.storeName?q({db:ce,storeNames:[R.storeName]}):q(T(ce))}).then(function(q){return new c(function(ce,ge){q.db.transaction(function(we){function xe(Ct){return new c(function(At,nn){we.executeSql("DROP TABLE IF EXISTS "+Ct,[],function(){At()},function(Qt,xr){nn(xr)})})}for(var Se=[],Be=0,at=q.storeNames.length;Be<at;Be++)Se.push(xe(q.storeNames[Be]));c.all(Se).then(function(){ce()}).catch(function(Ct){ge(Ct)})},function(we){ge(we)})})}):Y=c.reject("Invalid arguments"),h(Y,H),Y}var U={_driver:"webSQLStorage",_initStorage:Ne,_support:xt(),iterate:D,getItem:ae,setItem:Le,removeItem:b,clear:J,length:ee,key:N,keys:W,dropInstance:j};function G(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function he(R,H){var M=R.name+"/";return R.storeName!==H.storeName&&(M+=R.storeName+"/"),M}function Re(){var R="_localforage_support_test";try{return localStorage.setItem(R,!0),localStorage.removeItem(R),!1}catch{return!0}}function Ce(){return!Re()||localStorage.length>0}function me(R){var H=this,M={};if(R)for(var X in R)M[X]=R[X];return M.keyPrefix=he(R,H._defaultConfig),Ce()?(H._dbInfo=M,M.serializer=ue,c.resolve()):c.reject()}function _e(R){var H=this,M=H.ready().then(function(){for(var X=H._dbInfo.keyPrefix,Y=localStorage.length-1;Y>=0;Y--){var q=localStorage.key(Y);q.indexOf(X)===0&&localStorage.removeItem(q)}});return h(M,R),M}function Ee(R,H){var M=this;R=v(R);var X=M.ready().then(function(){var Y=M._dbInfo,q=localStorage.getItem(Y.keyPrefix+R);return q&&(q=Y.serializer.deserialize(q)),q});return h(X,H),X}function Ie(R,H){var M=this,X=M.ready().then(function(){for(var Y=M._dbInfo,q=Y.keyPrefix,ce=q.length,ge=localStorage.length,we=1,xe=0;xe<ge;xe++){var Se=localStorage.key(xe);if(Se.indexOf(q)===0){var Be=localStorage.getItem(Se);if(Be&&(Be=Y.serializer.deserialize(Be)),Be=R(Be,Se.substring(ce),we++),Be!==void 0)return Be}}});return h(X,H),X}function Je(R,H){var M=this,X=M.ready().then(function(){var Y=M._dbInfo,q;try{q=localStorage.key(R)}catch{q=null}return q&&(q=q.substring(Y.keyPrefix.length)),q});return h(X,H),X}function nt(R){var H=this,M=H.ready().then(function(){for(var X=H._dbInfo,Y=localStorage.length,q=[],ce=0;ce<Y;ce++){var ge=localStorage.key(ce);ge.indexOf(X.keyPrefix)===0&&q.push(ge.substring(X.keyPrefix.length))}return q});return h(M,R),M}function rt(R){var H=this,M=H.keys().then(function(X){return X.length});return h(M,R),M}function et(R,H){var M=this;R=v(R);var X=M.ready().then(function(){var Y=M._dbInfo;localStorage.removeItem(Y.keyPrefix+R)});return h(X,H),X}function Ve(R,H,M){var X=this;R=v(R);var Y=X.ready().then(function(){H===void 0&&(H=null);var q=H;return new c(function(ce,ge){var we=X._dbInfo;we.serializer.serialize(H,function(xe,Se){if(Se)ge(Se);else try{localStorage.setItem(we.keyPrefix+R,xe),ce(q)}catch(Be){(Be.name==="QuotaExceededError"||Be.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ge(Be),ge(Be)}})})});return h(Y,M),Y}function vt(R,H){if(H=w.apply(this,arguments),R=typeof R!="function"&&R||{},!R.name){var M=this.config();R.name=R.name||M.name,R.storeName=R.storeName||M.storeName}var X=this,Y;return R.name?Y=new c(function(q){R.storeName?q(he(R,X._defaultConfig)):q(R.name+"/")}).then(function(q){for(var ce=localStorage.length-1;ce>=0;ce--){var ge=localStorage.key(ce);ge.indexOf(q)===0&&localStorage.removeItem(ge)}}):Y=c.reject("Invalid arguments"),h(Y,H),Y}var un={_driver:"localStorageWrapper",_initStorage:me,_support:G(),iterate:Ie,getItem:Ee,setItem:Ve,removeItem:et,clear:_e,length:rt,key:Je,keys:nt,dropInstance:vt},Yr=function(H,M){return H===M||typeof H=="number"&&typeof M=="number"&&isNaN(H)&&isNaN(M)},Rr=function(H,M){for(var X=H.length,Y=0;Y<X;){if(Yr(H[Y],M))return!0;Y++}return!1},ir=Array.isArray||function(R){return Object.prototype.toString.call(R)==="[object Array]"},hi={},Mi={},Hn={INDEXEDDB:Ge,WEBSQL:U,LOCALSTORAGE:un},ra=[Hn.INDEXEDDB._driver,Hn.WEBSQL._driver,Hn.LOCALSTORAGE._driver],pi=["dropInstance"],ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(pi),$t={description:"",driver:ra.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Bi(R,H){R[H]=function(){var M=arguments;return R.ready().then(function(){return R[H].apply(R,M)})}}function mi(){for(var R=1;R<arguments.length;R++){var H=arguments[R];if(H)for(var M in H)H.hasOwnProperty(M)&&(ir(H[M])?arguments[0][M]=H[M].slice():arguments[0][M]=H[M])}return arguments[0]}var Gt=function(){function R(H){a(this,R);for(var M in Hn)if(Hn.hasOwnProperty(M)){var X=Hn[M],Y=X._driver;this[M]=Y,hi[Y]||this.defineDriver(X)}this._defaultConfig=mi({},$t),this._config=mi({},this._defaultConfig,H),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return R.prototype.config=function(M){if((typeof M>"u"?"undefined":s(M))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var X in M){if(X==="storeName"&&(M[X]=M[X].replace(/\W/g,"_")),X==="version"&&typeof M[X]!="number")return new Error("Database version must be a number.");this._config[X]=M[X]}return"driver"in M&&M.driver?this.setDriver(this._config.driver):!0}else return typeof M=="string"?this._config[M]:this._config},R.prototype.defineDriver=function(M,X,Y){var q=new c(function(ce,ge){try{var we=M._driver,xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!M._driver){ge(xe);return}for(var Se=ct.concat("_initStorage"),Be=0,at=Se.length;Be<at;Be++){var Ct=Se[Be],At=!Rr(pi,Ct);if((At||M[Ct])&&typeof M[Ct]!="function"){ge(xe);return}}var nn=function(){for(var yo=function(yA){return function(){var wA=new Error("Method "+yA+" is not implemented by the current driver"),P0=c.reject(wA);return h(P0,arguments[arguments.length-1]),P0}},Gd=0,vA=pi.length;Gd<vA;Gd++){var Yd=pi[Gd];M[Yd]||(M[Yd]=yo(Yd))}};nn();var Qt=function(yo){hi[we]&&console.info("Redefining LocalForage driver: "+we),hi[we]=M,Mi[we]=yo,ce()};"_support"in M?M._support&&typeof M._support=="function"?M._support().then(Qt,ge):Qt(!!M._support):Qt(!0)}catch(xr){ge(xr)}});return d(q,X,Y),q},R.prototype.driver=function(){return this._driver||null},R.prototype.getDriver=function(M,X,Y){var q=hi[M]?c.resolve(hi[M]):c.reject(new Error("Driver not found."));return d(q,X,Y),q},R.prototype.getSerializer=function(M){var X=c.resolve(ue);return d(X,M),X},R.prototype.ready=function(M){var X=this,Y=X._driverSet.then(function(){return X._ready===null&&(X._ready=X._initDriver()),X._ready});return d(Y,M,M),Y},R.prototype.setDriver=function(M,X,Y){var q=this;ir(M)||(M=[M]);var ce=this._getSupportedDrivers(M);function ge(){q._config.driver=q.driver()}function we(Be){return q._extend(Be),ge(),q._ready=q._initStorage(q._config),q._ready}function xe(Be){return function(){var at=0;function Ct(){for(;at<Be.length;){var At=Be[at];return at++,q._dbInfo=null,q._ready=null,q.getDriver(At).then(we).catch(Ct)}ge();var nn=new Error("No available storage method found.");return q._driverSet=c.reject(nn),q._driverSet}return Ct()}}var Se=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=Se.then(function(){var Be=ce[0];return q._dbInfo=null,q._ready=null,q.getDriver(Be).then(function(at){q._driver=at._driver,ge(),q._wrapLibraryMethodsWithReady(),q._initDriver=xe(ce)})}).catch(function(){ge();var Be=new Error("No available storage method found.");return q._driverSet=c.reject(Be),q._driverSet}),d(this._driverSet,X,Y),this._driverSet},R.prototype.supports=function(M){return!!Mi[M]},R.prototype._extend=function(M){mi(this,M)},R.prototype._getSupportedDrivers=function(M){for(var X=[],Y=0,q=M.length;Y<q;Y++){var ce=M[Y];this.supports(ce)&&X.push(ce)}return X},R.prototype._wrapLibraryMethodsWithReady=function(){for(var M=0,X=ct.length;M<X;M++)Bi(this,ct[M])},R.prototype.createInstance=function(M){return new R(M)},R}(),ji=new Gt;r.exports=ji},{3:3}]},{},[4])(4)})})(OE);var vO=OE.exports;const Pw=Gr(vO);class LE{constructor(e,n,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=n||$l,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Pw>"u"&&(e=Pw),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let n=navigator.onLine;this.online=n,n?this.emit("online",this):this.emit("offline",this)}add(e,n){let r=e.resources.map(i=>{let{href:s}=i,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(l=>!l||n?this.requester(a,"binary").then(u=>this.storage.setItem(o,u)):l)});return Promise.all(r)}put(e,n,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",n,r).then(a=>this.storage.setItem(i,a)))}request(e,n,r,i){return this.online?this.requester(e,n,r,i).then(s=>(this.put(e),s)):this.retrieve(e,n)}retrieve(e,n){new pt;var r,i=new Li(e);return n||(n=i.extension),n=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(s=>{var a=new pt,o;return s?(o=this.handleResponse(s,n),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):Ul(n)?r=ui(e,"text/xml"):n=="xhtml"?r=ui(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=ui(e,"text/html"):r=e,r}getBlob(e,n){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return n=n||$a.lookup(e),new Blob([i],{type:n})})}getText(e,n){let r=window.encodeURIComponent(e);return n=n||$a.lookup(e),this.storage.getItem(r).then(function(i){var s=new pt,a=new FileReader,o;if(i)return o=new Blob([i],{type:n}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,n),s.promise})}getBase64(e,n){let r=window.encodeURIComponent(e);return n=n||$a.lookup(e),this.storage.getItem(r).then(i=>{var s=new pt,a=new FileReader,o;if(i)return o=new Blob([i],{type:n}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,n),s.promise})}createUrl(e,n){var r=new pt,i=window.URL||window.webkitURL||window.mozURL,s,a,o=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,r.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,r.resolve(s)}).bind(this))),a||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.urlCache={},this.removeListeners()}}fi(LE.prototype);class jh{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const n=It(e,"display_options");return n?(Oi(n,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Fw="META-INF/container.xml",yO="META-INF/com.apple.ibooks.display-options.xml",Or={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Ad{constructor(e,n){typeof n>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(n=e,e=void 0),this.settings=An(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),An(this.settings,n),this.opening=new pt,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new pt,spine:new pt,metadata:new pt,cover:new pt,navigation:new pt,pageList:new pt,resources:new pt,displayOptions:new pt},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||$l,this.spine=new FI,this.locations=new gE(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(De.BOOK.OPEN_FAILED,i)})}open(e,n){var r,i=n||this.determineType(e);return i===Or.BINARY?(this.archived=!0,this.url=new Pr("/",""),r=this.openEpub(e)):i===Or.BASE64?(this.archived=!0,this.url=new Pr("/",""),r=this.openEpub(e,i)):i===Or.EPUB?(this.archived=!0,this.url=new Pr("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==Or.OPF?(this.url=new Pr(e),r=this.openPackaging(this.url.Path.toString())):i==Or.MANIFEST?(this.url=new Pr(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Pr(e),r=this.openContainer(Fw).then(this.openPackaging.bind(this))),r}openEpub(e,n){return this.unarchive(e,n||this.settings.encoding).then(()=>this.openContainer(Fw)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(n=>(this.container=new MI(n),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Li(e),this.load(e).then(n=>(this.packaging=new Aw(n),this.unpack(this.packaging)))}openManifest(e){return this.path=new Li(e),this.load(e).then(n=>(this.packaging=new Aw,this.packaging.load(n),this.unpack(this.packaging)))}load(e){var n=this.resolve(e);return this.archived?this.archive.request(n):this.request(n,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,n){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),n!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var n=e;return e?(this.settings.canonical?n=this.settings.canonical(e):n=this.resolve(e,!0),n):""}determineType(e){var n,r,i;if(this.settings.encoding==="base64")return Or.BASE64;if(typeof e!="string")return Or.BINARY;if(n=new Pr(e),r=n.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return Or.DIRECTORY;if(i==="epub")return Or.EPUB;if(i==="opf")return Or.OPF;if(i==="json")return Or.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(yO)).then(n=>{this.displayOptions=new jh(n),this.loading.displayOptions.resolve(this.displayOptions)}).catch(n=>{this.displayOptions=new jh,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new jh,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new UI(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(n=>{console.error(n)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let n=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,s)=>{this.navigation=new Fh(r),e.pageList&&(this.pageList=new Mh(e.pageList)),i(this.navigation)}):n?this.load(n,"xml").then(i=>(this.navigation=new Fh(i),this.pageList=new Mh(i),this.navigation)):new Promise((i,s)=>{this.navigation=new Fh,this.pageList=new Mh,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,n){return this.rendition=new Sv(this,n),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,n){return this.archive=new gO,this.archive.open(e,n)}store(e){let n=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||$l.bind(this);return this.storage=new LE(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=n||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Pr("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,n)=>{n.output=this.resources.substitute(e,n.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var n=new mt(e),r=this.spine.get(n.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(s){var a=n.toRange(r.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var n=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Ed}:${n}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}fi(Ad.prototype);function ws(t,e){return new Ad(t,e)}ws.VERSION=Ed;typeof global<"u"&&(global.EPUBJS_VERSION=Ed);ws.Book=Ad;ws.Rendition=Sv;ws.Contents=_v;ws.CFI=mt;ws.utils=DI;var PE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Sn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",a="second",o="minute",l="hour",u="day",f="week",c="month",h="quarter",d="year",v="date",w="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(te){var K=["th","st","nd","rd"],Q=te%100;return"["+te+(K[(Q-20)%10]||K[Q]||K[0])+"]"}},y=function(te,K,Q){var Z=String(te);return!Z||Z.length>=K?te:""+Array(K+1-Z.length).join(Q)+te},k={s:y,z:function(te){var K=-te.utcOffset(),Q=Math.abs(K),Z=Math.floor(Q/60),$=Q%60;return(K<=0?"+":"-")+y(Z,2,"0")+":"+y($,2,"0")},m:function te(K,Q){if(K.date()<Q.date())return-te(Q,K);var Z=12*(Q.year()-K.year())+(Q.month()-K.month()),$=K.clone().add(Z,c),re=Q-$<0,I=K.clone().add(Z+(re?-1:1),c);return+(-(Z+(Q-$)/(re?$-I:I-$))||0)},a:function(te){return te<0?Math.ceil(te)||0:Math.floor(te)},p:function(te){return{M:c,y:d,w:f,d:u,D:v,h:l,m:o,s:a,ms:s,Q:h}[te]||String(te||"").toLowerCase().replace(/s$/,"")},u:function(te){return te===void 0}},_="en",x={};x[_]=m;var C="$isDayjsObject",A=function(te){return te instanceof z||!(!te||!te[C])},P=function te(K,Q,Z){var $;if(!K)return _;if(typeof K=="string"){var re=K.toLowerCase();x[re]&&($=re),Q&&(x[re]=Q,$=re);var I=K.split("-");if(!$&&I.length>1)return te(I[0])}else{var pe=K.name;x[pe]=K,$=pe}return!Z&&$&&(_=$),$||!Z&&_},S=function(te,K){if(A(te))return te.clone();var Q=typeof K=="object"?K:{};return Q.date=te,Q.args=arguments,new z(Q)},F=k;F.l=P,F.i=A,F.w=function(te,K){return S(te,{locale:K.$L,utc:K.$u,x:K.$x,$offset:K.$offset})};var z=function(){function te(Q){this.$L=P(Q.locale,null,!0),this.parse(Q),this.$x=this.$x||Q.x||{},this[C]=!0}var K=te.prototype;return K.parse=function(Q){this.$d=function(Z){var $=Z.date,re=Z.utc;if($===null)return new Date(NaN);if(F.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var I=$.match(g);if(I){var pe=I[2]-1||0,oe=(I[7]||"0").substring(0,3);return re?new Date(Date.UTC(I[1],pe,I[3]||1,I[4]||0,I[5]||0,I[6]||0,oe)):new Date(I[1],pe,I[3]||1,I[4]||0,I[5]||0,I[6]||0,oe)}}return new Date($)}(Q),this.init()},K.init=function(){var Q=this.$d;this.$y=Q.getFullYear(),this.$M=Q.getMonth(),this.$D=Q.getDate(),this.$W=Q.getDay(),this.$H=Q.getHours(),this.$m=Q.getMinutes(),this.$s=Q.getSeconds(),this.$ms=Q.getMilliseconds()},K.$utils=function(){return F},K.isValid=function(){return this.$d.toString()!==w},K.isSame=function(Q,Z){var $=S(Q);return this.startOf(Z)<=$&&$<=this.endOf(Z)},K.isAfter=function(Q,Z){return S(Q)<this.startOf(Z)},K.isBefore=function(Q,Z){return this.endOf(Z)<S(Q)},K.$g=function(Q,Z,$){return F.u(Q)?this[Z]:this.set($,Q)},K.unix=function(){return Math.floor(this.valueOf()/1e3)},K.valueOf=function(){return this.$d.getTime()},K.startOf=function(Q,Z){var $=this,re=!!F.u(Z)||Z,I=F.p(Q),pe=function(Qe,Ae){var Pe=F.w($.$u?Date.UTC($.$y,Ae,Qe):new Date($.$y,Ae,Qe),$);return re?Pe:Pe.endOf(u)},oe=function(Qe,Ae){return F.w($.toDate()[Qe].apply($.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(Ae)),$)},B=this.$W,be=this.$M,je=this.$D,Te="set"+(this.$u?"UTC":"");switch(I){case d:return re?pe(1,0):pe(31,11);case c:return re?pe(1,be):pe(0,be+1);case f:var We=this.$locale().weekStart||0,Me=(B<We?B+7:B)-We;return pe(re?je-Me:je+(6-Me),be);case u:case v:return oe(Te+"Hours",0);case l:return oe(Te+"Minutes",1);case o:return oe(Te+"Seconds",2);case a:return oe(Te+"Milliseconds",3);default:return this.clone()}},K.endOf=function(Q){return this.startOf(Q,!1)},K.$set=function(Q,Z){var $,re=F.p(Q),I="set"+(this.$u?"UTC":""),pe=($={},$[u]=I+"Date",$[v]=I+"Date",$[c]=I+"Month",$[d]=I+"FullYear",$[l]=I+"Hours",$[o]=I+"Minutes",$[a]=I+"Seconds",$[s]=I+"Milliseconds",$)[re],oe=re===u?this.$D+(Z-this.$W):Z;if(re===c||re===d){var B=this.clone().set(v,1);B.$d[pe](oe),B.init(),this.$d=B.set(v,Math.min(this.$D,B.daysInMonth())).$d}else pe&&this.$d[pe](oe);return this.init(),this},K.set=function(Q,Z){return this.clone().$set(Q,Z)},K.get=function(Q){return this[F.p(Q)]()},K.add=function(Q,Z){var $,re=this;Q=Number(Q);var I=F.p(Z),pe=function(be){var je=S(re);return F.w(je.date(je.date()+Math.round(be*Q)),re)};if(I===c)return this.set(c,this.$M+Q);if(I===d)return this.set(d,this.$y+Q);if(I===u)return pe(1);if(I===f)return pe(7);var oe=($={},$[o]=r,$[l]=i,$[a]=n,$)[I]||1,B=this.$d.getTime()+Q*oe;return F.w(B,this)},K.subtract=function(Q,Z){return this.add(-1*Q,Z)},K.format=function(Q){var Z=this,$=this.$locale();if(!this.isValid())return $.invalidDate||w;var re=Q||"YYYY-MM-DDTHH:mm:ssZ",I=F.z(this),pe=this.$H,oe=this.$m,B=this.$M,be=$.weekdays,je=$.months,Te=$.meridiem,We=function(Ae,Pe,qe,Ge){return Ae&&(Ae[Pe]||Ae(Z,re))||qe[Pe].slice(0,Ge)},Me=function(Ae){return F.s(pe%12||12,Ae,"0")},Qe=Te||function(Ae,Pe,qe){var Ge=Ae<12?"AM":"PM";return qe?Ge.toLowerCase():Ge};return re.replace(p,function(Ae,Pe){return Pe||function(qe){switch(qe){case"YY":return String(Z.$y).slice(-2);case"YYYY":return F.s(Z.$y,4,"0");case"M":return B+1;case"MM":return F.s(B+1,2,"0");case"MMM":return We($.monthsShort,B,je,3);case"MMMM":return We(je,B);case"D":return Z.$D;case"DD":return F.s(Z.$D,2,"0");case"d":return String(Z.$W);case"dd":return We($.weekdaysMin,Z.$W,be,2);case"ddd":return We($.weekdaysShort,Z.$W,be,3);case"dddd":return be[Z.$W];case"H":return String(pe);case"HH":return F.s(pe,2,"0");case"h":return Me(1);case"hh":return Me(2);case"a":return Qe(pe,oe,!0);case"A":return Qe(pe,oe,!1);case"m":return String(oe);case"mm":return F.s(oe,2,"0");case"s":return String(Z.$s);case"ss":return F.s(Z.$s,2,"0");case"SSS":return F.s(Z.$ms,3,"0");case"Z":return I}return null}(Ae)||I.replace(":","")})},K.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},K.diff=function(Q,Z,$){var re,I=this,pe=F.p(Z),oe=S(Q),B=(oe.utcOffset()-this.utcOffset())*r,be=this-oe,je=function(){return F.m(I,oe)};switch(pe){case d:re=je()/12;break;case c:re=je();break;case h:re=je()/3;break;case f:re=(be-B)/6048e5;break;case u:re=(be-B)/864e5;break;case l:re=be/i;break;case o:re=be/r;break;case a:re=be/n;break;default:re=be}return $?re:F.a(re)},K.daysInMonth=function(){return this.endOf(c).$D},K.$locale=function(){return x[this.$L]},K.locale=function(Q,Z){if(!Q)return this.$L;var $=this.clone(),re=P(Q,Z,!0);return re&&($.$L=re),$},K.clone=function(){return F.w(this.$d,this)},K.toDate=function(){return new Date(this.valueOf())},K.toJSON=function(){return this.isValid()?this.toISOString():null},K.toISOString=function(){return this.$d.toISOString()},K.toString=function(){return this.$d.toUTCString()},te}(),ie=z.prototype;return S.prototype=ie,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",u],["$M",c],["$y",d],["$D",v]].forEach(function(te){ie[te[1]]=function(K){return this.$g(K,te[0],te[1])}}),S.extend=function(te,K){return te.$i||(te(K,z,S),te.$i=!0),S},S.locale=P,S.isDayjs=A,S.unix=function(te){return S(1e3*te)},S.en=x[_],S.Ls=x,S.p={},S})})(PE);var wO=PE.exports;const xO=Gr(wO),Hu=()=>xO().format("HH:mm:ss"),kt={log:(...t)=>{console.log(`[${Hu()}] [LOG] `,...t)},info:(...t)=>{console.log(`[${Hu()}] [INFO] `,...t)},error:(...t)=>{console.error(`[${Hu()}] [ERROR] `,...t)},warn:(...t)=>{console.warn(`[${Hu()}] [WARN] `,...t)}},Sm={LONG_PRESS_DURATION:500,REGULAR_TAP_THRESHOLD:300,SELECTION_DELAY:50,CLICK_DELAY:10},Vu={BACKGROUND:"rgba(0, 123, 255, 0.3)",TEXT_INHERIT:"inherit"},Cv={MAX_EPUB_SIZE:100*1024*1024,EPUB_EXTENSIONS:[".epub"],EPUB_MIME_TYPES:["application/epub+zip","application/x-zip-compressed","application/zip"]},Cm={THEME:"light",FONT_SIZE:"medium",CONFIG_VERSION:1},As={WIDTH:"100%",HEIGHT:"100%",SPREAD:"always",MIN_SPREAD_WIDTH:800,MANAGER:"continuous",FLOW:"paginated",LOCATION_CHAR_COUNT:1600},Tf=Cv.MAX_EPUB_SIZE,Am=Cv.EPUB_EXTENSIONS,bO=Cv.EPUB_MIME_TYPES,_O=t=>{const e=Am.some(i=>t.name.toLowerCase().endsWith(i)),n=t.size>0&&t.size<=Tf,r=bO.includes(t.type)||Am.some(i=>t.name.toLowerCase().endsWith(i));return e&&n&&(r||e)},Av=t=>t?Am.some(n=>t.name.toLowerCase().endsWith(n))?t.size===0?"File is empty":t.size>Tf?`File size exceeds ${Dv(Tf)} limit`:null:"Only EPUB files are supported":"No file provided",Dv=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]},FE=async(t,e)=>{try{kt.log(`Starting ${e}`);const n=await t();return kt.log(`Successfully completed ${e}`),{success:!0,data:n}}catch(n){const r=n instanceof Error?n.message:String(n);return kt.error(`Failed to ${e}:`,n),{success:!1,error:r}}},Mw=async(t,e)=>{try{return await t()}catch(n){return kt.error(`Failed to get file handle for ${e}:`,n),null}},EO=async(t,e)=>{try{return await t()}catch(n){return kt.error(`Failed to get directory handle for ${e}:`,n),null}};async function kO(t){kt.log("Starting EPUB metadata extraction for:",t.name);const e=await FE(async()=>{const n=Av(t);if(n)throw new Error(n);const r=await t.arrayBuffer(),i=ws(r),s=await i.loaded.metadata,a=await AO(i),o=await i.loaded.spine;return kt.log("Extracted metadata:",{title:s.title,author:s.creator,coverPath:a,chapterCount:o==null?void 0:o.length}),{title:s.title||t.name.replace(/\.epub$/i,""),author:CO(s.creator),description:s.description,publisher:s.publisher,publishedDate:s.pubdate,language:s.language,isbn:SO(s.identifier),chapterCount:o.length||0,coverPath:a}},"extract EPUB metadata");return e.success&&e.data?e.data:(kt.error("Failed to extract EPUB metadata:",e.error),{title:t.name.replace(/\.epub$/i,""),author:"Unknown Author",chapterCount:0})}function SO(t){return t?(Array.isArray(t)?t:[t]).find(r=>r&&r.toLowerCase().includes("isbn")):void 0}function CO(t){return t?Array.isArray(t)?t.join(", "):t:"Unknown Author"}async function AO(t){try{kt.log("Starting cover image extraction...");const e=t.loaded.cover;return e?(kt.log("Found cover via book.cover:",e),e):void 0}catch(e){kt.error("Error extracting cover image:",e);return}}async function DO(t){try{const e=await ME(t);if(!e){kt.warn("No cover blob found, skipping format extraction");return}const n=e.type.split("/")[1];return kt.log("Extracted cover image format:",n),n}catch(e){kt.error("Error extracting cover format:",e);return}}async function ME(t){try{const e=await t.coverUrl();if(!e){kt.warn("No cover URL found, skipping blob extraction");return}kt.log("Extracting cover blob from URL:",e);const n=await fetch(e);if(!n.ok){kt.warn("Failed to fetch cover image:",n.status);return}const r=await n.blob();if(!r||r.size===0){kt.warn("Empty or invalid cover blob");return}return kt.log("Successfully extracted cover blob:",{size:r.size,type:r.type}),r}catch(e){kt.error("Error extracting cover blob:",e);return}}const TO=async t=>{const e=await LO(t),n=new Ad(e);return console.log("Created book instance:",n),n},NO=[{type:"iframe",name:"Eudic",shortName:"Eud",url:"https://dict.eudic.net/dicts/MiniDictSearch2?word={{words}}&context={{context}}"}];function Tv(){return"storage"in navigator&&"getDirectory"in navigator.storage}async function BE(){if(!Tv())throw new Error("OPFS is not supported in this browser");try{const t=await navigator.storage.getDirectory(),e=await t.getDirectoryHandle("books",{create:!0});return Nf={root:t,booksDir:e},await RO(),Nf}catch(t){throw new Error(`Failed to initialize OPFS: ${t}`)}}const uo=async()=>Nf||await BE();async function RO(){const t=await uo();try{await t.root.getFileHandle("config.json")}catch{const e={version:Cm.CONFIG_VERSION,books:[],settings:{contextMenu:{api:"",key:"",items:NO}},lastSync:Date.now()};await ro(e)}}async function IO(t){const e=await uo(),n=Av(t);if(n)throw new Error(n);const r=vR(),i=t.name,s=r,a=`books/${s}/${i}`;return(await FE(async()=>{const l=await EO(()=>e.booksDir.getDirectoryHandle(s,{create:!0}),s);if(!l)throw new Error("Failed to create book directory");const u=await Mw(()=>l.getFileHandle(i,{create:!0}),i);if(!u)throw new Error("Failed to create book file");const f=await u.createWritable();await f.write(await t.arrayBuffer()),await f.close();const c=await t.arrayBuffer(),h=ws(c),d=await kO(t);let v="";try{const p=await ME(h),m=await DO(h)||"jpg";if(p){const y=`cover.${m}`,k=await Mw(()=>l.getFileHandle(y,{create:!0}),y);if(k){const _=await k.createWritable();await _.write(await p.arrayBuffer()),await _.close(),v=`books/${s}/${y}`}}}catch(p){console.warn("Failed to extract cover image:",p)}const w={id:r,name:d.title||t.name.replace(/\.epub$/i,""),author:d.author||"Unknown Author",path:a,createdAt:Date.now(),size:Dv(t.size),chapterCount:d.chapterCount||0,coverPath:v,metaData:d},g=await fu();return g.books.push(w),g.lastSync=Date.now(),await ro(g),w},"upload book")).data}async function ro(t){const e=await uo();try{const r=await(await e.root.getFileHandle("config.json",{create:!0})).createWritable();await r.write(JSON.stringify(t,null,2)),await r.close()}catch(n){throw new Error(`Failed to save config: ${n}`)}}async function OO(t){const e=await uo();try{try{await e.booksDir.removeEntry(t,{recursive:!0})}catch{}const n=await fu();n.books=n.books.filter(r=>r.id!==t),n.lastSync=Date.now(),await ro(n)}catch(n){throw new Error(`Failed to delete book: ${n}`)}}async function LO(t){const e=await uo();try{const n=await e.booksDir.getDirectoryHandle(t);for await(const[r,i]of n.entries())if(r.toLowerCase().endsWith(".epub"))return await(await i.getFile()).arrayBuffer();throw new Error("EPUB file not found in book directory")}catch(n){throw new Error(`Failed to get book file: ${n}`)}}const PO=async t=>{try{const e=await navigator.storage.getDirectory(),n=t.split("/");let r=e;for(let l=0;l<n.length-1;l++)r=await r.getDirectoryHandle(n[l]);const i=n[n.length-1],a=await(await r.getFileHandle(i)).getFile(),o=new FileReader;return new Promise(l=>{o.readAsDataURL(a),o.onloadend=()=>{l(o.result)}})}catch(e){console.error("Error fetching cover image:",e);return}};async function jE(){return(await fu()).books}async function Bw(t){const e=await fu();e.settings||(e.settings={contextMenu:{api:"",key:"",items:[]}}),e.settings.contextMenu={api:t.api||"",key:t.key||"",items:t.items||[]},e.lastSync=Date.now(),await ro(e)}async function zE(){var n;const e=(n=(await fu()).settings)==null?void 0:n.contextMenu;return{api:(e==null?void 0:e.api)||"",key:(e==null?void 0:e.key)||"",items:(e==null?void 0:e.items)||[]}}let Nf=null;async function fu(){const t=await uo();try{const r=await(await(await t.root.getFileHandle("config.json")).getFile()).text();if(!r.trim())throw new Error("Config file is empty");try{return JSON.parse(r)}catch{console.warn("Corrupted config.json detected, recreating...");const i={version:Cm.CONFIG_VERSION,books:[],settings:{contextMenu:{api:"",key:"",items:[]}},lastSync:Date.now()};return await ro(i),i}}catch(e){if(e instanceof Error&&e.message.includes("not found")){const n={version:Cm.CONFIG_VERSION,books:[],settings:{contextMenu:{api:"",key:"",items:[]}},lastSync:Date.now()};return await ro(n),n}throw new Error(`Failed to load config: ${e}`)}}const FO=t=>{if(!t||!t.name.toLowerCase().endsWith(".epub"))throw new Error("Invalid EPUB file - must have .epub extension");if(t.size===0)throw new Error("Invalid EPUB file - file is empty");if(t.size>100*1024*1024)throw new Error("Invalid EPUB file - file size exceeds 100MB")},Ec=wd("bookshelf/initialize",async(t,{rejectWithValue:e})=>{try{if(!Tv())throw new Error("OPFS is not supported in this browser");return await BE(),await jE()}catch(n){return e(n instanceof Error?n.message:"Unknown error")}}),kc=wd("bookshelf/uploadBook",async(t,{rejectWithValue:e})=>{try{return FO(t),await IO(t)}catch(n){return e(n instanceof Error?n.message:"Upload failed")}}),Sc=wd("bookshelf/deleteBook",async(t,{rejectWithValue:e})=>{try{if(!t)throw new Error("Invalid book ID");return await OO(t),t}catch(n){return e(n instanceof Error?n.message:"Delete failed")}}),Cc=wd("bookshelf/loadBooks",async(t,{rejectWithValue:e})=>{try{return await jE()}catch(n){return e(n instanceof Error?n.message:"Load failed")}}),MO={books:[],isLoading:!1,error:null,uploadProgress:null},UE=oR({name:"bookshelf",initialState:MO,reducers:{setUploadProgress:(t,e)=>{t.uploadProgress=e.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ec.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ec.fulfilled,(e,n)=>{e.isLoading=!1,e.books=n.payload}).addCase(Ec.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(kc.pending,e=>{e.isLoading=!0,e.error=null}).addCase(kc.fulfilled,(e,n)=>{e.isLoading=!1,e.books.push(n.payload)}).addCase(kc.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Sc.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Sc.fulfilled,(e,n)=>{e.isLoading=!1,e.books=e.books.filter(r=>r.id!==n.payload)}).addCase(Sc.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Cc.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Cc.fulfilled,(e,n)=>{e.isLoading=!1,e.books=n.payload}).addCase(Cc.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload})}}),{setUploadProgress:BU,clearError:BO}=UE.actions,jO=UE.reducer,zO=qN({reducer:{bookshelf:jO}}),$E=()=>wN(),UO=t=>lN(t);/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wt(){return Wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wt.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const jw="popstate";function $O(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Hl("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ys(i)}return HO(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function io(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WO(){return Math.random().toString(36).substr(2,8)}function zw(t,e){return{usr:t.state,key:t.key,idx:e}}function Hl(t,e,n,r){return n===void 0&&(n=null),Wt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xs(e):e,{state:n,key:e&&e.key||r||WO()})}function Ys(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=an.Pop,l=null,u=f();u==null&&(u=0,a.replaceState(Wt({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function c(){o=an.Pop;let g=f(),p=g==null?null:g-u;u=g,l&&l({action:o,location:w.location,delta:p})}function h(g,p){o=an.Push;let m=Hl(w.location,g,p);u=f()+1;let y=zw(m,u),k=w.createHref(m);try{a.pushState(y,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(k)}s&&l&&l({action:o,location:w.location,delta:1})}function d(g,p){o=an.Replace;let m=Hl(w.location,g,p);u=f();let y=zw(m,u),k=w.createHref(m);a.replaceState(y,"",k),s&&l&&l({action:o,location:w.location,delta:0})}function v(g){let p=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof g=="string"?g:Ys(g);return m=m.replace(/ $/,"%20"),ft(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let w={get action(){return o},get location(){return t(i,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jw,c),l=g,()=>{i.removeEventListener(jw,c),l=null}},createHref(g){return e(i,g)},createURL:v,encodeLocation(g){let p=v(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:d,go(g){return a.go(g)}};return w}var Nt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nt||(Nt={}));const VO=new Set(["lazy","caseSensitive","path","id","index","children"]);function qO(t){return t.index===!0}function Rf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let a=[...n,String(s)],o=typeof i.id=="string"?i.id:a.join("-");if(ft(i.index!==!0||!i.children,"Cannot specify children on an index route"),ft(!r[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),qO(i)){let l=Wt({},i,e(i),{id:o});return r[o]=l,l}else{let l=Wt({},i,e(i),{id:o,children:void 0});return r[o]=l,i.children&&(l.children=Rf(i.children,e,a,r)),l}})}function Ts(t,e,n){return n===void 0&&(n="/"),Ac(t,e,n,!1)}function Ac(t,e,n,r){let i=typeof e=="string"?xs(e):e,s=co(i.pathname||"/",n);if(s==null)return null;let a=WE(t);GO(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=sL(s);o=rL(a[l],u,r)}return o}function XO(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function WE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Si([r,l.relativePath]),f=n.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),WE(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:tL(u,s.index),routesMeta:f})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of HE(s.path))i(s,a,l)}),e}function HE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=HE(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function GO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YO=/^:[\w-]+$/,KO=3,ZO=2,QO=1,JO=10,eL=-2,Uw=t=>t==="*";function tL(t,e){let n=t.split("/"),r=n.length;return n.some(Uw)&&(r+=eL),e&&(r+=ZO),n.filter(i=>!Uw(i)).reduce((i,s)=>i+(YO.test(s)?KO:s===""?QO:JO),r)}function nL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rL(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",c=$w({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),h=l.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=$w({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:Si([s,c.pathname]),pathnameBase:lL(Si([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=Si([s,c.pathnameBase]))}return a}function $w(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,f,c)=>{let{paramName:h,isOptional:d}=f;if(h==="*"){let w=o[c]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=o[c];return d&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function iL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),io(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return io(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xs(t):t;return{pathname:n?n.startsWith("/")?n:oL(n,e):e,search:uL(r),hash:cL(i)}}function oL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nv(t,e){let n=VE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xs(t):(i=Wt({},t),ft(!i.pathname||!i.pathname.includes("?"),zh("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),zh("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),zh("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let c=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),c-=1;i.pathname=h.join("/")}o=c>=0?e[c]:"/"}let l=aL(i,o),u=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const Si=t=>t.join("/").replace(/\/\/+/g,"/"),lL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class If{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Dd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qE=["post","put","patch","delete"],fL=new Set(qE),dL=["get",...qE],hL=new Set(dL),pL=new Set([301,302,303,307,308]),mL=new Set([307,308]),Uh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gL={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Io={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vL=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),XE="remix-router-transitions";function yL(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ft(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let T=t.detectErrorBoundary;i=j=>({hasErrorBoundary:T(j)})}else i=vL;let s={},a=Rf(t.routes,i,void 0,s),o,l=t.basename||"/",u=t.dataStrategy||_L,f=t.patchRoutesOnNavigation,c=Wt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,d=new Set,v=null,w=null,g=null,p=t.hydrationData!=null,m=Ts(a,t.history.location,l),y=null;if(m==null&&!f){let T=qn(404,{pathname:t.history.location.pathname}),{matches:j,route:U}=Jw(a);m=j,y={[U.id]:T}}m&&!t.hydrationData&&J(m,a,t.history.location.pathname).active&&(m=null);let k;if(m)if(m.some(T=>T.route.lazy))k=!1;else if(!m.some(T=>T.route.loader))k=!0;else if(c.v7_partialHydration){let T=t.hydrationData?t.hydrationData.loaderData:null,j=t.hydrationData?t.hydrationData.errors:null;if(j){let U=m.findIndex(G=>j[G.route.id]!==void 0);k=m.slice(0,U+1).every(G=>!Tm(G.route,T,j))}else k=m.every(U=>!Tm(U.route,T,j))}else k=t.hydrationData!=null;else if(k=!1,m=[],c.v7_partialHydration){let T=J(null,a,t.history.location.pathname);T.active&&T.matches&&(m=T.matches)}let _,x={historyAction:t.history.action,location:t.history.location,matches:m,initialized:k,navigation:Uh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},C=an.Pop,A=!1,P,S=!1,F=new Map,z=null,ie=!1,te=!1,K=[],Q=new Set,Z=new Map,$=0,re=-1,I=new Map,pe=new Set,oe=new Map,B=new Map,be=new Set,je=new Map,Te=new Map,We;function Me(){if(h=t.history.listen(T=>{let{action:j,location:U,delta:G}=T;if(We){We(),We=void 0;return}io(Te.size===0||G!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=Ne({currentLocation:x.location,nextLocation:U,historyAction:j});if(he&&G!=null){let Re=new Promise(Ce=>{We=Ce});t.history.go(G*-1),de(he,{state:"blocked",location:U,proceed(){de(he,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),Re.then(()=>t.history.go(G))},reset(){let Ce=new Map(x.blockers);Ce.set(he,Io),Pe({blockers:Ce})}});return}return it(j,U)}),n){FL(e,F);let T=()=>ML(e,F);e.addEventListener("pagehide",T),z=()=>e.removeEventListener("pagehide",T)}return x.initialized||it(an.Pop,x.location,{initialHydration:!0}),_}function Qe(){h&&h(),z&&z(),d.clear(),P&&P.abort(),x.fetchers.forEach((T,j)=>Xe(j)),x.blockers.forEach((T,j)=>ue(j))}function Ae(T){return d.add(T),()=>d.delete(T)}function Pe(T,j){j===void 0&&(j={}),x=Wt({},x,T);let U=[],G=[];c.v7_fetcherPersist&&x.fetchers.forEach((he,Re)=>{he.state==="idle"&&(be.has(Re)?G.push(Re):U.push(Re))}),[...d].forEach(he=>he(x,{deletedFetchers:G,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),c.v7_fetcherPersist&&(U.forEach(he=>x.fetchers.delete(he)),G.forEach(he=>Xe(he)))}function qe(T,j,U){var G,he;let{flushSync:Re}=U===void 0?{}:U,Ce=x.actionData!=null&&x.navigation.formMethod!=null&&jr(x.navigation.formMethod)&&x.navigation.state==="loading"&&((G=T.state)==null?void 0:G._isRedirect)!==!0,me;j.actionData?Object.keys(j.actionData).length>0?me=j.actionData:me=null:Ce?me=x.actionData:me=null;let _e=j.loaderData?Zw(x.loaderData,j.loaderData,j.matches||[],j.errors):x.loaderData,Ee=x.blockers;Ee.size>0&&(Ee=new Map(Ee),Ee.forEach((nt,rt)=>Ee.set(rt,Io)));let Ie=A===!0||x.navigation.formMethod!=null&&jr(x.navigation.formMethod)&&((he=T.state)==null?void 0:he._isRedirect)!==!0;o&&(a=o,o=void 0),ie||C===an.Pop||(C===an.Push?t.history.push(T,T.state):C===an.Replace&&t.history.replace(T,T.state));let Je;if(C===an.Pop){let nt=F.get(x.location.pathname);nt&&nt.has(T.pathname)?Je={currentLocation:x.location,nextLocation:T}:F.has(T.pathname)&&(Je={currentLocation:T,nextLocation:x.location})}else if(S){let nt=F.get(x.location.pathname);nt?nt.add(T.pathname):(nt=new Set([T.pathname]),F.set(x.location.pathname,nt)),Je={currentLocation:x.location,nextLocation:T}}Pe(Wt({},j,{actionData:me,loaderData:_e,historyAction:C,location:T,initialized:!0,navigation:Uh,revalidation:"idle",restoreScrollPosition:b(T,j.matches||x.matches),preventScrollReset:Ie,blockers:Ee}),{viewTransitionOpts:Je,flushSync:Re===!0}),C=an.Pop,A=!1,S=!1,ie=!1,te=!1,K=[]}async function Ge(T,j){if(typeof T=="number"){t.history.go(T);return}let U=Dm(x.location,x.matches,l,c.v7_prependBasename,T,c.v7_relativeSplatPath,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:G,submission:he,error:Re}=Ww(c.v7_normalizeFormMethod,!1,U,j),Ce=x.location,me=Hl(x.location,G,j&&j.state);me=Wt({},me,t.history.encodeLocation(me));let _e=j&&j.replace!=null?j.replace:void 0,Ee=an.Push;_e===!0?Ee=an.Replace:_e===!1||he!=null&&jr(he.formMethod)&&he.formAction===x.location.pathname+x.location.search&&(Ee=an.Replace);let Ie=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,Je=(j&&j.flushSync)===!0,nt=Ne({currentLocation:Ce,nextLocation:me,historyAction:Ee});if(nt){de(nt,{state:"blocked",location:me,proceed(){de(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),Ge(T,j)},reset(){let rt=new Map(x.blockers);rt.set(nt,Io),Pe({blockers:rt})}});return}return await it(Ee,me,{submission:he,pendingError:Re,preventScrollReset:Ie,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:Je})}function xt(){if(se(),Pe({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){it(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}it(C||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:S===!0})}}async function it(T,j,U){P&&P.abort(),P=null,C=T,ie=(U&&U.startUninterruptedRevalidation)===!0,Le(x.location,x.matches),A=(U&&U.preventScrollReset)===!0,S=(U&&U.enableViewTransition)===!0;let G=o||a,he=U&&U.overrideNavigation,Re=Ts(G,j,l),Ce=(U&&U.flushSync)===!0,me=J(Re,G,j.pathname);if(me.active&&me.matches&&(Re=me.matches),!Re){let{error:et,notFoundMatches:Ve,route:vt}=V(j.pathname);qe(j,{matches:Ve,loaderData:{},errors:{[vt.id]:et}},{flushSync:Ce});return}if(x.initialized&&!te&&DL(x.location,j)&&!(U&&U.submission&&jr(U.submission.formMethod))){qe(j,{matches:Re},{flushSync:Ce});return}P=new AbortController;let _e=ca(t.history,j,P.signal,U&&U.submission),Ee;if(U&&U.pendingError)Ee=[Ns(Re).route.id,{type:Nt.error,error:U.pendingError}];else if(U&&U.submission&&jr(U.submission.formMethod)){let et=await Lt(_e,j,U.submission,Re,me.active,{replace:U.replace,flushSync:Ce});if(et.shortCircuited)return;if(et.pendingActionResult){let[Ve,vt]=et.pendingActionResult;if(cr(vt)&&Dd(vt.error)&&vt.error.status===404){P=null,qe(j,{matches:et.matches,loaderData:{},errors:{[Ve]:vt.error}});return}}Re=et.matches||Re,Ee=et.pendingActionResult,he=$h(j,U.submission),Ce=!1,me.active=!1,_e=ca(t.history,_e.url,_e.signal)}let{shortCircuited:Ie,matches:Je,loaderData:nt,errors:rt}=await st(_e,j,Re,me.active,he,U&&U.submission,U&&U.fetcherSubmission,U&&U.replace,U&&U.initialHydration===!0,Ce,Ee);Ie||(P=null,qe(j,Wt({matches:Je||Re},Qw(Ee),{loaderData:nt,errors:rt})))}async function Lt(T,j,U,G,he,Re){Re===void 0&&(Re={}),se();let Ce=LL(j,U);if(Pe({navigation:Ce},{flushSync:Re.flushSync===!0}),he){let Ee=await ee(G,j.pathname,T.signal);if(Ee.type==="aborted")return{shortCircuited:!0};if(Ee.type==="error"){let Ie=Ns(Ee.partialMatches).route.id;return{matches:Ee.partialMatches,pendingActionResult:[Ie,{type:Nt.error,error:Ee.error}]}}else if(Ee.matches)G=Ee.matches;else{let{notFoundMatches:Ie,error:Je,route:nt}=V(j.pathname);return{matches:Ie,pendingActionResult:[nt.id,{type:Nt.error,error:Je}]}}}let me,_e=Wo(G,j);if(!_e.route.action&&!_e.route.lazy)me={type:Nt.error,error:qn(405,{method:T.method,pathname:j.pathname,routeId:_e.route.id})};else if(me=(await Ft("action",x,T,[_e],G,null))[_e.route.id],T.signal.aborted)return{shortCircuited:!0};if(Fs(me)){let Ee;return Re&&Re.replace!=null?Ee=Re.replace:Ee=Gw(me.response.headers.get("Location"),new URL(T.url),l)===x.location.pathname+x.location.search,await $e(T,me,!0,{submission:U,replace:Ee}),{shortCircuited:!0}}if(ns(me))throw qn(400,{type:"defer-action"});if(cr(me)){let Ee=Ns(G,_e.route.id);return(Re&&Re.replace)!==!0&&(C=an.Push),{matches:G,pendingActionResult:[Ee.route.id,me]}}return{matches:G,pendingActionResult:[_e.route.id,me]}}async function st(T,j,U,G,he,Re,Ce,me,_e,Ee,Ie){let Je=he||$h(j,Re),nt=Re||Ce||tx(Je),rt=!ie&&(!c.v7_partialHydration||!_e);if(G){if(rt){let $t=Rt(Ie);Pe(Wt({navigation:Je},$t!==void 0?{actionData:$t}:{}),{flushSync:Ee})}let ct=await ee(U,j.pathname,T.signal);if(ct.type==="aborted")return{shortCircuited:!0};if(ct.type==="error"){let $t=Ns(ct.partialMatches).route.id;return{matches:ct.partialMatches,loaderData:{},errors:{[$t]:ct.error}}}else if(ct.matches)U=ct.matches;else{let{error:$t,notFoundMatches:Bi,route:mi}=V(j.pathname);return{matches:Bi,loaderData:{},errors:{[mi.id]:$t}}}}let et=o||a,[Ve,vt]=Vw(t.history,x,U,nt,j,c.v7_partialHydration&&_e===!0,c.v7_skipActionErrorRevalidation,te,K,Q,be,oe,pe,et,l,Ie);if(ae(ct=>!(U&&U.some($t=>$t.route.id===ct))||Ve&&Ve.some($t=>$t.route.id===ct)),re=++$,Ve.length===0&&vt.length===0){let ct=jt();return qe(j,Wt({matches:U,loaderData:{},errors:Ie&&cr(Ie[1])?{[Ie[0]]:Ie[1].error}:null},Qw(Ie),ct?{fetchers:new Map(x.fetchers)}:{}),{flushSync:Ee}),{shortCircuited:!0}}if(rt){let ct={};if(!G){ct.navigation=Je;let $t=Rt(Ie);$t!==void 0&&(ct.actionData=$t)}vt.length>0&&(ct.fetchers=tn(vt)),Pe(ct,{flushSync:Ee})}vt.forEach(ct=>{Et(ct.key),ct.controller&&Z.set(ct.key,ct.controller)});let un=()=>vt.forEach(ct=>Et(ct.key));P&&P.signal.addEventListener("abort",un);let{loaderResults:Yr,fetcherResults:Rr}=await Nn(x,U,Ve,vt,T);if(T.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",un),vt.forEach(ct=>Z.delete(ct.key));let ir=qu(Yr);if(ir)return await $e(T,ir.result,!0,{replace:me}),{shortCircuited:!0};if(ir=qu(Rr),ir)return pe.add(ir.key),await $e(T,ir.result,!0,{replace:me}),{shortCircuited:!0};let{loaderData:hi,errors:Mi}=Kw(x,U,Yr,Ie,vt,Rr,je);je.forEach((ct,$t)=>{ct.subscribe(Bi=>{(Bi||ct.done)&&je.delete($t)})}),c.v7_partialHydration&&_e&&x.errors&&(Mi=Wt({},x.errors,Mi));let Hn=jt(),ra=Zt(re),pi=Hn||ra||vt.length>0;return Wt({matches:U,loaderData:hi,errors:Mi},pi?{fetchers:new Map(x.fetchers)}:{})}function Rt(T){if(T&&!cr(T[1]))return{[T[0]]:T[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function tn(T){return T.forEach(j=>{let U=x.fetchers.get(j.key),G=Oo(void 0,U?U.data:void 0);x.fetchers.set(j.key,G)}),new Map(x.fetchers)}function St(T,j,U,G){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Et(T);let he=(G&&G.flushSync)===!0,Re=o||a,Ce=Dm(x.location,x.matches,l,c.v7_prependBasename,U,c.v7_relativeSplatPath,j,G==null?void 0:G.relative),me=Ts(Re,Ce,l),_e=J(me,Re,Ce);if(_e.active&&_e.matches&&(me=_e.matches),!me){Oe(T,j,qn(404,{pathname:Ce}),{flushSync:he});return}let{path:Ee,submission:Ie,error:Je}=Ww(c.v7_normalizeFormMethod,!0,Ce,G);if(Je){Oe(T,j,Je,{flushSync:he});return}let nt=Wo(me,Ee),rt=(G&&G.preventScrollReset)===!0;if(Ie&&jr(Ie.formMethod)){Pt(T,j,Ee,nt,me,_e.active,he,rt,Ie);return}oe.set(T,{routeId:j,path:Ee}),dt(T,j,Ee,nt,me,_e.active,he,rt,Ie)}async function Pt(T,j,U,G,he,Re,Ce,me,_e){se(),oe.delete(T);function Ee(Gt){if(!Gt.route.action&&!Gt.route.lazy){let ji=qn(405,{method:_e.formMethod,pathname:U,routeId:j});return Oe(T,j,ji,{flushSync:Ce}),!0}return!1}if(!Re&&Ee(G))return;let Ie=x.fetchers.get(T);fe(T,PL(_e,Ie),{flushSync:Ce});let Je=new AbortController,nt=ca(t.history,U,Je.signal,_e);if(Re){let Gt=await ee(he,U,nt.signal);if(Gt.type==="aborted")return;if(Gt.type==="error"){Oe(T,j,Gt.error,{flushSync:Ce});return}else if(Gt.matches){if(he=Gt.matches,G=Wo(he,U),Ee(G))return}else{Oe(T,j,qn(404,{pathname:U}),{flushSync:Ce});return}}Z.set(T,Je);let rt=$,Ve=(await Ft("action",x,nt,[G],he,T))[G.route.id];if(nt.signal.aborted){Z.get(T)===Je&&Z.delete(T);return}if(c.v7_fetcherPersist&&be.has(T)){if(Fs(Ve)||cr(Ve)){fe(T,Vi(void 0));return}}else{if(Fs(Ve))if(Z.delete(T),re>rt){fe(T,Vi(void 0));return}else return pe.add(T),fe(T,Oo(_e)),$e(nt,Ve,!1,{fetcherSubmission:_e,preventScrollReset:me});if(cr(Ve)){Oe(T,j,Ve.error);return}}if(ns(Ve))throw qn(400,{type:"defer-action"});let vt=x.navigation.location||x.location,un=ca(t.history,vt,Je.signal),Yr=o||a,Rr=x.navigation.state!=="idle"?Ts(Yr,x.navigation.location,l):x.matches;ft(Rr,"Didn't find any matches after fetcher action");let ir=++$;I.set(T,ir);let hi=Oo(_e,Ve.data);x.fetchers.set(T,hi);let[Mi,Hn]=Vw(t.history,x,Rr,_e,vt,!1,c.v7_skipActionErrorRevalidation,te,K,Q,be,oe,pe,Yr,l,[G.route.id,Ve]);Hn.filter(Gt=>Gt.key!==T).forEach(Gt=>{let ji=Gt.key,R=x.fetchers.get(ji),H=Oo(void 0,R?R.data:void 0);x.fetchers.set(ji,H),Et(ji),Gt.controller&&Z.set(ji,Gt.controller)}),Pe({fetchers:new Map(x.fetchers)});let ra=()=>Hn.forEach(Gt=>Et(Gt.key));Je.signal.addEventListener("abort",ra);let{loaderResults:pi,fetcherResults:ct}=await Nn(x,Rr,Mi,Hn,un);if(Je.signal.aborted)return;Je.signal.removeEventListener("abort",ra),I.delete(T),Z.delete(T),Hn.forEach(Gt=>Z.delete(Gt.key));let $t=qu(pi);if($t)return $e(un,$t.result,!1,{preventScrollReset:me});if($t=qu(ct),$t)return pe.add($t.key),$e(un,$t.result,!1,{preventScrollReset:me});let{loaderData:Bi,errors:mi}=Kw(x,Rr,pi,void 0,Hn,ct,je);if(x.fetchers.has(T)){let Gt=Vi(Ve.data);x.fetchers.set(T,Gt)}Zt(ir),x.navigation.state==="loading"&&ir>re?(ft(C,"Expected pending action"),P&&P.abort(),qe(x.navigation.location,{matches:Rr,loaderData:Bi,errors:mi,fetchers:new Map(x.fetchers)})):(Pe({errors:mi,loaderData:Zw(x.loaderData,Bi,Rr,mi),fetchers:new Map(x.fetchers)}),te=!1)}async function dt(T,j,U,G,he,Re,Ce,me,_e){let Ee=x.fetchers.get(T);fe(T,Oo(_e,Ee?Ee.data:void 0),{flushSync:Ce});let Ie=new AbortController,Je=ca(t.history,U,Ie.signal);if(Re){let Ve=await ee(he,U,Je.signal);if(Ve.type==="aborted")return;if(Ve.type==="error"){Oe(T,j,Ve.error,{flushSync:Ce});return}else if(Ve.matches)he=Ve.matches,G=Wo(he,U);else{Oe(T,j,qn(404,{pathname:U}),{flushSync:Ce});return}}Z.set(T,Ie);let nt=$,et=(await Ft("loader",x,Je,[G],he,T))[G.route.id];if(ns(et)&&(et=await Ov(et,Je.signal,!0)||et),Z.get(T)===Ie&&Z.delete(T),!Je.signal.aborted){if(be.has(T)){fe(T,Vi(void 0));return}if(Fs(et))if(re>nt){fe(T,Vi(void 0));return}else{pe.add(T),await $e(Je,et,!1,{preventScrollReset:me});return}if(cr(et)){Oe(T,j,et.error);return}ft(!ns(et),"Unhandled fetcher deferred data"),fe(T,Vi(et.data))}}async function $e(T,j,U,G){let{submission:he,fetcherSubmission:Re,preventScrollReset:Ce,replace:me}=G===void 0?{}:G;j.response.headers.has("X-Remix-Revalidate")&&(te=!0);let _e=j.response.headers.get("Location");ft(_e,"Expected a Location header on the redirect Response"),_e=Gw(_e,new URL(T.url),l);let Ee=Hl(x.location,_e,{_isRedirect:!0});if(n){let Ve=!1;if(j.response.headers.has("X-Remix-Reload-Document"))Ve=!0;else if(Iv.test(_e)){const vt=t.history.createURL(_e);Ve=vt.origin!==e.location.origin||co(vt.pathname,l)==null}if(Ve){me?e.location.replace(_e):e.location.assign(_e);return}}P=null;let Ie=me===!0||j.response.headers.has("X-Remix-Replace")?an.Replace:an.Push,{formMethod:Je,formAction:nt,formEncType:rt}=x.navigation;!he&&!Re&&Je&&nt&&rt&&(he=tx(x.navigation));let et=he||Re;if(mL.has(j.response.status)&&et&&jr(et.formMethod))await it(Ie,Ee,{submission:Wt({},et,{formAction:_e}),preventScrollReset:Ce||A,enableViewTransition:U?S:void 0});else{let Ve=$h(Ee,he);await it(Ie,Ee,{overrideNavigation:Ve,fetcherSubmission:Re,preventScrollReset:Ce||A,enableViewTransition:U?S:void 0})}}async function Ft(T,j,U,G,he,Re){let Ce,me={};try{Ce=await EL(u,T,j,U,G,he,Re,s,i)}catch(_e){return G.forEach(Ee=>{me[Ee.route.id]={type:Nt.error,error:_e}}),me}for(let[_e,Ee]of Object.entries(Ce))if(TL(Ee)){let Ie=Ee.result;me[_e]={type:Nt.redirect,response:CL(Ie,U,_e,he,l,c.v7_relativeSplatPath)}}else me[_e]=await SL(Ee);return me}async function Nn(T,j,U,G,he){let Re=T.matches,Ce=Ft("loader",T,he,U,j,null),me=Promise.all(G.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.controller){let nt=(await Ft("loader",T,ca(t.history,Ie.path,Ie.controller.signal),[Ie.match],Ie.matches,Ie.key))[Ie.match.route.id];return{[Ie.key]:nt}}else return Promise.resolve({[Ie.key]:{type:Nt.error,error:qn(404,{pathname:Ie.path})}})})),_e=await Ce,Ee=(await me).reduce((Ie,Je)=>Object.assign(Ie,Je),{});return await Promise.all([IL(j,_e,he.signal,Re,T.loaderData),OL(j,Ee,G)]),{loaderResults:_e,fetcherResults:Ee}}function se(){te=!0,K.push(...ae()),oe.forEach((T,j)=>{Z.has(j)&&Q.add(j),Et(j)})}function fe(T,j,U){U===void 0&&(U={}),x.fetchers.set(T,j),Pe({fetchers:new Map(x.fetchers)},{flushSync:(U&&U.flushSync)===!0})}function Oe(T,j,U,G){G===void 0&&(G={});let he=Ns(x.matches,j);Xe(T),Pe({errors:{[he.route.id]:U},fetchers:new Map(x.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function ze(T){return c.v7_fetcherPersist&&(B.set(T,(B.get(T)||0)+1),be.has(T)&&be.delete(T)),x.fetchers.get(T)||gL}function Xe(T){let j=x.fetchers.get(T);Z.has(T)&&!(j&&j.state==="loading"&&I.has(T))&&Et(T),oe.delete(T),I.delete(T),pe.delete(T),be.delete(T),Q.delete(T),x.fetchers.delete(T)}function bt(T){if(c.v7_fetcherPersist){let j=(B.get(T)||0)-1;j<=0?(B.delete(T),be.add(T)):B.set(T,j)}else Xe(T);Pe({fetchers:new Map(x.fetchers)})}function Et(T){let j=Z.get(T);j&&(j.abort(),Z.delete(T))}function gt(T){for(let j of T){let U=ze(j),G=Vi(U.data);x.fetchers.set(j,G)}}function jt(){let T=[],j=!1;for(let U of pe){let G=x.fetchers.get(U);ft(G,"Expected fetcher: "+U),G.state==="loading"&&(pe.delete(U),T.push(U),j=!0)}return gt(T),j}function Zt(T){let j=[];for(let[U,G]of I)if(G<T){let he=x.fetchers.get(U);ft(he,"Expected fetcher: "+U),he.state==="loading"&&(Et(U),I.delete(U),j.push(U))}return gt(j),j.length>0}function L(T,j){let U=x.blockers.get(T)||Io;return Te.get(T)!==j&&Te.set(T,j),U}function ue(T){x.blockers.delete(T),Te.delete(T)}function de(T,j){let U=x.blockers.get(T)||Io;ft(U.state==="unblocked"&&j.state==="blocked"||U.state==="blocked"&&j.state==="blocked"||U.state==="blocked"&&j.state==="proceeding"||U.state==="blocked"&&j.state==="unblocked"||U.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+U.state+" -> "+j.state);let G=new Map(x.blockers);G.set(T,j),Pe({blockers:G})}function Ne(T){let{currentLocation:j,nextLocation:U,historyAction:G}=T;if(Te.size===0)return;Te.size>1&&io(!1,"A router only supports one blocker at a time");let he=Array.from(Te.entries()),[Re,Ce]=he[he.length-1],me=x.blockers.get(Re);if(!(me&&me.state==="proceeding")&&Ce({currentLocation:j,nextLocation:U,historyAction:G}))return Re}function V(T){let j=qn(404,{pathname:T}),U=o||a,{matches:G,route:he}=Jw(U);return ae(),{notFoundMatches:G,route:he,error:j}}function ae(T){let j=[];return je.forEach((U,G)=>{(!T||T(G))&&(U.cancel(),j.push(G),je.delete(G))}),j}function D(T,j,U){if(v=T,g=j,w=U||null,!p&&x.navigation===Uh){p=!0;let G=b(x.location,x.matches);G!=null&&Pe({restoreScrollPosition:G})}return()=>{v=null,g=null,w=null}}function le(T,j){return w&&w(T,j.map(G=>XO(G,x.loaderData)))||T.key}function Le(T,j){if(v&&g){let U=le(T,j);v[U]=g()}}function b(T,j){if(v){let U=le(T,j),G=v[U];if(typeof G=="number")return G}return null}function J(T,j,U){if(f)if(T){if(Object.keys(T[0].params).length>0)return{active:!0,matches:Ac(j,U,l,!0)}}else return{active:!0,matches:Ac(j,U,l,!0)||[]};return{active:!1,matches:null}}async function ee(T,j,U){if(!f)return{type:"success",matches:T};let G=T;for(;;){let he=o==null,Re=o||a,Ce=s;try{await f({path:j,matches:G,patch:(Ee,Ie)=>{U.aborted||Xw(Ee,Ie,Re,Ce,i)}})}catch(Ee){return{type:"error",error:Ee,partialMatches:G}}finally{he&&!U.aborted&&(a=[...a])}if(U.aborted)return{type:"aborted"};let me=Ts(Re,j,l);if(me)return{type:"success",matches:me};let _e=Ac(Re,j,l,!0);if(!_e||G.length===_e.length&&G.every((Ee,Ie)=>Ee.route.id===_e[Ie].route.id))return{type:"success",matches:null};G=_e}}function N(T){s={},o=Rf(T,i,void 0,s)}function W(T,j){let U=o==null;Xw(T,j,o||a,s,i),U&&(a=[...a],Pe({}))}return _={get basename(){return l},get future(){return c},get state(){return x},get routes(){return a},get window(){return e},initialize:Me,subscribe:Ae,enableScrollRestoration:D,navigate:Ge,fetch:St,revalidate:xt,createHref:T=>t.history.createHref(T),encodeLocation:T=>t.history.encodeLocation(T),getFetcher:ze,deleteFetcher:bt,dispose:Qe,getBlocker:L,deleteBlocker:ue,patchRoutes:W,_internalFetchControllers:Z,_internalActiveDeferreds:je,_internalSetRoutes:N},_}function wL(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Dm(t,e,n,r,i,s,a,o){let l,u;if(a){l=[];for(let c of e)if(l.push(c),c.route.id===a){u=c;break}}else l=e,u=e[e.length-1];let f=Rv(i||".",Nv(l,s),co(t.pathname,n)||t.pathname,o==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&u){let c=Lv(f.search);if(u.route.index&&!c)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&c){let h=new URLSearchParams(f.search),d=h.getAll("index");h.delete("index"),d.filter(w=>w).forEach(w=>h.append("index",w));let v=h.toString();f.search=v?"?"+v:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Si([n,f.pathname])),Ys(f)}function Ww(t,e,n,r){if(!r||!wL(r))return{path:n};if(r.formMethod&&!RL(r.formMethod))return{path:n,error:qn(405,{method:r.formMethod})};let i=()=>({path:n,error:qn(400,{type:"invalid-body"})}),s=r.formMethod||"get",a=t?s.toUpperCase():s.toLowerCase(),o=KE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!jr(a))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((d,v)=>{let[w,g]=v;return""+d+w+"="+g+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!jr(a))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:o,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}ft(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Nm(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Nm(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=Yw(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=Yw(l)}catch{return i()}let f={formMethod:a,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(jr(f.formMethod))return{path:n,submission:f};let c=xs(n);return e&&c.search&&Lv(c.search)&&l.append("index",""),c.search="?"+l,{path:Ys(c),submission:f}}function Hw(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Vw(t,e,n,r,i,s,a,o,l,u,f,c,h,d,v,w){let g=w?cr(w[1])?w[1].error:w[1].data:void 0,p=t.createURL(e.location),m=t.createURL(i),y=n;s&&e.errors?y=Hw(n,Object.keys(e.errors)[0],!0):w&&cr(w[1])&&(y=Hw(n,w[0]));let k=w?w[1].statusCode:void 0,_=a&&k&&k>=400,x=y.filter((A,P)=>{let{route:S}=A;if(S.lazy)return!0;if(S.loader==null)return!1;if(s)return Tm(S,e.loaderData,e.errors);if(xL(e.loaderData,e.matches[P],A)||l.some(ie=>ie===A.route.id))return!0;let F=e.matches[P],z=A;return qw(A,Wt({currentUrl:p,currentParams:F.params,nextUrl:m,nextParams:z.params},r,{actionResult:g,actionStatus:k,defaultShouldRevalidate:_?!1:o||p.pathname+p.search===m.pathname+m.search||p.search!==m.search||GE(F,z)}))}),C=[];return c.forEach((A,P)=>{if(s||!n.some(te=>te.route.id===A.routeId)||f.has(P))return;let S=Ts(d,A.path,v);if(!S){C.push({key:P,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let F=e.fetchers.get(P),z=Wo(S,A.path),ie=!1;h.has(P)?ie=!1:u.has(P)?(u.delete(P),ie=!0):F&&F.state!=="idle"&&F.data===void 0?ie=o:ie=qw(z,Wt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},r,{actionResult:g,actionStatus:k,defaultShouldRevalidate:_?!1:o})),ie&&C.push({key:P,routeId:A.routeId,path:A.path,matches:S,match:z,controller:new AbortController})}),[x,C]}function Tm(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function xL(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function GE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function qw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Xw(t,e,n,r,i){var s;let a;if(t){let u=r[t];ft(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),a=u.children}else a=n;let o=e.filter(u=>!a.some(f=>YE(u,f))),l=Rf(o,i,[t||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],r);a.push(...l)}function YE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>YE(n,s))}):!1}async function bL(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ft(i,"No route found in manifest");let s={};for(let a in r){let l=i[a]!==void 0&&a!=="hasErrorBoundary";io(!l,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!VO.has(a)&&(s[a]=r[a])}Object.assign(i,s),Object.assign(i,Wt({},e(i),{lazy:void 0}))}async function _L(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,a)=>Object.assign(i,{[n[a].route.id]:s}),{})}async function EL(t,e,n,r,i,s,a,o,l,u){let f=s.map(d=>d.route.lazy?bL(d.route,l,o):void 0),c=s.map((d,v)=>{let w=f[v],g=i.some(m=>m.route.id===d.route.id);return Wt({},d,{shouldLoad:g,resolve:async m=>(m&&r.method==="GET"&&(d.route.lazy||d.route.loader)&&(g=!0),g?kL(e,r,d,w,m,u):Promise.resolve({type:Nt.data,result:void 0}))})}),h=await t({matches:c,request:r,params:s[0].params,fetcherKey:a,context:u});try{await Promise.all(f)}catch{}return h}async function kL(t,e,n,r,i,s){let a,o,l=u=>{let f,c=new Promise((v,w)=>f=w);o=()=>f(),e.signal.addEventListener("abort",o);let h=v=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...v!==void 0?[v]:[]),d=(async()=>{try{return{type:"data",result:await(i?i(w=>h(w)):h())}}catch(v){return{type:"error",result:v}}})();return Promise.race([d,c])};try{let u=n.route[t];if(r)if(u){let f,[c]=await Promise.all([l(u).catch(h=>{f=h}),r]);if(f!==void 0)throw f;a=c}else if(await r,u=n.route[t],u)a=await l(u);else if(t==="action"){let f=new URL(e.url),c=f.pathname+f.search;throw qn(405,{method:e.method,pathname:c,routeId:n.route.id})}else return{type:Nt.data,result:void 0};else if(u)a=await l(u);else{let f=new URL(e.url),c=f.pathname+f.search;throw qn(404,{pathname:c})}ft(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Nt.error,result:u}}finally{o&&e.signal.removeEventListener("abort",o)}return a}async function SL(t){let{result:e,type:n}=t;if(ZE(e)){let u;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(f){return{type:Nt.error,error:f}}return n===Nt.error?{type:Nt.error,error:new If(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Nt.data,data:u,statusCode:e.status,headers:e.headers}}if(n===Nt.error){if(ex(e)){var r;if(e.data instanceof Error){var i;return{type:Nt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new If(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Nt.error,error:e,statusCode:Dd(e)?e.status:void 0}}if(NL(e)){var s,a;return{type:Nt.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((a=e.init)==null?void 0:a.headers)&&new Headers(e.init.headers)}}if(ex(e)){var o,l;return{type:Nt.data,data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Nt.data,data:e}}function CL(t,e,n,r,i,s){let a=t.headers.get("Location");if(ft(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Iv.test(a)){let o=r.slice(0,r.findIndex(l=>l.route.id===n)+1);a=Dm(new URL(e.url),o,i,!0,a,s),t.headers.set("Location",a)}return t}function Gw(t,e,n){if(Iv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=co(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ca(t,e,n,r){let i=t.createURL(KE(e)).toString(),s={signal:n};if(r&&jr(r.formMethod)){let{formMethod:a,formEncType:o}=r;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(r.json)):o==="text/plain"?s.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?s.body=Nm(r.formData):s.body=r.formData}return new Request(i,s)}function Nm(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Yw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function AL(t,e,n,r,i){let s={},a=null,o,l=!1,u={},f=n&&cr(n[1])?n[1].error:void 0;return t.forEach(c=>{if(!(c.route.id in e))return;let h=c.route.id,d=e[h];if(ft(!Fs(d),"Cannot handle redirect results in processLoaderData"),cr(d)){let v=d.error;f!==void 0&&(v=f,f=void 0),a=a||{};{let w=Ns(t,h);a[w.route.id]==null&&(a[w.route.id]=v)}s[h]=void 0,l||(l=!0,o=Dd(d.error)?d.error.status:500),d.headers&&(u[h]=d.headers)}else ns(d)?(r.set(h,d.deferredData),s[h]=d.deferredData.data,d.statusCode!=null&&d.statusCode!==200&&!l&&(o=d.statusCode),d.headers&&(u[h]=d.headers)):(s[h]=d.data,d.statusCode&&d.statusCode!==200&&!l&&(o=d.statusCode),d.headers&&(u[h]=d.headers))}),f!==void 0&&n&&(a={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function Kw(t,e,n,r,i,s,a){let{loaderData:o,errors:l}=AL(e,n,r,a);return i.forEach(u=>{let{key:f,match:c,controller:h}=u,d=s[f];if(ft(d,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(cr(d)){let v=Ns(t.matches,c==null?void 0:c.route.id);l&&l[v.route.id]||(l=Wt({},l,{[v.route.id]:d.error})),t.fetchers.delete(f)}else if(Fs(d))ft(!1,"Unhandled fetcher revalidation redirect");else if(ns(d))ft(!1,"Unhandled fetcher deferred data");else{let v=Vi(d.data);t.fetchers.set(f,v)}}),{loaderData:o,errors:l}}function Zw(t,e,n,r){let i=Wt({},e);for(let s of n){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function Qw(t){return t?cr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ns(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Jw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:a}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new If(t||500,o,new Error(l),!0)}function qu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Fs(i))return{key:r,result:i}}}function KE(t){let e=typeof t=="string"?xs(t):t;return Ys(Wt({},e,{hash:""}))}function DL(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function TL(t){return ZE(t.result)&&pL.has(t.result.status)}function ns(t){return t.type===Nt.deferred}function cr(t){return t.type===Nt.error}function Fs(t){return(t&&t.type)===Nt.redirect}function ex(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function NL(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function ZE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function RL(t){return hL.has(t.toLowerCase())}function jr(t){return fL.has(t.toLowerCase())}async function IL(t,e,n,r,i){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[o,l]=s[a],u=t.find(h=>(h==null?void 0:h.route.id)===o);if(!u)continue;let f=r.find(h=>h.route.id===u.route.id),c=f!=null&&!GE(f,u)&&(i&&i[u.route.id])!==void 0;ns(l)&&c&&await Ov(l,n,!1).then(h=>{h&&(e[o]=h)})}}async function OL(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:a}=n[r],o=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&ns(o)&&(ft(a,"Expected an AbortController for revalidating fetcher deferred result"),await Ov(o,a.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function Ov(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Nt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Nt.error,error:i}}return{type:Nt.data,data:t.deferredData.data}}}function Lv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Wo(t,e){let n=typeof e=="string"?xs(e).search:e.search;if(t[t.length-1].route.index&&Lv(n||""))return t[t.length-1];let r=VE(t);return r[r.length-1]}function tx(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function $h(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LL(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Oo(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PL(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Vi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function FL(t,e){try{let n=t.sessionStorage.getItem(XE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function ML(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(XE,JSON.stringify(n))}catch(r){io(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Of.apply(this,arguments)}const Td=O.createContext(null),QE=O.createContext(null),ea=O.createContext(null),Pv=O.createContext(null),bs=O.createContext({outlet:null,matches:[],isDataRoute:!1}),JE=O.createContext(null);function BL(t,e){let{relative:n}=e===void 0?{}:e;du()||ft(!1);let{basename:r,navigator:i}=O.useContext(ea),{hash:s,pathname:a,search:o}=nk(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Si([r,a])),i.createHref({pathname:l,search:o,hash:s})}function du(){return O.useContext(Pv)!=null}function Nd(){return du()||ft(!1),O.useContext(Pv).location}function ek(t){O.useContext(ea).static||O.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=O.useContext(bs);return t?KL():jL()}function jL(){du()||ft(!1);let t=O.useContext(Td),{basename:e,future:n,navigator:r}=O.useContext(ea),{matches:i}=O.useContext(bs),{pathname:s}=Nd(),a=JSON.stringify(Nv(i,n.v7_relativeSplatPath)),o=O.useRef(!1);return ek(()=>{o.current=!0}),O.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let c=Rv(u,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Si([e,c.pathname])),(f.replace?r.replace:r.push)(c,f.state,f)},[e,r,a,s,t])}function tk(){let{matches:t}=O.useContext(bs),e=t[t.length-1];return e?e.params:{}}function nk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(ea),{matches:i}=O.useContext(bs),{pathname:s}=Nd(),a=JSON.stringify(Nv(i,r.v7_relativeSplatPath));return O.useMemo(()=>Rv(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function zL(t,e,n,r){du()||ft(!1);let{navigator:i}=O.useContext(ea),{matches:s}=O.useContext(bs),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Nd(),f;f=u;let c=f.pathname||"/",h=c;if(l!=="/"){let w=l.replace(/^\//,"").split("/");h="/"+c.replace(/^\//,"").split("/").slice(w.length).join("/")}let d=Ts(t,{pathname:h});return VL(d&&d.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Si([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Si([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r)}function UL(){let t=YL(),e=Dd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const $L=O.createElement(UL,null);class WL extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(bs.Provider,{value:this.props.routeContext},O.createElement(JE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HL(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Td);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(bs.Provider,{value:e},r)}function VL(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let f=a.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);f>=0||ft(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let c=a[f];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=f),c.route.id){let{loaderData:h,errors:d}=n,v=c.route.loader&&h[c.route.id]===void 0&&(!d||d[c.route.id]===void 0);if(c.route.lazy||v){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,c,h)=>{let d,v=!1,w=null,g=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,w=c.route.errorElement||$L,l&&(u<0&&h===0?(ZL("route-fallback"),v=!0,g=null):u===h&&(v=!0,g=c.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,h+1)),m=()=>{let y;return d?y=w:v?y=g:c.route.Component?y=O.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=f,O.createElement(HL,{match:c,routeContext:{outlet:f,matches:p,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?O.createElement(WL,{location:n.location,revalidation:n.revalidation,component:w,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var rk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rk||{}),Lf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lf||{});function qL(t){let e=O.useContext(Td);return e||ft(!1),e}function XL(t){let e=O.useContext(QE);return e||ft(!1),e}function GL(t){let e=O.useContext(bs);return e||ft(!1),e}function ik(t){let e=GL(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function YL(){var t;let e=O.useContext(JE),n=XL(Lf.UseRouteError),r=ik(Lf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KL(){let{router:t}=qL(rk.UseNavigateStable),e=ik(Lf.UseNavigateStable),n=O.useRef(!1);return ek(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Of({fromRouteId:e},s)))},[t,e])}const nx={};function ZL(t,e,n){nx[t]||(nx[t]=!0)}function QL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=an.Pop,navigator:s,static:a=!1,future:o}=t;du()&&ft(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:a,future:Of({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=xs(r));let{pathname:f="/",search:c="",hash:h="",state:d=null,key:v="default"}=r,w=O.useMemo(()=>{let g=co(f,l);return g==null?null:{location:{pathname:g,search:c,hash:h,state:d,key:v},navigationType:i}},[l,f,c,h,d,v,i]);return w==null?null:O.createElement(ea.Provider,{value:u},O.createElement(Pv.Provider,{children:n,value:w}))}new Promise(()=>{});function JL(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vl.apply(this,arguments)}function e4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function t4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n4(t,e){return t.button===0&&(!e||e==="_self")&&!t4(t)}const r4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i4="6";try{window.__reactRouterVersion=i4}catch{}function s4(t,e){return yL({basename:void 0,future:Vl({},void 0,{v7_prependBasename:!0}),history:$O({window:void 0}),hydrationData:a4(),routes:t,mapRouteProperties:JL,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function a4(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Vl({},e,{errors:o4(e.errors)})),e}function o4(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new If(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const l4=O.createContext({isTransitioning:!1}),u4=O.createContext(new Map),c4="startTransition",rx=vp[c4],f4="flushSync",ix=GT[f4];function d4(t){rx?rx(t):t()}function Lo(t){ix?ix(t):t()}class h4{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function p4(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=O.useState(n.state),[a,o]=O.useState(),[l,u]=O.useState({isTransitioning:!1}),[f,c]=O.useState(),[h,d]=O.useState(),[v,w]=O.useState(),g=O.useRef(new Map),{v7_startTransition:p}=r||{},m=O.useCallback(A=>{p?d4(A):A()},[p]),y=O.useCallback((A,P)=>{let{deletedFetchers:S,flushSync:F,viewTransitionOpts:z}=P;S.forEach(te=>g.current.delete(te)),A.fetchers.forEach((te,K)=>{te.data!==void 0&&g.current.set(K,te.data)});let ie=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!z||ie){F?Lo(()=>s(A)):m(()=>s(A));return}if(F){Lo(()=>{h&&(f&&f.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let te=n.window.document.startViewTransition(()=>{Lo(()=>s(A))});te.finished.finally(()=>{Lo(()=>{c(void 0),d(void 0),o(void 0),u({isTransitioning:!1})})}),Lo(()=>d(te));return}h?(f&&f.resolve(),h.skipTransition(),w({state:A,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(o(A),u({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[n.window,h,f,g,m]);O.useLayoutEffect(()=>n.subscribe(y),[n,y]),O.useEffect(()=>{l.isTransitioning&&!l.flushSync&&c(new h4)},[l]),O.useEffect(()=>{if(f&&a&&n.window){let A=a,P=f.promise,S=n.window.document.startViewTransition(async()=>{m(()=>s(A)),await P});S.finished.finally(()=>{c(void 0),d(void 0),o(void 0),u({isTransitioning:!1})}),d(S)}},[m,a,f,n.window]),O.useEffect(()=>{f&&a&&i.location.key===a.location.key&&f.resolve()},[f,h,i.location,a]),O.useEffect(()=>{!l.isTransitioning&&v&&(o(v.state),u({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),w(void 0))},[l.isTransitioning,v]),O.useEffect(()=>{},[]);let k=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,P,S)=>n.navigate(A,{state:P,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(A,P,S)=>n.navigate(A,{replace:!0,state:P,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),_=n.basename||"/",x=O.useMemo(()=>({router:n,navigator:k,static:!1,basename:_}),[n,k,_]),C=O.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return O.createElement(O.Fragment,null,O.createElement(Td.Provider,{value:x},O.createElement(QE.Provider,{value:i},O.createElement(u4.Provider,{value:g.current},O.createElement(l4.Provider,{value:l},O.createElement(QL,{basename:_,location:i.location,navigationType:i.historyAction,navigator:k,future:C},i.initialized||n.future.v7_partialHydration?O.createElement(m4,{routes:n.routes,future:n.future,state:i}):e))))),null)}const m4=O.memo(g4);function g4(t){let{routes:e,future:n,state:r}=t;return zL(e,void 0,r,n)}const v4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fv=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:f,viewTransition:c}=e,h=e4(e,r4),{basename:d}=O.useContext(ea),v,w=!1;if(typeof u=="string"&&y4.test(u)&&(v=u,v4))try{let y=new URL(window.location.href),k=u.startsWith("//")?new URL(y.protocol+u):new URL(u),_=co(k.pathname,d);k.origin===y.origin&&_!=null?u=_+k.search+k.hash:w=!0}catch{}let g=BL(u,{relative:i}),p=w4(u,{replace:a,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:c});function m(y){r&&r(y),y.defaultPrevented||p(y)}return O.createElement("a",Vl({},h,{href:v||g,onClick:w||s?r:m,ref:n,target:l}))});var sx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sx||(sx={}));var ax;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ax||(ax={}));function w4(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=hu(),u=Nd(),f=nk(t,{relative:a});return O.useCallback(c=>{if(n4(c,n)){c.preventDefault();let h=r!==void 0?r:Ys(u)===Ys(f);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,f,r,i,n,t,s,a,o])}function x4(t){if(!t)return{displayName:"Untitled Book",displayAuthor:"Unknown Author",displayProgress:0,displaySize:"Unknown size"};const e=t.name||"Untitled Book",n=t.author||"Unknown Author",r=t.progress||0,i=t.size||"Unknown size";return{displayName:e,displayAuthor:n,displayProgress:r,displaySize:i}}const b4=({coverPath:t,title:e,onError:n,className:r=""})=>{const[i,s]=O.useState(),[a,o]=O.useState(!1),[l,u]=O.useState(!1);return O.useEffect(()=>{if(!t){o(!1),u(!1);return}(async()=>{o(!0),u(!1);try{const c=await PO(t);c?s(c):(u(!0),n==null||n())}catch(c){console.error("Failed to load cover:",c),u(!0),n==null||n()}finally{o(!1)}})()},[t,n]),a?E.jsx("div",{className:`relative aspect-[3/4] animate-pulse bg-gray-200 ${r}`,children:E.jsx("div",{className:"flex h-full w-full items-center justify-center",children:E.jsxs("div",{className:"text-gray-400",children:[E.jsx("div",{className:"mb-2 text-4xl",children:"📚"}),E.jsx("div",{className:"text-sm",children:"Loading..."})]})})}):l||!i?E.jsx("div",{className:`relative aspect-[3/4] bg-gradient-to-br from-blue-100 to-purple-100 ${r}`,children:E.jsx("div",{className:"flex h-full w-full items-center justify-center",children:E.jsxs("div",{className:"p-4 text-center",children:[E.jsx("div",{className:"mb-2 text-4xl",children:"📚"}),E.jsx("div",{className:"truncate px-2 text-sm font-medium text-gray-600",title:e,children:e})]})})}):E.jsx("div",{className:`relative aspect-[3/4] bg-gray-200 ${r}`,children:E.jsx("img",{src:i,alt:e,className:"h-full w-full object-cover",onError:f=>{f.currentTarget.style.display="none",u(!0),n==null||n()}})})},_4=({progress:t,className:e="",showPercentage:n=!0,color:r="bg-blue-600"})=>typeof t!="number"||t<0||t>100?(console.warn("ProgressBar: progress must be a number between 0 and 100"),null):t>0?E.jsxs("div",{className:`mb-3 ${e}`,children:[n&&E.jsxs("div",{className:"mb-1 flex justify-between text-xs text-gray-500",children:[E.jsx("span",{children:"Progress"}),E.jsxs("span",{children:[t,"%"]})]}),E.jsx("div",{className:"h-1.5 w-full rounded-full bg-gray-200",children:E.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${r}`,style:{width:`${t}%`},role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Reading progress: ${t}%`})})]}):null,E4=()=>E.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),k4=()=>E.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),S4=()=>E.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),C4=()=>E.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),A4=()=>E.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),D4=()=>E.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),T4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),N4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),R4=()=>E.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),I4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),O4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),L4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),P4=t=>E.jsx("svg",{className:`h-5 w-5 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 12h16M4 16h16"})}),F4=t=>E.jsx("svg",{className:`size-5 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),M4=t=>E.jsxs("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),B4=t=>E.jsx("svg",{className:`h-4 w-4 ${t.className}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),j4=({onRead:t,onDelete:e,className:n="",disabled:r=!1})=>typeof t!="function"||typeof e!="function"?(console.error("BookActions: onRead and onDelete must be functions"),null):E.jsxs("div",{className:`flex gap-2 ${n}`,children:[E.jsx("button",{onClick:t,disabled:r,className:`
    flex-1 rounded bg-blue-600 px-3 py-2 text-sm font-medium 
    text-white transition-colors duration-200 hover:bg-blue-700 
    disabled:opacity-50 disabled:cursor-not-allowed
  `.trim(),"aria-label":"Read book",children:"Read"}),E.jsx("button",{onClick:e,disabled:r,className:`
    rounded px-3 py-2 text-sm text-red-600 transition-colors 
    duration-200 hover:bg-red-50 hover:text-red-800 
    disabled:opacity-50 disabled:cursor-not-allowed
  `.trim(),"aria-label":"Delete book",title:"Delete book",children:E.jsx(R4,{})})]}),z4=({book:t,onOpen:e,onDelete:n})=>{const{displayName:r,displayAuthor:i,displayProgress:s,displaySize:a}=x4(t);if(!t||!t.id)return null;const o=()=>{e(t.id)},l=f=>{f.stopPropagation(),n(t.id)},u=()=>{e(t.id)};return E.jsxs("div",{className:"cursor-pointer overflow-hidden rounded-lg bg-white shadow-md transition-shadow duration-200 hover:shadow-lg",onClick:o,role:"button",tabIndex:0,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),o())},"aria-label":`Open book: ${r}`,children:[E.jsx(b4,{coverPath:t.coverPath,title:r}),E.jsxs("div",{className:"p-4",children:[E.jsx("h3",{className:"mb-1 truncate text-lg font-semibold text-gray-900",title:r,children:r}),E.jsx("p",{className:"mb-2 truncate text-sm text-gray-600",title:i,children:i}),E.jsx(_4,{progress:s}),E.jsxs("div",{className:"mb-3 flex items-center justify-between text-xs text-gray-500",children:[E.jsx("span",{children:a}),t.chapterCount&&E.jsxs("span",{children:[t.chapterCount," chapters"]})]}),E.jsx(j4,{onRead:u,onDelete:l})]})]})},U4=({onUploadComplete:t})=>{const e=$E(),[n,r]=O.useState(!1),[i,s]=O.useState(!1),a=h=>_O(h),o=O.useCallback(async h=>{const d=Av(h);if(d){alert(d);return}s(!0);try{await e(kc(h)).unwrap(),t==null||t()}catch(v){alert(`Upload failed: ${v}`)}finally{s(!1)}},[e,t]),l=O.useCallback(h=>{h.preventDefault(),r(!0)},[]),u=O.useCallback(h=>{h.preventDefault(),r(!1)},[]),f=O.useCallback(h=>{h.preventDefault(),r(!1);const v=Array.from(h.dataTransfer.files).find(w=>a(w));v?o(v):alert("Please drop a valid EPUB file")},[o]),c=O.useCallback(h=>{var v;const d=(v=h.target.files)==null?void 0:v[0];d&&o(d)},[o]);return E.jsx("div",{className:`rounded-lg border-2 border-dashed p-8 text-center transition-all duration-200 ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${i?"cursor-not-allowed opacity-50":"cursor-pointer"} `,onDragOver:l,onDragLeave:u,onDrop:f,children:i?E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),E.jsx("p",{className:"text-gray-600",children:"Uploading book..."})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"mb-4 text-6xl",children:"📚"}),E.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"Upload EPUB Book"}),E.jsx("p",{className:"mb-4 text-gray-600",children:"Drag and drop your EPUB file here, or click to browse"}),E.jsx("input",{type:"file",accept:".epub,application/epub+zip",onChange:c,className:"hidden",id:"file-upload",disabled:i}),E.jsx("label",{htmlFor:"file-upload",className:"inline-block cursor-pointer rounded-md bg-blue-600 px-6 py-2 text-white transition-colors duration-200 hover:bg-blue-700",children:"Choose File"}),E.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Maximum file size: ",Dv(Tf)]})]})})},$4=()=>{const t=$E(),e=hu(),{books:n,isLoading:r,error:i}=UO(f=>f.bookshelf),[s,a]=O.useState(!1);O.useEffect(()=>{(async()=>{try{await t(Ec()).unwrap()}catch(c){console.error("Failed to initialize bookshelf:",c)}})()},[t]);const o=f=>{e(`/reader/${f}`)},l=async f=>{if(window.confirm("Are you sure you want to delete this book?"))try{await t(Sc(f)).unwrap()}catch(c){alert(`Failed to delete book: ${c}`)}},u=()=>{a(!1),t(Cc())};return E.jsxs("div",{className:"min-h-screen bg-gray-50",children:[E.jsx("header",{className:"border-b bg-white shadow-sm",children:E.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Epub reader"}),E.jsx("button",{onClick:()=>a(!s),className:"rounded-md bg-blue-600 px-4 py-2 text-white transition-colors duration-200 hover:bg-blue-700",children:s?"Cancel":"Upload Book"})]})})}),E.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[i&&E.jsxs("div",{className:"mb-6 rounded-md border border-red-200 bg-red-50 p-4",children:[E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:"⚠️"})}),E.jsxs("div",{className:"ml-3",children:[E.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),E.jsx("div",{className:"mt-2 text-sm text-red-700",children:E.jsx("p",{children:i})})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx("button",{onClick:()=>t(BO()),className:"text-sm text-red-600 hover:text-red-500",children:"Dismiss"})})]}),!Tv()&&E.jsx("div",{className:"mb-6 rounded-md border border-yellow-200 bg-yellow-50 p-4",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-yellow-400",children:"⚠️"})}),E.jsxs("div",{className:"ml-3",children:[E.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Browser Not Supported"}),E.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:E.jsx("p",{children:"This browser doesn't support the required file system features. Please use Chrome 86+, Edge 86+, or Firefox 102+."})})]})]})}),s&&E.jsx("div",{className:"mb-8",children:E.jsx(U4,{onUploadComplete:u})}),r&&n.length===0&&E.jsxs("div",{className:"py-12 text-center",children:[E.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),E.jsx("p",{className:"text-gray-600",children:"Loading your bookshelf..."})]}),!r&&n.length===0&&!s&&E.jsxs("div",{className:"py-12 text-center",children:[E.jsx("div",{className:"mb-4 text-6xl",children:"📚"}),E.jsx("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:"No books yet"}),E.jsx("p",{className:"mb-4 text-gray-600",children:"Start building your digital library by uploading your first EPUB book."}),E.jsx("button",{onClick:()=>a(!0),className:"rounded-md bg-blue-600 px-6 py-2 text-white transition-colors duration-200 hover:bg-blue-700",children:"Upload Your First Book"})]}),!r&&n.length>0&&E.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:n.map(f=>E.jsx(z4,{book:f,onOpen:o,onDelete:l},f.id))})]})]})},W4=t=>{const e=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},n=hu();return E.jsx("header",{className:`absolute left-0 right-0 top-0 z-50 transform border-b bg-white shadow-sm transition-transform duration-300 ease-in-out ${t.visible?"translate-y-0":"-translate-y-full"} `,children:E.jsx("div",{className:"mx-auto max-w-4xl px-4 py-3",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"Table of Contents",onClick:t.onOpenToc,children:E.jsx(E4,{})}),E.jsx("button",{onClick:()=>n("/"),className:"p-2 text-gray-600 hover:text-gray-900",children:E.jsx(F4,{})}),E.jsx("button",{onClick:()=>console.log("Search coming soon"),className:"p-2 text-gray-600 hover:text-gray-900",title:"Search",children:E.jsx(k4,{})})]}),E.jsx("div",{className:"flex items-center space-x-4",children:E.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"EPUB Reader"})}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{onClick:e,className:"p-2 text-gray-600 hover:text-gray-900",title:"Fullscreen",children:E.jsx(C4,{})}),E.jsx("button",{onClick:()=>n("/settings"),className:"p-2 text-gray-600 hover:text-gray-900",title:"Settings",children:E.jsx(S4,{})})]})]})})})},sk=()=>E.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-600",children:"Loading book..."})]})}),H4=t=>t.visible?E.jsx("button",{onClick:e=>{e.stopPropagation(),t.setVisible(!0)},className:"absolute left-1 top-1 z-20 rounded-sm bg-opacity-90 text-gray-700 shadow-md transition-all duration-200 hover:bg-opacity-100 hover:shadow-lg",title:"Show menu",children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}):E.jsx(E.Fragment,{}),V4=t=>{const e=t.totalPages>0?Math.round((t.currentPage+1)/t.totalPages*100):0;return E.jsx("footer",{className:`absolute bottom-0 left-0 right-0 z-50 transform border-b bg-white shadow-sm transition-transform duration-300 ease-in-out ${t.visible?"block translate-y-0":"hidden"} `,children:E.jsx("div",{className:"mx-auto max-w-4xl px-4 py-3",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"mr-4 flex-1",children:[E.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm text-gray-600",children:[E.jsxs("span",{children:["Page ",t.currentPage+1," of ",t.totalPages]}),E.jsxs("span",{children:[e,"%"]})]}),E.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:E.jsx("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${e}%`}})})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:t.onPrev,className:"p-2 text-gray-600 hover:text-gray-900 disabled:cursor-not-allowed disabled:opacity-50",title:"Previous Page",children:E.jsx(D4,{})}),E.jsx("button",{onClick:t.onNext,className:"p-2 text-gray-600 hover:text-gray-900 disabled:cursor-not-allowed disabled:opacity-50",title:"Next Page",children:E.jsx(A4,{})})]})]})})})},q4=t=>{const e=(n,r=0)=>n.map(i=>{var s;return E.jsxs("div",{className:"w-full",children:[E.jsx("button",{onClick:()=>t.onChapterSelect(i.href),className:`w-full rounded px-3 py-2 text-left text-sm transition-colors ${r>0?"ml-4":""} ${(s=t.currentChapter)!=null&&s.startsWith(i.href)?"bg-blue-100 font-medium text-blue-700":"text-gray-700 hover:bg-gray-100"} `,style:{paddingLeft:`${12+r*16}px`},children:i.label}),i.subitems&&i.subitems.length>0&&E.jsx("div",{className:"ml-2",children:e(i.subitems,r+1)})]},i.href)});return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:`fixed left-0 top-0 z-40 h-screen w-64 transform bg-white shadow-lg transition-transform duration-300 ${t.isOpen?"translate-x-0":"-translate-x-full"} `,children:[E.jsx("div",{className:"border-b p-4",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Table of Contents"}),E.jsx("button",{onClick:t.onToggle,className:"p-1 text-gray-500 hover:text-gray-700","aria-label":"Close table of contents",children:E.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),E.jsx("div",{className:"h-[calc(100vh-4rem)] overflow-y-auto p-4",children:t.tableOfContents.length===0?E.jsx("div",{className:"py-8 text-center text-gray-500",children:E.jsx("p",{children:"No table of contents available"})}):E.jsx("div",{className:"space-y-1",children:e(t.tableOfContents)})})]}),t.isOpen&&E.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 md:hidden",onClick:t.onToggle})]})},X4=({error:t})=>E.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Invalid Book ID"}),E.jsx("p",{className:"text-gray-600",children:"Please select a valid book to read."}),t&&E.jsx("p",{className:"text-red-600",children:t})]})}),G4=t=>({get:e=>localStorage.getItem(`${t}${e}`),set:(e,n)=>localStorage.setItem(`${t}${e}`,n)});var ak=(t,e)=>{let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>{t(r)},e)}};const Y4=(t,e)=>{O.useEffect(()=>{const n=r=>{var i;(i=window.getSelection())!=null&&i.toString().trim()||(r.key==="ArrowLeft"&&e(),r.key==="ArrowRight"&&t())};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t,e])},K4=t=>{const e=t.body;if(!e)return;Object.assign(e.style,{webkitUserSelect:"text",userSelect:"text",webkitTouchCallout:"default",touchAction:"manipulation",webkitTapHighlightColor:"transparent"});const n=t.createElement("style");n.textContent=`
    ::selection {
      background-color: ${Vu.BACKGROUND} !important;
      color: ${Vu.TEXT_INHERIT} !important;
    }
    ::-webkit-selection, ::-moz-selection {
      background-color: ${Vu.BACKGROUND} !important;
      color: ${Vu.TEXT_INHERIT} !important;
    }
    
    *, p, div, span, h1, h2, h3, h4, h5, h6 {
      -webkit-user-select: text !important;
      user-select: text !important;
      -webkit-touch-callout: default !important;
    }
  `,t.head.appendChild(n)},Rm=(t,e)=>{const n=Z4(t);n&&e(n)};function Z4(t){var o,l,u;const e=t.getSelection();if(!e||e.rangeCount===0)return;const n=e.getRangeAt(0);for(;n.startOffset>0&&/\w/.test(((o=n.startContainer.textContent)==null?void 0:o[n.startOffset-1])??"");)n.setStart(n.startContainer,n.startOffset-1);for(;n.endOffset<(((l=n.endContainer.textContent)==null?void 0:l.length)??0)&&/\w/.test(((u=n.endContainer.textContent)==null?void 0:u[n.endOffset])??"");)n.setEnd(n.endContainer,n.endOffset+1);e.removeAllRanges(),e.addRange(n);const r=e.toString(),i=n.startContainer.textContent.slice(0,n.startOffset),s=n.endContainer.textContent.slice(n.endOffset),a=`${i}**${r}**${s}`;return{words:r,context:a}}const Q4=(t,e)=>{const n={isLongPress:!1,startTime:0,startPos:{x:0,y:0},timer:null},{document:r,window:i}=e;K4(r);const s=l=>{const u=l.touches[0];n.timer&&clearTimeout(n.timer),n.isLongPress=!1,n.startTime=Date.now(),n.startPos={x:u.clientX,y:u.clientY},n.timer=setTimeout(()=>{n.isLongPress=!0,J4(u,r,i)},Sm.LONG_PRESS_DURATION)},a=l=>{if(l.touches.length!==1)return;const u=l.touches[0];n.isLongPress&&(eP(u,r,i),l.preventDefault())},o=()=>{const l=Date.now()-n.startTime;n.timer&&(clearTimeout(n.timer),n.timer=null),(n.isLongPress||l<Sm.REGULAR_TAP_THRESHOLD)&&ox(r,t.onSelectionCompleted),n.isLongPress=!1};return r.addEventListener("touchstart",s,{passive:!1}),r.addEventListener("touchmove",a,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),()=>{r.removeEventListener("touchstart",s),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",o),n.timer&&clearTimeout(n.timer)}},J4=(t,e,n)=>{const r=e.elementFromPoint(t.clientX-n.scrollX,t.clientY-n.scrollY);if(r!=null&&r.closest("p, div, span, h1, h2, h3, h4, h5, h6")){const i=ok(e,n,t.clientX,t.clientY);if(i){const s=n.getSelection();s==null||s.removeAllRanges(),s==null||s.addRange(i)}}},eP=(t,e,n)=>{const r=n.getSelection();if(r&&r.rangeCount>0)try{const i=r.getRangeAt(0),s=ok(e,n,t.clientX,t.clientY);if(s){const a=e.createRange();a.setStart(i.startContainer,i.startOffset),a.setEnd(s.startContainer,s.startOffset),r.removeAllRanges(),r.addRange(a)}}catch(i){kt.error("Selection extension failed:",i)}},ox=(t,e)=>{if(!t||typeof e!="function"){kt.error("Invalid parameters for completeSelection");return}setTimeout(()=>{Rm(t,e)},Sm.SELECTION_DELAY)},ok=(t,e,n,r)=>{var i;try{const s=n-e.scrollX,a=r-e.scrollY,o=(i=t.caretPositionFromPoint)==null?void 0:i.call(t,s,a);if(!o)return null;const l=t.createRange();return l.setStart(o.offsetNode,o.offset),l.setEnd(o.offsetNode,o.offset),l}catch{return null}},tP=(t,e)=>{t.rendition.on("touchend",()=>{kt.log("Touch end event detected");const n=e.document;Rm(n,t.onSelectionCompleted)}),t.rendition.on("mouseup",n=>{kt.log("Mouse up event detected");const r=e.document;Rm(r,t.onSelectionCompleted)})},nP=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),rP=t=>{t.rendition.on("relocated",e=>{t.setter.setCurrentLocation(e);const n=t.book.locations.percentageFromCfi(e.start.cfi),r=t.book.locations.length(),i=n>=1?r:Math.floor(n*r)+1;t.setter.setCurrentPage(i),lk.set(t.bookId,e.start.cfi)}),t.rendition.on("rendered",(e,n)=>{const r=t.book.navigation.get(e.href);r&&t.setter.setCurrentChapterHref(r.href),t.rendition.on("click",()=>{t.onClick&&t.onClick()}),nP()?Q4(t,n):tP(t,n)})},lk=G4("latestReadingLocation_"),iP=()=>({width:As.WIDTH,height:As.HEIGHT,spread:As.SPREAD,minSpreadWidth:As.MIN_SPREAD_WIDTH,manager:As.MANAGER,flow:As.FLOW,allowScriptedContent:!0}),sP=(t,e)=>({goToNext:()=>{var n;if((n=e.current)!=null&&n.atEnd){kt.warn("Reached the end of the book");return}t.next()},goToPrev:()=>{var n;if((n=e.current)!=null&&n.atStart){kt.log("Reached the start of the book");return}t.prev()},goToSelectChapter:n=>t.display(n)}),aP=t=>{const{bookId:e}=tk(),n=O.useRef(null),r=O.useRef(null),i=O.useRef(null),[s,a]=O.useState(0),[o,l]=O.useState(0),[u,f]=O.useState([]),[c,h]=O.useState(""),[d,v]=O.useState({goToNext:()=>{},goToPrev:()=>{},goToSelectChapter:p=>{}}),w=O.useCallback(ak(p=>{p&&(kt.log("Omit event:",p),t.onSelect(p))},200),[]),g=async()=>{if(!n.current)return;const p=t.book.renderTo(n.current,iP());r.current=p,rP({rendition:p,book:t.book,bookId:e,onSelectionCompleted:w,onClick:t.onClick,setter:{setCurrentPage:l,setCurrentChapterHref:h,setCurrentLocation:k=>i.current=k}});const m=lk.get(e);p.display(m||void 0),await t.book.ready,await t.book.locations.generate(As.LOCATION_CHAR_COUNT),a(t.book.locations.length()),f(t.book.navigation.toc);const y=sP(p,i);v(y)};return Y4(d.goToNext,d.goToPrev),O.useEffect(()=>{n.current&&t.book&&g()},[t.book]),{containerRef:n,tableOfContents:u,totalPages:s,currentPage:o,currentChapterHref:c,goToNext:d.goToNext,goToPrev:d.goToPrev,goToSelectChapter:d.goToSelectChapter}};function oP({scrollContainerRef:t,isAutoScrollRef:e,isGoToBottomRef:n,duration:r=600}){const i=O.useRef(null),s=O.useCallback(()=>{if(t===null)return;const h=t.current;if(!h)return;i.current&&(cancelAnimationFrame(i.current),i.current=null);const d=performance.now(),v=h.scrollTop,w=p=>1-Math.pow(1-p,3),g=()=>{const m=performance.now()-d,y=Math.min(m/r,1),k=w(y),_=h.scrollHeight-h.clientHeight;h.scrollTop=v+(_-v)*k,y<1?i.current=requestAnimationFrame(g):i.current=null};i.current=requestAnimationFrame(g)},[t,r]),a=O.useCallback(()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null)},[]);O.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]);const o=h=>{h.stopPropagation(),e.current=!1,a(),console.log("Pause auto scroll")},l=100,u=h=>{h.stopPropagation(),e.current=!0,n.current=h.currentTarget.scrollTop+h.currentTarget.clientHeight>=h.currentTarget.scrollHeight-l,console.log("Resume auto scroll. Is at bottom:",n.current)},f=O.useCallback(ak(()=>{e.current=!0},200),[]);return{scrollToBottom:s,handleOnPauseAutoScroll:o,handleResumeAutoScroll:u,bufferPx:l,handleWheelEvent:()=>{a(),e.current=!1,f()}}}const uk=({template:t,words:e,context:n})=>{let r=t.replace(/\{\{words\}\}/g,e);return n&&(r=r.replace(/\{\{context\}\}/g,n)),r};function lx(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const zn=_s(/[A-Za-z]/),Ln=_s(/[\dA-Za-z]/),lP=_s(/[#-'*+\--9=?A-Z^-~]/);function Pf(t){return t!==null&&(t<32||t===127)}const Im=_s(/\d/),uP=_s(/[\dA-Fa-f]/),cP=_s(/[!-/:-@[-`{-~]/);function He(t){return t!==null&&t<-2}function Ot(t){return t!==null&&(t<0||t===32)}function lt(t){return t===-2||t===-1||t===32}const Rd=_s(new RegExp("\\p{P}|\\p{S}","u")),Ks=_s(/\s/);function _s(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function fP(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const Id=function(t){if(t==null)return mP;if(typeof t=="function")return Od(t);if(typeof t=="object")return Array.isArray(t)?dP(t):hP(t);if(typeof t=="string")return pP(t);throw new Error("Expected function, string, or object as test")};function dP(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Id(t[n]);return Od(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function hP(t){const e=t;return Od(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function pP(t){return Od(e);function e(n){return n&&n.type===t}}function Od(t){return e;function e(n,r,i){return!!(gP(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function mP(){return!0}function gP(t){return t!==null&&typeof t=="object"&&"type"in t}const ck=[],vP=!0,Om=!1,yP="skip";function fk(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Id(i),a=r?-1:1;o(t,void 0,[])();function o(l,u,f){const c=l&&typeof l=="object"?l:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return h;function h(){let d=ck,v,w,g;if((!e||s(l,u,f[f.length-1]||void 0))&&(d=wP(n(l,f)),d[0]===Om))return d;if("children"in l&&l.children){const p=l;if(p.children&&d[0]!==yP)for(w=(r?p.children.length:-1)+a,g=f.concat(p);w>-1&&w<p.children.length;){const m=p.children[w];if(v=o(m,w,g)(),v[0]===Om)return v;w=typeof v[1]=="number"?v[1]:w+a}}return d}}}function wP(t){return Array.isArray(t)?t:typeof t=="number"?[vP,t]:t==null?ck:[t]}function xP(t,e,n){const i=Id((n||{}).ignore||[]),s=bP(e);let a=-1;for(;++a<s.length;)fk(t,"text",o);function o(u,f){let c=-1,h;for(;++c<f.length;){const d=f[c],v=h?h.children:void 0;if(i(d,v?v.indexOf(d):void 0,h))return;h=d}if(h)return l(u,f)}function l(u,f){const c=f[f.length-1],h=s[a][0],d=s[a][1];let v=0;const g=c.children.indexOf(u);let p=!1,m=[];h.lastIndex=0;let y=h.exec(u.value);for(;y;){const k=y.index,_={index:y.index,input:y.input,stack:[...f,u]};let x=d(...y,_);if(typeof x=="string"&&(x=x.length>0?{type:"text",value:x}:void 0),x===!1?h.lastIndex=k+1:(v!==k&&m.push({type:"text",value:u.value.slice(v,k)}),Array.isArray(x)?m.push(...x):x&&m.push(x),v=k+y[0].length,p=!0),!h.global)break;y=h.exec(u.value)}return p?(v<u.value.length&&m.push({type:"text",value:u.value.slice(v)}),c.children.splice(g,1,...m)):m=[u],g+m.length}}function bP(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([_P(i[0]),EP(i[1])])}return e}function _P(t){return typeof t=="string"?new RegExp(fP(t),"g"):t}function EP(t){return typeof t=="function"?t:function(){return t}}const Wh="phrasing",Hh=["autolink","link","image","label"];function kP(){return{transforms:[RP],enter:{literalAutolink:CP,literalAutolinkEmail:Vh,literalAutolinkHttp:Vh,literalAutolinkWww:Vh},exit:{literalAutolink:NP,literalAutolinkEmail:TP,literalAutolinkHttp:AP,literalAutolinkWww:DP}}}function SP(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Wh,notInConstruct:Hh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Wh,notInConstruct:Hh},{character:":",before:"[ps]",after:"\\/",inConstruct:Wh,notInConstruct:Hh}]}}function CP(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Vh(t){this.config.enter.autolinkProtocol.call(this,t)}function AP(t){this.config.exit.autolinkProtocol.call(this,t)}function DP(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function TP(t){this.config.exit.autolinkEmail.call(this,t)}function NP(t){this.exit(t)}function RP(t){xP(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,IP],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),OP]],{ignore:["link","linkReference"]})}function IP(t,e,n,r,i){let s="";if(!dk(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!LP(n)))return!1;const a=PP(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function OP(t,e,n,r){return!dk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function LP(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function PP(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=lx(t,"(");let s=lx(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function dk(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ks(n)||Rd(n))&&(!e||n!==47)}function Vr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}hk.peek=HP;function FP(){this.buffer()}function MP(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function BP(){this.buffer()}function jP(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function zP(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Vr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function UP(t){this.exit(t)}function $P(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Vr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function WP(t){this.exit(t)}function HP(){return"["}function hk(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function VP(){return{enter:{gfmFootnoteCallString:FP,gfmFootnoteCall:MP,gfmFootnoteDefinitionLabelString:BP,gfmFootnoteDefinition:jP},exit:{gfmFootnoteCallString:zP,gfmFootnoteCall:UP,gfmFootnoteDefinitionLabelString:$P,gfmFootnoteDefinition:WP}}}function qP(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:hk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let l=o.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return l+=o.move(s.safe(s.associationId(r),{before:l,after:"]"})),f(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),e?pk:XP))),u(),l}}function XP(t,e,n){return e===0?t:pk(t,e,n)}function pk(t,e,n){return(n?"":"    ")+t}const GP=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];mk.peek=JP;function YP(){return{canContainEols:["delete"],enter:{strikethrough:ZP},exit:{strikethrough:QP}}}function KP(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GP}],handlers:{delete:mk}}}function ZP(t){this.enter({type:"delete",children:[]},t)}function QP(t){this.exit(t)}function mk(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(t,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function JP(){return"~"}function e5(t){return t.length}function t5(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||e5,s=[],a=[],o=[],l=[];let u=0,f=-1;for(;++f<t.length;){const w=[],g=[];let p=-1;for(t[f].length>u&&(u=t[f].length);++p<t[f].length;){const m=n5(t[f][p]);if(n.alignDelimiters!==!1){const y=i(m);g[p]=y,(l[p]===void 0||y>l[p])&&(l[p]=y)}w.push(m)}a[f]=w,o[f]=g}let c=-1;if(typeof r=="object"&&"length"in r)for(;++c<u;)s[c]=ux(r[c]);else{const w=ux(r);for(;++c<u;)s[c]=w}c=-1;const h=[],d=[];for(;++c<u;){const w=s[c];let g="",p="";w===99?(g=":",p=":"):w===108?g=":":w===114&&(p=":");let m=n.alignDelimiters===!1?1:Math.max(1,l[c]-g.length-p.length);const y=g+"-".repeat(m)+p;n.alignDelimiters!==!1&&(m=g.length+m+p.length,m>l[c]&&(l[c]=m),d[c]=m),h[c]=y}a.splice(1,0,h),o.splice(1,0,d),f=-1;const v=[];for(;++f<a.length;){const w=a[f],g=o[f];c=-1;const p=[];for(;++c<u;){const m=w[c]||"";let y="",k="";if(n.alignDelimiters!==!1){const _=l[c]-(g[c]||0),x=s[c];x===114?y=" ".repeat(_):x===99?_%2?(y=" ".repeat(_/2+.5),k=" ".repeat(_/2-.5)):(y=" ".repeat(_/2),k=y):k=" ".repeat(_)}n.delimiterStart!==!1&&!c&&p.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&m==="")&&(n.delimiterStart!==!1||c)&&p.push(" "),n.alignDelimiters!==!1&&p.push(y),p.push(m),n.alignDelimiters!==!1&&p.push(k),n.padding!==!1&&p.push(" "),(n.delimiterEnd!==!1||c!==u-1)&&p.push("|")}v.push(n.delimiterEnd===!1?p.join("").replace(/ +$/,""):p.join(""))}return v.join(`
`)}function n5(t){return t==null?"":String(t)}function ux(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function r5(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(t,s.current()),i5);return i(),a}function i5(t,e,n){return">"+(n?"":" ")+t}function s5(t,e){return cx(t,e.inConstruct,!0)&&!cx(t,e.notInConstruct,!1)}function cx(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function fx(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&s5(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function a5(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+e.length,r=n.indexOf(e,i);return a}function o5(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function l5(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function u5(t,e,n,r){const i=l5(n),s=t.value||"",a=i==="`"?"GraveAccent":"Tilde";if(o5(t,n)){const c=n.enter("codeIndented"),h=n.indentLines(s,c5);return c(),h}const o=n.createTracker(r),l=i.repeat(Math.max(a5(s,i)+1,3)),u=n.enter("codeFenced");let f=o.move(l);if(t.lang){const c=n.enter(`codeFencedLang${a}`);f+=o.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...o.current()})),c()}if(t.lang&&t.meta){const c=n.enter(`codeFencedMeta${a}`);f+=o.move(" "),f+=o.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...o.current()})),c()}return f+=o.move(`
`),s&&(f+=o.move(s+`
`)),f+=o.move(l),u(),f}function c5(t,e,n){return(n?"":"    ")+t}function Mv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function f5(t,e,n,r){const i=Mv(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!t.url||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),o(),t.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),a(),u}function d5(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ql(t){return"&#x"+t.toString(16).toUpperCase()+";"}function so(t){if(t===null||Ot(t)||Ks(t))return 1;if(Rd(t))return 2}function Ff(t,e,n){const r=so(t),i=so(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}gk.peek=h5;function gk(t,e,n,r){const i=d5(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let l=a.move(n.containerPhrasing(t,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),f=Ff(r.before.charCodeAt(r.before.length-1),u,i);f.inside&&(l=ql(u)+l.slice(1));const c=l.charCodeAt(l.length-1),h=Ff(r.after.charCodeAt(0),c,i);h.inside&&(l=l.slice(0,-1)+ql(c));const d=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},o+l+d}function h5(t,e,n){return n.options.emphasis||"*"}function Bv(t,e,n,r){let i,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,i=n):(s=e,a=n,i=r),fk(t,s,o,i);function o(l,u){const f=u[u.length-1],c=f?f.children.indexOf(l):void 0;return a(l,c,f)}}const p5={};function jv(t,e){const n=p5,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return vk(t,r,i)}function vk(t,e,n){if(m5(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return dx(t.children,e,n)}return Array.isArray(t)?dx(t,e,n):""}function dx(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=vk(t[i],e,n);return r.join("")}function m5(t){return!!(t&&typeof t=="object")}function g5(t,e){let n=!1;return Bv(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Om}),!!((!t.depth||t.depth<3)&&jv(t)&&(e.options.setext||n))}function v5(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(g5(t,n)){const f=n.enter("headingSetext"),c=n.enter("phrasing"),h=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return c(),f(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),l=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=ql(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),o(),u}yk.peek=y5;function yk(t){return t.value||""}function y5(){return"<"}wk.peek=w5;function wk(t,e,n,r){const i=Mv(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),o(),t.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),u+=l.move(")"),a(),u}function w5(){return"!"}xk.peek=x5;function xk(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const u=n.safe(t.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const c=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return a(),n.stack=f,s(),i==="full"||!u||u!==c?l+=o.move(c+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function x5(){return"!"}bk.peek=b5;function bk(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function b5(){return"`"}function _k(t,e){const n=jv(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Ek.peek=_5;function Ek(t,e,n,r){const i=Mv(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,l;if(_k(t,n)){const f=n.stack;n.stack=[],o=n.enter("autolink");let c=a.move("<");return c+=a.move(n.containerPhrasing(t,{before:c,after:">",...a.current()})),c+=a.move(">"),o(),n.stack=f,c}o=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(t,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=a.move(" "+i),u+=a.move(n.safe(t.title,{before:u,after:i,...a.current()})),u+=a.move(i),l()),u+=a.move(")"),o(),u}function _5(t,e,n){return _k(t,n)?"<":"["}kk.peek=E5;function kk(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const c=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return a(),n.stack=f,s(),i==="full"||!u||u!==c?l+=o.move(c+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function E5(){return"["}function zv(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function k5(t){const e=zv(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function S5(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Sk(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function C5(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=t.ordered?S5(n):zv(n);const o=t.ordered?a==="."?")":".":k5(n);let l=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Sk(n)===a&&f){let c=-1;for(;++c<t.children.length;){const h=t.children[c];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),u}function A5(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function D5(t,e,n,r){const i=A5(n);let s=n.bulletCurrent||zv(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,o.current()),f);return l(),u;function f(c,h,d){return h?(d?"":" ".repeat(a))+c:(d?s:s+" ".repeat(a-s.length))+c}}function T5(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,r);return s(),i(),a}const N5=Id(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function R5(t,e,n,r){return(t.children.some(function(a){return N5(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function I5(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Ck.peek=O5;function Ck(t,e,n,r){const i=I5(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let l=a.move(n.containerPhrasing(t,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),f=Ff(r.before.charCodeAt(r.before.length-1),u,i);f.inside&&(l=ql(u)+l.slice(1));const c=l.charCodeAt(l.length-1),h=Ff(r.after.charCodeAt(0),c,i);h.inside&&(l=l.slice(0,-1)+ql(c));const d=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},o+l+d}function O5(t,e,n){return n.options.strong||"*"}function L5(t,e,n,r){return n.safe(t.value,r)}function P5(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function F5(t,e,n){const r=(Sk(n)+(n.options.ruleSpaces?" ":"")).repeat(P5(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Ak={blockquote:r5,break:fx,code:u5,definition:f5,emphasis:gk,hardBreak:fx,heading:v5,html:yk,image:wk,imageReference:xk,inlineCode:bk,link:Ek,linkReference:kk,list:C5,listItem:D5,paragraph:T5,root:R5,strong:Ck,text:L5,thematicBreak:F5},hx=document.createElement("i");function Uv(t){const e="&"+t+";";hx.innerHTML=e;const n=hx.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Dk(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}const M5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function B5(t){return t.replace(M5,j5)}function j5(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Dk(n.slice(s?2:1),s?16:10)}return Uv(n)||t}function z5(){return{enter:{table:U5,tableData:px,tableHeader:px,tableRow:W5},exit:{codeText:H5,table:$5,tableData:qh,tableHeader:qh,tableRow:qh}}}function U5(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function $5(t){this.exit(t),this.data.inTable=void 0}function W5(t){this.enter({type:"tableRow",children:[]},t)}function qh(t){this.exit(t)}function px(t){this.enter({type:"tableCell",children:[]},t)}function H5(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,V5));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function V5(t,e){return e==="|"?e:t}function q5(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:l,tableRow:o}};function a(d,v,w,g){return u(f(d,w,g),d.align)}function o(d,v,w,g){const p=c(d,w,g),m=u([p]);return m.slice(0,m.indexOf(`
`))}function l(d,v,w,g){const p=w.enter("tableCell"),m=w.enter("phrasing"),y=w.containerPhrasing(d,{...g,before:s,after:s});return m(),p(),y}function u(d,v){return t5(d,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function f(d,v,w){const g=d.children;let p=-1;const m=[],y=v.enter("table");for(;++p<g.length;)m[p]=c(g[p],v,w);return y(),m}function c(d,v,w){const g=d.children;let p=-1;const m=[],y=v.enter("tableRow");for(;++p<g.length;)m[p]=l(g[p],d,v,w);return y(),m}function h(d,v,w){let g=Ak.inlineCode(d,v,w);return w.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function X5(){return{exit:{taskListCheckValueChecked:mx,taskListCheckValueUnchecked:mx,paragraph:Y5}}}function G5(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:K5}}}function mx(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Y5(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function K5(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let l=Ak.listItem(t,e,n,{...r,...o.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(f){return f+a}}function Z5(){return[kP(),VP(),YP(),z5(),X5()]}function Q5(t){return{extensions:[SP(),qP(t),KP(),q5(t),G5()]}}function pr(t,e,n,r){const i=t.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function Sr(t,e){return t.length>0?(pr(t,t.length,0,e),t):e}const gx={}.hasOwnProperty;function Tk(t){const e={};let n=-1;for(;++n<t.length;)J5(e,t[n]);return e}function J5(t,e){let n;for(n in e){const i=(gx.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){gx.call(i,a)||(i[a]=[]);const o=s[a];eF(i[a],Array.isArray(o)?o:o?[o]:[])}}}function eF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);pr(t,0,0,r)}const tF={tokenize:oF,partial:!0},Nk={tokenize:lF,partial:!0},Rk={tokenize:uF,partial:!0},Ik={tokenize:cF,partial:!0},nF={tokenize:fF,partial:!0},Ok={name:"wwwAutolink",tokenize:sF,previous:Pk},Lk={name:"protocolAutolink",tokenize:aF,previous:Fk},Fi={name:"emailAutolink",tokenize:iF,previous:Mk},di={};function rF(){return{text:di}}let Es=48;for(;Es<123;)di[Es]=Fi,Es++,Es===58?Es=65:Es===91&&(Es=97);di[43]=Fi;di[45]=Fi;di[46]=Fi;di[95]=Fi;di[72]=[Fi,Lk];di[104]=[Fi,Lk];di[87]=[Fi,Ok];di[119]=[Fi,Ok];function iF(t,e,n){const r=this;let i,s;return a;function a(c){return!Lm(c)||!Mk.call(r,r.previous)||$v(r.events)?n(c):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),o(c))}function o(c){return Lm(c)?(t.consume(c),o):c===64?(t.consume(c),l):n(c)}function l(c){return c===46?t.check(nF,f,u)(c):c===45||c===95||Ln(c)?(s=!0,t.consume(c),l):f(c)}function u(c){return t.consume(c),i=!0,l}function f(c){return s&&i&&zn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(c)):n(c)}}function sF(t,e,n){const r=this;return i;function i(a){return a!==87&&a!==119||!Pk.call(r,r.previous)||$v(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(tF,t.attempt(Nk,t.attempt(Rk,s),n),n)(a))}function s(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function aF(t,e,n){const r=this;let i="",s=!1;return a;function a(c){return(c===72||c===104)&&Fk.call(r,r.previous)&&!$v(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(c),t.consume(c),o):n(c)}function o(c){if(zn(c)&&i.length<5)return i+=String.fromCodePoint(c),t.consume(c),o;if(c===58){const h=i.toLowerCase();if(h==="http"||h==="https")return t.consume(c),l}return n(c)}function l(c){return c===47?(t.consume(c),s?u:(s=!0,l)):n(c)}function u(c){return c===null||Pf(c)||Ot(c)||Ks(c)||Rd(c)?n(c):t.attempt(Nk,t.attempt(Rk,f),n)(c)}function f(c){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(c)}}function oF(t,e,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),i):a===46&&r===3?(t.consume(a),s):n(a)}function s(a){return a===null?n(a):e(a)}}function lF(t,e,n){let r,i,s;return a;function a(u){return u===46||u===95?t.check(Ik,l,o)(u):u===null||Ot(u)||Ks(u)||u!==45&&Rd(u)?l(u):(s=!0,t.consume(u),a)}function o(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),a}function l(u){return i||r||!s?n(u):e(u)}}function uF(t,e){let n=0,r=0;return i;function i(a){return a===40?(n++,t.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(Ik,e,s)(a):a===null||Ot(a)||Ks(a)?e(a):(t.consume(a),i)}function s(a){return a===41&&r++,t.consume(a),i}}function cF(t,e,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(t.consume(o),r):o===38?(t.consume(o),s):o===93?(t.consume(o),i):o===60||o===null||Ot(o)||Ks(o)?e(o):n(o)}function i(o){return o===null||o===40||o===91||Ot(o)||Ks(o)?e(o):r(o)}function s(o){return zn(o)?a(o):n(o)}function a(o){return o===59?(t.consume(o),r):zn(o)?(t.consume(o),a):n(o)}}function fF(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Ln(s)?n(s):e(s)}}function Pk(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ot(t)}function Fk(t){return!zn(t)}function Mk(t){return!(t===47||Lm(t))}function Lm(t){return t===43||t===45||t===46||t===95||Ln(t)}function $v(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function fo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&Ln(t.charCodeAt(n+1))&&Ln(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=t.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a="�"}else a=String.fromCharCode(s);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ld(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Pm={name:"attention",resolveAll:dF,tokenize:hF};function dF(t,e){let n=-1,r,i,s,a,o,l,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const c={...t[r][1].end},h={...t[n][1].start};vx(c,-l),vx(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:c,end:{...t[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},t[r][1].end={...a.start},t[n][1].start={...o.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Sr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Sr(u,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=Sr(u,Ld(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Sr(u,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=Sr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,pr(t,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function hF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=so(r);let s;return a;function a(l){return s=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===s)return t.consume(l),o;const u=t.exit("attentionSequence"),f=so(l),c=!f||f===2&&i||n.includes(l),h=!i||i===2&&f||n.includes(r);return u._open=!!(s===42?c:c&&(i||!h)),u._close=!!(s===42?h:h&&(f||!c)),e(l)}}function vx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const pF={name:"autolink",tokenize:mF};function mF(t,e,n){let r=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return zn(d)?(t.consume(d),a):d===64?n(d):u(d)}function a(d){return d===43||d===45||d===46||Ln(d)?(r=1,o(d)):u(d)}function o(d){return d===58?(t.consume(d),r=0,l):(d===43||d===45||d===46||Ln(d))&&r++<32?(t.consume(d),o):(r=0,u(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Pf(d)?n(d):(t.consume(d),l)}function u(d){return d===64?(t.consume(d),f):lP(d)?(t.consume(d),u):n(d)}function f(d){return Ln(d)?c(d):n(d)}function c(d){return d===46?(t.consume(d),r=0,f):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):h(d)}function h(d){if((d===45||Ln(d))&&r++<63){const v=d===45?h:c;return t.consume(d),v}return n(d)}}function yt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return lt(l)?(t.enter(n),o(l)):e(l)}function o(l){return lt(l)&&s++<i?(t.consume(l),o):(t.exit(n),e(l))}}const pu={partial:!0,tokenize:gF};function gF(t,e,n){return r;function r(s){return lt(s)?yt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||He(s)?e(s):n(s)}}const Bk={continuation:{tokenize:yF},exit:wF,name:"blockQuote",tokenize:vF};function vF(t,e,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return lt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function yF(t,e,n){const r=this;return i;function i(a){return lt(a)?yt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(Bk,e,n)(a)}}function wF(t){t.exit("blockQuote")}const jk={name:"characterEscape",tokenize:xF};function xF(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return cP(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const zk={name:"characterReference",tokenize:bF};function bF(t,e,n){const r=this;let i=0,s,a;return o;function o(c){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(c),t.exit("characterReferenceMarker"),l}function l(c){return c===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(c),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,a=Ln,f(c))}function u(c){return c===88||c===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(c),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=uP,f):(t.enter("characterReferenceValue"),s=7,a=Im,f(c))}function f(c){if(c===59&&i){const h=t.exit("characterReferenceValue");return a===Ln&&!Uv(r.sliceSerialize(h))?n(c):(t.enter("characterReferenceMarker"),t.consume(c),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(c)&&i++<s?(t.consume(c),f):n(c)}}const yx={partial:!0,tokenize:EF},wx={concrete:!0,name:"codeFenced",tokenize:_F};function _F(t,e,n){const r=this,i={partial:!0,tokenize:_};let s=0,a=0,o;return l;function l(x){return u(x)}function u(x){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,o=x,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(x)}function f(x){return x===o?(a++,t.consume(x),f):a<3?n(x):(t.exit("codeFencedFenceSequence"),lt(x)?yt(t,c,"whitespace")(x):c(x))}function c(x){return x===null||He(x)?(t.exit("codeFencedFence"),r.interrupt?e(x):t.check(yx,w,k)(x)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===null||He(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),c(x)):lt(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),yt(t,d,"whitespace")(x)):x===96&&x===o?n(x):(t.consume(x),h)}function d(x){return x===null||He(x)?c(x):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(x))}function v(x){return x===null||He(x)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),c(x)):x===96&&x===o?n(x):(t.consume(x),v)}function w(x){return t.attempt(i,k,g)(x)}function g(x){return t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),p}function p(x){return s>0&&lt(x)?yt(t,m,"linePrefix",s+1)(x):m(x)}function m(x){return x===null||He(x)?t.check(yx,w,k)(x):(t.enter("codeFlowValue"),y(x))}function y(x){return x===null||He(x)?(t.exit("codeFlowValue"),m(x)):(t.consume(x),y)}function k(x){return t.exit("codeFenced"),e(x)}function _(x,C,A){let P=0;return S;function S(K){return x.enter("lineEnding"),x.consume(K),x.exit("lineEnding"),F}function F(K){return x.enter("codeFencedFence"),lt(K)?yt(x,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):z(K)}function z(K){return K===o?(x.enter("codeFencedFenceSequence"),ie(K)):A(K)}function ie(K){return K===o?(P++,x.consume(K),ie):P>=a?(x.exit("codeFencedFenceSequence"),lt(K)?yt(x,te,"whitespace")(K):te(K)):A(K)}function te(K){return K===null||He(K)?(x.exit("codeFencedFence"),C(K)):A(K)}}}function EF(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Xh={name:"codeIndented",tokenize:SF},kF={partial:!0,tokenize:CF};function SF(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),yt(t,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):He(u)?t.attempt(kF,a,l)(u):(t.enter("codeFlowValue"),o(u))}function o(u){return u===null||He(u)?(t.exit("codeFlowValue"),a(u)):(t.consume(u),o)}function l(u){return t.exit("codeIndented"),e(u)}}function CF(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):He(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):yt(t,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):He(a)?i(a):n(a)}}const AF={name:"codeText",previous:TF,resolve:DF,tokenize:NF};function DF(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function TF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function NF(t,e,n){let r=0,i,s;return a;function a(c){return t.enter("codeText"),t.enter("codeTextSequence"),o(c)}function o(c){return c===96?(t.consume(c),r++,o):(t.exit("codeTextSequence"),l(c))}function l(c){return c===null?n(c):c===32?(t.enter("space"),t.consume(c),t.exit("space"),l):c===96?(s=t.enter("codeTextSequence"),i=0,f(c)):He(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||He(c)?(t.exit("codeTextData"),l(c)):(t.consume(c),u)}function f(c){return c===96?(t.consume(c),i++,f):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(c)):(s.type="codeTextData",u(c))}}class RF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Po(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Po(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Po(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Po(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Po(this.left,n.reverse())}}}function Po(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Uk(t){const e={};let n=-1,r,i,s,a,o,l,u;const f=new RF(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,IF(f,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=f.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},o=f.slice(i,n),o.unshift(r),f.splice(i,n-i+1,o))}}return pr(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function IF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let f,c,h=-1,d=n,v=0,w=0;const g=[w];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(f=r.sliceStream(d),d.next||f.push(null),c&&a.defineSkip(d.start),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),c=d,d=d.next}for(d=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(w=h+1,g.push(w),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(a.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),h=g.length;h--;){const p=o.slice(g[h],g[h+1]),m=s.pop();l.push([m,m+p.length-1]),t.splice(m,2,p)}for(l.reverse(),h=-1;++h<l.length;)u[v+l[h][0]]=v+l[h][1],v+=l[h][1]-l[h][0]-1;return u}const OF={resolve:PF,tokenize:FF},LF={partial:!0,tokenize:MF};function PF(t){return Uk(t),t}function FF(t,e){let n;return r;function r(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):He(o)?t.check(LF,a,s)(o):(t.consume(o),i)}function s(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function a(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function MF(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),yt(t,s,"linePrefix")}function s(a){if(a===null||He(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function $k(t,e,n,r,i,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let f=0;return c;function c(p){return p===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(p),t.exit(s),h):p===null||p===32||p===41||Pf(p)?n(p):(t.enter(r),t.enter(a),t.enter(o),t.enter("chunkString",{contentType:"string"}),w(p))}function h(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===62?(t.exit("chunkString"),t.exit(o),h(p)):p===null||p===60||He(p)?n(p):(t.consume(p),p===92?v:d)}function v(p){return p===60||p===62||p===92?(t.consume(p),d):d(p)}function w(p){return!f&&(p===null||p===41||Ot(p))?(t.exit("chunkString"),t.exit(o),t.exit(a),t.exit(r),e(p)):f<u&&p===40?(t.consume(p),f++,w):p===41?(t.consume(p),f--,w):p===null||p===32||p===40||Pf(p)?n(p):(t.consume(p),p===92?g:w)}function g(p){return p===40||p===41||p===92?(t.consume(p),w):w(p)}}function Wk(t,e,n,r,i,s){const a=this;let o=0,l;return u;function u(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(s),f}function f(d){return o>999||d===null||d===91||d===93&&!l||d===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):He(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===null||d===91||d===93||He(d)||o++>999?(t.exit("chunkString"),f(d)):(t.consume(d),l||(l=!lt(d)),d===92?h:c)}function h(d){return d===91||d===92||d===93?(t.consume(d),o++,c):c(d)}}function Hk(t,e,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),a=h===40?41:h,l):n(h)}function l(h){return h===a?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),u(h))}function u(h){return h===a?(t.exit(s),l(a)):h===null?n(h):He(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),yt(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===a||h===null||He(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?c:f)}function c(h){return h===a||h===92?(t.consume(h),f):f(h)}}function cl(t,e){let n;return r;function r(i){return He(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):lt(i)?yt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const BF={name:"definition",tokenize:zF},jF={partial:!0,tokenize:UF};function zF(t,e,n){const r=this;let i;return s;function s(d){return t.enter("definition"),a(d)}function a(d){return Wk.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function o(d){return i=Vr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return Ot(d)?cl(t,u)(d):u(d)}function u(d){return $k(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function f(d){return t.attempt(jF,c,c)(d)}function c(d){return lt(d)?yt(t,h,"whitespace")(d):h(d)}function h(d){return d===null||He(d)?(t.exit("definition"),r.parser.defined.push(i),e(d)):n(d)}}function UF(t,e,n){return r;function r(o){return Ot(o)?cl(t,i)(o):n(o)}function i(o){return Hk(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return lt(o)?yt(t,a,"whitespace")(o):a(o)}function a(o){return o===null||He(o)?e(o):n(o)}}const $F={name:"hardBreakEscape",tokenize:WF};function WF(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return He(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const HF={name:"headingAtx",resolve:VF,tokenize:qF};function VF(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},pr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function qF(t,e,n){let r=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&r++<6?(t.consume(f),a):f===null||Ot(f)?(t.exit("atxHeadingSequence"),o(f)):n(f)}function o(f){return f===35?(t.enter("atxHeadingSequence"),l(f)):f===null||He(f)?(t.exit("atxHeading"),e(f)):lt(f)?yt(t,o,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function l(f){return f===35?(t.consume(f),l):(t.exit("atxHeadingSequence"),o(f))}function u(f){return f===null||f===35||Ot(f)?(t.exit("atxHeadingText"),o(f)):(t.consume(f),u)}}const XF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xx=["pre","script","style","textarea"],GF={concrete:!0,name:"htmlFlow",resolveTo:ZF,tokenize:QF},YF={partial:!0,tokenize:eM},KF={partial:!0,tokenize:JF};function ZF(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function QF(t,e,n){const r=this;let i,s,a,o,l;return u;function u(B){return f(B)}function f(B){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(B),c}function c(B){return B===33?(t.consume(B),h):B===47?(t.consume(B),s=!0,w):B===63?(t.consume(B),i=3,r.interrupt?e:I):zn(B)?(t.consume(B),a=String.fromCharCode(B),g):n(B)}function h(B){return B===45?(t.consume(B),i=2,d):B===91?(t.consume(B),i=5,o=0,v):zn(B)?(t.consume(B),i=4,r.interrupt?e:I):n(B)}function d(B){return B===45?(t.consume(B),r.interrupt?e:I):n(B)}function v(B){const be="CDATA[";return B===be.charCodeAt(o++)?(t.consume(B),o===be.length?r.interrupt?e:z:v):n(B)}function w(B){return zn(B)?(t.consume(B),a=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||Ot(B)){const be=B===47,je=a.toLowerCase();return!be&&!s&&xx.includes(je)?(i=1,r.interrupt?e(B):z(B)):XF.includes(a.toLowerCase())?(i=6,be?(t.consume(B),p):r.interrupt?e(B):z(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?m(B):y(B))}return B===45||Ln(B)?(t.consume(B),a+=String.fromCharCode(B),g):n(B)}function p(B){return B===62?(t.consume(B),r.interrupt?e:z):n(B)}function m(B){return lt(B)?(t.consume(B),m):S(B)}function y(B){return B===47?(t.consume(B),S):B===58||B===95||zn(B)?(t.consume(B),k):lt(B)?(t.consume(B),y):S(B)}function k(B){return B===45||B===46||B===58||B===95||Ln(B)?(t.consume(B),k):_(B)}function _(B){return B===61?(t.consume(B),x):lt(B)?(t.consume(B),_):y(B)}function x(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),l=B,C):lt(B)?(t.consume(B),x):A(B)}function C(B){return B===l?(t.consume(B),l=null,P):B===null||He(B)?n(B):(t.consume(B),C)}function A(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Ot(B)?_(B):(t.consume(B),A)}function P(B){return B===47||B===62||lt(B)?y(B):n(B)}function S(B){return B===62?(t.consume(B),F):n(B)}function F(B){return B===null||He(B)?z(B):lt(B)?(t.consume(B),F):n(B)}function z(B){return B===45&&i===2?(t.consume(B),Q):B===60&&i===1?(t.consume(B),Z):B===62&&i===4?(t.consume(B),pe):B===63&&i===3?(t.consume(B),I):B===93&&i===5?(t.consume(B),re):He(B)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(YF,oe,ie)(B)):B===null||He(B)?(t.exit("htmlFlowData"),ie(B)):(t.consume(B),z)}function ie(B){return t.check(KF,te,oe)(B)}function te(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),K}function K(B){return B===null||He(B)?ie(B):(t.enter("htmlFlowData"),z(B))}function Q(B){return B===45?(t.consume(B),I):z(B)}function Z(B){return B===47?(t.consume(B),a="",$):z(B)}function $(B){if(B===62){const be=a.toLowerCase();return xx.includes(be)?(t.consume(B),pe):z(B)}return zn(B)&&a.length<8?(t.consume(B),a+=String.fromCharCode(B),$):z(B)}function re(B){return B===93?(t.consume(B),I):z(B)}function I(B){return B===62?(t.consume(B),pe):B===45&&i===2?(t.consume(B),I):z(B)}function pe(B){return B===null||He(B)?(t.exit("htmlFlowData"),oe(B)):(t.consume(B),pe)}function oe(B){return t.exit("htmlFlow"),e(B)}}function JF(t,e,n){const r=this;return i;function i(a){return He(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function eM(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(pu,e,n)}}const tM={name:"htmlText",tokenize:nM};function nM(t,e,n){const r=this;let i,s,a;return o;function o(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),l}function l(I){return I===33?(t.consume(I),u):I===47?(t.consume(I),_):I===63?(t.consume(I),y):zn(I)?(t.consume(I),A):n(I)}function u(I){return I===45?(t.consume(I),f):I===91?(t.consume(I),s=0,v):zn(I)?(t.consume(I),m):n(I)}function f(I){return I===45?(t.consume(I),d):n(I)}function c(I){return I===null?n(I):I===45?(t.consume(I),h):He(I)?(a=c,Z(I)):(t.consume(I),c)}function h(I){return I===45?(t.consume(I),d):c(I)}function d(I){return I===62?Q(I):I===45?h(I):c(I)}function v(I){const pe="CDATA[";return I===pe.charCodeAt(s++)?(t.consume(I),s===pe.length?w:v):n(I)}function w(I){return I===null?n(I):I===93?(t.consume(I),g):He(I)?(a=w,Z(I)):(t.consume(I),w)}function g(I){return I===93?(t.consume(I),p):w(I)}function p(I){return I===62?Q(I):I===93?(t.consume(I),p):w(I)}function m(I){return I===null||I===62?Q(I):He(I)?(a=m,Z(I)):(t.consume(I),m)}function y(I){return I===null?n(I):I===63?(t.consume(I),k):He(I)?(a=y,Z(I)):(t.consume(I),y)}function k(I){return I===62?Q(I):y(I)}function _(I){return zn(I)?(t.consume(I),x):n(I)}function x(I){return I===45||Ln(I)?(t.consume(I),x):C(I)}function C(I){return He(I)?(a=C,Z(I)):lt(I)?(t.consume(I),C):Q(I)}function A(I){return I===45||Ln(I)?(t.consume(I),A):I===47||I===62||Ot(I)?P(I):n(I)}function P(I){return I===47?(t.consume(I),Q):I===58||I===95||zn(I)?(t.consume(I),S):He(I)?(a=P,Z(I)):lt(I)?(t.consume(I),P):Q(I)}function S(I){return I===45||I===46||I===58||I===95||Ln(I)?(t.consume(I),S):F(I)}function F(I){return I===61?(t.consume(I),z):He(I)?(a=F,Z(I)):lt(I)?(t.consume(I),F):P(I)}function z(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),i=I,ie):He(I)?(a=z,Z(I)):lt(I)?(t.consume(I),z):(t.consume(I),te)}function ie(I){return I===i?(t.consume(I),i=void 0,K):I===null?n(I):He(I)?(a=ie,Z(I)):(t.consume(I),ie)}function te(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Ot(I)?P(I):(t.consume(I),te)}function K(I){return I===47||I===62||Ot(I)?P(I):n(I)}function Q(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function Z(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),$}function $(I){return lt(I)?yt(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):re(I)}function re(I){return t.enter("htmlTextData"),a(I)}}const Wv={name:"labelEnd",resolveAll:aM,resolveTo:oM,tokenize:lM},rM={tokenize:uM},iM={tokenize:cM},sM={tokenize:fM};function aM(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&pr(t,0,t.length,n),t}function oM(t,e){let n=t.length,r=0,i,s,a,o;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},f={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[a-2][1].start}};return o=[["enter",l,e],["enter",u,e]],o=Sr(o,t.slice(s+1,s+r+3)),o=Sr(o,[["enter",f,e]]),o=Sr(o,Ld(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),o=Sr(o,[["exit",f,e],t[a-2],t[a-1],["exit",u,e]]),o=Sr(o,t.slice(a+1)),o=Sr(o,[["exit",l,e]]),pr(t,s,t.length,o),t}function lM(t,e,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?c(h):(a=r.parser.defined.includes(Vr(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(rM,f,a?f:c)(h):h===91?t.attempt(iM,f,a?u:c)(h):a?f(h):c(h)}function u(h){return t.attempt(sM,f,c)(h)}function f(h){return e(h)}function c(h){return s._balanced=!0,n(h)}}function uM(t,e,n){return r;function r(c){return t.enter("resource"),t.enter("resourceMarker"),t.consume(c),t.exit("resourceMarker"),i}function i(c){return Ot(c)?cl(t,s)(c):s(c)}function s(c){return c===41?f(c):$k(t,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function a(c){return Ot(c)?cl(t,l)(c):f(c)}function o(c){return n(c)}function l(c){return c===34||c===39||c===40?Hk(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):f(c)}function u(c){return Ot(c)?cl(t,f)(c):f(c)}function f(c){return c===41?(t.enter("resourceMarker"),t.consume(c),t.exit("resourceMarker"),t.exit("resource"),e):n(c)}}function cM(t,e,n){const r=this;return i;function i(o){return Wk.call(r,t,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Vr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function a(o){return n(o)}}function fM(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const dM={name:"labelStartImage",resolveAll:Wv.resolveAll,tokenize:hM};function hM(t,e,n){const r=this;return i;function i(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),s}function s(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const pM={name:"labelStartLink",resolveAll:Wv.resolveAll,tokenize:mM};function mM(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Gh={name:"lineEnding",tokenize:gM};function gM(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),yt(t,e,"linePrefix")}}const Dc={name:"thematicBreak",tokenize:vM};function vM(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||He(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),lt(u)?yt(t,o,"whitespace")(u):o(u))}}const Vn={continuation:{tokenize:bM},exit:EM,name:"list",tokenize:xM},yM={partial:!0,tokenize:kM},wM={partial:!0,tokenize:_M};function xM(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(d){const v=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:Im(d)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(Dc,n,u)(d):u(d);if(!r.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return Im(d)&&++a<10?(t.consume(d),l):(!r.interrupt||a<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),u(d)):n(d)}function u(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,t.check(pu,r.interrupt?n:f,t.attempt(yM,h,c))}function f(d){return r.containerState.initialBlankLine=!0,s++,h(d)}function c(d){return lt(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),h):n(d)}function h(d){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function bM(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(pu,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,yt(t,e,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!lt(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(wM,e,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,yt(t,t.attempt(Vn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function _M(t,e,n){const r=this;return yt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):n(s)}}function EM(t){t.exit(this.containerState.type)}function kM(t,e,n){const r=this;return yt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!lt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const bx={name:"setextUnderline",resolveTo:SM,tokenize:CM};function SM(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function CM(t,e,n){const r=this;let i;return s;function s(u){let f=r.events.length,c;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){c=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||c)?(t.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return t.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(t.consume(u),o):(t.exit("setextHeadingLineSequence"),lt(u)?yt(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||He(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const AM={tokenize:PM,partial:!0};function DM(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:IM,continuation:{tokenize:OM},exit:LM}},text:{91:{name:"gfmFootnoteCall",tokenize:RM},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:TM,resolveTo:NM}}}}function TM(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return n(l);const u=Vr(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function NM(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...o),t}function RM(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(c){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),l}function l(c){return c!==94?n(c):(t.enter("gfmFootnoteCallMarker"),t.consume(c),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(c){if(s>999||c===93&&!a||c===null||c===91||Ot(c))return n(c);if(c===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return i.includes(Vr(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(c)}return Ot(c)||(a=!0),s++,t.consume(c),c===92?f:u}function f(c){return c===91||c===92||c===93?(t.consume(c),s++,u):u(c)}}function IM(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(v)}function f(v){if(a>999||v===93&&!o||v===null||v===91||Ot(v))return n(v);if(v===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return s=Vr(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Ot(v)||(o=!0),a++,t.consume(v),v===92?c:f}function c(v){return v===91||v===92||v===93?(t.consume(v),a++,f):f(v)}function h(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),yt(t,d,"gfmFootnoteDefinitionWhitespace")):n(v)}function d(v){return e(v)}}function OM(t,e,n){return t.check(pu,e,t.attempt(AM,e,n))}function LM(t){t.exit("gfmFootnoteDefinition")}function PM(t,e,n){const r=this;return yt(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):n(s)}}function FM(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},c={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},h=[["enter",f,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",c,o]],d=o.parser.constructs.insideSpan.null;d&&pr(h,h.length,0,Ld(d,a.slice(u+1,l),o)),pr(h,h.length,0,[["exit",c,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",f,o]]),pr(a,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function s(a,o,l){const u=this.previous,f=this.events;let c=0;return h;function h(v){return u===126&&f[f.length-1][1].type!=="characterEscape"?l(v):(a.enter("strikethroughSequenceTemporary"),d(v))}function d(v){const w=so(u);if(v===126)return c>1?l(v):(a.consume(v),c++,d);if(c<2&&!n)return l(v);const g=a.exit("strikethroughSequenceTemporary"),p=so(v);return g._open=!p||p===2&&!!w,g._close=!w||w===2&&!!p,o(v)}}}class MM{constructor(){this.map=[]}add(e,n,r){BM(this,e,n,r)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function BM(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function jM(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function zM(){return{flow:{null:{name:"table",tokenize:UM,resolveAll:$M}}}}function UM(t,e,n){const r=this;let i=0,s=0,a;return o;function o(S){let F=r.events.length-1;for(;F>-1;){const te=r.events[F][1].type;if(te==="lineEnding"||te==="linePrefix")F--;else break}const z=F>-1?r.events[F][1].type:null,ie=z==="tableHead"||z==="tableRow"?x:l;return ie===x&&r.parser.lazy[r.now().line]?n(S):ie(S)}function l(S){return t.enter("tableHead"),t.enter("tableRow"),u(S)}function u(S){return S===124||(a=!0,s+=1),f(S)}function f(S){return S===null?n(S):He(S)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),d):n(S):lt(S)?yt(t,f,"whitespace")(S):(s+=1,a&&(a=!1,i+=1),S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),a=!0,f):(t.enter("data"),c(S)))}function c(S){return S===null||S===124||Ot(S)?(t.exit("data"),f(S)):(t.consume(S),S===92?h:c)}function h(S){return S===92||S===124?(t.consume(S),c):c(S)}function d(S){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(S):(t.enter("tableDelimiterRow"),a=!1,lt(S)?yt(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):v(S))}function v(S){return S===45||S===58?g(S):S===124?(a=!0,t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),w):_(S)}function w(S){return lt(S)?yt(t,g,"whitespace")(S):g(S)}function g(S){return S===58?(s+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),p):S===45?(s+=1,p(S)):S===null||He(S)?k(S):_(S)}function p(S){return S===45?(t.enter("tableDelimiterFiller"),m(S)):_(S)}function m(S){return S===45?(t.consume(S),m):S===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),y):(t.exit("tableDelimiterFiller"),y(S))}function y(S){return lt(S)?yt(t,k,"whitespace")(S):k(S)}function k(S){return S===124?v(S):S===null||He(S)?!a||i!==s?_(S):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(S)):_(S)}function _(S){return n(S)}function x(S){return t.enter("tableRow"),C(S)}function C(S){return S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),C):S===null||He(S)?(t.exit("tableRow"),e(S)):lt(S)?yt(t,C,"whitespace")(S):(t.enter("data"),A(S))}function A(S){return S===null||S===124||Ot(S)?(t.exit("data"),C(S)):(t.consume(S),S===92?P:A)}function P(S){return S===92||S===124?(t.consume(S),A):A(S)}}function $M(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,u,f,c;const h=new MM;for(;++n<t.length;){const d=t[n],v=d[1];d[0]==="enter"?v.type==="tableHead"?(o=!1,l!==0&&(_x(h,e,l,u,f),f=void 0,l=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},h.add(n,0,[["enter",u,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,c=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,f={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},h.add(n,0,[["enter",f,e]])),i=v.type==="tableDelimiterRow"?2:f?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],c=Xu(h,e,s,i,void 0,c),s=[0,0,0,0]),a[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],c=Xu(h,e,s,i,void 0,c)),s=a,a=[s[1],n,0,0])):v.type==="tableHead"?(o=!0,l=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=n,s[1]!==0?(a[0]=a[1],c=Xu(h,e,s,i,n,c)):a[1]!==0&&(c=Xu(h,e,a,i,n,c)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(a[3]=n)}for(l!==0&&_x(h,e,l,u,f),h.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=jM(e.events,n))}return t}function Xu(t,e,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},ya(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=ya(e.events,n[1]);if(s={type:a,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=ya(e.events,n[2]),f=ya(e.events,n[3]),c={type:o,start:Object.assign({},u),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",c,e]]),r!==2){const h=e.events[n[2]],d=e.events[n[3]];if(h[1].end=Object.assign({},d[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,w=n[3]-n[2]-1;t.add(v,w,[])}}t.add(n[3]+1,0,[["exit",c,e]])}return i!==void 0&&(s.end=Object.assign({},ya(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function _x(t,e,n,r,i){const s=[],a=ya(e.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,e])),r.end=Object.assign({},a),s.push(["exit",r,e]),t.add(n+1,0,s)}function ya(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const WM={name:"tasklistCheck",tokenize:VM};function HM(){return{text:{91:WM}}}function VM(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Ot(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),a):n(l)}function a(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),o):n(l)}function o(l){return He(l)?e(l):lt(l)?t.check({tokenize:qM},e,n)(l):n(l)}}function qM(t,e,n){return yt(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function XM(t){return Tk([rF(),DM(),FM(t),zM(),HM()])}const GM={};function YM(t){const e=this,n=t||GM,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(XM(n)),s.push(Z5()),a.push(Q5(n))}function KM(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ZM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,QM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JM={};function Ex(t,e){return(JM.jsx?QM:ZM).test(t)}const eB=/[ \t\n\f\r]/g;function tB(t){return typeof t=="object"?t.type==="text"?kx(t.value):!1:kx(t)}function kx(t){return t.replace(eB,"")===""}class mu{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}mu.prototype.normal={};mu.prototype.property={};mu.prototype.space=void 0;function Vk(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new mu(n,r,e)}function Fm(t){return t.toLowerCase()}class nr{constructor(e,n){this.attribute=n,this.property=e}}nr.prototype.attribute="";nr.prototype.booleanish=!1;nr.prototype.boolean=!1;nr.prototype.commaOrSpaceSeparated=!1;nr.prototype.commaSeparated=!1;nr.prototype.defined=!1;nr.prototype.mustUseProperty=!1;nr.prototype.number=!1;nr.prototype.overloadedBoolean=!1;nr.prototype.property="";nr.prototype.spaceSeparated=!1;nr.prototype.space=void 0;let nB=0;const tt=ta(),sn=ta(),Mm=ta(),ye=ta(),Mt=ta(),Wa=ta(),sr=ta();function ta(){return 2**++nB}const Bm=Object.freeze(Object.defineProperty({__proto__:null,boolean:tt,booleanish:sn,commaOrSpaceSeparated:sr,commaSeparated:Wa,number:ye,overloadedBoolean:Mm,spaceSeparated:Mt},Symbol.toStringTag,{value:"Module"})),Yh=Object.keys(Bm);class Hv extends nr{constructor(e,n,r,i){let s=-1;if(super(e,n),Sx(this,"space",i),typeof r=="number")for(;++s<Yh.length;){const a=Yh[s];Sx(this,Yh[s],(r&Bm[a])===Bm[a])}}}Hv.prototype.defined=!0;function Sx(t,e,n){n&&(t[e]=n)}function ho(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Hv(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Fm(r)]=r,n[Fm(s.attribute)]=r}return new mu(e,n,t.space)}const qk=ho({properties:{ariaActiveDescendant:null,ariaAtomic:sn,ariaAutoComplete:null,ariaBusy:sn,ariaChecked:sn,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:Mt,ariaCurrent:null,ariaDescribedBy:Mt,ariaDetails:null,ariaDisabled:sn,ariaDropEffect:Mt,ariaErrorMessage:null,ariaExpanded:sn,ariaFlowTo:Mt,ariaGrabbed:sn,ariaHasPopup:null,ariaHidden:sn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Mt,ariaLevel:ye,ariaLive:null,ariaModal:sn,ariaMultiLine:sn,ariaMultiSelectable:sn,ariaOrientation:null,ariaOwns:Mt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:sn,ariaReadOnly:sn,ariaRelevant:null,ariaRequired:sn,ariaRoleDescription:Mt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:sn,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Xk(t,e){return e in t?t[e]:e}function Gk(t,e){return Xk(t,e.toLowerCase())}const rB=ho({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wa,acceptCharset:Mt,accessKey:Mt,action:null,allow:null,allowFullScreen:tt,allowPaymentRequest:tt,allowUserMedia:tt,alt:null,as:null,async:tt,autoCapitalize:null,autoComplete:Mt,autoFocus:tt,autoPlay:tt,blocking:Mt,capture:null,charSet:null,checked:tt,cite:null,className:Mt,cols:ye,colSpan:null,content:null,contentEditable:sn,controls:tt,controlsList:Mt,coords:ye|Wa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:tt,defer:tt,dir:null,dirName:null,disabled:tt,download:Mm,draggable:sn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:tt,formTarget:null,headers:Mt,height:ye,hidden:Mm,high:ye,href:null,hrefLang:null,htmlFor:Mt,httpEquiv:Mt,id:null,imageSizes:null,imageSrcSet:null,inert:tt,inputMode:null,integrity:null,is:null,isMap:tt,itemId:null,itemProp:Mt,itemRef:Mt,itemScope:tt,itemType:Mt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:tt,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:tt,muted:tt,name:null,nonce:null,noModule:tt,noValidate:tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:tt,optimum:ye,pattern:null,ping:Mt,placeholder:null,playsInline:tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:tt,referrerPolicy:null,rel:Mt,required:tt,reversed:tt,rows:ye,rowSpan:ye,sandbox:Mt,scope:null,scoped:tt,seamless:tt,selected:tt,shadowRootClonable:tt,shadowRootDelegatesFocus:tt,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:sn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:tt,useMap:null,value:sn,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Mt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:tt,declare:tt,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:tt,noHref:tt,noShade:tt,noWrap:tt,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:sn,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:tt,disableRemotePlayback:tt,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:Gk}),iB=ho({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:sr,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:Mt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wa,g2:Wa,glyphName:Wa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:sr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Mt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:sr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:sr,rev:sr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:sr,requiredFeatures:sr,requiredFonts:sr,requiredFormats:sr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:sr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:sr,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:sr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Xk}),Yk=ho({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Kk=ho({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gk}),Zk=ho({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),sB={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aB=/[A-Z]/g,Cx=/-[a-z]/g,oB=/^data[-\w.:]+$/i;function lB(t,e){const n=Fm(e);let r=e,i=nr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&oB.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Cx,cB);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Cx.test(s)){let a=s.replace(aB,uB);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=Hv}return new i(r,e)}function uB(t){return"-"+t.toLowerCase()}function cB(t){return t.charAt(1).toUpperCase()}const fB=Vk([qk,rB,Yk,Kk,Zk],"html"),Vv=Vk([qk,iB,Yk,Kk,Zk],"svg");function dB(t){return t.join(" ").trim()}var qv={},Ax=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,hB=/\n/g,pB=/^\s*/,mB=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,gB=/^:\s*/,vB=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,yB=/^[;\s]*/,wB=/^\s+|\s+$/g,xB=`
`,Dx="/",Tx="*",Rs="",bB="comment",_B="declaration",EB=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(v){var w=v.match(hB);w&&(n+=w.length);var g=v.lastIndexOf(xB);r=~g?v.length-g:r+v.length}function s(){var v={line:n,column:r};return function(w){return w.position=new a(v),u(),w}}function a(v){this.start=v,this.end={line:n,column:r},this.source=e.source}a.prototype.content=t;function o(v){var w=new Error(e.source+":"+n+":"+r+": "+v);if(w.reason=v,w.filename=e.source,w.line=n,w.column=r,w.source=t,!e.silent)throw w}function l(v){var w=v.exec(t);if(w){var g=w[0];return i(g),t=t.slice(g.length),w}}function u(){l(pB)}function f(v){var w;for(v=v||[];w=c();)w!==!1&&v.push(w);return v}function c(){var v=s();if(!(Dx!=t.charAt(0)||Tx!=t.charAt(1))){for(var w=2;Rs!=t.charAt(w)&&(Tx!=t.charAt(w)||Dx!=t.charAt(w+1));)++w;if(w+=2,Rs===t.charAt(w-1))return o("End of comment missing");var g=t.slice(2,w-2);return r+=2,i(g),t=t.slice(w),r+=2,v({type:bB,comment:g})}}function h(){var v=s(),w=l(mB);if(w){if(c(),!l(gB))return o("property missing ':'");var g=l(vB),p=v({type:_B,property:Nx(w[0].replace(Ax,Rs)),value:g?Nx(g[0].replace(Ax,Rs)):Rs});return l(yB),p}}function d(){var v=[];f(v);for(var w;w=h();)w!==!1&&(v.push(w),f(v));return v}return u(),d()};function Nx(t){return t?t.replace(wB,Rs):Rs}var kB=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qv,"__esModule",{value:!0});qv.default=CB;var SB=kB(EB);function CB(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,SB.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var a=s.property,o=s.value;i?e(a,o,s):o&&(n=n||{},n[a]=o)}}),n}var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.camelCase=void 0;var AB=/^--[a-zA-Z0-9_-]+$/,DB=/-([a-z])/g,TB=/^[^-]+$/,NB=/^-(webkit|moz|ms|o|khtml)-/,RB=/^-(ms)-/,IB=function(t){return!t||TB.test(t)||AB.test(t)},OB=function(t,e){return e.toUpperCase()},Rx=function(t,e){return"".concat(e,"-")},LB=function(t,e){return e===void 0&&(e={}),IB(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(RB,Rx):t=t.replace(NB,Rx),t.replace(DB,OB))};Pd.camelCase=LB;var PB=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},FB=PB(qv),MB=Pd;function jm(t,e){var n={};return!t||typeof t!="string"||(0,FB.default)(t,function(r,i){r&&i&&(n[(0,MB.camelCase)(r,e)]=i)}),n}jm.default=jm;var BB=jm;const jB=Gr(BB),Qk=Jk("end"),Xv=Jk("start");function Jk(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function zB(t){const e=Xv(t),n=Qk(t);if(e&&n)return{start:e,end:n}}function fl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Ix(t.position):"start"in t||"end"in t?Ix(t):"line"in t||"column"in t?zm(t):""}function zm(t){return Ox(t&&t.line)+":"+Ox(t&&t.column)}function Ix(t){return zm(t&&t.start)+"-"+zm(t&&t.end)}function Ox(t){return t&&typeof t=="number"?t:1}class Mn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=fl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Mn.prototype.file="";Mn.prototype.name="";Mn.prototype.reason="";Mn.prototype.message="";Mn.prototype.stack="";Mn.prototype.column=void 0;Mn.prototype.line=void 0;Mn.prototype.ancestors=void 0;Mn.prototype.cause=void 0;Mn.prototype.fatal=void 0;Mn.prototype.place=void 0;Mn.prototype.ruleId=void 0;Mn.prototype.source=void 0;const Gv={}.hasOwnProperty,UB=new Map,$B=/[A-Z]/g,WB=new Set(["table","tbody","thead","tfoot","tr"]),HB=new Set(["td","th"]),eS="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function VB(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=JB(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=QB(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Vv:fB,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=tS(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function tS(t,e,n){if(e.type==="element")return qB(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return XB(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return YB(t,e,n);if(e.type==="mdxjsEsm")return GB(t,e);if(e.type==="root")return KB(t,e,n);if(e.type==="text")return ZB(t,e)}function qB(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Vv,t.schema=i),t.ancestors.push(e);const s=rS(t,e.tagName,!1),a=ej(t,e);let o=Kv(t,e);return WB.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!tB(l):!0})),nS(t,a,s,e),Yv(a,o),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function XB(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Xl(t,e.position)}function GB(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Xl(t,e.position)}function YB(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Vv,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:rS(t,e.name,!0),a=tj(t,e),o=Kv(t,e);return nS(t,a,s,e),Yv(a,o),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function KB(t,e,n){const r={};return Yv(r,Kv(t,e)),t.create(e,t.Fragment,r,n)}function ZB(t,e){return e.value}function nS(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Yv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function QB(t,e,n){return r;function r(i,s,a,o){const u=Array.isArray(a.children)?n:e;return o?u(s,a,o):u(s,a)}}function JB(t,e){return n;function n(r,i,s,a){const o=Array.isArray(s.children),l=Xv(r);return e(i,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function ej(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Gv.call(e.properties,i)){const s=nj(t,i,e.properties[i]);if(s){const[a,o]=s;t.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&HB.has(e.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function tj(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,t.evaluater.evaluateExpression(o.argument))}else Xl(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const o=r.value.data.estree.body[0];o.type,s=t.evaluater.evaluateExpression(o.expression)}else Xl(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Kv(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:UB;for(;++r<e.children.length;){const s=e.children[r];let a;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;a=l+"-"+u,i.set(l,u+1)}}const o=tS(t,s,a);o!==void 0&&n.push(o)}return n}function nj(t,e,n){const r=lB(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?KM(n):dB(n)),r.property==="style"){let i=typeof n=="object"?n:rj(t,String(n));return t.stylePropertyNameCase==="css"&&(i=ij(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?sB[r.property]||r.property:r.attribute,n]}}function rj(t,e){try{return jB(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Mn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=eS+"#cannot-parse-style-attribute",i}}function rS(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,a;for(;++s<i.length;){const o=Ex(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=Ex(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Gv.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Xl(t)}function Xl(t,e){const n=new Mn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=eS+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ij(t){const e={};let n;for(n in t)Gv.call(t,n)&&(e[sj(n)]=t[n]);return e}function sj(t){let e=t.replace($B,aj);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function aj(t){return"-"+t.toLowerCase()}const Kh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},oj={tokenize:lj};function lj(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),yt(t,e,"linePrefix")}function i(o){return t.enter("paragraph"),s(o)}function s(o){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(o)}function a(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return He(o)?(t.consume(o),t.exit("chunkText"),s):(t.consume(o),a)}}const uj={tokenize:cj},Lx={tokenize:fj};function cj(t){const e=this,n=[];let r=0,i,s,a;return o;function o(y){if(r<n.length){const k=n[r];return e.containerState=k[1],t.attempt(k[0].continuation,l,u)(y)}return u(y)}function l(y){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&m();const k=e.events.length;let _=k,x;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){x=e.events[_][1].end;break}p(r);let C=k;for(;C<e.events.length;)e.events[C][1].end={...x},C++;return pr(e.events,_+1,0,e.events.slice(k)),e.events.length=C,u(y)}return o(y)}function u(y){if(r===n.length){if(!i)return h(y);if(i.currentConstruct&&i.currentConstruct.concrete)return v(y);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Lx,f,c)(y)}function f(y){return i&&m(),p(r),h(y)}function c(y){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,v(y)}function h(y){return e.containerState={},t.attempt(Lx,d,v)(y)}function d(y){return r++,n.push([e.currentConstruct,e.containerState]),h(y)}function v(y){if(y===null){i&&m(),p(0),t.consume(y);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(y)}function w(y){if(y===null){g(t.exit("chunkFlow"),!0),p(0),t.consume(y);return}return He(y)?(t.consume(y),g(t.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(t.consume(y),w)}function g(y,k){const _=e.sliceStream(y);if(k&&_.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(_),e.parser.lazy[y.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<a&&(!i.events[x][1].end||i.events[x][1].end.offset>a))return;const C=e.events.length;let A=C,P,S;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){if(P){S=e.events[A][1].end;break}P=!0}for(p(r),x=C;x<e.events.length;)e.events[x][1].end={...S},x++;pr(e.events,A+1,0,e.events.slice(C)),e.events.length=x}}function p(y){let k=n.length;for(;k-- >y;){const _=n[k];e.containerState=_[1],_[0].exit.call(e,t)}n.length=y}function m(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function fj(t,e,n){return yt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const dj={tokenize:hj};function hj(t){const e=this,n=t.attempt(pu,r,t.attempt(this.parser.constructs.flowInitial,i,yt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(OF,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const pj={resolveAll:sS()},mj=iS("string"),gj=iS("text");function iS(t){return{resolveAll:sS(t==="text"?vj:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,a,o);return a;function a(f){return u(f)?s(f):o(f)}function o(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),l}function l(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),l)}function u(f){if(f===null)return!0;const c=i[f];let h=-1;if(c)for(;++h<c.length;){const d=c[h];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function sS(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function vj(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,a=-1,o=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(o=0),o){const u={type:n===t.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const yj={42:Vn,43:Vn,45:Vn,48:Vn,49:Vn,50:Vn,51:Vn,52:Vn,53:Vn,54:Vn,55:Vn,56:Vn,57:Vn,62:Bk},wj={91:BF},xj={[-2]:Xh,[-1]:Xh,32:Xh},bj={35:HF,42:Dc,45:[bx,Dc],60:GF,61:bx,95:Dc,96:wx,126:wx},_j={38:zk,92:jk},Ej={[-5]:Gh,[-4]:Gh,[-3]:Gh,33:dM,38:zk,42:Pm,60:[pF,tM],91:pM,92:[$F,jk],93:Wv,95:Pm,96:AF},kj={null:[Pm,pj]},Sj={null:[42,95]},Cj={null:[]},Aj=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Sj,contentInitial:wj,disable:Cj,document:yj,flow:bj,flowInitial:xj,insideSpan:kj,string:_j,text:Ej},Symbol.toStringTag,{value:"Module"}));function Dj(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const l={attempt:C(_),check:C(x),consume:m,enter:y,exit:k,interrupt:C(x,{interrupt:!0})},u={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:t,previous:null,sliceSerialize:h,sliceStream:d,write:c};let f=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function c(F){return a=Sr(a,F),g(),a[a.length-1]!==null?[]:(A(e,0),u.events=Ld(s,u.events,u),u.events)}function h(F,z){return Nj(d(F),z)}function d(F){return Tj(a,F)}function v(){const{_bufferIndex:F,_index:z,line:ie,column:te,offset:K}=r;return{_bufferIndex:F,_index:z,line:ie,column:te,offset:K}}function w(F){i[F.line]=F.column,S()}function g(){let F;for(;r._index<a.length;){const z=a[r._index];if(typeof z=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<z.length;)p(z.charCodeAt(r._bufferIndex));else p(z)}}function p(F){f=f(F)}function m(F){He(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,S()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=F}function y(F,z){const ie=z||{};return ie.type=F,ie.start=v(),u.events.push(["enter",ie,u]),o.push(ie),ie}function k(F){const z=o.pop();return z.end=v(),u.events.push(["exit",z,u]),z}function _(F,z){A(F,z.from)}function x(F,z){z.restore()}function C(F,z){return ie;function ie(te,K,Q){let Z,$,re,I;return Array.isArray(te)?oe(te):"tokenize"in te?oe([te]):pe(te);function pe(Te){return We;function We(Me){const Qe=Me!==null&&Te[Me],Ae=Me!==null&&Te.null,Pe=[...Array.isArray(Qe)?Qe:Qe?[Qe]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return oe(Pe)(Me)}}function oe(Te){return Z=Te,$=0,Te.length===0?Q:B(Te[$])}function B(Te){return We;function We(Me){return I=P(),re=Te,Te.partial||(u.currentConstruct=Te),Te.name&&u.parser.constructs.disable.null.includes(Te.name)?je():Te.tokenize.call(z?Object.assign(Object.create(u),z):u,l,be,je)(Me)}}function be(Te){return F(re,I),K}function je(Te){return I.restore(),++$<Z.length?B(Z[$]):Q}}}function A(F,z){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&pr(u.events,z,u.events.length-z,F.resolve(u.events.slice(z),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function P(){const F=v(),z=u.previous,ie=u.currentConstruct,te=u.events.length,K=Array.from(o);return{from:te,restore:Q};function Q(){r=F,u.previous=z,u.currentConstruct=ie,u.events.length=te,o=K,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Tj(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,s)];else{if(a=t.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(t[i].slice(0,s))}return a}function Nj(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function Rj(t){const r={constructs:Tk([Aj,...(t||{}).extensions||[]]),content:i(oj),defined:[],document:i(uj),flow:i(dj),lazy:{},string:i(mj),text:i(gj)};return r;function i(s){return a;function a(o){return Dj(r,s,o)}}}function Ij(t){for(;!Uk(t););return t}const Px=/[\0\t\n\r]/g;function Oj(){let t=1,e="",n=!0,r;return i;function i(s,a,o){const l=[];let u,f,c,h,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),c=0,e="",n&&(s.charCodeAt(0)===65279&&c++,n=void 0);c<s.length;){if(Px.lastIndex=c,u=Px.exec(s),h=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(h),!u){e=s.slice(c);break}if(d===10&&c===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),c<h&&(l.push(s.slice(c,h)),t+=h-c),d){case 0:{l.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,l.push(-2);t++<f;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}c=h+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const aS={}.hasOwnProperty;function Lj(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Pj(n)(Ij(Rj(n).document().write(Oj()(t,e,!0))))}function Pj(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(tn),autolinkProtocol:P,autolinkEmail:P,atxHeading:s(it),blockQuote:s(Ae),characterEscape:P,characterReference:P,codeFenced:s(Pe),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Pe,a),codeText:s(qe,a),codeTextData:P,data:P,codeFlowValue:P,definition:s(Ge),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(xt),hardBreakEscape:s(Lt),hardBreakTrailing:s(Lt),htmlFlow:s(st,a),htmlFlowData:P,htmlText:s(st,a),htmlTextData:P,image:s(Rt),label:a,link:s(tn),listItem:s(Pt),listItemValue:h,listOrdered:s(St,c),listUnordered:s(St),paragraph:s(dt),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(it),strong:s($e),thematicBreak:s(Nn)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:Qe,autolinkProtocol:Me,blockQuote:l(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:je,characterReferenceMarkerNumeric:je,characterReferenceValue:Te,characterReference:We,codeFenced:l(g),codeFencedFence:w,codeFencedFenceInfo:d,codeFencedFenceMeta:v,codeFlowValue:S,codeIndented:l(p),codeText:l(K),codeTextData:S,data:S,definition:l(),definitionDestinationString:k,definitionLabelString:m,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(ie),htmlFlowData:S,htmlText:l(te),htmlTextData:S,image:l(Z),label:re,labelText:$,lineEnding:F,link:l(Q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:be,resourceDestinationString:I,resourceTitleString:pe,resource:oe,setextHeading:l(A),setextHeadingLineSequence:C,setextHeadingText:x,strong:l(),thematicBreak:l()}};oS(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(se){let fe={type:"root",children:[]};const Oe={stack:[fe],tokenStack:[],config:e,enter:o,exit:u,buffer:a,resume:f,data:n},ze=[];let Xe=-1;for(;++Xe<se.length;)if(se[Xe][1].type==="listOrdered"||se[Xe][1].type==="listUnordered")if(se[Xe][0]==="enter")ze.push(Xe);else{const bt=ze.pop();Xe=i(se,bt,Xe)}for(Xe=-1;++Xe<se.length;){const bt=e[se[Xe][0]];aS.call(bt,se[Xe][1].type)&&bt[se[Xe][1].type].call(Object.assign({sliceSerialize:se[Xe][2].sliceSerialize},Oe),se[Xe][1])}if(Oe.tokenStack.length>0){const bt=Oe.tokenStack[Oe.tokenStack.length-1];(bt[1]||Fx).call(Oe,void 0,bt[0])}for(fe.position={start:$i(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:$i(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},Xe=-1;++Xe<e.transforms.length;)fe=e.transforms[Xe](fe)||fe;return fe}function i(se,fe,Oe){let ze=fe-1,Xe=-1,bt=!1,Et,gt,jt,Zt;for(;++ze<=Oe;){const L=se[ze];switch(L[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{L[0]==="enter"?Xe++:Xe--,Zt=void 0;break}case"lineEndingBlank":{L[0]==="enter"&&(Et&&!Zt&&!Xe&&!jt&&(jt=ze),Zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Zt=void 0}if(!Xe&&L[0]==="enter"&&L[1].type==="listItemPrefix"||Xe===-1&&L[0]==="exit"&&(L[1].type==="listUnordered"||L[1].type==="listOrdered")){if(Et){let ue=ze;for(gt=void 0;ue--;){const de=se[ue];if(de[1].type==="lineEnding"||de[1].type==="lineEndingBlank"){if(de[0]==="exit")continue;gt&&(se[gt][1].type="lineEndingBlank",bt=!0),de[1].type="lineEnding",gt=ue}else if(!(de[1].type==="linePrefix"||de[1].type==="blockQuotePrefix"||de[1].type==="blockQuotePrefixWhitespace"||de[1].type==="blockQuoteMarker"||de[1].type==="listItemIndent"))break}jt&&(!gt||jt<gt)&&(Et._spread=!0),Et.end=Object.assign({},gt?se[gt][1].start:L[1].end),se.splice(gt||ze,0,["exit",Et,L[2]]),ze++,Oe++}if(L[1].type==="listItemPrefix"){const ue={type:"listItem",_spread:!1,start:Object.assign({},L[1].start),end:void 0};Et=ue,se.splice(ze,0,["enter",ue,L[2]]),ze++,Oe++,jt=void 0,Zt=!0}}}return se[fe][1]._spread=bt,Oe}function s(se,fe){return Oe;function Oe(ze){o.call(this,se(ze),ze),fe&&fe.call(this,ze)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(se,fe,Oe){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([fe,Oe||void 0]),se.position={start:$i(fe.start),end:void 0}}function l(se){return fe;function fe(Oe){se&&se.call(this,Oe),u.call(this,Oe)}}function u(se,fe){const Oe=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==se.type&&(fe?fe.call(this,se,ze[0]):(ze[1]||Fx).call(this,se,ze[0]));else throw new Error("Cannot close `"+se.type+"` ("+fl({start:se.start,end:se.end})+"): it’s not open");Oe.position.end=$i(se.end)}function f(){return jv(this.stack.pop())}function c(){this.data.expectingFirstListItemValue=!0}function h(se){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function d(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=se}function v(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=se}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function p(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se.replace(/(\r?\n|\r)$/g,"")}function m(se){const fe=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=fe,Oe.identifier=Vr(this.sliceSerialize(se)).toLowerCase()}function y(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.title=se}function k(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.url=se}function _(se){const fe=this.stack[this.stack.length-1];if(!fe.depth){const Oe=this.sliceSerialize(se).length;fe.depth=Oe}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function C(se){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function P(se){const Oe=this.stack[this.stack.length-1].children;let ze=Oe[Oe.length-1];(!ze||ze.type!=="text")&&(ze=Ft(),ze.position={start:$i(se.start),end:void 0},Oe.push(ze)),this.stack.push(ze)}function S(se){const fe=this.stack.pop();fe.value+=this.sliceSerialize(se),fe.position.end=$i(se.end)}function F(se){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Oe=fe.children[fe.children.length-1];Oe.position.end=$i(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(P.call(this,se),S.call(this,se))}function z(){this.data.atHardBreak=!0}function ie(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function te(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function K(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function Q(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=fe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function Z(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=fe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function $(se){const fe=this.sliceSerialize(se),Oe=this.stack[this.stack.length-2];Oe.label=B5(fe),Oe.identifier=Vr(fe).toLowerCase()}function re(){const se=this.stack[this.stack.length-1],fe=this.resume(),Oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Oe.type==="link"){const ze=se.children;Oe.children=ze}else Oe.alt=fe}function I(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.url=se}function pe(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.title=se}function oe(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function be(se){const fe=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=fe,Oe.identifier=Vr(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function je(se){this.data.characterReferenceType=se.type}function Te(se){const fe=this.sliceSerialize(se),Oe=this.data.characterReferenceType;let ze;Oe?(ze=Dk(fe,Oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=Uv(fe);const Xe=this.stack[this.stack.length-1];Xe.value+=ze}function We(se){const fe=this.stack.pop();fe.position.end=$i(se.end)}function Me(se){S.call(this,se);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(se)}function Qe(se){S.call(this,se);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(se)}function Ae(){return{type:"blockquote",children:[]}}function Pe(){return{type:"code",lang:null,meta:null,value:""}}function qe(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xt(){return{type:"emphasis",children:[]}}function it(){return{type:"heading",depth:0,children:[]}}function Lt(){return{type:"break"}}function st(){return{type:"html",value:""}}function Rt(){return{type:"image",title:null,url:"",alt:null}}function tn(){return{type:"link",title:null,url:"",children:[]}}function St(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function Pt(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function dt(){return{type:"paragraph",children:[]}}function $e(){return{type:"strong",children:[]}}function Ft(){return{type:"text",value:""}}function Nn(){return{type:"thematicBreak"}}}function $i(t){return{line:t.line,column:t.column,offset:t.offset}}function oS(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?oS(t,r):Fj(t,r)}}function Fj(t,e){let n;for(n in e)if(aS.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Fx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+fl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+fl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+fl({start:e.start,end:e.end})+") is still open")}function Mj(t){const e=this;e.parser=n;function n(r){return Lj(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Bj(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function jj(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function zj(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function Uj(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function $j(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Wj(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=fo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let a,o=t.footnoteCounts.get(r);o===void 0?(o=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=s+1,o+=1,t.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function Hj(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Vj(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function lS(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function qj(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return lS(t,e);const i={src:fo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function Xj(t,e){const n={src:fo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Gj(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Yj(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return lS(t,e);const i={href:fo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Kj(t,e){const n={href:fo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Zj(t,e,n){const r=t.all(e),i=n?Qj(n):uS(e),s={},a=[];if(typeof e.checked=="boolean"){const f=r[0];let c;f&&f.type==="element"&&f.tagName==="p"?c=f:(c={type:"element",tagName:"p",properties:{},children:[]},r.unshift(c)),c.children.length>0&&c.children.unshift({type:"text",value:" "}),c.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const f=r[o];(i||o!==0||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?a.push(...f.children):a.push(f)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,u),t.applyData(e,u)}function Qj(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=uS(n[r])}return e}function uS(t){const e=t.spread;return e??t.children.length>1}function Jj(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function ez(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tz(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function nz(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rz(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=Xv(e.children[1]),l=Qk(e.children[e.children.length-1]);o&&l&&(a.position={start:o,end:l}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function iz(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:e.children.length;let l=-1;const u=[];for(;++l<o;){const c=e.children[l],h={},d=a?a[l]:void 0;d&&(h.align=d);let v={type:"element",tagName:s,properties:h,children:[]};c&&(v.children=t.all(c),t.patch(c,v),v=t.applyData(c,v)),u.push(v)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function sz(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Mx=9,Bx=32;function az(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(jx(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(jx(e.slice(i),i>0,!1)),s.join("")}function jx(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===Mx||s===Bx;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===Mx||s===Bx;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function oz(t,e){const n={type:"text",value:az(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function lz(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const uz={blockquote:Bj,break:jj,code:zj,delete:Uj,emphasis:$j,footnoteReference:Wj,heading:Hj,html:Vj,imageReference:qj,image:Xj,inlineCode:Gj,linkReference:Yj,link:Kj,listItem:Zj,list:Jj,paragraph:ez,root:tz,strong:nz,table:rz,tableCell:sz,tableRow:iz,text:oz,thematicBreak:lz,toml:Gu,yaml:Gu,definition:Gu,footnoteDefinition:Gu};function Gu(){}const cS=-1,Fd=0,dl=1,Mf=2,Zv=3,Qv=4,Jv=5,e0=6,fS=7,dS=8,zx=typeof self=="object"?self:globalThis,cz=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,a]=e[i];switch(s){case Fd:case cS:return n(a,i);case dl:{const o=n([],i);for(const l of a)o.push(r(l));return o}case Mf:{const o=n({},i);for(const[l,u]of a)o[r(l)]=r(u);return o}case Zv:return n(new Date(a),i);case Qv:{const{source:o,flags:l}=a;return n(new RegExp(o,l),i)}case Jv:{const o=n(new Map,i);for(const[l,u]of a)o.set(r(l),r(u));return o}case e0:{const o=n(new Set,i);for(const l of a)o.add(r(l));return o}case fS:{const{name:o,message:l}=a;return n(new zx[o](l),i)}case dS:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new zx[s](a),i)};return r},Ux=t=>cz(new Map,t)(0),fa="",{toString:fz}={},{keys:dz}=Object,Fo=t=>{const e=typeof t;if(e!=="object"||!t)return[Fd,e];const n=fz.call(t).slice(8,-1);switch(n){case"Array":return[dl,fa];case"Object":return[Mf,fa];case"Date":return[Zv,fa];case"RegExp":return[Qv,fa];case"Map":return[Jv,fa];case"Set":return[e0,fa];case"DataView":return[dl,n]}return n.includes("Array")?[dl,n]:n.includes("Error")?[fS,n]:[Mf,n]},Yu=([t,e])=>t===Fd&&(e==="function"||e==="symbol"),hz=(t,e,n,r)=>{const i=(a,o)=>{const l=r.push(a)-1;return n.set(o,l),l},s=a=>{if(n.has(a))return n.get(a);let[o,l]=Fo(a);switch(o){case Fd:{let f=a;switch(l){case"bigint":o=dS,f=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);f=null;break;case"undefined":return i([cS],a)}return i([o,f],a)}case dl:{if(l){let h=a;return l==="DataView"?h=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(a)),i([l,[...h]],a)}const f=[],c=i([o,f],a);for(const h of a)f.push(s(h));return c}case Mf:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const f=[],c=i([o,f],a);for(const h of dz(a))(t||!Yu(Fo(a[h])))&&f.push([s(h),s(a[h])]);return c}case Zv:return i([o,a.toISOString()],a);case Qv:{const{source:f,flags:c}=a;return i([o,{source:f,flags:c}],a)}case Jv:{const f=[],c=i([o,f],a);for(const[h,d]of a)(t||!(Yu(Fo(h))||Yu(Fo(d))))&&f.push([s(h),s(d)]);return c}case e0:{const f=[],c=i([o,f],a);for(const h of a)(t||!Yu(Fo(h)))&&f.push(s(h));return c}}const{message:u}=a;return i([o,{name:l,message:u}],a)};return s},$x=(t,{json:e,lossy:n}={})=>{const r=[];return hz(!(e||n),!!e,new Map,r)(t),r},Bf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Ux($x(t,e)):structuredClone(t):(t,e)=>Ux($x(t,e));function pz(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function mz(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function gz(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||pz,r=t.options.footnoteBackLabel||mz,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const f=t.all(u),c=String(u.identifier).toUpperCase(),h=fo(c.toLowerCase());let d=0;const v=[],w=t.footnoteCounts.get(c);for(;w!==void 0&&++d<=w;){v.length>0&&v.push({type:"text",value:" "});let m=typeof n=="string"?n:n(l,d);typeof m=="string"&&(m={type:"text",value:m}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(m)?m:[m]})}const g=f[f.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const m=g.children[g.children.length-1];m&&m.type==="text"?m.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...v)}else f.push(...v);const p={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(f,!0)};t.patch(u,p),o.push(p)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Bf(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const Um={}.hasOwnProperty,vz={};function yz(t,e){const n=e||vz,r=new Map,i=new Map,s=new Map,a={...uz,...n.handlers},o={all:u,applyData:xz,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:n,patch:wz,wrap:_z};return Bv(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const c=f.type==="definition"?r:i,h=String(f.identifier).toUpperCase();c.has(h)||c.set(h,f)}}),o;function l(f,c){const h=f.type,d=o.handlers[h];if(Um.call(o.handlers,h)&&d)return d(o,f,c);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in f){const{children:w,...g}=f,p=Bf(g);return p.children=o.all(f),p}return Bf(f)}return(o.options.unknownHandler||bz)(o,f,c)}function u(f){const c=[];if("children"in f){const h=f.children;let d=-1;for(;++d<h.length;){const v=o.one(h[d],f);if(v){if(d&&h[d-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=Wx(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=Wx(w.value))}Array.isArray(v)?c.push(...v):c.push(v)}}}return c}}function wz(t,e){t.position&&(e.position=zB(t))}function xz(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Bf(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function bz(t,e){const n=e.data||{},r="value"in e&&!(Um.call(n,"hProperties")||Um.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function _z(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Wx(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Hx(t,e){const n=yz(t,e),r=n.one(t,void 0),i=gz(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ez(t,e){return t&&"run"in t?async function(n,r){const i=Hx(n,{file:r,...e});await t.run(i,r)}:function(n,r){return Hx(n,{file:r,...t||e})}}function Vx(t){if(t)throw t}var Tc=Object.prototype.hasOwnProperty,hS=Object.prototype.toString,qx=Object.defineProperty,Xx=Object.getOwnPropertyDescriptor,Gx=function(e){return typeof Array.isArray=="function"?Array.isArray(e):hS.call(e)==="[object Array]"},Yx=function(e){if(!e||hS.call(e)!=="[object Object]")return!1;var n=Tc.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Tc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Tc.call(e,i)},Kx=function(e,n){qx&&n.name==="__proto__"?qx(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Zx=function(e,n){if(n==="__proto__")if(Tc.call(e,n)){if(Xx)return Xx(e,n).value}else return;return e[n]},kz=function t(){var e,n,r,i,s,a,o=arguments[0],l=1,u=arguments.length,f=!1;for(typeof o=="boolean"&&(f=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=Zx(o,n),i=Zx(e,n),o!==i&&(f&&i&&(Yx(i)||(s=Gx(i)))?(s?(s=!1,a=r&&Gx(r)?r:[]):a=r&&Yx(r)?r:{},Kx(o,{name:n,newValue:t(f,a,i)})):typeof i<"u"&&Kx(o,{name:n,newValue:i}));return o};const Zh=Gr(kz);function $m(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Sz(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(l,...u){const f=t[++s];let c=-1;if(l){a(l);return}for(;++c<i.length;)(u[c]===null||u[c]===void 0)&&(u[c]=i[c]);i=u,f?Cz(f,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Cz(t,e){let n;return r;function r(...a){const o=t.length>a.length;let l;o&&a.push(i);try{l=t.apply(this,a)}catch(u){const f=u;if(o&&n)throw f;return i(f)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(a,...o){n||(n=!0,e(a,...o))}function s(a){i(null,a)}}const ei={basename:Az,dirname:Dz,extname:Tz,join:Nz,sep:"/"};function Az(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');gu(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,o=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(t.codePointAt(i)===e.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function Dz(t){if(gu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Tz(t){gu(t);let e=t.length,n=-1,r=0,i=-1,s=0,a;for(;e--;){const o=t.codePointAt(e);if(o===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),o===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Nz(...t){let e=-1,n;for(;++e<t.length;)gu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Rz(n)}function Rz(t){gu(t);const e=t.codePointAt(0)===47;let n=Iz(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Iz(t,e){let n="",r=0,i=-1,s=0,a=-1,o,l;for(;++a<=t.length;){if(a<t.length)o=t.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function gu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Oz={cwd:Lz};function Lz(){return"/"}function Wm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Pz(t){if(typeof t=="string")t=new URL(t);else if(!Wm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Fz(t)}function Fz(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Qh=["history","path","basename","stem","extname","dirname"];class pS{constructor(e){let n;e?Wm(e)?n={path:e}:typeof e=="string"||Mz(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Oz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Qh.length;){const s=Qh[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Qh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ei.basename(this.path):void 0}set basename(e){ep(e,"basename"),Jh(e,"basename"),this.path=ei.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ei.dirname(this.path):void 0}set dirname(e){Qx(this.basename,"dirname"),this.path=ei.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ei.extname(this.path):void 0}set extname(e){if(Jh(e,"extname"),Qx(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ei.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Wm(e)&&(e=Pz(e)),ep(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ei.basename(this.path,this.extname):void 0}set stem(e){ep(e,"stem"),Jh(e,"stem"),this.path=ei.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Mn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Jh(t,e){if(t&&t.includes(ei.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ei.sep+"`")}function ep(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Qx(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Mz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Bz=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},jz={}.hasOwnProperty;class t0 extends Bz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Sz()}copy(){const e=new t0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Zh(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(rp("data",this.frozen),this.namespace[e]=n,this):jz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(rp("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Ku(e),r=this.parser||this.Parser;return tp("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),tp("process",this.parser||this.Parser),np("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=Ku(e),l=r.parse(o);r.run(l,o,function(f,c,h){if(f||!c||!h)return u(f);const d=c,v=r.stringify(d,h);$z(v)?h.value=v:h.result=v,u(f,h)});function u(f,c){f||!c?a(f):s?s(c):n(void 0,c)}}}processSync(e){let n=!1,r;return this.freeze(),tp("processSync",this.parser||this.Parser),np("processSync",this.compiler||this.Compiler),this.process(e,i),e1("processSync","process",n),r;function i(s,a){n=!0,Vx(s),r=a}}run(e,n,r){Jx(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const l=Ku(n);i.run(e,l,u);function u(f,c,h){const d=c||e;f?o(f):a?a(d):r(void 0,d,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),e1("runSync","run",r),i;function s(a,o){Vx(a),i=o,r=!0}}stringify(e,n){this.freeze();const r=Ku(n),i=this.compiler||this.Compiler;return np("stringify",i),Jx(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(rp("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...c]=u;l(f,c)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=Zh(!0,i.settings,u.settings))}function o(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const c=u[f];s(c)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,f){let c=-1,h=-1;for(;++c<r.length;)if(r[c][0]===u){h=c;break}if(h===-1)r.push([u,...f]);else if(f.length>0){let[d,...v]=f;const w=r[h][1];$m(w)&&$m(d)&&(d=Zh(!0,w,d)),r[h]=[u,d,...v]}}}}const zz=new t0().freeze();function tp(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function np(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function rp(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Jx(t){if(!$m(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function e1(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Ku(t){return Uz(t)?t:new pS(t)}function Uz(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function $z(t){return typeof t=="string"||Wz(t)}function Wz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Hz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",t1=[],n1={allowDangerousHtml:!0},Vz=/^(https?|ircs?|mailto|xmpp)$/i,qz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Xz(t){const e=Gz(t),n=Yz(t);return Kz(e.runSync(e.parse(n),n),t)}function Gz(t){const e=t.rehypePlugins||t1,n=t.remarkPlugins||t1,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...n1}:n1;return zz().use(Mj).use(n).use(Ez,r).use(e)}function Yz(t){const e=t.children||"",n=new pS;return typeof e=="string"&&(n.value=e),n}function Kz(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,a=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||Zz;for(const f of qz)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Hz+f.id,void 0);return Bv(t,u),VB(t,{Fragment:E.Fragment,components:i,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function u(f,c,h){if(f.type==="raw"&&h&&typeof c=="number")return a?h.children.splice(c,1):h.children[c]={type:"text",value:f.value},c;if(f.type==="element"){let d;for(d in Kh)if(Object.hasOwn(Kh,d)&&Object.hasOwn(f.properties,d)){const v=f.properties[d],w=Kh[d];(w===null||w.includes(f.tagName))&&(f.properties[d]=l(String(v||""),d,f))}}if(f.type==="element"){let d=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!d&&r&&typeof c=="number"&&(d=!r(f,c,h)),d&&h&&typeof c=="number")return o&&f.children?h.children.splice(c,1,...f.children):h.children.splice(c,1),c}}}function Zz(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Vz.test(t.slice(0,e))?t:""}const n0=t=>{const e=O.useMemo(()=>({strong:({children:n})=>E.jsx("strong",{className:"font-bold",children:n}),h1:({children:n})=>E.jsx("h1",{className:"my-4 border-b-2 border-gray-200 pb-2 text-2xl font-black text-gray-900",children:n}),h2:({children:n})=>E.jsx("h2",{className:"my-3 text-xl font-extrabold text-gray-800",children:n}),h3:({children:n})=>E.jsx("h3",{className:"my-2 text-lg font-bold text-gray-700",children:n}),p:({children:n})=>E.jsx("p",{className:"mb-3 leading-relaxed",children:n}),code:({children:n})=>E.jsx("code",{className:"rounded bg-gray-100 px-1 py-0.5 font-mono text-sm",children:n}),pre:({children:n})=>E.jsx("pre",{className:"mb-4 overflow-x-scroll rounded-md bg-gray-100 p-3 text-sm",children:n}),a:({href:n,children:r,...i})=>E.jsx("a",{href:n,className:"text-blue-600 underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...i,children:r}),blockquote:({children:n})=>E.jsx("blockquote",{className:"my-4 border-l-4 border-gray-300 pl-4 italic text-gray-700",children:n}),ul:({children:n})=>E.jsx("ul",{className:"mb-2 pl-4",children:n}),ol:({children:n})=>E.jsx("ol",{className:"mb-2 list-inside list-decimal space-y-1 pl-2",children:n}),li:({children:n})=>E.jsx("li",{className:"leading-relaxed",children:n})}),[]);return E.jsx(Xz,{remarkPlugins:[YM],components:e,children:t.content})},mS=({roleName:t,children:e})=>E.jsxs("div",{className:"py-2",children:[E.jsxs("header",{className:"mb-2 text-sm font-semibold text-gray-600",children:["ROLE: ",t]}),E.jsx("main",{className:"prose prose-sm w-full max-w-none",children:e})]}),Qz=t=>{const[e,n]=_t.useState(t.content),r=O.useCallback(()=>{if(!t.hightWords)return;const i=t.hightWords;if(!i||!t.content)return;const s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=new RegExp(`\\b(${s})\\b`,"gi"),o=t.content.replace(a,"**$1**");n(o)},[t.content,t.hightWords]);return O.useEffect(()=>{r()},[r]),E.jsx(mS,{roleName:"User",children:E.jsx(n0,{content:e})})};var gS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r1=_t.createContext&&_t.createContext(gS),Jz=["attr","size","title"];function e6(t,e){if(t==null)return{};var n=t6(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function t6(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jf(){return jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jf.apply(this,arguments)}function i1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i1(Object(n),!0).forEach(function(r){n6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n6(t,e,n){return e=r6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r6(t){var e=i6(t,"string");return typeof e=="symbol"?e:e+""}function i6(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vS(t){return t&&t.map((e,n)=>_t.createElement(e.tag,zf({key:n},e.attr),vS(e.child)))}function na(t){return e=>_t.createElement(s6,jf({attr:zf({},t.attr)},e),vS(t.child))}function s6(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=e6(t,Jz),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),_t.createElement("svg",jf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:zf(zf({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&_t.createElement("title",null,s),t.children)};return r1!==void 0?_t.createElement(r1.Consumer,null,n=>e(n)):e(gS)}function a6(t){return na({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},child:[]}]})(t)}function yS(t){return na({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"},child:[]}]})(t)}function o6(t){return na({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"},child:[]}]})(t)}function l6(t){return na({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"},child:[]}]})(t)}const u6=t=>E.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-gray-700",children:[E.jsx("span",{className:"font-medium",children:"Usage:"}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(yS,{}),E.jsx("span",{children:t.usage.promptTokens})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(a6,{}),E.jsx("span",{children:t.usage.completionTokens})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(o6,{}),E.jsx("span",{children:t.usage.totalTokens})]}),E.jsxs("div",{className:"flex items-center gap-1",children:["LLM:",E.jsx("span",{children:t.model})]}),E.jsxs("div",{className:"ml-auto flex gap-2",children:[E.jsx("button",{onClick:t.onRefresh,className:"rounded p-1 transition-colors hover:bg-gray-200","aria-label":"Refresh token usage",title:"Refresh token usage",children:E.jsx(N4,{className:"h-4 w-4 text-gray-600"})}),E.jsx("button",{onClick:t.onCopy,className:"rounded p-1 transition-colors hover:bg-gray-200","aria-label":"Copy token usage",title:t.copied?"Copied!":"Copy token usage",children:t.copied?E.jsx(L4,{className:"h-4 w-4 text-green-500"}):E.jsx(T4,{className:"h-4 w-4 text-gray-600"})})]})]}),c6=({reasoningContent:t,content:e})=>{const r="none",[i,s]=O.useState(!1),[a,o]=O.useState(!1),l=O.useRef(null),[u,f]=O.useState(r),[c,h]=O.useState(!0);O.useEffect(()=>{const g=l.current;if(!g)return;const p=m=>{m.propertyName==="max-height"&&!i&&f(r)};return g.addEventListener("transitionend",p),()=>g.removeEventListener("transitionend",p)},[i]);const d=O.useCallback(()=>{const g=l.current;if(!g){s(!0);return}const p=g.scrollHeight;f(`${p}px`),requestAnimationFrame(()=>{h(!1),s(!0),f("0px")})},[]),v=O.useCallback(()=>{const g=l.current;if(!g){s(!1);return}s(!1),h(!0),f("0px"),requestAnimationFrame(()=>{const p=g.scrollHeight;f(`${p}px`)})},[]);O.useEffect(()=>{e.trim().length>0&&!i&&!a&&(kt.info("The reasoning content is being folded."),d())},[e,a,i,d]);const w=O.useCallback(g=>{g.stopPropagation(),o(!0),i?v():d()},[i,v,d]);return E.jsx(E.Fragment,{children:t&&E.jsxs("div",{className:"mb-4 rounded-r-md border-l-4 border-gray-400 bg-gray-50",onClick:w,children:[E.jsxs("div",{className:"flex cursor-pointer items-center justify-between p-4 transition-colors","aria-expanded":!i,"aria-controls":"reasoning-content",children:[E.jsx("div",{className:"flex items-center",children:E.jsx("span",{className:"text-sm font-medium",children:"💭 Thinking process"})}),i?E.jsx(O4,{className:"h-4 w-4 text-gray-600"}):E.jsx(I4,{className:"h-4 w-4 text-gray-600"})]}),E.jsx("div",{id:"reasoning-content",ref:l,style:{maxHeight:u,opacity:c?1:0,transition:"max-height 800ms ease, opacity 800ms ease",overflow:"hidden"},children:E.jsx("div",{className:"px-4 pb-4",children:E.jsx("div",{className:"text-sm text-gray-700",children:E.jsx(n0,{content:t})})})})]})})},f6=({content:t,reasoningContent:e,usage:n,model:r})=>{const[i,s]=O.useState(!1),a=async()=>{if(n)try{await navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3),kt.info("Token usage copied to clipboard")}catch(l){kt.error("Failed to copy token usage",{error:l})}},o=()=>{kt.info("Refresh token usage requested")};return E.jsx(E.Fragment,{children:E.jsxs(mS,{roleName:"Agent",children:[E.jsx(c6,{reasoningContent:e,content:t}),E.jsx(n0,{content:t}),n&&E.jsx(u6,{usage:n,onRefresh:o,onCopy:a,copied:i,model:r})]})})};function Ze(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ne(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let wS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return wS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Hm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ye extends Error{}class Tn extends Ye{constructor(e,n,r,i){super(`${Tn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Md({message:r,cause:Vm(n)});const s=n==null?void 0:n.error;return e===400?new xS(e,s,r,i):e===401?new bS(e,s,r,i):e===403?new _S(e,s,r,i):e===404?new ES(e,s,r,i):e===409?new kS(e,s,r,i):e===422?new SS(e,s,r,i):e===429?new CS(e,s,r,i):e>=500?new AS(e,s,r,i):new Tn(e,s,r,i)}}class Ar extends Tn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Md extends Tn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class r0 extends Md{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xS extends Tn{}class bS extends Tn{}class _S extends Tn{}class ES extends Tn{}class kS extends Tn{}class SS extends Tn{}class CS extends Tn{}class AS extends Tn{}class DS extends Ye{constructor(){super("Could not parse response content as the length limit was reached")}}class TS extends Ye{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ho extends Error{constructor(e){super(e)}}const d6=/^[a-z][a-z0-9+.-]*:/i,h6=t=>d6.test(t);let Xn=t=>(Xn=Array.isArray,Xn(t)),s1=Xn;function NS(t){return typeof t!="object"?{}:t??{}}function p6(t){if(!t)return!0;for(const e in t)return!1;return!0}function m6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ip(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const g6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ye(`${t} must be an integer`);if(e<0)throw new Ye(`${t} must be a positive integer`);return e},v6=t=>{try{return JSON.parse(t)}catch{return}},vu=t=>new Promise(e=>setTimeout(e,t)),wa="5.15.0",y6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function w6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const x6=()=>{var n;const t=w6();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":o1(Deno.build.os),"X-Stainless-Arch":a1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":o1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":a1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=b6();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function b6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const a1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",o1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let l1;const _6=()=>l1??(l1=x6());function E6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function IS(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return RS({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function OS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function k6(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const S6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),LS="RFC3986",PS=t=>String(t),u1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:PS},C6="RFC1738";let qm=(t,e)=>(qm=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),qm(t,e));const Qr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),sp=1024,A6=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<s.length;o+=sp){const l=s.length>=sp?s.slice(o,o+sp):s,u=[];for(let f=0;f<l.length;++f){let c=l.charCodeAt(f);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===C6&&(c===40||c===41)){u[u.length]=l.charAt(f);continue}if(c<128){u[u.length]=Qr[c];continue}if(c<2048){u[u.length]=Qr[192|c>>6]+Qr[128|c&63];continue}if(c<55296||c>=57344){u[u.length]=Qr[224|c>>12]+Qr[128|c>>6&63]+Qr[128|c&63];continue}f+=1,c=65536+((c&1023)<<10|l.charCodeAt(f)&1023),u[u.length]=Qr[240|c>>18]+Qr[128|c>>12&63]+Qr[128|c>>6&63]+Qr[128|c&63]}a+=u.join("")}return a};function D6(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function c1(t,e){if(Xn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const FS={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},MS=function(t,e){Array.prototype.push.apply(t,Xn(e)?e:[e])};let f1;const fn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:A6,encodeValuesOnly:!1,format:LS,formatter:PS,indices:!1,serializeDate(t){return(f1??(f1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function T6(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const ap={};function BS(t,e,n,r,i,s,a,o,l,u,f,c,h,d,v,w,g,p){let m=t,y=p,k=0,_=!1;for(;(y=y.get(ap))!==void 0&&!_;){const S=y.get(t);if(k+=1,typeof S<"u"){if(S===k)throw new RangeError("Cyclic object value");_=!0}typeof y.get(ap)>"u"&&(k=0)}if(typeof u=="function"?m=u(e,m):m instanceof Date?m=h==null?void 0:h(m):n==="comma"&&Xn(m)&&(m=c1(m,function(S){return S instanceof Date?h==null?void 0:h(S):S})),m===null){if(s)return l&&!w?l(e,fn.encoder,g,"key",d):e;m=""}if(T6(m)||D6(m)){if(l){const S=w?e:l(e,fn.encoder,g,"key",d);return[(v==null?void 0:v(S))+"="+(v==null?void 0:v(l(m,fn.encoder,g,"value",d)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(m)))]}const x=[];if(typeof m>"u")return x;let C;if(n==="comma"&&Xn(m))w&&l&&(m=c1(m,l)),C=[{value:m.length>0?m.join(",")||null:void 0}];else if(Xn(u))C=u;else{const S=Object.keys(m);C=f?S.sort(f):S}const A=o?String(e).replace(/\./g,"%2E"):String(e),P=r&&Xn(m)&&m.length===1?A+"[]":A;if(i&&Xn(m)&&m.length===0)return P+"[]";for(let S=0;S<C.length;++S){const F=C[S],z=typeof F=="object"&&typeof F.value<"u"?F.value:m[F];if(a&&z===null)continue;const ie=c&&o?F.replace(/\./g,"%2E"):F,te=Xn(m)?typeof n=="function"?n(P,ie):P:P+(c?"."+ie:"["+ie+"]");p.set(t,k);const K=new WeakMap;K.set(ap,p),MS(x,BS(z,te,n,r,i,s,a,o,n==="comma"&&w&&Xn(m)?null:l,u,f,c,h,d,v,w,g,K))}return x}function N6(t=fn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||fn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=LS;if(typeof t.format<"u"){if(!qm(u1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=u1[n];let i=fn.filter;(typeof t.filter=="function"||Xn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in FS?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=fn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:fn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:fn.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:fn.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:fn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?fn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:fn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:fn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:fn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:fn.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:fn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:fn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:fn.strictNullHandling}}function R6(t,e={}){let n=t;const r=N6(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Xn(r.filter)&&(s=r.filter,i=s);const a=[];if(typeof n!="object"||n===null)return"";const o=FS[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let h=0;h<i.length;++h){const d=i[h];r.skipNulls&&n[d]===null||MS(a,BS(n[d],d,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const f=a.join(r.delimiter);let c=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),f.length>0?c+f:""}function I6(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let d1;function i0(t){let e;return(d1??(e=new globalThis.TextEncoder,d1=e.encode.bind(e)))(t)}let h1;function p1(t){let e;return(h1??(e=new globalThis.TextDecoder,h1=e.decode.bind(e)))(t)}var ar,or;class Bd{constructor(){ar.set(this,void 0),or.set(this,void 0),Ze(this,ar,new Uint8Array),Ze(this,or,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?i0(e):e;Ze(this,ar,I6([ne(this,ar,"f"),n]));const r=[];let i;for(;(i=O6(ne(this,ar,"f"),ne(this,or,"f")))!=null;){if(i.carriage&&ne(this,or,"f")==null){Ze(this,or,i.index);continue}if(ne(this,or,"f")!=null&&(i.index!==ne(this,or,"f")+1||i.carriage)){r.push(p1(ne(this,ar,"f").subarray(0,ne(this,or,"f")-1))),Ze(this,ar,ne(this,ar,"f").subarray(ne(this,or,"f"))),Ze(this,or,null);continue}const s=ne(this,or,"f")!==null?i.preceding-1:i.preceding,a=p1(ne(this,ar,"f").subarray(0,s));r.push(a),Ze(this,ar,ne(this,ar,"f").subarray(i.index)),Ze(this,or,null)}return r}flush(){return ne(this,ar,"f").length?this.decode(`
`):[]}}ar=new WeakMap,or=new WeakMap;Bd.NEWLINE_CHARS=new Set([`
`,"\r"]);Bd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function O6(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function L6(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Uf={off:0,error:200,warn:300,info:400,debug:500},m1=(t,e,n)=>{if(t){if(m6(Uf,t))return t;En(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Uf))}`)}};function Vo(){}function Zu(t,e,n){return!e||Uf[t]>Uf[n]?Vo:e[t].bind(e)}const P6={error:Vo,warn:Vo,info:Vo,debug:Vo};let g1=new WeakMap;function En(t){const e=t.logger,n=t.logLevel??"off";if(!e)return P6;const r=g1.get(e);if(r&&r[0]===n)return r[1];const i={error:Zu("error",e,n),warn:Zu("warn",e,n),info:Zu("info",e,n),debug:Zu("debug",e,n)};return g1.set(e,[n,i]),i}const Ds=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Mo;class ri{constructor(e,n,r){this.iterator=e,Mo.set(this,void 0),this.controller=n,Ze(this,Mo,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?En(r):console;async function*a(){if(i)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of F6(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(f){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),f}if(u&&u.error)throw new Tn(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(l.event=="error")throw new Tn(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}o=!0}catch(l){if(Hm(l))return;throw l}finally{o||n.abort()}}return new ri(a,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const o=new Bd,l=OS(e);for await(const u of l)for(const f of o.decode(u))yield f;for(const u of o.flush())yield u}async function*a(){if(i)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of s())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(Hm(l))return;throw l}finally{o||n.abort()}}return new ri(a,n,r)}[(Mo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),n.push(a)}return s.shift()}});return[new ri(()=>i(e),this.controller,ne(this,Mo,"f")),new ri(()=>i(n),this.controller,ne(this,Mo,"f"))]}toReadableStream(){const e=this;let n;return RS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const a=i0(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*F6(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ye("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ye("Attempted to iterate over a response with no body");const n=new B6,r=new Bd,i=OS(t.body);for await(const s of M6(i))for(const a of r.decode(s)){const o=n.decode(a);o&&(yield o)}for(const s of r.flush()){const a=n.decode(s);a&&(yield a)}}async function*M6(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?i0(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=L6(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class B6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=j6(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function j6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function jS(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,a=await(async()=>{var c;if(e.options.stream)return En(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ri.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(c=o==null?void 0:o.split(";")[0])==null?void 0:c.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const h=await n.json();return zS(h,n)}return await n.text()})();return En(t).debug(`[${r}] response parsed`,Ds({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}function zS(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var qo;class jd extends Promise{constructor(e,n,r=jS){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,qo.set(this,void 0),Ze(this,qo,e)}_thenUnwrap(e){return new jd(ne(this,qo,"f"),this.responsePromise,async(n,r)=>zS(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ne(this,qo,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}qo=new WeakMap;var Qu;class s0{constructor(e,n,r,i){Qu.set(this,void 0),Ze(this,Qu,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ye("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ne(this,Qu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Qu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class z6 extends jd{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await jS(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class zd extends s0{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class ln extends s0{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...NS(this.options.query),after:n}}:null}}class U6 extends s0{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...NS(this.options.query),after:e}}:null}}const US=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function hl(t,e,n){return US(),new File(t,e??"unknown_file",n)}function Nc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const $S=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Zs=async(t,e)=>({...t,body:await W6(t.body,e)}),v1=new WeakMap;function $6(t){const e=typeof t=="function"?t:t.fetch,n=v1.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return v1.set(e,r),r}const W6=async(t,e)=>{if(!await $6(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>Xm(n,r,i))),n},H6=t=>t instanceof Blob&&"name"in t,Xm=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,hl([await n.blob()],Nc(n)));else if($S(n))t.append(e,hl([await new Response(IS(n)).blob()],Nc(n)));else if(H6(n))t.append(e,n,Nc(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Xm(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Xm(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},WS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",V6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&WS(t),q6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function X6(t,e,n){if(US(),t=await t,V6(t))return t instanceof File?t:hl([await t.arrayBuffer()],t.name);if(q6(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),hl(await Gm(i),e,n)}const r=await Gm(t);if(e||(e=Nc(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return hl(r,e,n)}async function Gm(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(WS(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if($S(t))for await(const r of t)e.push(...await Gm(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${G6(t)}`)}return e}function G6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ke{constructor(e){this._client=e}}function HS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const y1=Object.freeze(Object.create(null)),Y6=(t=HS)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],a=n.reduce((f,c,h)=>{var w;/[?#]/.test(c)&&(i=!0);const d=r[h];let v=(i?encodeURIComponent:t)(""+d);return h!==r.length&&(d==null||typeof d=="object"&&d.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(d.hasOwnProperty??y1)??y1))==null?void 0:w.toString))&&(v=d+"",s.push({start:f.length+c.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),f+c+(h===r.length?"":v)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(o))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((f,c)=>f.start-c.start),s.length>0){let f=0;const c=s.reduce((h,d)=>{const v=" ".repeat(d.start-f),w="^".repeat(d.length);return f=d.start+d.length,h+v+w},"");throw new Ye(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${a}
${c}`)}return a},ke=Y6(HS);let VS=class extends Ke{list(e,n={},r){return this._client.getAPIList(ke`/chat/completions/${e}/messages`,ln,{query:n,...r})}};function $f(t){return t!==void 0&&"function"in t&&t.function!==void 0}function a0(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function yu(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function K6(t,e){return!e||!qS(e)?{...t,choices:t.choices.map(n=>(XS(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:o0(t,e)}function o0(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new DS;if(r.finish_reason==="content_filter")throw new TS;return XS(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>Q6(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Z6(e,r.message.content):null}}});return{...t,choices:n}}function Z6(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Q6(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return $f(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:yu(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function J6(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return $f(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return $f(n)&&(yu(n)||(n==null?void 0:n.function.strict)||!1)}function qS(t){var e;return a0(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>yu(n)||n.type==="function"&&n.function.strict===!0))??!1}function XS(t){for(const e of t||[])if(e.type!=="function")throw new Ye(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function e8(t){for(const e of t??[]){if(e.type!=="function")throw new Ye(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ye(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Wf=t=>(t==null?void 0:t.role)==="assistant",GS=t=>(t==null?void 0:t.role)==="tool";var Ym,Rc,Ic,Xo,Go,Oc,Yo,vi,Ko,Hf,Vf,xa,YS;class l0{constructor(){Ym.add(this),this.controller=new AbortController,Rc.set(this,void 0),Ic.set(this,()=>{}),Xo.set(this,()=>{}),Go.set(this,void 0),Oc.set(this,()=>{}),Yo.set(this,()=>{}),vi.set(this,{}),Ko.set(this,!1),Hf.set(this,!1),Vf.set(this,!1),xa.set(this,!1),Ze(this,Rc,new Promise((e,n)=>{Ze(this,Ic,e,"f"),Ze(this,Xo,n,"f")})),Ze(this,Go,new Promise((e,n)=>{Ze(this,Oc,e,"f"),Ze(this,Yo,n,"f")})),ne(this,Rc,"f").catch(()=>{}),ne(this,Go,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ne(this,Ym,"m",YS).bind(this))},0)}_connected(){this.ended||(ne(this,Ic,"f").call(this),this._emit("connect"))}get ended(){return ne(this,Ko,"f")}get errored(){return ne(this,Hf,"f")}get aborted(){return ne(this,Vf,"f")}abort(){this.controller.abort()}on(e,n){return(ne(this,vi,"f")[e]||(ne(this,vi,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ne(this,vi,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(ne(this,vi,"f")[e]||(ne(this,vi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ze(this,xa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ze(this,xa,!0),await ne(this,Go,"f")}_emit(e,...n){if(ne(this,Ko,"f"))return;e==="end"&&(Ze(this,Ko,!0),ne(this,Oc,"f").call(this));const r=ne(this,vi,"f")[e];if(r&&(ne(this,vi,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!ne(this,xa,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ne(this,Xo,"f").call(this,i),ne(this,Yo,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!ne(this,xa,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ne(this,Xo,"f").call(this,i),ne(this,Yo,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Rc=new WeakMap,Ic=new WeakMap,Xo=new WeakMap,Go=new WeakMap,Oc=new WeakMap,Yo=new WeakMap,vi=new WeakMap,Ko=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,xa=new WeakMap,Ym=new WeakSet,YS=function(e){if(Ze(this,Hf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Ar),e instanceof Ar)return Ze(this,Vf,!0),this._emit("abort",e);if(e instanceof Ye)return this._emit("error",e);if(e instanceof Error){const n=new Ye(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ye(String(e)))};function t8(t){return typeof t.parse=="function"}var Bn,Km,qf,Zm,Qm,Jm,KS,ZS;const n8=10;class QS extends l0{constructor(){super(...arguments),Bn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),GS(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Wf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ne(this,Bn,"m",Km).call(this)}async finalMessage(){return await this.done(),ne(this,Bn,"m",qf).call(this)}async finalFunctionToolCall(){return await this.done(),ne(this,Bn,"m",Zm).call(this)}async finalFunctionToolCallResult(){return await this.done(),ne(this,Bn,"m",Qm).call(this)}async totalUsage(){return await this.done(),ne(this,Bn,"m",Jm).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ne(this,Bn,"m",qf).call(this);n&&this._emit("finalMessage",n);const r=ne(this,Bn,"m",Km).call(this);r&&this._emit("finalContent",r);const i=ne(this,Bn,"m",Zm).call(this);i&&this._emit("finalFunctionToolCall",i);const s=ne(this,Bn,"m",Qm).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",ne(this,Bn,"m",Jm).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ne(this,Bn,"m",KS).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(o0(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var d,v,w;const i="tool",{tool_choice:s="auto",stream:a,...o}=n,l=typeof s!="string"&&s.type==="function"&&((d=s==null?void 0:s.function)==null?void 0:d.name),{maxChatCompletions:u=n8}=r||{},f=n.tools.map(g=>{if(yu(g)){if(!g.$callback)throw new Ye("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),c={};for(const g of f)g.type==="function"&&(c[g.function.name||g.function.function.name]=g.function);const h="tools"in n?f.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<u;++g){const m=(v=(await this._createChatCompletion(e,{...o,tool_choice:s,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!m)throw new Ye("missing message in ChatCompletion response");if(!((w=m.tool_calls)!=null&&w.length))return;for(const y of m.tool_calls){if(y.type!=="function")continue;const k=y.id,{name:_,arguments:x}=y.function,C=c[_];if(C){if(l&&l!==_){const F=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:k,content:F});continue}}else{const F=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(c).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:k,content:F});continue}let A;try{A=t8(C)?await C.parse(x):x}catch(F){const z=F instanceof Error?F.message:String(F);this._addMessage({role:i,tool_call_id:k,content:z});continue}const P=await C.function(A,this),S=ne(this,Bn,"m",ZS).call(this,P);if(this._addMessage({role:i,tool_call_id:k,content:S}),l)return}}}}Bn=new WeakSet,Km=function(){return ne(this,Bn,"m",qf).call(this).content??null},qf=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Wf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ye("stream ended without producing a ChatCompletionMessage with role=assistant")},Zm=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Wf(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},Qm=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(GS(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},Jm=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},KS=function(e){if(e.n!=null&&e.n>1)throw new Ye("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ZS=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class u0 extends QS{static runTools(e,n,r){const i=new u0,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Wf(e)&&e.content&&this._emit("content",e.content)}}const JS=1,eC=2,tC=4,nC=8,rC=16,iC=32,sC=64,aC=128,oC=256,lC=aC|oC,uC=rC|iC|lC|sC,cC=JS|eC|uC,fC=tC|nC,r8=cC|fC,mn={STR:JS,NUM:eC,ARR:tC,OBJ:nC,NULL:rC,BOOL:iC,NAN:sC,INFINITY:aC,MINUS_INFINITY:oC,INF:lC,SPECIAL:uC,ATOM:cC,COLLECTION:fC,ALL:r8};class i8 extends Error{}class s8 extends Error{}function a8(t,e=mn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return o8(t.trim(),e)}const o8=(t,e)=>{const n=t.length;let r=0;const i=h=>{throw new i8(`${h} at position ${r}`)},s=h=>{throw new s8(`${h} at position ${r}`)},a=()=>(c(),r>=n&&i("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||mn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||mn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||mn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||mn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||mn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||mn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),o=()=>{const h=r;let d=!1;for(r++;r<n&&(t[r]!=='"'||d&&t[r-1]==="\\");)d=t[r]==="\\"?!d:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(h,++r-Number(d)))}catch(v){s(String(v))}else if(mn.STR&e)try{return JSON.parse(t.substring(h,r-Number(d))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,c();const h={};try{for(;t[r]!=="}";){if(c(),r>=n&&mn.OBJ&e)return h;const d=o();c(),r++;try{const v=a();Object.defineProperty(h,d,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(mn.OBJ&e)return h;throw v}c(),t[r]===","&&r++}}catch{if(mn.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},u=()=>{r++;const h=[];try{for(;t[r]!=="]";)h.push(a()),c(),t[r]===","&&r++}catch{if(mn.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},f=()=>{if(r===0){t==="-"&&mn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(d){if(mn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(d))}}const h=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(mn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(h,r))}catch{t.substring(h,r)==="-"&&mn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(v){s(String(v))}}},c=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},w1=t=>a8(t,mn.ALL^mn.NUM);var cn,gi,da,Wi,op,Ju,lp,up,cp,ec,fp,x1;class Gl extends QS{constructor(e){super(),cn.add(this),gi.set(this,void 0),da.set(this,void 0),Wi.set(this,void 0),Ze(this,gi,e),Ze(this,da,[])}get currentChatCompletionSnapshot(){return ne(this,Wi,"f")}static fromReadableStream(e){const n=new Gl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Gl(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ne(this,cn,"m",op).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)ne(this,cn,"m",lp).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Ar;return this._addChatCompletion(ne(this,cn,"m",ec).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ne(this,cn,"m",op).call(this),this._connected();const i=ri.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(ne(this,cn,"m",ec).call(this)),ne(this,cn,"m",lp).call(this,o),s=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new Ar;return this._addChatCompletion(ne(this,cn,"m",ec).call(this))}[(gi=new WeakMap,da=new WeakMap,Wi=new WeakMap,cn=new WeakSet,op=function(){this.ended||Ze(this,Wi,void 0)},Ju=function(n){let r=ne(this,da,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ne(this,da,"f")[n.index]=r,r)},lp=function(n){var i,s,a,o,l,u,f,c,h,d,v,w,g,p,m;if(this.ended)return;const r=ne(this,cn,"m",x1).call(this,n);this._emit("chunk",n,r);for(const y of n.choices){const k=r.choices[y.index];y.delta.content!=null&&((i=k.message)==null?void 0:i.role)==="assistant"&&((s=k.message)!=null&&s.content)&&(this._emit("content",y.delta.content,k.message.content),this._emit("content.delta",{delta:y.delta.content,snapshot:k.message.content,parsed:k.message.parsed})),y.delta.refusal!=null&&((a=k.message)==null?void 0:a.role)==="assistant"&&((o=k.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:y.delta.refusal,snapshot:k.message.refusal}),((l=y.logprobs)==null?void 0:l.content)!=null&&((u=k.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=y.logprobs)==null?void 0:f.content,snapshot:((c=k.logprobs)==null?void 0:c.content)??[]}),((h=y.logprobs)==null?void 0:h.refusal)!=null&&((d=k.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=y.logprobs)==null?void 0:v.refusal,snapshot:((w=k.logprobs)==null?void 0:w.refusal)??[]});const _=ne(this,cn,"m",Ju).call(this,k);k.finish_reason&&(ne(this,cn,"m",cp).call(this,k),_.current_tool_call_index!=null&&ne(this,cn,"m",up).call(this,k,_.current_tool_call_index));for(const x of y.delta.tool_calls??[])_.current_tool_call_index!==x.index&&(ne(this,cn,"m",cp).call(this,k),_.current_tool_call_index!=null&&ne(this,cn,"m",up).call(this,k,_.current_tool_call_index)),_.current_tool_call_index=x.index;for(const x of y.delta.tool_calls??[]){const C=(g=k.message.tool_calls)==null?void 0:g[x.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(p=C.function)==null?void 0:p.name,index:x.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((m=x.function)==null?void 0:m.arguments)??""}):(C==null||C.type,void 0))}}},up=function(n,r){var a,o,l;if(ne(this,cn,"m",Ju).call(this,n).done_tool_calls.has(r))return;const s=(a=n.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(o=ne(this,gi,"f"))==null?void 0:o.tools)==null?void 0:l.find(f=>$f(f)&&f.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:yu(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},cp=function(n){var i,s;const r=ne(this,cn,"m",Ju).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=ne(this,cn,"m",fp).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ec=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const n=ne(this,Wi,"f");if(!n)throw new Ye("request ended without sending any chunks");return Ze(this,Wi,void 0),Ze(this,da,[]),l8(n,ne(this,gi,"f"))},fp=function(){var r;const n=(r=ne(this,gi,"f"))==null?void 0:r.response_format;return a0(n)?n:null},x1=function(n){var r,i,s,a;let o=ne(this,Wi,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=Ze(this,Wi,{...u,choices:[]});for(const{delta:f,finish_reason:c,index:h,logprobs:d=null,...v}of n.choices){let w=o.choices[h];if(w||(w=o.choices[h]={finish_reason:c,index:h,message:{},logprobs:d,...v}),d)if(!w.logprobs)w.logprobs=Object.assign({},d);else{const{content:x,refusal:C,...A}=d;Object.assign(w.logprobs,A),x&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...x)),C&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...C))}if(c&&(w.finish_reason=c,ne(this,gi,"f")&&qS(ne(this,gi,"f")))){if(c==="length")throw new DS;if(c==="content_filter")throw new TS}if(Object.assign(w,v),!f)continue;const{content:g,refusal:p,function_call:m,role:y,tool_calls:k,..._}=f;if(Object.assign(w.message,_),p&&(w.message.refusal=(w.message.refusal||"")+p),y&&(w.message.role=y),m&&(w.message.function_call?(m.name&&(w.message.function_call.name=m.name),m.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=m.arguments)):w.message.function_call=m),g&&(w.message.content=(w.message.content||"")+g,!w.message.refusal&&ne(this,cn,"m",fp).call(this)&&(w.message.parsed=w1(w.message.content))),k){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:x,id:C,type:A,function:P,...S}of k){const F=(a=w.message.tool_calls)[x]??(a[x]={});Object.assign(F,S),C&&(F.id=C),A&&(F.type=A),P&&(F.function??(F.function={name:P.name??"",arguments:""})),P!=null&&P.name&&(F.function.name=P.name),P!=null&&P.arguments&&(F.function.arguments+=P.arguments,J6(ne(this,gi,"f"),F)&&(F.function.parsed_arguments=w1(F.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ri(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function l8(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:u,finish_reason:f,index:c,logprobs:h,...d})=>{if(!f)throw new Ye(`missing finish_reason for choice ${c}`);const{content:v=null,function_call:w,tool_calls:g,...p}=u,m=u.role;if(!m)throw new Ye(`missing role for choice ${c}`);if(w){const{arguments:y,name:k}=w;if(y==null)throw new Ye(`missing function_call.arguments for choice ${c}`);if(!k)throw new Ye(`missing function_call.name for choice ${c}`);return{...d,message:{content:v,function_call:{arguments:y,name:k},role:m,refusal:u.refusal??null},finish_reason:f,index:c,logprobs:h}}return g?{...d,index:c,finish_reason:f,logprobs:h,message:{...p,role:m,content:v,refusal:u.refusal??null,tool_calls:g.map((y,k)=>{const{function:_,type:x,id:C,...A}=y,{arguments:P,name:S,...F}=_||{};if(C==null)throw new Ye(`missing choices[${c}].tool_calls[${k}].id
${tc(t)}`);if(x==null)throw new Ye(`missing choices[${c}].tool_calls[${k}].type
${tc(t)}`);if(S==null)throw new Ye(`missing choices[${c}].tool_calls[${k}].function.name
${tc(t)}`);if(P==null)throw new Ye(`missing choices[${c}].tool_calls[${k}].function.arguments
${tc(t)}`);return{...A,id:C,type:x,function:{...F,name:S,arguments:P}}})}}:{...d,message:{...p,content:v,role:m,refusal:u.refusal??null},finish_reason:f,index:c,logprobs:h}}),created:i,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return K6(l,e)}function tc(t){return JSON.stringify(t)}class Xf extends Gl{static fromReadableStream(e){const n=new Xf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Xf(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let c0=class extends Ke{constructor(){super(...arguments),this.messages=new VS(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ke`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(ke`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",ln,{query:e,...n})}delete(e,n){return this._client.delete(ke`/chat/completions/${e}`,n)}parse(e,n){return e8(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>o0(r,e))}runTools(e,n){return e.stream?Xf.runTools(this._client,e,n):u0.runTools(this._client,e,n)}stream(e,n){return Gl.createChatCompletion(this._client,e,n)}};c0.Messages=VS;class f0 extends Ke{constructor(){super(...arguments),this.completions=new c0(this._client)}}f0.Completions=c0;const dC=Symbol("brand.privateNullableHeaders");function*u8(t){if(!t)return;if(dC in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():s1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=s1(r[1])?r[1]:[r[1]];let a=!1;for(const o of s)o!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,o])}}const Ue=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,a]of u8(r)){const o=s.toLowerCase();i.has(o)||(e.delete(s),i.add(o)),a===null?(e.delete(s),n.add(o)):(e.append(s,a),n.delete(o))}}return{[dC]:!0,values:e,nulls:n}};class hC extends Ke{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ue([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class pC extends Ke{create(e,n){return this._client.post("/audio/transcriptions",Zs({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class mC extends Ke{create(e,n){return this._client.post("/audio/translations",Zs({body:e,...n,__metadata:{model:e.model}},this._client))}}class wu extends Ke{constructor(){super(...arguments),this.transcriptions=new pC(this._client),this.translations=new mC(this._client),this.speech=new hC(this._client)}}wu.Transcriptions=pC;wu.Translations=mC;wu.Speech=hC;class gC extends Ke{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",ln,{query:e,...n})}cancel(e,n){return this._client.post(ke`/batches/${e}/cancel`,n)}}class vC extends Ke{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ke`/assistants/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ke`/assistants/${e}`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",ln,{query:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ke`/assistants/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class yC extends Ke{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class wC extends Ke{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class Ud extends Ke{constructor(){super(...arguments),this.sessions=new yC(this._client),this.transcriptionSessions=new wC(this._client)}}Ud.Sessions=yC;Ud.TranscriptionSessions=wC;class xC extends Ke{create(e,n,r){return this._client.post(ke`/threads/${e}/messages`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(ke`/threads/${i}/messages/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ke`/threads/${i}/messages/${e}`,{body:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ke`/threads/${e}/messages`,ln,{query:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(ke`/threads/${i}/messages/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class bC extends Ke{retrieve(e,n,r){const{thread_id:i,run_id:s,...a}=n;return this._client.get(ke`/threads/${i}/runs/${s}/steps/${e}`,{query:a,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(ke`/threads/${i}/runs/${e}/steps`,ln,{query:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const c8=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var dp={};const ha=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=dp==null?void 0:dp[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var kn,Ms,eg,ti,Lc,Fr,Bs,Pa,Is,Gf,lr,Pc,Fc,pl,Zo,Qo,b1,_1,E1,k1,S1,C1,A1;class ml extends l0{constructor(){super(...arguments),kn.add(this),eg.set(this,[]),ti.set(this,{}),Lc.set(this,{}),Fr.set(this,void 0),Bs.set(this,void 0),Pa.set(this,void 0),Is.set(this,void 0),Gf.set(this,void 0),lr.set(this,void 0),Pc.set(this,void 0),Fc.set(this,void 0),pl.set(this,void 0)}[(eg=new WeakMap,ti=new WeakMap,Lc=new WeakMap,Fr=new WeakMap,Bs=new WeakMap,Pa=new WeakMap,Is=new WeakMap,Gf=new WeakMap,lr=new WeakMap,Pc=new WeakMap,Fc=new WeakMap,pl=new WeakMap,kn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ms;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=ri.fromReadableStream(e,this.controller);for await(const a of i)ne(this,kn,"m",Zo).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new Ar;return this._addRun(ne(this,kn,"m",Qo).call(this))}toReadableStream(){return new ri(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new Ms;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.submitToolOutputs(n,a,{...i,signal:this.controller.signal});this._connected();for await(const u of o)ne(this,kn,"m",Zo).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Ar;return this._addRun(ne(this,kn,"m",Qo).call(this))}static createThreadAssistantStream(e,n,r){const i=new Ms;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Ms;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return ne(this,Pc,"f")}currentRun(){return ne(this,Fc,"f")}currentMessageSnapshot(){return ne(this,Fr,"f")}currentRunStepSnapshot(){return ne(this,pl,"f")}async finalRunSteps(){return await this.done(),Object.values(ne(this,ti,"f"))}async finalMessages(){return await this.done(),Object.values(ne(this,Lc,"f"))}async finalRun(){if(await this.done(),!ne(this,Bs,"f"))throw Error("Final run was not received.");return ne(this,Bs,"f")}async _createThreadAssistantStream(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},a=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of a)ne(this,kn,"m",Zo).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Ar;return this._addRun(ne(this,kn,"m",Qo).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const u of o)ne(this,kn,"m",Zo).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Ar;return this._addRun(ne(this,kn,"m",Qo).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(ip(s)&&ip(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...i);continue}for(const a of i){if(!ip(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=s[o];l==null?s.push(a):s[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Ms=ml,Zo=function(e){if(!this.ended)switch(Ze(this,Pc,e),ne(this,kn,"m",E1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ne(this,kn,"m",A1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ne(this,kn,"m",_1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ne(this,kn,"m",b1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Qo=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");if(!ne(this,Bs,"f"))throw Error("Final run has not been received");return ne(this,Bs,"f")},b1=function(e){const[n,r]=ne(this,kn,"m",S1).call(this,e,ne(this,Fr,"f"));Ze(this,Fr,n),ne(this,Lc,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=ne(this,Pa,"f")){if(ne(this,Is,"f"))switch(ne(this,Is,"f").type){case"text":this._emit("textDone",ne(this,Is,"f").text,ne(this,Fr,"f"));break;case"image_file":this._emit("imageFileDone",ne(this,Is,"f").image_file,ne(this,Fr,"f"));break}Ze(this,Pa,i.index)}Ze(this,Is,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ne(this,Pa,"f")!==void 0){const i=e.data.content[ne(this,Pa,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,ne(this,Fr,"f"));break;case"text":this._emit("textDone",i.text,ne(this,Fr,"f"));break}}ne(this,Fr,"f")&&this._emit("messageDone",e.data),Ze(this,Fr,void 0)}},_1=function(e){const n=ne(this,kn,"m",k1).call(this,e);switch(Ze(this,pl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==ne(this,Gf,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(ne(this,lr,"f")&&this._emit("toolCallDone",ne(this,lr,"f")),Ze(this,Gf,s.index),Ze(this,lr,n.step_details.tool_calls[s.index]),ne(this,lr,"f")&&this._emit("toolCallCreated",ne(this,lr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ze(this,pl,void 0),e.data.step_details.type=="tool_calls"&&ne(this,lr,"f")&&(this._emit("toolCallDone",ne(this,lr,"f")),Ze(this,lr,void 0)),this._emit("runStepDone",e.data,n);break}},E1=function(e){ne(this,eg,"f").push(e),this._emit("event",e)},k1=function(e){switch(e.event){case"thread.run.step.created":return ne(this,ti,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ne(this,ti,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Ms.accumulateDelta(n,r.delta);ne(this,ti,"f")[e.data.id]=i}return ne(this,ti,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ne(this,ti,"f")[e.data.id]=e.data;break}if(ne(this,ti,"f")[e.data.id])return ne(this,ti,"f")[e.data.id];throw new Error("No snapshot available")},S1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let a=n.content[s.index];n.content[s.index]=ne(this,kn,"m",C1).call(this,s,a)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},C1=function(e,n){return Ms.accumulateDelta(n,e)},A1=function(e){switch(Ze(this,Fc,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ze(this,Bs,e.data),ne(this,lr,"f")&&(this._emit("toolCallDone",ne(this,lr,"f")),Ze(this,lr,void 0));break}};let d0=class extends Ke{constructor(){super(...arguments),this.steps=new bC(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(ke`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(ke`/threads/${i}/runs/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ke`/threads/${i}/runs/${e}`,{body:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ke`/threads/${e}/runs`,ln,{query:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(ke`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return ml.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=Ue([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const f=parseInt(u);isNaN(f)||(l=f)}}await vu(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return ml.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ke`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return ml.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};d0.Steps=bC;class $d extends Ke{constructor(){super(...arguments),this.runs=new d0(this._client),this.messages=new xC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ke`/threads/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ke`/threads/${e}`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(ke`/threads/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return ml.createThreadAssistantStream(e,this._client.beta.threads,n)}}$d.Runs=d0;$d.Messages=xC;class xu extends Ke{constructor(){super(...arguments),this.realtime=new Ud(this._client),this.assistants=new vC(this._client),this.threads=new $d(this._client)}}xu.Realtime=Ud;xu.Assistants=vC;xu.Threads=$d;class _C extends Ke{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class EC extends Ke{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(ke`/containers/${i}/files/${e}/content`,{...r,headers:Ue([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let h0=class extends Ke{constructor(){super(...arguments),this.content=new EC(this._client)}create(e,n,r){return this._client.post(ke`/containers/${e}/files`,Zs({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(ke`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ke`/containers/${e}/files`,ln,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(ke`/containers/${i}/files/${e}`,{...r,headers:Ue([{Accept:"*/*"},r==null?void 0:r.headers])})}};h0.Content=EC;class p0 extends Ke{constructor(){super(...arguments),this.files=new h0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",ln,{query:e,...n})}delete(e,n){return this._client.delete(ke`/containers/${e}`,{...n,headers:Ue([{Accept:"*/*"},n==null?void 0:n.headers])})}}p0.Files=h0;class kC extends Ke{create(e,n,r){const{include:i,...s}=n;return this._client.post(ke`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(ke`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(ke`/conversations/${e}/items`,U6,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(ke`/conversations/${i}/items/${e}`,r)}}class m0 extends Ke{constructor(){super(...arguments),this.items=new kC(this._client)}create(e,n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/conversations/${e}`,n)}update(e,n,r){return this._client.post(ke`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(ke`/conversations/${e}`,n)}}m0.Items=kC;class SC extends Ke{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&En(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(En(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=c8(l)}),a)))}}class CC extends Ke{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(ke`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(ke`/evals/${i}/runs/${e}/output_items`,ln,{query:s,...r})}}class g0 extends Ke{constructor(){super(...arguments),this.outputItems=new CC(this._client)}create(e,n,r){return this._client.post(ke`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(ke`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ke`/evals/${e}/runs`,ln,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(ke`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(ke`/evals/${i}/runs/${e}`,r)}}g0.OutputItems=CC;class v0 extends Ke{constructor(){super(...arguments),this.runs=new g0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/evals/${e}`,n)}update(e,n,r){return this._client.post(ke`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",ln,{query:e,...n})}delete(e,n){return this._client.delete(ke`/evals/${e}`,n)}}v0.Runs=g0;let AC=class extends Ke{create(e,n){return this._client.post("/files",Zs({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ke`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",ln,{query:e,...n})}delete(e,n){return this._client.delete(ke`/files/${e}`,n)}content(e,n){return this._client.get(ke`/files/${e}/content`,{...n,headers:Ue([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await vu(n),a=await this.retrieve(e),Date.now()-s>r)throw new r0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class DC extends Ke{}let TC=class extends Ke{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class y0 extends Ke{constructor(){super(...arguments),this.graders=new TC(this._client)}}y0.Graders=TC;class NC extends Ke{create(e,n,r){return this._client.getAPIList(ke`/fine_tuning/checkpoints/${e}/permissions`,zd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(ke`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(ke`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let w0=class extends Ke{constructor(){super(...arguments),this.permissions=new NC(this._client)}};w0.Permissions=NC;class RC extends Ke{list(e,n={},r){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/checkpoints`,ln,{query:n,...r})}}class x0 extends Ke{constructor(){super(...arguments),this.checkpoints=new RC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",ln,{query:e,...n})}cancel(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/events`,ln,{query:n,...r})}pause(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/resume`,n)}}x0.Checkpoints=RC;class po extends Ke{constructor(){super(...arguments),this.methods=new DC(this._client),this.jobs=new x0(this._client),this.checkpoints=new w0(this._client),this.alpha=new y0(this._client)}}po.Methods=DC;po.Jobs=x0;po.Checkpoints=w0;po.Alpha=y0;class IC extends Ke{}class b0 extends Ke{constructor(){super(...arguments),this.graderModels=new IC(this._client)}}b0.GraderModels=IC;class OC extends Ke{createVariation(e,n){return this._client.post("/images/variations",Zs({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Zs({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class LC extends Ke{retrieve(e,n){return this._client.get(ke`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",zd,e)}delete(e,n){return this._client.delete(ke`/models/${e}`,n)}}class PC extends Ke{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function f8(t,e){return!e||!h8(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:FC(t,e)}function FC(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:g8(e,i)};if(i.type==="message"){const s=i.content.map(a=>a.type==="output_text"?{...a,parsed:d8(e,a.text)}:a);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||tg(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function d8(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function h8(t){var e;return!!a0((e=t.text)==null?void 0:e.format)}function p8(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function m8(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function g8(t,e){const n=m8(t.tools??[],e.name);return{...e,...e,parsed_arguments:p8(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function tg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var pa,nc,Hi,rc,D1,T1,N1,R1;class _0 extends l0{constructor(e){super(),pa.add(this),nc.set(this,void 0),Hi.set(this,void 0),rc.set(this,void 0),Ze(this,nc,e)}static createResponse(e,n,r){const i=new _0(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ne(this,pa,"m",D1).call(this);let s,a=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)ne(this,pa,"m",T1).call(this,l,a);if((o=s.controller.signal)!=null&&o.aborted)throw new Ar;return ne(this,pa,"m",N1).call(this)}[(nc=new WeakMap,Hi=new WeakMap,rc=new WeakMap,pa=new WeakSet,D1=function(){this.ended||Ze(this,Hi,void 0)},T1=function(n,r){if(this.ended)return;const i=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},s=ne(this,pa,"m",R1).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new Ye(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new Ye(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${o.type}`);i("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new Ye(`missing output at index ${n.output_index}`);a.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:i(n.type,n);break}},N1=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const n=ne(this,Hi,"f");if(!n)throw new Ye("request ended without sending any events");Ze(this,Hi,void 0);const r=v8(n,ne(this,nc,"f"));return Ze(this,rc,r),r},R1=function(n){let r=ne(this,Hi,"f");if(!r){if(n.type!=="response.created")throw new Ye(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ze(this,Hi,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Ye(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Ye(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new Ye(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Ye(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{Ze(this,Hi,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ne(this,rc,"f");if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}}function v8(t,e){return f8(t,e)}class MC extends Ke{list(e,n={},r){return this._client.getAPIList(ke`/responses/${e}/input_items`,ln,{query:n,...r})}}class E0 extends Ke{constructor(){super(...arguments),this.inputItems=new MC(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&tg(r),r))}retrieve(e,n={},r){return this._client.get(ke`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&tg(i),i))}delete(e,n){return this._client.delete(ke`/responses/${e}`,{...n,headers:Ue([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>FC(r,e))}stream(e,n){return _0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ke`/responses/${e}/cancel`,n)}}E0.InputItems=MC;class BC extends Ke{create(e,n,r){return this._client.post(ke`/uploads/${e}/parts`,Zs({body:n,...r},this._client))}}class k0 extends Ke{constructor(){super(...arguments),this.parts=new BC(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ke`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(ke`/uploads/${e}/complete`,{body:n,...r})}}k0.Parts=BC;const y8=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class jC extends Ke{create(e,n,r){return this._client.post(ke`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(ke`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(ke`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(ke`/vector_stores/${i}/file_batches/${e}/files`,ln,{query:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=Ue([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const f=parseInt(u);isNaN(f)||(l=f)}}await vu(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(s,n.length),o=this._client,l=n.values(),u=[...r];async function f(h){for(let d of h){const v=await o.files.create({file:d,purpose:"assistants"},i);u.push(v.id)}}const c=Array(a).fill(l).map(f);return await y8(c),await this.createAndPoll(e,{file_ids:u})}}class zC extends Ke{create(e,n,r){return this._client.post(ke`/vector_stores/${e}/files`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(ke`/vector_stores/${i}/files/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(ke`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ke`/vector_stores/${e}/files`,ln,{query:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(ke`/vector_stores/${i}/files/${e}`,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=Ue([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),o=a.data;switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.response.headers.get("openai-poll-after-ms");if(u){const f=parseInt(u);isNaN(f)||(l=f)}}await vu(l);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(ke`/vector_stores/${i}/files/${e}/content`,zd,{...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Wd extends Ke{constructor(){super(...arguments),this.files=new zC(this._client),this.fileBatches=new jC(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ke`/vector_stores/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ke`/vector_stores/${e}`,{body:n,...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",ln,{query:e,...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ke`/vector_stores/${e}`,{...n,headers:Ue([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(ke`/vector_stores/${e}/search`,zd,{body:n,method:"post",...r,headers:Ue([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Wd.Files=zC;Wd.FileBatches=jC;var ba,UC,Mc;class $C extends Ke{constructor(){super(...arguments),ba.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ne(this,ba,"m",UC).call(this,r);const s=Ue([n]).values,a=ne(this,ba,"m",Mc).call(this,s,"webhook-signature"),o=ne(this,ba,"m",Mc).call(this,s,"webhook-timestamp"),l=ne(this,ba,"m",Mc).call(this,s,"webhook-id"),u=parseInt(o,10);if(isNaN(u))throw new Ho("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-u>i)throw new Ho("Webhook timestamp is too old");if(u>f+i)throw new Ho("Webhook timestamp is too new");const c=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),h=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),d=l?`${l}.${o}.${e}`:`${o}.${e}`,v=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of c)try{const g=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,g,new TextEncoder().encode(d)))return}catch{continue}throw new Ho("The given webhook signature does not match the expected signature")}}ba=new WeakSet,UC=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Mc=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var ng,S0,Bc,WC;class ot{constructor({baseURL:e=ha("OPENAI_BASE_URL"),apiKey:n=ha("OPENAI_API_KEY"),organization:r=ha("OPENAI_ORG_ID")??null,project:i=ha("OPENAI_PROJECT_ID")??null,webhookSecret:s=ha("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(ng.add(this),Bc.set(this,void 0),this.completions=new _C(this),this.chat=new f0(this),this.embeddings=new SC(this),this.files=new AC(this),this.images=new OC(this),this.audio=new wu(this),this.moderations=new PC(this),this.models=new LC(this),this.fineTuning=new po(this),this.graders=new b0(this),this.vectorStores=new Wd(this),this.webhooks=new $C(this),this.beta=new xu(this),this.batches=new gC(this),this.uploads=new k0(this),this.responses=new E0(this),this.conversations=new m0(this),this.evals=new v0(this),this.containers=new p0(this),n===void 0)throw new Ye("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:i,webhookSecret:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&y6())throw new Ye(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??S0.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=m1(o.logLevel,"ClientOptions.logLevel",this)??m1(ha("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??E6(),Ze(this,Bc,S6),this._options=o,this.apiKey=n,this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ue([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return R6(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${wa}`}defaultIdempotencyKey(){return`stainless-node-retry-${wS()}`}makeStatusError(e,n,r,i){return Tn.generate(e,n,r,i)}buildURL(e,n,r){const i=!ne(this,ng,"m",WC).call(this)&&r||this.baseURL,s=h6(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return p6(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new jd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var p,m;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:a,url:o,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(a,{url:o,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,c=Date.now();if(En(this).debug(`[${u}] sending request`,Ds({retryOfRequestLogID:r,method:i.method,url:o,options:i,headers:a.headers})),(p=i.signal)!=null&&p.aborted)throw new Ar;const h=new AbortController,d=await this.fetchWithTimeout(o,a,l,h).catch(Vm),v=Date.now();if(d instanceof Error){const y=`retrying, ${n} attempts remaining`;if((m=i.signal)!=null&&m.aborted)throw new Ar;const k=Hm(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(n)return En(this).info(`[${u}] connection ${k?"timed out":"failed"} - ${y}`),En(this).debug(`[${u}] connection ${k?"timed out":"failed"} (${y})`,Ds({retryOfRequestLogID:r,url:o,durationMs:v-c,message:d.message})),this.retryRequest(i,n,r??u);throw En(this).info(`[${u}] connection ${k?"timed out":"failed"} - error; no more retries left`),En(this).debug(`[${u}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Ds({retryOfRequestLogID:r,url:o,durationMs:v-c,message:d.message})),k?new r0:new Md({cause:d})}const w=[...d.headers.entries()].filter(([y])=>y==="x-request-id").map(([y,k])=>", "+y+": "+JSON.stringify(k)).join(""),g=`[${u}${f}${w}] ${a.method} ${o} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${v-c}ms`;if(!d.ok){const y=await this.shouldRetry(d);if(n&&y){const P=`retrying, ${n} attempts remaining`;return await k6(d.body),En(this).info(`${g} - ${P}`),En(this).debug(`[${u}] response error (${P})`,Ds({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:v-c})),this.retryRequest(i,n,r??u,d.headers)}const k=y?"error; no more retries left":"error; not retryable";En(this).info(`${g} - ${k}`);const _=await d.text().catch(P=>Vm(P).message),x=v6(_),C=x?void 0:_;throw En(this).debug(`[${u}] response error (${k})`,Ds({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,message:C,durationMs:Date.now()-c})),this.makeStatusError(d.status,x,C,d.headers)}return En(this).info(g),En(this).debug(`[${u}] response start`,Ds({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:v-c})),{response:d,options:i,controller:h,requestLogID:u,retryOfRequestLogID:r,startTime:c}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new z6(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:a,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...o};a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(s=l)}const o=i==null?void 0:i.get("retry-after");if(o&&!s){const l=parseFloat(o);Number.isNaN(l)?s=Date.parse(o)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await vu(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:a,defaultBaseURL:o}=r,l=this.buildURL(s,a,o);"timeout"in r&&g6("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:f}=this.buildBody({options:r}),c=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:c,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=Ue([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},..._6(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ue([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:IS(e)}:ne(this,Bc,"f").call(this,{body:e,headers:r})}}S0=ot,Bc=new WeakMap,ng=new WeakSet,WC=function(){return this.baseURL!=="https://api.openai.com/v1"};ot.OpenAI=S0;ot.DEFAULT_TIMEOUT=6e5;ot.OpenAIError=Ye;ot.APIError=Tn;ot.APIConnectionError=Md;ot.APIConnectionTimeoutError=r0;ot.APIUserAbortError=Ar;ot.NotFoundError=ES;ot.ConflictError=kS;ot.RateLimitError=CS;ot.BadRequestError=xS;ot.AuthenticationError=bS;ot.InternalServerError=AS;ot.PermissionDeniedError=_S;ot.UnprocessableEntityError=SS;ot.InvalidWebhookSignatureError=Ho;ot.toFile=X6;ot.Completions=_C;ot.Chat=f0;ot.Embeddings=SC;ot.Files=AC;ot.Images=OC;ot.Audio=wu;ot.Moderations=PC;ot.Models=LC;ot.FineTuning=po;ot.Graders=b0;ot.VectorStores=Wd;ot.Webhooks=$C;ot.Beta=xu;ot.Batches=gC;ot.Uploads=k0;ot.Responses=E0;ot.Conversations=m0;ot.Evals=v0;ot.Containers=p0;const rn={query:"thinking.type",disable:"disabled",enable:"enabled"},I1={"glm-4.5":rn,"glm-4.5-air":rn,"glm-4.5-x":rn,"glm-4.5-flash":rn,"glm-4.5v":rn,"glm-4.1v-thinking-flashx":rn,"glm-4.1v-thinking-flash":rn,"glm-z1-air":rn,"glm-z1-airx":rn,"glm-z1-flash":rn,"glm-z1-flashx":rn,"glm-4-air-250414":rn,"glm-4-flash-250414":rn,"glm-4-plus":rn,"glm-4-air":rn,"glm-4-airx":rn,"glm-4-flash":rn,"glm-4-flashx":rn,"glm-4v-plus-0111":rn,"glm-4v-flash":rn},w8=({setMessageList:t,messageList:e,onUpdateAIResponse:n,...r})=>async s=>{var c,h;const a={content:"",reasoningContentCompleted:!1,model:r.model};t([...s,{role:"assistant",data:a}]);const o=new ot({apiKey:r.apiKey,baseURL:r.api,dangerouslyAllowBrowser:!0}),l=s.map(d=>({role:d.role,content:d.role==="user"?d.content:d.data.content}));let u={model:r.model,messages:l,stream:!0,stream_options:{include_usage:!0}};u=x8(u,r.model,!!r.reasoningEnabled);const f=await o.chat.completions.create(u);for await(const d of f){if((h=(c=d==null?void 0:d.choices)==null?void 0:c[0])!=null&&h.delta){const v=d.choices[0].delta;if(a.content+=v.content||"",r.reasoningEnabled){const w=v.reasoning_content||v.reasoningContent||"";w&&(a.reasoningContent?a.reasoningContent+=w:a.reasoningContent=w)}n(a)}d!=null&&d.usage&&(a.usage={promptTokens:d.usage.prompt_tokens,completionTokens:d.usage.completion_tokens,totalTokens:d.usage.total_tokens},n(a))}},x8=(t,e,n)=>{n&&(t.reasoning_effort="low");const r=new Map,i=new Set(Object.keys(I1).map(h=>{const d=h.toLowerCase();return r.set(d,h),d})),s=e.toLowerCase();if(!i.has(s))return t;const o=r.get(s),l=I1[o];if(!l)return t;const f=l.query.split(".");let c=t;for(let h=0;h<f.length;h++){const d=f[h];if(h===f.length-1){const v=n?l.enable:l.disable;c[d]=v}else(typeof c[d]!="object"||c[d]===null)&&(c[d]={}),c=c[d]}return t};function b8(t){return na({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}const _8=()=>{const t="ontouchstart"in window||navigator.maxTouchPoints>0,e=window.innerWidth>768;return!t||e},E8=({onSend:t,onVisible:e})=>{const[n,r]=_t.useState(!1),[i,s]=_t.useState(""),a=_t.useRef(null),o=_t.useMemo(()=>_8(),[]),l=1,u=w=>{const g=w.target.value;if(s(g),a.current){a.current.style.height="auto";const p=8,m=g.split(`
`).length,y=m>p?p:m;a.current.rows=y}},f=w=>{o&&w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),c())},c=()=>{i.trim()&&(t(i),s(""))},h=w=>{w.preventDefault(),c()},d=w=>{w.preventDefault(),c()},v=w=>{e&&w&&e(),r(w)};return _t.useEffect(()=>{n&&a.current&&a.current.focus()},[n]),E.jsxs(E.Fragment,{children:[n&&E.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-transparent p-4",children:E.jsxs("form",{className:"flex min-h-16 items-center rounded-lg border border-gray-200 bg-white shadow-lg",onSubmit:h,children:[E.jsx("textarea",{name:"message",ref:a,className:"flex-1 resize-y rounded-l-lg border-0 px-3 outline-none focus:ring-0",placeholder:o?"Type your message... (Press Enter to send, Shift+Enter for new line)":"Type your message...",rows:l,value:i,onChange:u,onKeyDown:f,style:{resize:"none"}}),E.jsx("button",{type:"button",className:"flex size-16 items-center justify-center rounded transition-colors",onClick:d,children:E.jsx(yS,{className:"size-5"})}),E.jsx("button",{className:"flex size-16 items-center justify-center rounded-r-lg",onClick:()=>v(!1),children:E.jsx(b8,{className:"size-6"})})]})}),!n&&E.jsx("div",{className:"sticky bottom-0 h-0 w-full",children:E.jsx("div",{className:"absolute bottom-4 right-4 z-10",children:E.jsx("button",{onClick:()=>v(!0),className:"flex h-12 w-12 items-center justify-center rounded-full border bg-white shadow-lg transition-colors hover:bg-gray-50",children:E.jsx(l6,{className:"size-6"})})})})]})},k8=({onChangeMessageList:t,...e})=>{const n=uk({template:e.prompt,words:e.words,context:e.context}),[r,i]=O.useState([{role:"user",content:n}]),s=O.useCallback(c=>{i(h=>{const d=h[h.length-1];if(d.role!=="assistant")throw new Error("Latest message is not AI type");return h[h.length-1]={...d,data:{...d.data,...c}},[...h]})},[]),a=w8({setMessageList:i,apiKey:e.apiKey,api:e.api,model:e.model,messageList:r,onUpdateAIResponse:s,reasoningEnabled:e.reasoningEnabled}),o=O.useCallback(c=>{const h=[...r,{role:"user",content:c}];a(h)},[r,a]);O.useEffect(()=>{t()},[r]);const[l,u]=O.useState("idle"),f=O.useRef(!1);return O.useEffect(()=>{f.current||(f.current=!0,a(r))},[a,r]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex flex-1 flex-col gap-2 divide-y divide-gray-300 p-4",children:r.map((c,h)=>c.role==="user"?E.jsx(Qz,{content:c.content,hightWords:c.highlightWords},h):E.jsx(f6,{...c.data},h))}),E.jsx(E8,{status:l,onStop:()=>{u("idle")},onVisible:e.inputBarVisit,onSend:o})]})},S8=t=>{const e=O.useRef(null),n=O.useRef(!0),r=O.useRef(!0),{scrollToBottom:i,handleOnPauseAutoScroll:s,handleResumeAutoScroll:a,bufferPx:o,handleWheelEvent:l}=oP({isAutoScrollRef:n,isGoToBottomRef:r,scrollContainerRef:e});O.useEffect(()=>{if(!e.current)return;const f=e.current.scrollHeight-e.current.clientHeight;e.current.scrollTop=f,console.log("Initial scrollTop:",f)},[e]);const u=()=>{n.current&&r.current&&i()};return E.jsxs("div",{className:"relative flex h-full flex-col overflow-y-scroll",ref:e,onTouchStart:s,onMouseDown:s,onTouchEnd:a,onMouseUp:a,onWheel:l,onScroll:f=>{const c=f.currentTarget.scrollTop+f.currentTarget.clientHeight>=f.currentTarget.scrollHeight-o;r.current=c,console.log("onScroll - isGoToBottom:",c)},children:[E.jsx(k8,{onChangeMessageList:u,inputBarVisit:()=>{r.current&&i()},...t}),E.jsx("div",{className:"w-full text-center text-sm text-gray-400",children:"-- You've reached the end! --"})]})},C8=({url:t,words:e,context:n})=>{const[r,i]=O.useState(!0),[s,a]=O.useState(!1),o=encodeURIComponent(n),l=uk({template:t,words:e,context:o}),u=()=>{i(!1),a(!1)},f=()=>{i(!1),a(!0)};return s?E.jsx("div",{className:"flex flex-1 items-center justify-center bg-gray-50",children:E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"mb-2 text-red-600",children:"Failed to load content"}),E.jsx("p",{className:"text-gray-600",children:"Please try again later"})]})}):E.jsxs(E.Fragment,{children:[r&&E.jsx(sk,{}),E.jsx("iframe",{src:l,style:{display:r?"none":"block"},title:"Iframe",className:"h-full w-full",onLoad:u,onError:f})]})},A8=t=>{const[e]=_t.useState(40),[n,r]=O.useState(null);if(O.useEffect(()=>{zE().then(o=>r(o))},[]),t.tabIndex===null||n===null)return E.jsx(E.Fragment,{});const i=n.items[t.tabIndex],s=i&&i.type==="AI"?i:null,a=i&&i.type==="iframe"?i:null;return E.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0 z-50 flex items-center justify-center shadow-lg",onClick:t.onClose,children:E.jsxs("div",{className:"flex flex-col divide-y divide-black rounded border border-black bg-white text-black",style:{width:`${e}rem`,height:`${e}rem`},onClick:o=>o.stopPropagation(),children:[i&&i.type==="AI"&&E.jsx(S8,{api:n.api,apiKey:n.key,words:t.words,context:t.context,model:s.model,prompt:s.prompt,reasoningEnabled:s.reasoningEnabled},t.tabIndex),i&&i.type==="iframe"&&E.jsx(C8,{url:a.url,words:t.words,context:t.context}),E.jsx("div",{className:"flex h-12 justify-between divide-x divide-black",children:n==null?void 0:n.items.map((o,l)=>E.jsx("button",{onClick:()=>t.onChangeIndex(l),className:`w-full ${l===t.tabIndex?"bg-black text-white":""}`,children:o.shortName||o.name},l))})]})})};function D8(t){return na({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function T8(t){return na({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}const HC=({onClick:t,className:e,icon:n})=>{const r="absolute  z-20 text-gray-700 ";console.log("Render PrevPageButton");const i=_t.useRef(null),s=()=>{i.current.style.top=`calc(50% - ${i.current.offsetHeight/2}px)`};return O.useEffect(()=>{i.current&&s()},[i]),E.jsx("button",{ref:i,onClick:a=>{a.stopPropagation(),t()},className:`${r} ${e}`,children:n({className:"h-20 w-4 opacity-10"})})},N8=({onClick:t})=>E.jsx(HC,{onClick:t,icon:D8}),R8=({onClick:t})=>(console.log("Render NextPageButton"),E.jsx(HC,{onClick:t,icon:T8,className:"right-0"})),I8=()=>{const{bookId:t}=tk(),[e,n]=O.useState(null),[r,i]=O.useState(null);return O.useEffect(()=>{if(t)return TO(t).then(n).catch(s=>{console.error("Failed to load book:",s),i("Failed to load book. Please try again later.")}),()=>{e==null||e.destroy(),n(null)}},[t]),!t||r?E.jsx(X4,{error:r}):e?E.jsx(O8,{book:e}):E.jsx(sk,{})},O8=t=>{const[e,n]=O.useState(!1),[r,i]=O.useState(!1),s=()=>{r?i(!1):(i(!0),e&&n(!1))},a=()=>{n(!1),i(!1)},[o,l]=O.useState({tabIndex:null,words:"",context:""}),{containerRef:u,goToNext:f,goToPrev:c,tableOfContents:h,goToSelectChapter:d,currentPage:v,totalPages:w,currentChapterHref:g}=aP({book:t.book,onClick:a,onSelect:m=>{m.words.trim()!==""&&l({tabIndex:0,...m}),n(!1),i(!1)}}),p=m=>l(y=>({...y,tabIndex:m}));return O.useEffect(()=>{window.addEventListener("keydown",m=>{console.log("Keydown event:",m.key,m.code,m.keyCode);const y=m.key||m.code;y==="AudioVolumeUp"||y==="VolumeUp"||m.keyCode===183?(m.preventDefault(),console.log("Volume Up detected - Go to next page"),f()):(y==="AudioVolumeDown"||y==="VolumeDown"||m.keyCode===182)&&(m.preventDefault(),console.log("Volume Down detected - Go to previous page"),c())})},[c,f]),E.jsxs("div",{className:"relative flex h-screen flex-col bg-white",children:[E.jsx(W4,{visible:e,onOpenToc:s}),E.jsx(A8,{onChangeIndex:p,tabIndex:o.tabIndex,words:o.words,context:o.context,onClose:function(){l(m=>({...m,tabIndex:null}))}}),E.jsx(q4,{isOpen:r,currentChapter:g,onChapterSelect:d,onToggle:()=>i(!1),tableOfContents:h}),E.jsx(H4,{visible:!e,setVisible:n}),E.jsx(N8,{onClick:c}),E.jsx(R8,{onClick:f}),E.jsx("div",{className:"relative h-full w-full",ref:u}),E.jsx(V4,{visible:e,currentPage:v,totalPages:w,onNext:f,onPrev:c})]})},L8=({to:t,label:e="Back"})=>{const n=hu(),r=()=>{n(t||-1)};return E.jsxs("button",{onClick:r,className:"flex items-center space-x-1 text-gray-600 transition-colors hover:text-gray-900",title:e,children:[E.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),E.jsx("span",{children:e})]})},P8=({items:t})=>E.jsx("nav",{className:"flex items-center space-x-2 text-sm",children:t.map((e,n)=>E.jsxs(_t.Fragment,{children:[n>0&&E.jsx("span",{className:"text-gray-400",children:"/"}),e.path?E.jsx(Fv,{to:e.path,className:"text-blue-600 transition-colors hover:text-blue-800",children:e.label}):E.jsx("span",{className:"text-gray-900",children:e.label})]},n))}),C0=t=>(console.log("Rendering Container component"),E.jsxs("div",{className:"flex h-screen w-full flex-col bg-gray-50",children:[E.jsx("header",{className:"sticky top-0 border-b bg-white shadow-sm",children:E.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx(L8,{to:t.backTo,label:""}),E.jsx("div",{children:E.jsx(P8,{items:[...t.breadcrumbItems]})})]})})})}),E.jsx("main",{className:"flex-1 overflow-y-auto text-black",children:t.children})]})),F8=()=>E.jsx(C0,{breadcrumbItems:[{label:"Home",path:"/"},{label:"Settings"}],backTo:"/",children:E.jsx("div",{className:"rounded-lg bg-white p-6 shadow",children:E.jsxs("div",{className:"space-y-6",children:[E.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Settings Categories"}),E.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[E.jsx(Fv,{to:"/settings/contextmenu",className:"block rounded-lg border border-gray-200 p-6 transition-colors hover:border-blue-300 hover:bg-blue-50",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100",children:E.jsxs("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Context Menu"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Configure AI providers and custom tools"})]})]})}),E.jsx("div",{className:"block rounded-lg border border-gray-200 p-6 opacity-60",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100",children:E.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Reading Preferences"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Font size, theme, and layout settings"})]})]})}),E.jsx("div",{className:"block rounded-lg border border-gray-200 p-6 opacity-60",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100",children:E.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Appearance"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Colors, margins, and visual settings"})]})]})})]}),E.jsxs("div",{className:"mt-8 rounded-lg bg-gray-50 p-4",children:[E.jsx("h3",{className:"mb-2 text-sm font-medium text-gray-900",children:"Coming Soon"}),E.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[E.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[E.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("span",{children:"Keyboard shortcuts"})]}),E.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[E.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("span",{children:"Import/Export settings"})]}),E.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[E.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("span",{children:"Cloud synchronization"})]}),E.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[E.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("span",{children:"Advanced analytics"})]})]})]})]})})}),ic=t=>{if(!t.trim())return!1;try{const e=new URL(t);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},M8=({apiEndpoint:t,apiKey:e,onApiEndpointChange:n,onApiKeyChange:r})=>{const[i,s]=O.useState(!1),[a,o]=O.useState(null),[l,u]=O.useState(""),[f,c]=O.useState(""),[h,d]=O.useState(!1);O.useEffect(()=>{const g=t.length>0&&!ic(t),p=e.length>0&&t.length===0;u(g?"Please enter a valid URL":p?"API endpoint is required":"")},[t,e]),O.useEffect(()=>{const g=e.length===0&&t.length>0&&ic(t);c(g?"API key is required":"")},[e,t]),O.useEffect(()=>{const p=setTimeout(async()=>{if(t&&e&&ic(t)){s(!0);try{const m=await fetch(`${t}/models`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(m.ok){const y=await m.json(),k=y.data&&Array.isArray(y.data)?y.data.length:0;o({type:"success",message:k>0?`API connected successfully (${k} models available)`:"API connected successfully"})}else o({type:"error",message:`API connection failed: ${m.status} ${m.statusText}`})}catch(m){o({type:"error",message:`Network error: ${m instanceof Error?m.message:"Connection failed"}`})}finally{s(!1)}}else!t&&!e?o({type:"warning",message:"Please enter API endpoint and key to test connection"}):t?e?ic(t)?o(null):o({type:"error",message:"Please fix API endpoint format"}):o({type:"warning",message:"Please enter API key"}):o({type:"warning",message:"Please enter API endpoint"})},1e3);return()=>clearTimeout(p)},[t,e]);const v=g=>{switch(g){case"error":return"text-red-600";case"warning":return"text-yellow-600";case"success":return"text-green-600";default:return"text-gray-600"}},w=g=>{switch(g){case"error":return"❌";case"warning":return"⚠️";case"success":return"✅";default:return""}};return E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"API Endpoint"}),E.jsx("input",{type:"text",value:t,onChange:g=>n(g.target.value),placeholder:"https://api.example.com/v1",className:`w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 ${l?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`}),l&&E.jsx("div",{className:"mt-1 text-sm text-red-600",children:l})]}),E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"API Key"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:h?"text":"password",value:e,onChange:g=>r(g.target.value),placeholder:"Your API key",className:`w-full rounded-md border px-3 py-2 pr-10 focus:outline-none focus:ring-2 ${f?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`}),E.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:h?E.jsx(B4,{}):E.jsx(M4,{})})]}),f&&E.jsx("div",{className:"mt-1 text-sm text-red-600",children:f})]}),a&&E.jsx("div",{className:"flex items-center justify-between rounded-md border p-3",children:E.jsx("div",{className:"flex items-center",children:i?E.jsxs("div",{className:"flex items-center text-blue-600",children:[E.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-blue-600"}),E.jsx("span",{className:"text-sm",children:"Testing API connection..."})]}):E.jsxs("div",{className:`text-sm ${v(a.type)}`,children:[w(a.type)," ",a.message]})})})]})};function B8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Hd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function A0(t){return"nodeType"in t}function rr(t){var e,n;return t?mo(t)?t:A0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function D0(t){const{Document:e}=rr(t);return t instanceof e}function bu(t){return mo(t)?!1:t instanceof rr(t).HTMLElement}function VC(t){return t instanceof rr(t).SVGElement}function go(t){return t?mo(t)?t.document:A0(t)?D0(t)?t:bu(t)||VC(t)?t.ownerDocument:document:document:document}const ci=Hd?O.useLayoutEffect:O.useEffect;function T0(t){const e=O.useRef(t);return ci(()=>{e.current=t}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function j8(){const t=O.useRef(null),e=O.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Yl(t,e){e===void 0&&(e=[t]);const n=O.useRef(t);return ci(()=>{n.current!==t&&(n.current=t)},e),n}function _u(t,e){const n=O.useRef();return O.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Yf(t){const e=T0(t),n=O.useRef(null),r=O.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function rg(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let hp={};function Eu(t,e){return O.useMemo(()=>{if(e)return e;const n=hp[t]==null?0:hp[t]+1;return hp[t]=n,t+"-"+n},[t,e])}function qC(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const o=Object.entries(a);for(const[l,u]of o){const f=s[l];f!=null&&(s[l]=f+t*u)}return s},{...e})}}const Ha=qC(1),Kl=qC(-1);function z8(t){return"clientX"in t&&"clientY"in t}function N0(t){if(!t)return!1;const{KeyboardEvent:e}=rr(t.target);return e&&t instanceof e}function U8(t){if(!t)return!1;const{TouchEvent:e}=rr(t.target);return e&&t instanceof e}function ig(t){if(U8(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return z8(t)?{x:t.clientX,y:t.clientY}:null}const Zl=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Zl.Translate.toString(t),Zl.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),O1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $8(t){return t.matches(O1)?t:t.querySelector(O1)}const W8={display:"none"};function H8(t){let{id:e,value:n}=t;return _t.createElement("div",{id:e,style:W8},n)}function V8(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _t.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function q8(){const[t,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const XC=O.createContext(null);function X8(t){const e=O.useContext(XC);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function G8(){const[t]=O.useState(()=>new Set),e=O.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[O.useCallback(r=>{let{type:i,event:s}=r;t.forEach(a=>{var o;return(o=a[i])==null?void 0:o.call(a,s)})},[t]),e]}const Y8={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},K8={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Z8(t){let{announcements:e=K8,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Y8}=t;const{announce:s,announcement:a}=q8(),o=Eu("DndLiveRegion"),[l,u]=O.useState(!1);if(O.useEffect(()=>{u(!0)},[]),X8(O.useMemo(()=>({onDragStart(c){let{active:h}=c;s(e.onDragStart({active:h}))},onDragMove(c){let{active:h,over:d}=c;e.onDragMove&&s(e.onDragMove({active:h,over:d}))},onDragOver(c){let{active:h,over:d}=c;s(e.onDragOver({active:h,over:d}))},onDragEnd(c){let{active:h,over:d}=c;s(e.onDragEnd({active:h,over:d}))},onDragCancel(c){let{active:h,over:d}=c;s(e.onDragCancel({active:h,over:d}))}}),[s,e])),!l)return null;const f=_t.createElement(_t.Fragment,null,_t.createElement(H8,{id:r,value:i.draggable}),_t.createElement(V8,{id:o,announcement:a}));return n?Ji.createPortal(f,n):f}var hn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(hn||(hn={}));function Kf(){}function L1(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Q8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Xr=Object.freeze({x:0,y:0});function GC(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function YC(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function J8(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function P1(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function KC(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function F1(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const e9=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=F1(e,e.left,e.top),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const u=GC(F1(l),i);s.push({id:o,data:{droppableContainer:a,value:u}})}}return s.sort(YC)},t9=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=P1(e),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const u=P1(l),f=i.reduce((h,d,v)=>h+GC(u[v],d),0),c=Number((f/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(YC)};function n9(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),a=i-r,o=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,f=a*o,c=f/(l+u-f);return Number(c.toFixed(4))}return 0}const r9=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:a}=s,o=n.get(a);if(o){const l=n9(o,e);l>0&&i.push({id:a,data:{droppableContainer:s,value:l}})}}return i.sort(J8)};function i9(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function ZC(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Xr}function s9(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,o)=>({...a,top:a.top+t*o.y,bottom:a.bottom+t*o.y,left:a.left+t*o.x,right:a.right+t*o.x}),{...n})}}const a9=s9(1);function o9(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function l9(t,e,n){const r=o9(e);if(!r)return t;const{scaleX:i,scaleY:s,x:a,y:o}=r,l=t.left-a-(1-i)*parseFloat(n),u=t.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,c=s?t.height/s:t.height;return{width:f,height:c,top:u,right:l+f,bottom:u+c,left:l}}const u9={ignoreTransform:!1};function vo(t,e){e===void 0&&(e=u9);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:f}=rr(t).getComputedStyle(t);u&&(n=l9(n,u,f))}const{top:r,left:i,width:s,height:a,bottom:o,right:l}=n;return{top:r,left:i,width:s,height:a,bottom:o,right:l}}function M1(t){return vo(t,{ignoreTransform:!0})}function c9(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function f9(t,e){return e===void 0&&(e=rr(t).getComputedStyle(t)),e.position==="fixed"}function d9(t,e){e===void 0&&(e=rr(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Vd(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(D0(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!bu(i)||VC(i)||n.includes(i))return n;const s=rr(t).getComputedStyle(i);return i!==t&&d9(i,s)&&n.push(i),f9(i,s)?n:r(i.parentNode)}return t?r(t):n}function QC(t){const[e]=Vd(t,1);return e??null}function pp(t){return!Hd||!t?null:mo(t)?t:A0(t)?D0(t)||t===go(t).scrollingElement?window:bu(t)?t:null:null}function JC(t){return mo(t)?t.scrollX:t.scrollLeft}function eA(t){return mo(t)?t.scrollY:t.scrollTop}function sg(t){return{x:JC(t),y:eA(t)}}var vn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(vn||(vn={}));function tA(t){return!Hd||!t?!1:t===document.scrollingElement}function nA(t){const e={x:0,y:0},n=tA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,o=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:o,maxScroll:r,minScroll:e}}const h9={x:.2,y:.2};function p9(t,e,n,r,i){let{top:s,left:a,right:o,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=h9);const{isTop:u,isBottom:f,isLeft:c,isRight:h}=nA(t),d={x:0,y:0},v={x:0,y:0},w={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+w.height?(d.y=vn.Backward,v.y=r*Math.abs((e.top+w.height-s)/w.height)):!f&&l>=e.bottom-w.height&&(d.y=vn.Forward,v.y=r*Math.abs((e.bottom-w.height-l)/w.height)),!h&&o>=e.right-w.width?(d.x=vn.Forward,v.x=r*Math.abs((e.right-w.width-o)/w.width)):!c&&a<=e.left+w.width&&(d.x=vn.Backward,v.x=r*Math.abs((e.left+w.width-a)/w.width)),{direction:d,speed:v}}function m9(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function rA(t){return t.reduce((e,n)=>Ha(e,sg(n)),Xr)}function g9(t){return t.reduce((e,n)=>e+JC(n),0)}function v9(t){return t.reduce((e,n)=>e+eA(n),0)}function y9(t,e){if(e===void 0&&(e=vo),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);QC(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const w9=[["x",["left","right"],g9],["y",["top","bottom"],v9]];class R0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vd(n),i=rA(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,o]of w9)for(const l of a)Object.defineProperty(this,l,{get:()=>{const u=o(r),f=i[s]-u;return this.rect[l]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function x9(t){const{EventTarget:e}=rr(t);return t instanceof e?t:go(t)}function mp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var _r;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(_r||(_r={}));function B1(t){t.preventDefault()}function b9(t){t.stopPropagation()}var ht;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ht||(ht={}));const iA={start:[ht.Space,ht.Enter],cancel:[ht.Esc],end:[ht.Space,ht.Enter,ht.Tab]},_9=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ht.Right:return{...n,x:n.x+25};case ht.Left:return{...n,x:n.x-25};case ht.Down:return{...n,y:n.y+25};case ht.Up:return{...n,y:n.y-25}}};class I0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new gl(go(n)),this.windowListeners=new gl(rr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_r.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&y9(r),n(Xr)}handleKeyDown(e){if(N0(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=iA,coordinateGetter:a=_9,scrollBehavior:o="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:Xr;this.referenceCoordinates||(this.referenceCoordinates=f);const c=a(e,{active:n,context:r.current,currentCoordinates:f});if(c){const h=Kl(c,f),d={x:0,y:0},{scrollableAncestors:v}=r.current;for(const w of v){const g=e.code,{isTop:p,isRight:m,isLeft:y,isBottom:k,maxScroll:_,minScroll:x}=nA(w),C=m9(w),A={x:Math.min(g===ht.Right?C.right-C.width/2:C.right,Math.max(g===ht.Right?C.left:C.left+C.width/2,c.x)),y:Math.min(g===ht.Down?C.bottom-C.height/2:C.bottom,Math.max(g===ht.Down?C.top:C.top+C.height/2,c.y))},P=g===ht.Right&&!m||g===ht.Left&&!y,S=g===ht.Down&&!k||g===ht.Up&&!p;if(P&&A.x!==c.x){const F=w.scrollLeft+h.x,z=g===ht.Right&&F<=_.x||g===ht.Left&&F>=x.x;if(z&&!h.y){w.scrollTo({left:F,behavior:o});return}z?d.x=w.scrollLeft-F:d.x=g===ht.Right?w.scrollLeft-_.x:w.scrollLeft-x.x,d.x&&w.scrollBy({left:-d.x,behavior:o});break}else if(S&&A.y!==c.y){const F=w.scrollTop+h.y,z=g===ht.Down&&F<=_.y||g===ht.Up&&F>=x.y;if(z&&!h.x){w.scrollTo({top:F,behavior:o});return}z?d.y=w.scrollTop-F:d.y=g===ht.Down?w.scrollTop-_.y:w.scrollTop-x.y,d.y&&w.scrollBy({top:-d.y,behavior:o});break}}this.handleMove(e,Ha(Kl(c,this.referenceCoordinates),d))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}I0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=iA,onActivation:i}=e,{active:s}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const o=s.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function j1(t){return!!(t&&"distance"in t)}function z1(t){return!!(t&&"delay"in t)}class O0{constructor(e,n,r){var i;r===void 0&&(r=x9(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:a}=s;this.props=e,this.events=n,this.document=go(a),this.documentListeners=new gl(this.document),this.listeners=new gl(r),this.windowListeners=new gl(rr(a)),this.initialCoordinates=(i=ig(s))!=null?i:Xr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.DragStart,B1),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),this.windowListeners.add(_r.ContextMenu,B1),this.documentListeners.add(_r.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(z1(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(j1(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(_r.Click,b9,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_r.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!i)return;const l=(n=ig(e))!=null?n:Xr,u=Kl(i,l);if(!r&&o){if(j1(o)){if(o.tolerance!=null&&mp(u,o.tolerance))return this.handleCancel();if(mp(u,o.distance))return this.handleStart()}if(z1(o)&&mp(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ht.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const E9={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class L0 extends O0{constructor(e){const{event:n}=e,r=go(n.target);super(e,E9,r)}}L0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const k9={move:{name:"mousemove"},end:{name:"mouseup"}};var ag;(function(t){t[t.RightClick=2]="RightClick"})(ag||(ag={}));class S9 extends O0{constructor(e){super(e,k9,go(e.event.target))}}S9.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===ag.RightClick?!1:(r==null||r({event:n}),!0)}}];const gp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class C9 extends O0{constructor(e){super(e,gp)}static setup(){return window.addEventListener(gp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(gp.move.name,e)};function e(){}}}C9.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var vl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(vl||(vl={}));var Zf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zf||(Zf={}));function A9(t){let{acceleration:e,activator:n=vl.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:o=Zf.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:f,delta:c,threshold:h}=t;const d=T9({delta:c,disabled:!s}),[v,w]=j8(),g=O.useRef({x:0,y:0}),p=O.useRef({x:0,y:0}),m=O.useMemo(()=>{switch(n){case vl.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case vl.DraggableRect:return i}},[n,i,l]),y=O.useRef(null),k=O.useCallback(()=>{const x=y.current;if(!x)return;const C=g.current.x*p.current.x,A=g.current.y*p.current.y;x.scrollBy(C,A)},[]),_=O.useMemo(()=>o===Zf.TreeOrder?[...u].reverse():u,[o,u]);O.useEffect(()=>{if(!s||!u.length||!m){w();return}for(const x of _){if((r==null?void 0:r(x))===!1)continue;const C=u.indexOf(x),A=f[C];if(!A)continue;const{direction:P,speed:S}=p9(x,A,m,e,h);for(const F of["x","y"])d[F][P[F]]||(S[F]=0,P[F]=0);if(S.x>0||S.y>0){w(),y.current=x,v(k,a),g.current=S,p.current=P;return}}g.current={x:0,y:0},p.current={x:0,y:0},w()},[e,k,r,w,s,a,JSON.stringify(m),JSON.stringify(d),v,u,_,f,JSON.stringify(h)])}const D9={x:{[vn.Backward]:!1,[vn.Forward]:!1},y:{[vn.Backward]:!1,[vn.Forward]:!1}};function T9(t){let{delta:e,disabled:n}=t;const r=rg(e);return _u(i=>{if(n||!r||!i)return D9;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[vn.Backward]:i.x[vn.Backward]||s.x===-1,[vn.Forward]:i.x[vn.Forward]||s.x===1},y:{[vn.Backward]:i.y[vn.Backward]||s.y===-1,[vn.Forward]:i.y[vn.Forward]||s.y===1}}},[n,e,r])}function N9(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return _u(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function R9(t,e){return O.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...s]},[]),[t,e])}var Ql;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ql||(Ql={}));var og;(function(t){t.Optimized="optimized"})(og||(og={}));const U1=new Map;function I9(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,a]=O.useState(null),{frequency:o,measure:l,strategy:u}=i,f=O.useRef(t),c=g(),h=Yl(c),d=O.useCallback(function(p){p===void 0&&(p=[]),!h.current&&a(m=>m===null?p:m.concat(p.filter(y=>!m.includes(y))))},[h]),v=O.useRef(null),w=_u(p=>{if(c&&!n)return U1;if(!p||p===U1||f.current!==t||s!=null){const m=new Map;for(let y of t){if(!y)continue;if(s&&s.length>0&&!s.includes(y.id)&&y.rect.current){m.set(y.id,y.rect.current);continue}const k=y.node.current,_=k?new R0(l(k),k):null;y.rect.current=_,_&&m.set(y.id,_)}return m}return p},[t,s,n,c,l]);return O.useEffect(()=>{f.current=t},[t]),O.useEffect(()=>{c||d()},[n,c]),O.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),O.useEffect(()=>{c||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{d(),v.current=null},o))},[o,c,d,...r]),{droppableRects:w,measureDroppableContainers:d,measuringScheduled:s!=null};function g(){switch(u){case Ql.Always:return!1;case Ql.BeforeDragging:return n;default:return!n}}}function sA(t,e){return _u(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function O9(t,e){return sA(t,e)}function L9(t){let{callback:e,disabled:n}=t;const r=T0(e),i=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function qd(t){let{callback:e,disabled:n}=t;const r=T0(e),i=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function P9(t){return new R0(vo(t),t)}function $1(t,e,n){e===void 0&&(e=P9);const[r,i]=O.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const f=e(t);return JSON.stringify(l)===JSON.stringify(f)?l:f})}const a=L9({callback(l){if(t)for(const u of l){const{type:f,target:c}=u;if(f==="childList"&&c instanceof HTMLElement&&c.contains(t)){s();break}}}}),o=qd({callback:s});return ci(()=>{s(),t?(o==null||o.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),a==null||a.disconnect())},[t]),r}function F9(t){const e=sA(t);return ZC(t,e)}const W1=[];function M9(t){const e=O.useRef(t),n=_u(r=>t?r&&r!==W1&&t&&e.current&&t.parentNode===e.current.parentNode?r:Vd(t):W1,[t]);return O.useEffect(()=>{e.current=t},[t]),n}function B9(t){const[e,n]=O.useState(null),r=O.useRef(t),i=O.useCallback(s=>{const a=pp(s.target);a&&n(o=>o?(o.set(a,sg(a)),new Map(o)):null)},[]);return O.useEffect(()=>{const s=r.current;if(t!==s){a(s);const o=t.map(l=>{const u=pp(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,sg(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=t}return()=>{a(t),a(s)};function a(o){o.forEach(l=>{const u=pp(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,a)=>Ha(s,a),Xr):rA(t):Xr,[t,e])}function H1(t,e){e===void 0&&(e=[]);const n=O.useRef(null);return O.useEffect(()=>{n.current=null},e),O.useEffect(()=>{const r=t!==Xr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Kl(t,n.current):Xr}function j9(t){O.useEffect(()=>{if(!Hd)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function z9(t,e){return O.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,e)},n},{}),[t,e])}function aA(t){return O.useMemo(()=>t?c9(t):null,[t])}const V1=[];function U9(t,e){e===void 0&&(e=vo);const[n]=t,r=aA(n?rr(n):null),[i,s]=O.useState(V1);function a(){s(()=>t.length?t.map(l=>tA(l)?r:new R0(e(l),l)):V1)}const o=qd({callback:a});return ci(()=>{o==null||o.disconnect(),a(),t.forEach(l=>o==null?void 0:o.observe(l))},[t]),i}function $9(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return bu(e)?e:t}function W9(t){let{measure:e}=t;const[n,r]=O.useState(null),i=O.useCallback(u=>{for(const{target:f}of u)if(bu(f)){r(c=>{const h=e(f);return c?{...c,width:h.width,height:h.height}:h});break}},[e]),s=qd({callback:i}),a=O.useCallback(u=>{const f=$9(u);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?e(f):null)},[e,s]),[o,l]=Yf(a);return O.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const H9=[{sensor:L0,options:{}},{sensor:I0,options:{}}],V9={current:{}},jc={draggable:{measure:M1},droppable:{measure:M1,strategy:Ql.WhileDragging,frequency:og.Optimized},dragOverlay:{measure:vo}};class yl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const q9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new yl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jc,measureDroppableContainers:Kf,windowRect:null,measuringScheduled:!1},X9={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kf,draggableNodes:new Map,over:null,measureDroppableContainers:Kf},Xd=O.createContext(X9),oA=O.createContext(q9);function G9(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new yl}}}function Y9(t,e){switch(e.type){case hn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case hn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case hn.DragEnd:case hn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new yl(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case hn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new yl(t.droppable.containers);return a.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:a}}}case hn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new yl(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function K9(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=O.useContext(Xd),s=rg(r),a=rg(n==null?void 0:n.id);return O.useEffect(()=>{if(!e&&!r&&s&&a!=null){if(!N0(s)||document.activeElement===s.target)return;const o=i.get(a);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[l.current,u.current]){if(!f)continue;const c=$8(f);if(c){c.focus();break}}})}},[r,e,i,a,s]),null}function Z9(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Q9(t){return O.useMemo(()=>({draggable:{...jc.draggable,...t==null?void 0:t.draggable},droppable:{...jc.droppable,...t==null?void 0:t.droppable},dragOverlay:{...jc.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function J9(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=O.useRef(!1),{x:a,y:o}=typeof i=="boolean"?{x:i,y:i}:i;ci(()=>{if(!a&&!o||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const f=n(u),c=ZC(f,r);if(a||(c.x=0),o||(c.y=0),s.current=!0,Math.abs(c.x)>0||Math.abs(c.y)>0){const h=QC(u);h&&h.scrollBy({top:c.y,left:c.x})}},[e,a,o,r,n])}const lA=O.createContext({...Xr,scaleX:1,scaleY:1});var Gi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Gi||(Gi={}));const eU=O.memo(function(e){var n,r,i,s;let{id:a,accessibility:o,autoScroll:l=!0,children:u,sensors:f=H9,collisionDetection:c=r9,measuring:h,modifiers:d,...v}=e;const w=O.useReducer(Y9,void 0,G9),[g,p]=w,[m,y]=G8(),[k,_]=O.useState(Gi.Uninitialized),x=k===Gi.Initialized,{draggable:{active:C,nodes:A,translate:P},droppable:{containers:S}}=g,F=C!=null?A.get(C):null,z=O.useRef({initial:null,translated:null}),ie=O.useMemo(()=>{var D;return C!=null?{id:C,data:(D=F==null?void 0:F.data)!=null?D:V9,rect:z}:null},[C,F]),te=O.useRef(null),[K,Q]=O.useState(null),[Z,$]=O.useState(null),re=Yl(v,Object.values(v)),I=Eu("DndDescribedBy",a),pe=O.useMemo(()=>S.getEnabled(),[S]),oe=Q9(h),{droppableRects:B,measureDroppableContainers:be,measuringScheduled:je}=I9(pe,{dragging:x,dependencies:[P.x,P.y],config:oe.droppable}),Te=N9(A,C),We=O.useMemo(()=>Z?ig(Z):null,[Z]),Me=ae(),Qe=O9(Te,oe.draggable.measure);J9({activeNode:C!=null?A.get(C):null,config:Me.layoutShiftCompensation,initialRect:Qe,measure:oe.draggable.measure});const Ae=$1(Te,oe.draggable.measure,Qe),Pe=$1(Te?Te.parentElement:null),qe=O.useRef({activatorEvent:null,active:null,activeNode:Te,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ge=S.getNodeFor((n=qe.current.over)==null?void 0:n.id),xt=W9({measure:oe.dragOverlay.measure}),it=(r=xt.nodeRef.current)!=null?r:Te,Lt=x?(i=xt.rect)!=null?i:Ae:null,st=!!(xt.nodeRef.current&&xt.rect),Rt=F9(st?null:Ae),tn=aA(it?rr(it):null),St=M9(x?Ge??Te:null),Pt=U9(St),dt=Z9(d,{transform:{x:P.x-Rt.x,y:P.y-Rt.y,scaleX:1,scaleY:1},activatorEvent:Z,active:ie,activeNodeRect:Ae,containerNodeRect:Pe,draggingNodeRect:Lt,over:qe.current.over,overlayNodeRect:xt.rect,scrollableAncestors:St,scrollableAncestorRects:Pt,windowRect:tn}),$e=We?Ha(We,P):null,Ft=B9(St),Nn=H1(Ft),se=H1(Ft,[Ae]),fe=Ha(dt,Nn),Oe=Lt?a9(Lt,dt):null,ze=ie&&Oe?c({active:ie,collisionRect:Oe,droppableRects:B,droppableContainers:pe,pointerCoordinates:$e}):null,Xe=KC(ze,"id"),[bt,Et]=O.useState(null),gt=st?dt:Ha(dt,se),jt=i9(gt,(s=bt==null?void 0:bt.rect)!=null?s:null,Ae),Zt=O.useRef(null),L=O.useCallback((D,le)=>{let{sensor:Le,options:b}=le;if(te.current==null)return;const J=A.get(te.current);if(!J)return;const ee=D.nativeEvent,N=new Le({active:te.current,activeNode:J,event:ee,options:b,context:qe,onAbort(T){if(!A.get(T))return;const{onDragAbort:U}=re.current,G={id:T};U==null||U(G),m({type:"onDragAbort",event:G})},onPending(T,j,U,G){if(!A.get(T))return;const{onDragPending:Re}=re.current,Ce={id:T,constraint:j,initialCoordinates:U,offset:G};Re==null||Re(Ce),m({type:"onDragPending",event:Ce})},onStart(T){const j=te.current;if(j==null)return;const U=A.get(j);if(!U)return;const{onDragStart:G}=re.current,he={activatorEvent:ee,active:{id:j,data:U.data,rect:z}};Ji.unstable_batchedUpdates(()=>{G==null||G(he),_(Gi.Initializing),p({type:hn.DragStart,initialCoordinates:T,active:j}),m({type:"onDragStart",event:he}),Q(Zt.current),$(ee)})},onMove(T){p({type:hn.DragMove,coordinates:T})},onEnd:W(hn.DragEnd),onCancel:W(hn.DragCancel)});Zt.current=N;function W(T){return async function(){const{active:U,collisions:G,over:he,scrollAdjustedTranslate:Re}=qe.current;let Ce=null;if(U&&Re){const{cancelDrop:me}=re.current;Ce={activatorEvent:ee,active:U,collisions:G,delta:Re,over:he},T===hn.DragEnd&&typeof me=="function"&&await Promise.resolve(me(Ce))&&(T=hn.DragCancel)}te.current=null,Ji.unstable_batchedUpdates(()=>{p({type:T}),_(Gi.Uninitialized),Et(null),Q(null),$(null),Zt.current=null;const me=T===hn.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const _e=re.current[me];_e==null||_e(Ce),m({type:me,event:Ce})}})}}},[A]),ue=O.useCallback((D,le)=>(Le,b)=>{const J=Le.nativeEvent,ee=A.get(b);if(te.current!==null||!ee||J.dndKit||J.defaultPrevented)return;const N={active:ee};D(Le,le.options,N)===!0&&(J.dndKit={capturedBy:le.sensor},te.current=b,L(Le,le))},[A,L]),de=R9(f,ue);j9(f),ci(()=>{Ae&&k===Gi.Initializing&&_(Gi.Initialized)},[Ae,k]),O.useEffect(()=>{const{onDragMove:D}=re.current,{active:le,activatorEvent:Le,collisions:b,over:J}=qe.current;if(!le||!Le)return;const ee={active:le,activatorEvent:Le,collisions:b,delta:{x:fe.x,y:fe.y},over:J};Ji.unstable_batchedUpdates(()=>{D==null||D(ee),m({type:"onDragMove",event:ee})})},[fe.x,fe.y]),O.useEffect(()=>{const{active:D,activatorEvent:le,collisions:Le,droppableContainers:b,scrollAdjustedTranslate:J}=qe.current;if(!D||te.current==null||!le||!J)return;const{onDragOver:ee}=re.current,N=b.get(Xe),W=N&&N.rect.current?{id:N.id,rect:N.rect.current,data:N.data,disabled:N.disabled}:null,T={active:D,activatorEvent:le,collisions:Le,delta:{x:J.x,y:J.y},over:W};Ji.unstable_batchedUpdates(()=>{Et(W),ee==null||ee(T),m({type:"onDragOver",event:T})})},[Xe]),ci(()=>{qe.current={activatorEvent:Z,active:ie,activeNode:Te,collisionRect:Oe,collisions:ze,droppableRects:B,draggableNodes:A,draggingNode:it,draggingNodeRect:Lt,droppableContainers:S,over:bt,scrollableAncestors:St,scrollAdjustedTranslate:fe},z.current={initial:Lt,translated:Oe}},[ie,Te,ze,Oe,A,it,Lt,B,S,bt,St,fe]),A9({...Me,delta:P,draggingRect:Oe,pointerCoordinates:$e,scrollableAncestors:St,scrollableAncestorRects:Pt});const Ne=O.useMemo(()=>({active:ie,activeNode:Te,activeNodeRect:Ae,activatorEvent:Z,collisions:ze,containerNodeRect:Pe,dragOverlay:xt,draggableNodes:A,droppableContainers:S,droppableRects:B,over:bt,measureDroppableContainers:be,scrollableAncestors:St,scrollableAncestorRects:Pt,measuringConfiguration:oe,measuringScheduled:je,windowRect:tn}),[ie,Te,Ae,Z,ze,Pe,xt,A,S,B,bt,be,St,Pt,oe,je,tn]),V=O.useMemo(()=>({activatorEvent:Z,activators:de,active:ie,activeNodeRect:Ae,ariaDescribedById:{draggable:I},dispatch:p,draggableNodes:A,over:bt,measureDroppableContainers:be}),[Z,de,ie,Ae,p,I,A,bt,be]);return _t.createElement(XC.Provider,{value:y},_t.createElement(Xd.Provider,{value:V},_t.createElement(oA.Provider,{value:Ne},_t.createElement(lA.Provider,{value:jt},u)),_t.createElement(K9,{disabled:(o==null?void 0:o.restoreFocus)===!1})),_t.createElement(Z8,{...o,hiddenTextDescribedById:I}));function ae(){const D=(K==null?void 0:K.autoScrollEnabled)===!1,le=typeof l=="object"?l.enabled===!1:l===!1,Le=x&&!D&&!le;return typeof l=="object"?{...l,enabled:Le}:{enabled:Le}}}),tU=O.createContext(null),q1="button",nU="Draggable";function rU(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Eu(nU),{activators:a,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:f,draggableNodes:c,over:h}=O.useContext(Xd),{role:d=q1,roleDescription:v="draggable",tabIndex:w=0}=i??{},g=(l==null?void 0:l.id)===e,p=O.useContext(g?lA:tU),[m,y]=Yf(),[k,_]=Yf(),x=z9(a,e),C=Yl(n);ci(()=>(c.set(e,{id:e,key:s,node:m,activatorNode:k,data:C}),()=>{const P=c.get(e);P&&P.key===s&&c.delete(e)}),[c,e]);const A=O.useMemo(()=>({role:d,tabIndex:w,"aria-disabled":r,"aria-pressed":g&&d===q1?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,d,w,g,v,f.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:A,isDragging:g,listeners:r?void 0:x,node:m,over:h,setNodeRef:y,setActivatorNodeRef:_,transform:p}}function iU(){return O.useContext(oA)}const sU="Droppable",aU={timeout:25};function oU(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Eu(sU),{active:a,dispatch:o,over:l,measureDroppableContainers:u}=O.useContext(Xd),f=O.useRef({disabled:n}),c=O.useRef(!1),h=O.useRef(null),d=O.useRef(null),{disabled:v,updateMeasurementsFor:w,timeout:g}={...aU,...i},p=Yl(w??r),m=O.useCallback(()=>{if(!c.current){c.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{u(Array.isArray(p.current)?p.current:[p.current]),d.current=null},g)},[g]),y=qd({callback:m,disabled:v||!a}),k=O.useCallback((A,P)=>{y&&(P&&(y.unobserve(P),c.current=!1),A&&y.observe(A))},[y]),[_,x]=Yf(k),C=Yl(e);return O.useEffect(()=>{!y||!_.current||(y.disconnect(),c.current=!1,y.observe(_.current))},[_,y]),O.useEffect(()=>(o({type:hn.RegisterDroppable,element:{id:r,key:s,disabled:n,node:_,rect:h,data:C}}),()=>o({type:hn.UnregisterDroppable,key:s,id:r})),[r]),O.useEffect(()=>{n!==f.current.disabled&&(o({type:hn.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,o]),{active:a,rect:h,isOver:(l==null?void 0:l.id)===r,node:_,over:l,setNodeRef:x}}function uA(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function lU(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function sc(t){return t!==null&&t>=0}function uU(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cU(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const cA=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=uA(e,r,n),a=e[i],o=s[i];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},ac={scaleX:1,scaleY:1},fU=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=t;const o=(e=s[n])!=null?e:r;if(!o)return null;if(i===n){const u=s[a];return u?{x:0,y:n<a?u.top+u.height-(o.top+o.height):u.top-o.top,...ac}:null}const l=dU(s,i,n);return i>n&&i<=a?{x:0,y:-o.height-l,...ac}:i<n&&i>=a?{x:0,y:o.height+l,...ac}:{x:0,y:0,...ac}};function dU(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const fA="Sortable",dA=_t.createContext({activeIndex:-1,containerId:fA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:cA,disabled:{draggable:!1,droppable:!1}});function hU(t){let{children:e,id:n,items:r,strategy:i=cA,disabled:s=!1}=t;const{active:a,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:f}=iU(),c=Eu(fA,n),h=o.rect!==null,d=O.useMemo(()=>r.map(x=>typeof x=="object"&&"id"in x?x.id:x),[r]),v=a!=null,w=a?d.indexOf(a.id):-1,g=u?d.indexOf(u.id):-1,p=O.useRef(d),m=!uU(d,p.current),y=g!==-1&&w===-1||m,k=cU(s);ci(()=>{m&&v&&f(d)},[m,d,v,f]),O.useEffect(()=>{p.current=d},[d]);const _=O.useMemo(()=>({activeIndex:w,containerId:c,disabled:k,disableTransforms:y,items:d,overIndex:g,useDragOverlay:h,sortedRects:lU(d,l),strategy:i}),[w,c,k.draggable,k.droppable,y,d,g,l,h,i]);return _t.createElement(dA.Provider,{value:_},e)}const pU=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return uA(n,r,i).indexOf(e)},mU=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:u}=t;return!u||!r||o!==s&&i===a?!1:n?!0:a!==i&&e===l},gU={duration:200,easing:"ease"},hA="transform",vU=Zl.Transition.toString({property:hA,duration:0,easing:"linear"}),yU={roleDescription:"sortable"};function wU(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,a]=O.useState(null),o=O.useRef(n);return ci(()=>{if(!e&&n!==o.current&&r.current){const l=i.current;if(l){const u=vo(r.current,{ignoreTransform:!0}),f={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(f.x||f.y)&&a(f)}}n!==o.current&&(o.current=n)},[e,n,r,i]),O.useEffect(()=>{s&&a(null)},[s]),s}function xU(t){let{animateLayoutChanges:e=mU,attributes:n,disabled:r,data:i,getNewIndex:s=pU,id:a,strategy:o,resizeObserverConfig:l,transition:u=gU}=t;const{items:f,containerId:c,activeIndex:h,disabled:d,disableTransforms:v,sortedRects:w,overIndex:g,useDragOverlay:p,strategy:m}=O.useContext(dA),y=bU(r,d),k=f.indexOf(a),_=O.useMemo(()=>({sortable:{containerId:c,index:k,items:f},...i}),[c,i,k,f]),x=O.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:C,node:A,isOver:P,setNodeRef:S}=oU({id:a,data:_,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...l}}),{active:F,activatorEvent:z,activeNodeRect:ie,attributes:te,setNodeRef:K,listeners:Q,isDragging:Z,over:$,setActivatorNodeRef:re,transform:I}=rU({id:a,data:_,attributes:{...yU,...n},disabled:y.draggable}),pe=B8(S,K),oe=!!F,B=oe&&!v&&sc(h)&&sc(g),be=!p&&Z,je=be&&B?I:null,We=B?je??(o??m)({rects:w,activeNodeRect:ie,activeIndex:h,overIndex:g,index:k}):null,Me=sc(h)&&sc(g)?s({id:a,items:f,activeIndex:h,overIndex:g}):k,Qe=F==null?void 0:F.id,Ae=O.useRef({activeId:Qe,items:f,newIndex:Me,containerId:c}),Pe=f!==Ae.current.items,qe=e({active:F,containerId:c,isDragging:Z,isSorting:oe,id:a,index:k,items:f,newIndex:Ae.current.newIndex,previousItems:Ae.current.items,previousContainerId:Ae.current.containerId,transition:u,wasDragging:Ae.current.activeId!=null}),Ge=wU({disabled:!qe,index:k,node:A,rect:C});return O.useEffect(()=>{oe&&Ae.current.newIndex!==Me&&(Ae.current.newIndex=Me),c!==Ae.current.containerId&&(Ae.current.containerId=c),f!==Ae.current.items&&(Ae.current.items=f)},[oe,Me,c,f]),O.useEffect(()=>{if(Qe===Ae.current.activeId)return;if(Qe!=null&&Ae.current.activeId==null){Ae.current.activeId=Qe;return}const it=setTimeout(()=>{Ae.current.activeId=Qe},50);return()=>clearTimeout(it)},[Qe]),{active:F,activeIndex:h,attributes:te,data:_,rect:C,index:k,newIndex:Me,items:f,isOver:P,isSorting:oe,isDragging:Z,listeners:Q,node:A,overIndex:g,over:$,setNodeRef:pe,setActivatorNodeRef:re,setDroppableNodeRef:S,setDraggableNodeRef:K,transform:Ge??We,transition:xt()};function xt(){if(Ge||Pe&&Ae.current.newIndex===k)return vU;if(!(be&&!N0(z)||!u)&&(oe||qe))return Zl.Transition.toString({...u,property:hA})}}function bU(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Qf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const _U=[ht.Down,ht.Right,ht.Up,ht.Left],EU=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:o}}=e;if(_U.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const h=i.get(c.id);if(h)switch(t.code){case ht.Down:r.top<h.top&&l.push(c);break;case ht.Up:r.top>h.top&&l.push(c);break;case ht.Left:r.left>h.left&&l.push(c);break;case ht.Right:r.left<h.left&&l.push(c);break}});const u=t9({active:n,collisionRect:r,droppableRects:i,droppableContainers:l,pointerCoordinates:null});let f=KC(u,"id");if(f===(a==null?void 0:a.id)&&u.length>1&&(f=u[1].id),f!=null){const c=s.get(n.id),h=s.get(f),d=h?i.get(h.id):null,v=h==null?void 0:h.node.current;if(v&&d&&c&&h){const g=Vd(v).some((x,C)=>o[C]!==x),p=pA(c,h),m=kU(c,h),y=g||!p?{x:0,y:0}:{x:m?r.width-d.width:0,y:m?r.height-d.height:0},k={x:d.left,y:d.top};return y.x&&y.y?k:Kl(k,y)}}}};function pA(t,e){return!Qf(t)||!Qf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function kU(t,e){return!Qf(t)||!Qf(e)||!pA(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const mA=({value:t,onChange:e,apiEndpoint:n,apiKey:r,placeholder:i="Search or enter model name...",defaultModels:s=[]})=>{const[a,o]=O.useState(t),[l,u]=O.useState(!1),[f,c]=O.useState(s),[h,d]=O.useState(s),[v,w]=O.useState(!1),[g,p]=O.useState(null),[m,y]=O.useState(!1),k=O.useRef(null),_=O.useRef(null);O.useEffect(()=>{const S=F=>{k.current&&!k.current.contains(F.target)&&u(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),O.useEffect(()=>{(async()=>{if(!(!n||!r||m)){w(!0),p(null);try{const F=await fetch(`${n}/models`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!F.ok)throw new Error(`Failed to fetch models: ${F.status}`);const z=await F.json();let ie=[];z.data&&Array.isArray(z.data)?ie=z.data.map(te=>te.id):Array.isArray(z)?ie=z:z.models&&Array.isArray(z.models)&&(ie=z.models),ie.length>0&&(c(ie),d(ie),y(!0))}catch(F){console.warn("Failed to fetch models from API, using defaults:",F),p("Using default models"),c(s),d(s)}finally{w(!1)}}})()},[n,r,m,s]),O.useEffect(()=>{const S=f.filter(F=>F.toLowerCase().includes(a.toLowerCase()));d(S)},[a,f]),O.useEffect(()=>{o(t)},[t]);const x=S=>{const F=S.target.value;o(F),u(!0),e(F)},C=S=>{o(S),e(S),u(!1)},A=()=>{u(!0),!m&&n&&r&&y(!0)},P=S=>{if(!l)return;const F=h,z=F.indexOf(a);switch(S.key){case"ArrowDown":S.preventDefault(),z<F.length-1&&C(F[z+1]);break;case"ArrowUp":S.preventDefault(),z>0&&C(F[z-1]);break;case"Enter":S.preventDefault(),F.length>0&&C(F[0]);break;case"Escape":S.preventDefault(),u(!1);break}};return E.jsxs("div",{className:"relative",ref:k,children:[E.jsx("label",{className:"mb-1 block text-sm text-gray-700",children:"Model"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{ref:_,type:"text",value:a,onChange:x,onFocus:A,onKeyDown:P,placeholder:i,className:"w-full rounded-md border border-gray-300 px-3 py-2 pr-10 text-black focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),E.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform",children:E.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform duration-200 ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),l&&E.jsx("div",{className:"absolute z-10 mt-1 w-full rounded-md border border-gray-300 bg-white shadow-lg",children:E.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[v&&E.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading models..."}),g&&E.jsx("div",{className:"px-3 py-2 text-sm text-orange-600",children:g}),!v&&!g&&h.length===0&&E.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No models found matching "',a,'"']}),!v&&!g&&h.length>0&&E.jsx("div",{className:"py-1",children:h.map(S=>E.jsx("div",{className:`cursor-pointer px-3 py-2 text-sm hover:bg-gray-100 ${S===a?"bg-blue-50 text-blue-600":"text-gray-900"}`,onClick:()=>C(S),children:S},S))})]})})]})},SU=({tool:t,onChange:e,apiEndpoint:n,apiKey:r})=>E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm text-gray-700",children:"Prompt"}),E.jsx("textarea",{value:(t==null?void 0:t.prompt)||"",onChange:i=>e({...t,prompt:i.target.value}),placeholder:"e.g., Explain {selectedText} in simple terms",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",rows:3})]}),E.jsx("div",{children:E.jsx(mA,{value:(t==null?void 0:t.model)||"",onChange:i=>e({...t,model:i}),apiEndpoint:n||"",apiKey:r||"",placeholder:"Search or enter model name..."})}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"reasoningEnabled",checked:t.reasoningEnabled,onChange:()=>e({...t,reasoningEnabled:!t.reasoningEnabled}),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),E.jsx("label",{htmlFor:"reasoningEnabled",className:"ml-2 block text-sm text-gray-700",children:"Enable reasoning (for supported models)"})]})]}),CU=({tool:t,index:e,onToolUpdate:n,onToolRemove:r,apiEndpoint:i,apiKey:s})=>{const{attributes:a,listeners:o,setNodeRef:l,transform:u,transition:f,isDragging:c}=xU({id:e.toString()}),h={transform:Zl.Transform.toString(u),transition:f};return E.jsxs("div",{ref:l,style:h,className:`rounded-md border border-gray-200 p-4 transition-all duration-200 ${c?"opacity-50 shadow-lg":""}`,children:[E.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[E.jsx("div",{className:"flex items-start space-x-3",children:E.jsxs("div",{children:[E.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),E.jsx("p",{className:"text-sm text-gray-500",children:t.shortName}),E.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:t.type==="AI"?"AI Tool":"Iframe Tool"})]})}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{...a,...o,className:"cursor-move touch-none p-1 text-gray-400 hover:text-gray-600",children:E.jsx(P4,{})}),E.jsx("button",{onClick:()=>r(e),className:"text-red-500 transition-colors hover:text-red-700",children:"Remove"})]})]}),E.jsx("div",{className:"space-y-3",children:t.type==="AI"?E.jsx(SU,{tool:t,onChange:d=>n(e,d),apiEndpoint:i,apiKey:s}):E.jsx("div",{className:"space-y-3",children:E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm text-gray-700",children:"URL"}),E.jsx("input",{type:"url",value:t.url,onChange:d=>n(e,{...t,url:d.target.value}),placeholder:"https://example.com?words={words}&context={context}",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),E.jsxs("div",{className:"mt-2 text-sm",children:[E.jsx("div",{className:"mb-1 font-medium text-gray-700",children:"Tips:"}),E.jsxs("ul",{className:"list-inside list-disc space-y-1 text-xs text-gray-500",children:[E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{words}}"}),": The currently selected text in the ebook. Use this to pass the user's selection into the iframe URL or AI prompt. Example:"," ",E.jsxs("code",{className:"font-mono",children:["https://example.com?q=","{{words}}"]})]}),E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{context}}"}),": Additional surrounding context (nearby paragraph, chapter title, or other metadata) to provide more information to the tool. Use this when the tool needs surrounding text or context. Example:"," ",E.jsxs("code",{className:"font-mono",children:["https://example.com?ctx=","{{context}}"]})]})]})]})]})})})]})},AU=({tools:t,onToolUpdate:e,onToolRemove:n,onToolReorder:r,apiEndpoint:i,apiKey:s})=>{const a=Q8(L1(L0),L1(I0,{coordinateGetter:EU}));function o(l){const{active:u,over:f}=l;if(u.id!==(f==null?void 0:f.id)){const c=parseInt(u.id.toString()),h=parseInt((f==null?void 0:f.id.toString())||c.toString());r(c,h)}}return t.length===0?E.jsx("div",{className:"py-8 text-center text-gray-500",children:"No custom tools configured yet. Add your first tool below!"}):E.jsx(eU,{sensors:a,collisionDetection:e9,onDragEnd:o,children:E.jsx(hU,{items:t.map((l,u)=>u.toString()),strategy:fU,children:E.jsx("div",{className:"space-y-3",children:t.map((l,u)=>E.jsx(CU,{tool:l,index:u,onToolUpdate:e,onToolRemove:n,apiEndpoint:i,apiKey:s},u))})})})},gA=()=>{const[t,e]=O.useState({api:"",key:"",items:[]}),[n,r]=O.useState(!0),[i,s]=O.useState(!1),[a,o]=O.useState(null),l=O.useRef(t);l.current=t,O.useEffect(()=>{(async()=>{try{r(!0),o(null);const m=await zE(),y={api:(m==null?void 0:m.api)||"",key:(m==null?void 0:m.key)||"",items:(m==null?void 0:m.items)||[]};e(y)}catch(m){o("Failed to load settings"),console.error("Error loading context menu settings:",m),e({api:"",key:"",items:[]})}finally{r(!1)}})()},[]);const u=O.useCallback((p,m)=>{e(y=>({...y,[p]:m}))},[]),f=O.useCallback(p=>{u("api",p)},[u]),c=O.useCallback(p=>{u("key",p)},[u]),h=O.useCallback(async p=>{const m={...t,items:[...t.items,p]};await Bw(m),e(m)},[t]),d=O.useCallback(p=>{e(m=>({...m,items:m.items.filter((y,k)=>k!==p)}))},[]),v=O.useCallback((p,m)=>{e(y=>({...y,items:y.items.map((k,_)=>_===p?{...k,...m}:k)}))},[]),w=O.useCallback((p,m)=>{e(y=>{const k=[...y.items],[_]=k.splice(p,1);return k.splice(m,0,_),{...y,items:k}})},[]),g=O.useCallback(async()=>{try{return s(!0),o(null),await Bw(t),!0}catch(p){return o("Failed to save settings"),console.error("Error saving context menu settings:",p),!1}finally{s(!1)}},[t]);return{settings:t,isLoading:n,isSaving:i,error:a,updateSettings:u,updateApiEndpoint:f,updateApiKey:c,addTool:h,removeTool:d,updateTool:v,reorderTools:w,saveSettings:g}},DU=()=>{const t=gA(),[e,n]=O.useState("idle"),r=async()=>{await t.saveSettings()?(n("success"),setTimeout(()=>n("idle"),3e3)):(n("error"),setTimeout(()=>n("idle"),3e3))};return E.jsx(C0,{breadcrumbItems:[{label:"Home",path:"/"},{label:"Settings",path:"/settings"},{label:"Context Menu"}],backTo:"/settings",children:E.jsx("div",{className:"rounded-lg bg-white p-6 text-black shadow",children:E.jsxs("div",{className:"space-y-6",children:[t.isLoading&&E.jsx("div",{className:"flex items-center justify-center py-8",children:E.jsx("div",{className:"text-gray-500",children:"Loading settings..."})}),t.error&&E.jsx("div",{className:"rounded-md bg-red-50 p-4",children:E.jsx("div",{className:"text-red-700",children:t.error})}),!t.isLoading&&E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Context Menu Configuration"}),E.jsx(M8,{apiEndpoint:t.settings.api||"",apiKey:t.settings.key||"",onApiEndpointChange:t.updateApiEndpoint,onApiKeyChange:t.updateApiKey}),E.jsxs("div",{className:"mb-6",children:[E.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[E.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Custom AI Tools"}),E.jsx(Fv,{to:"/settings/contextmenu/add-tool",className:"rounded-md bg-blue-500 px-3 py-1 text-white transition-colors hover:bg-blue-600",children:"+ Add New Tool"})]}),E.jsx(AU,{tools:t.settings.items||[],onToolUpdate:t.updateTool,onToolRemove:t.removeTool,onToolReorder:t.reorderTools,apiEndpoint:t.settings.api||"",apiKey:t.settings.key||""})]}),E.jsx("div",{className:"mt-8 border-t border-gray-200 pt-6",children:E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{onClick:r,disabled:t.isSaving,className:"rounded-md bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:t.isSaving?"Saving...":"Save Settings"}),e==="success"&&E.jsx("div",{className:"text-green-600",children:"Settings saved successfully!"}),e==="error"&&E.jsx("div",{className:"text-red-600",children:"Failed to save settings"})]})})})]})]})})})},TU=({selectedType:t,onTypeChange:e})=>E.jsxs("div",{children:[E.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tool Type"}),E.jsxs("div",{className:"flex space-x-4",children:[E.jsx("button",{type:"button",onClick:()=>e("AI"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${t==="AI"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"AI Tool"}),E.jsx("button",{type:"button",onClick:()=>e("iframe"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${t==="iframe"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Iframe Tool"})]})]}),NU=({prompt:t,model:e,reasoningEnabled:n,apiEndpoint:r,apiKey:i,onPromptChange:s,onModelChange:a,onReasoningToggle:o})=>E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Prompt"}),E.jsx("textarea",{value:t,onChange:l=>s(l.target.value),placeholder:"Use {{words}} for selected text and {{context}} for nearby content. e.g. Summarize {{words}} in 2 sentences.",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",rows:3}),E.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[E.jsx("div",{className:"mb-1 font-medium text-gray-700",children:"Prompt tips"}),E.jsxs("ul",{className:"list-inside list-disc space-y-1",children:[E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{words}}"}),": the selected text."]}),E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{context}}"}),": nearby content for background."]})]})]}),E.jsx("div",{children:E.jsx(mA,{value:e,onChange:a,apiEndpoint:r||"",apiKey:i||"",placeholder:"Search or enter model name..."})}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"reasoningEnabled",checked:n,onChange:l=>o(l.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),E.jsx("label",{htmlFor:"reasoningEnabled",className:"ml-2 block text-sm text-gray-700",children:"Enable reasoning (for supported models)"})]})]}),RU=({url:t,onUrlChange:e})=>E.jsx(E.Fragment,{children:E.jsxs("div",{children:[E.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"URL"}),E.jsx("input",{type:"url",value:t,onChange:n=>e(n.target.value),placeholder:"https://example.com?words={{words}}&context={{context}}",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),E.jsxs("div",{className:"mt-2 text-sm",children:[E.jsx("div",{className:"mb-1 font-medium text-gray-700",children:"Tips"}),E.jsxs("ul",{className:"list-inside list-disc space-y-1 text-xs text-gray-500",children:[E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{words}}"}),": Inserts the text the user selected. Example: ",E.jsxs("code",{className:"font-mono",children:["https://example.com?q=","{{words}}"]})]}),E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"{{context}}"}),": Adds nearby text or metadata to give more context. Example:",E.jsxs("code",{className:"font-mono",children:["https://example.com?ctx=","{{context}}"]})]})]})]})]})}),IU=()=>{const[t,e]=O.useState("AI"),[n,r]=O.useState(""),[i,s]=O.useState(""),[a,o]=O.useState(""),[l,u]=O.useState(""),[f,c]=O.useState(""),[h,d]=O.useState(!1),v=O.useCallback(()=>n.trim()?t==="AI"?a.trim()!=="":f.trim()!=="":!1,[n,a,f,t]),w=O.useCallback(()=>{if(!v())return null;const p=i.trim()||(n.length>10?n.substring(0,10)+"...":n);return t==="AI"?{type:"AI",name:n.trim(),shortName:p,prompt:a.trim(),model:l.trim()||"gpt-3.5-turbo",reasoningEnabled:h}:{type:"iframe",name:n.trim(),shortName:p,url:f.trim()}},[n,i,a,l,f,h,t,v]),g=O.useCallback(()=>{e("AI"),r(""),s(""),o(""),u(""),c(""),d(!1)},[]);return{toolType:t,toolName:n,toolShortName:i,toolPrompt:a,toolModel:l,toolUrl:f,reasoningEnabled:h,setToolType:e,setToolName:r,setToolShortName:s,setToolPrompt:o,setToolModel:u,setToolUrl:c,setReasoningEnabled:d,isValid:v,createTool:w,resetForm:g}},OU=()=>{const t=hu(),e=gA(),n=IU();O.useEffect(()=>{n.resetForm()},[n.resetForm]);const r=async()=>{const a=n.createTool();a&&(await e.addTool(a),t("/settings/contextmenu"))},i=()=>{t("/settings/contextmenu")},s=a=>{a.key==="Escape"?i():a.key==="Enter"&&(a.ctrlKey||a.metaKey)&&r()};return E.jsx(C0,{breadcrumbItems:[{label:"Home",path:"/"},{label:"Settings",path:"/settings"},{label:"Context Menu",path:"/settings/contextmenu"},{label:"Add New Tool"}],backTo:"/settings/contextmenu",children:E.jsxs("div",{className:"min-h-screen bg-white p-4 md:p-6",onKeyDown:s,tabIndex:0,children:[E.jsxs("div",{className:"mb-6 md:mb-8",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-900 md:text-3xl",children:"Add New Tool"}),E.jsx("p",{className:"mt-2 text-sm text-gray-600 md:text-base",children:"Configure a new AI tool or iframe tool for your context menu"})]}),E.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[E.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:E.jsx(TU,{selectedType:n.toolType,onTypeChange:n.setToolType})}),E.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[E.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tool Name"}),E.jsx("input",{type:"text",value:n.toolName,onChange:a=>n.setToolName(a.target.value),placeholder:"e.g., Simple Explanation",className:"w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),E.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[E.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Short Name ",E.jsx("span",{className:"text-xs text-gray-500",children:"(optional, max 15 chars)"})]}),E.jsx("input",{type:"text",value:n.toolShortName,onChange:a=>n.setToolShortName(a.target.value),placeholder:"e.g., Simple Exp",maxLength:15,className:"w-full rounded-md border border-gray-300 px-3 py-3 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),E.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Leave empty to auto-generate from tool name"})]}),E.jsx("div",{className:"rounded-lg bg-gray-50 p-4",children:n.toolType==="AI"?E.jsx(NU,{prompt:n.toolPrompt,model:n.toolModel,reasoningEnabled:n.reasoningEnabled,apiEndpoint:e.settings.api||"",apiKey:e.settings.key||"",onPromptChange:n.setToolPrompt,onModelChange:n.setToolModel,onReasoningToggle:n.setReasoningEnabled}):E.jsx(RU,{url:n.toolUrl,onUrlChange:n.setToolUrl})}),E.jsxs("div",{className:"flex flex-col gap-3 pt-6 sm:flex-row sm:gap-4",children:[E.jsx("button",{type:"button",onClick:i,className:"flex-1 rounded-md border border-gray-300 px-4 py-3 text-base font-medium text-gray-700 transition-colors hover:bg-gray-100",children:"Cancel"}),E.jsx("button",{type:"button",onClick:r,disabled:!n.isValid()||e.isSaving,className:"flex-1 rounded-md bg-blue-500 px-4 py-3 text-base font-medium text-white transition-colors hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50",children:e.isSaving?"Adding Tool...":"Add Tool"})]}),e.error&&E.jsx("div",{className:"rounded-md bg-red-50 p-4",children:E.jsx("div",{className:"text-red-700",children:e.error})})]})]})})},LU=s4([{path:"/",element:E.jsx($4,{})},{path:"/reader/:bookId",element:E.jsx(I8,{})},{path:"/settings",element:E.jsx(F8,{})},{path:"/settings/contextmenu",element:E.jsx(DU,{})},{path:"/settings/contextmenu/add-tool",element:E.jsx(OU,{})}]);a_(document.getElementById("root")).render(E.jsx(gN,{store:zO,children:E.jsx(p4,{router:LU})}));
